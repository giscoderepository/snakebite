System.register(["jimu-core","jimu-layouts/layout-runtime","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-core/dnd","jimu-for-builder/templates"],(function(t){var e,n,o,i,r,a,l,s;return{setters:[function(t){e=t},function(t){n=t},function(t){o=t},function(t){i=t},function(t){r=t},function(t){a=t},function(t){l=t},function(t){s=t}],execute:function(){t(function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=80)}([function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=i},function(t,e,n){"use strict";var o,i;n.d(e,"i",(function(){return o})),n.d(e,"j",(function(){return i})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"g",(function(){return r})),n.d(e,"f",(function(){return a})),function(t){t[t.BringForward=0]="BringForward",t[t.SendBackward=1]="SendBackward",t[t.BringToFront=2]="BringToFront",t[t.SendToBack=3]="SendToBack"}(o||(o={})),function(t){t.Page="PAGE",t.Widget="WIDGET",t.View="VIEW",t.Screen="SCREEN"}(i||(i={}));var r,a,l=12,s=28,u=16,c=16,d=5,p=3;!function(t){t.Auto="auto",t[t.Normal=0]="Normal",t[t.BoundaryDropArea=10]="BoundaryDropArea",t[t.DragMoveTip=20]="DragMoveTip",t[t.HandlerTools=30]="HandlerTools",t[t.DraggingItem=40]="DraggingItem"}(r||(r={})),function(t){t.Auto="AUTO",t.Stretch="STRETCH",t.Custom="CUSTOM"}(a||(a={}))},function(t,e,n){"use strict";n.r(e),n.d(e,"emptyFunc",(function(){return a})),n.d(e,"autoBindHandlers",(function(){return l})),n.d(e,"getMaximumId",(function(){return s})),n.d(e,"isPercentage",(function(){return u})),n.d(e,"isNumber",(function(){return c})),n.d(e,"getValueOfBBox",(function(){return d})),n.d(e,"toRatio",(function(){return p})),n.d(e,"fromRatio",(function(){return g})),n.d(e,"mapStateToLayoutProps",(function(){return h})),n.d(e,"mapStateToLayoutItemProps",(function(){return f})),n.d(e,"mapStateToWidgetProps",(function(){return y})),n.d(e,"isWidgetHasEmbeddedLayout",(function(){return v})),n.d(e,"isFunctionalWidget",(function(){return m})),n.d(e,"isWidgetPlaceholder",(function(){return b})),n.d(e,"replaceBoundingBox",(function(){return x})),n.d(e,"updateBoundingBoxProp",(function(){return I})),n.d(e,"relativeClientRect",(function(){return w})),n.d(e,"getBuilderThemeVariables",(function(){return j})),n.d(e,"isRTL",(function(){return O})),n.d(e,"parseAspectRatio",(function(){return S})),n.d(e,"expandStyleArray",(function(){return C})),n.d(e,"calHeightOfLayoutItem",(function(){return P})),n.d(e,"getAppConfig",(function(){return T})),n.d(e,"getCurrentSizeMode",(function(){return A})),n.d(e,"getCurrentPageId",(function(){return M})),n.d(e,"getCurrentDialogId",(function(){return R})),n.d(e,"getActivePagePart",(function(){return z})),n.d(e,"getCurrentDialogRootLayoutId",(function(){return k})),n.d(e,"getCurrentPageRootLayoutId",(function(){return L})),n.d(e,"getHeaderRootLayoutId",(function(){return N})),n.d(e,"getFooterRootLayoutId",(function(){return B})),n.d(e,"contains",(function(){return E})),n.d(e,"intersects",(function(){return D})),n.d(e,"normalizeLinearUnit",(function(){return _})),n.d(e,"getLayoutItemSizeMode",(function(){return V})),n.d(e,"gcd",(function(){return F})),n.d(e,"handleOnebyOneAnimation",(function(){return H}));var o=n(0),i=n(2),r=n(4),a=function(){};function l(t,e){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function s(t){var e=-1;return t.content&&Object.keys(t.content).forEach((function(t){var n=parseInt(t,10);n>e&&(e=n)})),e}function u(t){return/^-?\d*(\.\d+)?%$/.test(t)}function c(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)}function d(t,e){return null==(null==t?void 0:t[e])?null:"string"==typeof t[e]?t[e]:c(t[e])?Math.round(parseFloat(t[e]))+"px":null}function p(t,e){return(100*t/e).toFixed(1)+"%"}function g(t,e){return parseFloat(""+t)*e/100}function h(t,e){var n,o,i=(null===(n=e.layouts)||void 0===n?void 0:n[t.browserSizeMode])||(null===(o=e.layouts)||void 0===o?void 0:o[t.appConfig.mainSizeMode]),r=t.appConfig.layouts;return r[i]?{layout:r[i]}:{layout:null}}function f(t,e){var n,i,r,a,l,s,u,c=e.layoutId,d=t.appConfig,p=d.layouts,g=d.widgets,h=e.layoutItemId;if(!(null===(i=null===(n=null==p?void 0:p[c])||void 0===n?void 0:n.content)||void 0===i?void 0:i[h]))return{layoutItem:null,selected:!1};var f,y=!1,v=p[c].content[h],m=!1;v&&(m=Boolean(v.isPending));var b=null===(r=t.appRuntimeInfo)||void 0===r?void 0:r.selection;b&&(y=b.layoutId===e.layoutId&&b.layoutItemId===v.id,f=b.autoScroll);var x=!1;if(v.type===o.LayoutItemType.Widget&&v.widgetId){var I=g[v.widgetId];x=null!==(s=null===(l=null===(a=null==I?void 0:I.manifest)||void 0===a?void 0:a.properties)||void 0===l?void 0:l.watchViewportVisibility)&&void 0!==s&&s}var w={selected:y,watchViewportVisibility:x,layoutItem:m?null:v};y&&(w.autoScroll=f);var j=null===(u=t.appRuntimeInfo)||void 0===u?void 0:u.animationPreview;if(y&&(null==j?void 0:j.layoutInfo)){var O=j.layoutInfo,S=O.layoutId,C=O.layoutItemId;w.animationPreview=S===e.layoutId&&C===e.layoutItemId,w.playMode=w.animationPreview?j.playMode:null,w.previewId=w.animationPreview?j.id:null}return w}function y(t,e){var n,o,i,r,a,l,s,u,c,d=e.layoutId,p=t.appConfig.layouts;if(!p[d])return null;var g,h,f,y=p[d],b=e.layoutItemId,x=y.content[b],I=!1,w=!1,j=!1,O=!1,S=!1,C=!1,P=!1,T=!1;if(x&&x.widgetId){var A=t.appConfig.widgets[x.widgetId];g=A.style,I=null===(o=null===(n=A.manifest)||void 0===n?void 0:n.properties)||void 0===o?void 0:o.supportInlineEditing,O=null===(r=null===(i=A.manifest)||void 0===i?void 0:i.properties)||void 0===r?void 0:r.supportRepeat,P=null===(l=null===(a=A.manifest)||void 0===a?void 0:a.properties)||void 0===l?void 0:l.canCrossLayoutBoundary;var M=t.widgetsRuntimeInfo[x.widgetId];w=null!==(s=null==M?void 0:M.isClassLoaded)&&void 0!==s&&s,j=I&&(null==M?void 0:M.isInlineEditing),(T=(null===(c=null===(u=A.manifest)||void 0===u?void 0:u.extensions)||void 0===c?void 0:c.length)>0)&&(h=A),f=t.widgetsState[x.widgetId],S=m(x.widgetId,t.appConfig),C=v(x.widgetId,t.appConfig)}return{hasEmbeddedLayout:C,supportInlineEditing:I,supportRepeat:O,isClassLoaded:w,isInlineEditing:j,widgetStyle:g,canCrossLayoutBoundary:P,hasExtension:T,widgetJson:h,widgetId:x.widgetId,isFunctionalWidget:S,widgetState:f}}function v(t,e){var n,o,i,r,a=null===(n=null==e?void 0:e.widgets)||void 0===n?void 0:n[t];return!!(null===(i=null===(o=null==a?void 0:a.manifest)||void 0===o?void 0:o.properties)||void 0===i?void 0:i.hasEmbeddedLayout)&&Object.keys(null!==(r=null==a?void 0:a.layouts)&&void 0!==r?r:{}).length>0}function m(t,e){var n,i,r=null===(n=null==e?void 0:e.widgets)||void 0===n?void 0:n[t];return(null===(i=null==r?void 0:r.manifest)||void 0===i?void 0:i.widgetType)!==o.WidgetType.Layout}function b(t,e){var n,i;if(!e||e.itemType!==o.LayoutItemType.Widget)return!1;if(e.layoutInfo){var r=e.layoutInfo,a=r.layoutId,l=r.layoutItemId,s=null===(i=null===(n=t.layouts)||void 0===n?void 0:n[a].content)||void 0===i?void 0:i[l];if(s&&!s.widgetId)return!0}return!e.layoutInfo&&!e.uri}function x(t,e,n){if(!t)return Object(o.Immutable)({left:u(e.left)?e.left:Math.round(e.left)+"px",right:u(e.right)?e.right:Math.round(e.right)+"px",top:u(e.top)?e.top:Math.round(e.top)+"px",bottom:u(e.bottom)?e.bottom:Math.round(e.bottom)+"px",width:u(e.width)?e.width:Math.round(e.width)+"px",height:u(e.height)?e.height:Math.round(e.height)+"px"});var i=t;return["left","right","top","bottom","width","height"].forEach((function(t){null!=i[t]?i=I(t,i,e[t],n):null!=e[t]&&(i=i.set(t,Math.round(e[t])+"px"))})),i}function I(t,e,n,o){if(null==e[t]||"auto"===e[t])return e;return u(e[t])?"left"===t||"right"===t||"width"===t?u(n)?e.set(t,n):e.set(t,(100*+n/o.width).toFixed(4)+"%"):u(n)?e.set(t,n):e.set(t,(100*+n/o.height).toFixed(4)+"%"):u(n)?"left"===t||"right"===t||"width"===t?e.set(t,Math.round(parseFloat(""+n)*o.width/100)):e.set(t,Math.round(parseFloat(""+n)*o.height/100)):isNaN(+n)?e.without(t):e.set(t,Math.round(+n)+"px")}function w(t,e){return{left:t.left-e.left,top:t.top-e.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height,id:null}}function j(){var t=window.parent;if(t&&t.jimuConfig&&t.jimuConfig.isBuilder)return t._appState.theme}function O(){var t,e;return null!==(e=null===(t=Object(o.getAppStore)().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==e&&e}function S(t){var e=100,n=100;if("number"==typeof t)e=100,n=Math.round(100*t);else if("string"==typeof t){var o=t.split(":");e=parseInt(o[0],10),n=parseInt(o[1],10)}return n/e}function C(t){return t&&0!==t.length?1===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:3===t.length?[t[0],t[1],t[2],0]:[t[0],t[1],t[2],t[3]]:[0,0,0,0]}function P(t,e){var n,o,i,a,l,s=null!==(n=e.setting)&&void 0!==n?n:{},c=V("height",e.bbox,s.autoProps);if(c!==r.f.Custom)return{height:c===r.f.Stretch?t:null,setting:{autoProps:{height:c}}};if("ratio"===s.heightMode)l={setting:{heightMode:"ratio",aspectRatio:null!==(o=s.aspectRatio)&&void 0!==o?o:1,autoProps:{height:r.f.Custom}}};else{var d=null!==(a=null===(i=e.bbox)||void 0===i?void 0:i.height)&&void 0!==a?a:t;u(d)&&(d=g(d,t)),l={height:d,setting:{heightMode:"fixed",autoProps:{height:r.f.Custom}}}}return l}function T(){var t;return window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:Object(o.getAppStore)().getState().appConfig}function A(){var t;return window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.browserSizeMode:Object(o.getAppStore)().getState().browserSizeMode}function M(){var t,e,n;return window.jimuConfig.isBuilder?null===(e=null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.currentPageId:null===(n=Object(o.getAppStore)().getState().appRuntimeInfo)||void 0===n?void 0:n.currentPageId}function R(){var t,e,n;return window.jimuConfig.isBuilder?null===(e=null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.currentDialogId:null===(n=Object(o.getAppStore)().getState().appRuntimeInfo)||void 0===n?void 0:n.currentDialogId}function z(){var t,e,n;return window.jimuConfig.isBuilder?null===(e=null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.activePagePart:null===(n=Object(o.getAppStore)().getState().appRuntimeInfo)||void 0===n?void 0:n.activePagePart}function k(){var t,e,n,i=window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:Object(o.getAppStore)().getState().appConfig,r=R(),a=A();return null===(n=null===(e=null==i?void 0:i.dialogs[r])||void 0===e?void 0:e.layout)||void 0===n?void 0:n[a]}function L(){var t,e,n,i=window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:Object(o.getAppStore)().getState().appConfig,r=M(),a=A();return null===(n=null===(e=null==i?void 0:i.pages[r])||void 0===e?void 0:e.layout)||void 0===n?void 0:n[a]}function N(){var t,e,n,i=window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:Object(o.getAppStore)().getState().appConfig,r=A();return null===(n=null===(e=null==i?void 0:i.header)||void 0===e?void 0:e.layout)||void 0===n?void 0:n[r]}function B(){var t,e,n,i=window.jimuConfig.isBuilder?null===(t=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:Object(o.getAppStore)().getState().appConfig,r=A();return null===(n=null===(e=null==i?void 0:i.footer)||void 0===e?void 0:e.layout)||void 0===n?void 0:n[r]}function E(t,e){return e.left>=t.left&&e.left+e.width<=t.left+t.width&&e.top>=t.top&&e.top+e.height<=t.top+t.height}function D(t,e){return!(e.left>t.left+t.width||e.left+e.width<t.left||e.top>t.top+t.height||e.top+e.height<t.top)}function _(t){var e,n,r,a,l,s;if(null!=t&&"object"==typeof t)l=null!==(e=t.unit)&&void 0!==e?e:i.UnitTypes.PIXEL,s=null!==(n=t.distance)&&void 0!==n?n:0;else{var u=o.polished.getValueAndUnit(t);l=null!==(r=null==u?void 0:u[1])&&void 0!==r?r:i.UnitTypes.PIXEL,s=null!==(a=null==u?void 0:u[0])&&void 0!==a?a:0}return""+(s=l===i.UnitTypes.PERCENTAGE?Math.round(10*s)/10:Math.round(s))+l}function V(t,e,n){var o=null==n?void 0:n[t],i="width"===t?"left":"top",a="width"===t?"right":"bottom";if(!o)return null!=e[t]?r.f.Custom:null!=e[i]&&null!=e[a]?r.f.Stretch:r.f.Auto;if(!0===o)return null!=e[i]&&null!=e[a]?r.f.Stretch:r.f.Auto;switch(o){case r.f.Auto:return r.f.Auto;case r.f.Stretch:return r.f.Stretch;default:return r.f.Custom}}function F(t,e){for(var n=Math.max(t,e),o=Math.min(t,e);0!==o;){var i=o;o=n%o,n=i}return n}function H(t){return t.animationStyle?{isParentPlaying:t.isPlaying,isParentRevert:t.revert,isParentEnableScroll:t.enableScroll,parentAnimationStyle:t.animationStyle,parentPlayId:t.playId}:{}}},function(t,e){t.exports=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return s}));var o=n(0),i=o.React.createContext({viewOnly:!0,mainSizeMode:o.BrowserSizeMode.Large,browserSizeMode:o.BrowserSizeMode.Large}),r=o.React.createContext(!0),a=o.React.createContext(!0),l=o.React.createContext({isInView:!1,isInCurrentView:!1}),s=o.React.createContext("")},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"k",(function(){return c})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return g})),n.d(e,"i",(function(){return h})),n.d(e,"x",(function(){return f})),n.d(e,"v",(function(){return y})),n.d(e,"B",(function(){return v})),n.d(e,"j",(function(){return m})),n.d(e,"p",(function(){return b})),n.d(e,"s",(function(){return x})),n.d(e,"u",(function(){return I})),n.d(e,"r",(function(){return w})),n.d(e,"q",(function(){return j})),n.d(e,"a",(function(){return O})),n.d(e,"w",(function(){return S})),n.d(e,"y",(function(){return C})),n.d(e,"h",(function(){return P})),n.d(e,"l",(function(){return T})),n.d(e,"g",(function(){return A})),n.d(e,"f",(function(){return M})),n.d(e,"z",(function(){return R})),n.d(e,"A",(function(){return z})),n.d(e,"t",(function(){return L}));var o=n(0),i=n(18),r=n(4);function a(t,e){var n,o,i;if(!e)return null;var r=e.layoutId,a=e.layoutItemId;return null===(i=null===(o=null===(n=t.layouts)||void 0===n?void 0:n[r])||void 0===o?void 0:o.content)||void 0===i?void 0:i[a]}function l(t,e){if(t.sections)for(var n in t.sections){if(t.sections[n].views.includes(e))return n}return null}function s(t,e){for(var n=e.layouts[t];null!=(null==n?void 0:n.parent);){if(n.parentType===r.j.View){var o=n.parent;return{viewId:o,sectionId:e.views[o].parent}}var a=Object(i.b)(e,n.id);n=e.layouts[a]}return{viewId:null,sectionId:null}}function u(t,e){for(var n=e.layouts[t];null!=(null==n?void 0:n.parent);){if(n.parentType===r.j.Screen){var o=n.parent;return{screenId:o,screenGroupId:e.screens[o].parent}}var a=Object(i.b)(e,n.id);n=e.layouts[a]}return{screenId:null,screenGroupId:null}}function c(t){switch(t.type){case o.LayoutItemType.Widget:return"string"==typeof t.widgetId?t.widgetId:null;case o.LayoutItemType.Section:return"string"==typeof t.sectionId?t.sectionId:null;case o.LayoutItemType.ScreenGroup:return"string"==typeof t.screenGroupId?t.screenGroupId:null;default:return null}}function d(t,e,n){return void 0===n&&(n=!1),(null==t?void 0:t.content)?Object.keys(t.content).filter((function(o){return t.content[o].type===e&&!!c(t.content[o])&&(n||!t.content[o].isPending)})).map((function(e){return c(t.content[e])})):[]}function p(t,e,n,i,r){void 0===r&&(r=!1);var a=[],l=d(t.layouts[e],o.LayoutItemType.Widget,r),s=d(t.layouts[e],o.LayoutItemType.Section,r),u=d(t.layouts[e],o.LayoutItemType.ScreenGroup,r);return n===o.LayoutItemType.Widget?a=a.concat(l):n===o.LayoutItemType.Section?a=a.concat(s):n===o.LayoutItemType.ScreenGroup&&(a=a.concat(u)),l.filter((function(e){var n,i,r,a,l;return(null===(i=null===(n=t.widgets[e])||void 0===n?void 0:n.manifest)||void 0===i?void 0:i.widgetType)===o.WidgetType.Layout||(null===(l=null===(a=null===(r=t.widgets[e])||void 0===r?void 0:r.manifest)||void 0===a?void 0:a.properties)||void 0===l?void 0:l.hasEmbeddedLayout)})).forEach((function(e){var o;Object.keys(null!==(o=t.widgets[e].layouts)&&void 0!==o?o:{}).forEach((function(o){var l=t.widgets[e].layouts[o][i];a=a.concat(p(t,l,n,i,r))}))})),s.forEach((function(e){var o,l;null===(l=null===(o=t.sections)||void 0===o?void 0:o[e])||void 0===l||l.views.forEach((function(e){t.views[e]&&t.views[e].layout[i]&&(a=a.concat(p(t,t.views[e].layout[i],n,i,r)))}))})),u.forEach((function(e){var o,l;null===(l=null===(o=t.screenGroups)||void 0===o?void 0:o[e])||void 0===l||l.screens.forEach((function(e){var o,l,s,u,c,d,g;(null===(s=null===(l=null===(o=t.screens)||void 0===o?void 0:o[e])||void 0===l?void 0:l.main.layout)||void 0===s?void 0:s[i])&&(a=a.concat(p(t,t.screens[e].main.layout[i],n,i,r))),(null===(g=null===(d=null===(c=null===(u=t.screens)||void 0===u?void 0:u[e])||void 0===c?void 0:c.panel)||void 0===d?void 0:d.layout)||void 0===g?void 0:g[i])&&(a=a.concat(p(t,t.screens[e].panel.layout[i],n,i,r)))}))})),a}function g(t,e,n,i,r){void 0===r&&(r=!1);var a=[],l=d(t.layouts[e],o.LayoutItemType.Widget,r),s=d(t.layouts[e],o.LayoutItemType.Section,r),u=d(t.layouts[e],o.LayoutItemType.ScreenGroup,r);return a=n===o.LayoutItemType.Widget?a.concat(l):n===o.LayoutItemType.ScreenGroup?a.concat(u):a.concat(s),l.filter((function(e){return t.widgets&&t.widgets[e]&&t.widgets[e].manifest.widgetType===o.WidgetType.Layout})).forEach((function(e){Object.keys(t.widgets[e].layouts).forEach((function(o){var l=O(t.widgets[e].layouts[o],i,t.mainSizeMode);a=a.concat(g(t,l,n,i,r))}))})),a}function h(t,e,n){if(!(null==t?void 0:t.content))return null;var o=Object.keys(t.content).find((function(o){return t.content[o].type===n&&(t.content[o].widgetId===e||t.content[o].sectionId===e||t.content[o].screenGroupId===e)&&!t.content[o].isPending}));return t.content[o]}function f(t,e,n){void 0===n&&(n=!1);var o=t.layouts[e];return(null==o?void 0:o.content)?n?Object.keys(o.content):Object.keys(o.content).filter((function(t){return!o.content[t].isPending})):[]}function y(t,e,n){return void 0===n&&(n=!1),(null==t?void 0:t.content)?Object.keys(t.content).filter((function(o){return t.content[o].type===e&&!!c(t.content[o])&&(n||!t.content[o].isPending)})).map((function(e){return{layoutId:t.id,layoutItemId:e}})):[]}function v(t,e){return Object.keys(t.widgets).find((function(n){var o=t.widgets[n];if(o.layouts)return Object.keys(o.layouts).some((function(t){return void 0!==Object.keys(o.layouts[t]).find((function(n){return o.layouts[t][n]===e}))}))}))}function m(t,e,n,i){var r=t.pages&&Object.keys(t.pages).find((function(o){var r=O(t.pages[o].layout,i,t.mainSizeMode);return g(t,r,n,i).includes(e)}));if(r)return{type:o.ContainerType.Page,id:r};var a=t.dialogs&&Object.keys(t.dialogs).find((function(o){var r=O(t.dialogs[o].layout,i,t.mainSizeMode);return g(t,r,n,i).includes(e)}));if(a)return{type:o.ContainerType.Dialog,id:a};if(t.header){var l=O(t.header.layout,i,t.mainSizeMode);if(g(t,l,n,i).includes(e))return{type:o.ContainerType.Header,id:"header"}}if(t.footer){l=O(t.footer.layout,i,t.mainSizeMode);if(g(t,l,n,i).includes(e))return{type:o.ContainerType.Footer,id:"footer"}}var s=t.views&&Object.keys(t.views).find((function(o){var r=O(t.views[o].layout,i,t.mainSizeMode);return g(t,r,n,i).includes(e)}));if(s)return{type:o.ContainerType.View,id:s};if(t.screens){var u=Object.keys(t.screens).find((function(o){var r=O(t.screens[o].main.layout,i,t.mainSizeMode);return g(t,r,n,i).includes(e)}));if(u)return{type:o.ContainerType.ScreenMain,id:u};var c=Object.keys(t.screens).find((function(o){var r,a=O(null===(r=t.screens[o].panel)||void 0===r?void 0:r.layout,i,t.mainSizeMode);return g(t,a,n,i).includes(e)}));if(c)return{type:o.ContainerType.ScreenPanel,id:c}}}function b(t,e,n,o){return g(t,O(t.pages[e].layout,o,t.mainSizeMode),n,o)}function x(t,e,n,o){var i,r=g(t,O(t.screens[e].main.layout,o,t.mainSizeMode),n,o);if(t.screens[e].panel){var a=g(t,O(null===(i=t.screens[e].panel)||void 0===i?void 0:i.layout,o,t.mainSizeMode),n,o);return r.concat(a)}return r}function I(t,e,n,o){var i;return g(t,O(null===(i=t.views[e])||void 0===i?void 0:i.layout,o,t.mainSizeMode),n,o)}function w(t,e,n){return g(t,O(t.header.layout,n,t.mainSizeMode),e,n)}function j(t,e,n){return g(t,O(t.footer.layout,n,t.mainSizeMode),e,n)}function O(t,e,n){return t?t[e]||t[n]:null}function S(t,e,n,i){if(i){var r=C(t,n,e,i);if(r)return k(t,n,e,r,i);var a=m(t,n,e,i);if(!a)return[];var l=function(t,e,n){var i;return e.type===o.ContainerType.Footer?t.footer.layout[n]:e.type===o.ContainerType.Header?t.header.layout[n]:e.type===o.ContainerType.ScreenMain?t.screens[e.id].main.layout[n]:e.type===o.ContainerType.ScreenPanel?null===(i=t.screens[e.id].panel)||void 0===i?void 0:i.layout[n]:t[e.type][e.id].layout[n]}(t,a,i);return[{layoutId:l,layoutItemId:h(t.layouts[l],n,e).id}]}var s=[];return Object.keys(t.layouts).forEach((function(o){f(t,o,!0).forEach((function(i){var r=t.layouts[o].content[i];e!==r.type||r.widgetId!==n&&r.sectionId!==n&&r.screenGroupId!==n||s.push({layoutId:o,layoutItemId:i})}))})),s}function C(t,e,n,o){return Object.keys(t.widgets).find((function(i){var r=t.widgets[i];if(r.layouts)return Object.keys(r.layouts).some((function(i){var a=r.layouts[i][o],l=t.layouts[a];return l&&l.content&&void 0!==Object.keys(l.content).find((function(t){return l.content[t].type===n&&(l.content[t].widgetId===e||l.content[t].sectionId===e)}))}))}))}function P(t,e,n,o){var i=t.widgets[e];if(!i.layouts)return[];var r=[];return Object.keys(i.layouts).forEach((function(e){Object.keys(i.layouts[e]).forEach((function(a){var l=t.layouts[i.layouts[e][a]];r=r.concat(d(l,n,o))}))})),Array.from(new Set(r))}function T(t,e,n,o){var i=[],r=!1,a=function(t,e,n,a){var l,s=O(n,o,void 0),u=h(t.layouts[s],e,a);return u&&(l={layoutId:s,layoutItemId:u.id},i.push(l),r=!0),l};return t.pages&&Object.keys(t.pages).find((function(o){var i=t.pages[o];return!(!i.layout||!a(t,e,i.layout,n))})),r?i:(t.views&&Object.keys(t.views).find((function(o){var i=t.views[o];return!!a(t,e,i.layout,n)})),r?i:(t.dialogs&&Object.keys(t.dialogs).find((function(o){var i=t.dialogs[o];return!!a(t,e,i.layout,n)})),r?i:(t.header&&a(t,e,t.header.layout,n),r?i:(t.footer&&a(t,e,t.footer.layout,n),r||t.widgets&&Object.keys(t.widgets).find((function(o){var i=t.widgets[o];return i.layouts&&Object.keys(i.layouts).forEach((function(o){a(t,e,i.layouts[o],n)})),!!r})),i))))}function A(t,e,n){var o,i=t.widgets[n];if(i)return Object.keys(i.layouts).find((function(t){if(Object.keys(i.layouts[t]).find((function(n){if(i.layouts[t][n]===e)return o=n,!0})))return!0})),o}function M(t,e){var n,o,i=null,r=function(t){return t?Object.keys(t).find((function(n){return t[n]===e})):null};return Object.keys(t.widgets||{}).some((function(e){return Object.keys(t.widgets[e].layouts||{}).some((function(n){if(i)return!0;i=r(t.widgets[e].layouts[n])}))})),i||(Object.keys(t.views||{}).some((function(e){if(i)return!0;i=r(t.views[e].layout)})),i||(Object.keys(t.pages||{}).some((function(e){if(i)return!0;i=r(t.pages[e].layout)})),i||(Object.keys(t.dialogs||{}).some((function(e){if(i)return!0;i=r(t.dialogs[e].layout)})),i||(Object.keys(t.screens||{}).some((function(e){var n,o;return!!i||(!!(i=r(null===(n=t.screens[e].main)||void 0===n?void 0:n.layout))||void(i=r(null===(o=t.screens[e].panel)||void 0===o?void 0:o.layout)))})),i||((i=r(null===(n=t.header)||void 0===n?void 0:n.layout))?i:(i=r(null===(o=t.footer)||void 0===o?void 0:o.layout))||null)))))}function R(t,e,n,i){if(!t.widgets[n])return[];var r=t.layouts[e.layoutId]&&t.layouts[e.layoutId].content&&t.layouts[e.layoutId].content[e.layoutItemId];if(!r)return[];var a,l=r.type;return l===o.LayoutItemType.Section?a=r.sectionId:l===o.LayoutItemType.Widget&&(a=r.widgetId),a?k(t,a,l,n,i):function(t,e,n){var o=t.widgets[e];if(!o)return!1;var i=!1;return o.layouts&&Object.keys(o.layouts).forEach((function(e){i||Object.keys(o.layouts[e]).forEach((function(r){if(!i){var a=o.layouts[e][r];f(t,a,!0).forEach((function(t){i||n.layoutId===a&&n.layoutItemId===t&&(i=!0)}))}}))})),i}(t,n,e)?[e]:[]}function z(t,e,n,o){return R(t,e,n,o).map((function(e){return t.layouts[e.layoutId][e.layoutItemId]}))}function k(t,e,n,i,r){var a=t.widgets[i];if(!a||!e)return[];var l=[];return a.layouts&&Object.keys(a.layouts).forEach((function(i){var s=a.layouts[i][r],u=t.layouts[s];u&&u.content&&Object.keys(u.content).forEach((function(i){var a=u.content[i];if(a.type!==n||a.widgetId!==e&&a.sectionId!==e&&a.screenGroupId!==e){if(a.type===o.LayoutItemType.Widget){var s=t.widgets[a.widgetId];s&&s.manifest.widgetType===o.WidgetType.Layout&&l.push.apply(l,k(t,e,n,s.id,r))}}else l.push({layoutId:u.id,layoutItemId:a.id})}))})),l}function L(t,e,n,i,r){var a=m(t,e,n,r);if(!a)return[];switch(a.type){case o.ContainerType.Page:return b(t,a.id,i,r);case o.ContainerType.Header:return w(t,i,r);case o.ContainerType.Footer:return j(t,i,r);case o.ContainerType.View:return I(t,a.id,i,r);case o.ContainerType.Dialog:return function(t,e,n,o){return g(t,O(t.dialogs[e].layout,o,t.mainSizeMode),n,o)}(t,a.id,i,r);case o.ContainerType.ScreenMain:case o.ContainerType.ScreenPanel:return x(t,a.id,i,r)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}));var o,i=n(0);!function(t){t.Horizontal="H",t.Vertical="V"}(o||(o={}));var r={showSplitter:!0,splitterSize:5,splitterColor:"#000"};i.React.createContext(r)},function(t,e){t.exports=a},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var o=.33,i=75},function(t,e){t.exports=l},function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return d}));var o=n(5),i=n(0),r=n(4);function a(t,e,n,i){void 0===i&&(i=!1);var r={};r.left=t.left+n.dx,r.width=t.width+n.dw;var a=e.right-t.right;0===n.dw?r.right=a-n.dx:0===n.dx?r.right=a-n.dw:r.right=a,r.top=t.top+n.dy,r.height=t.height+n.dh;var l=e.bottom-t.bottom;return 0===n.dh?r.bottom=l-n.dy:0===n.dy?r.bottom=l-n.dh:r.bottom=l,i&&Object(o.isRTL)()?s(r):r}function l(t,e){var n,i,a,l,s,u={},c=null!==(n=null==e?void 0:e.autoProps)&&void 0!==n?n:{},d=t,p=Object(o.getLayoutItemSizeMode)("height",t,c),g=Object(o.getLayoutItemSizeMode)("width",t,c);if(p===r.f.Stretch)u.top=d.top,u.bottom=d.bottom;else{var h=null!==(i=c.top)&&void 0!==i&&i,f=null!==(a=c.bottom)&&void 0!==a&&a;p===r.f.Custom&&(u.height=d.height),h!==f&&!f||null==t.top?u.bottom=d.bottom:u.top=d.top,e.vCenter&&"50%"===d.top&&(u.top="50%")}if(g===r.f.Stretch)u.left=d.left,u.right=d.right;else{var y=null!==(l=c.left)&&void 0!==l&&l,v=null!==(s=c.right)&&void 0!==s&&s;g===r.f.Custom&&(u.width=d.width),y===v?null!=d.left?u.left=d.left:u.right=d.right:y&&null!=d.right?u.right=d.right:u.left=d.left,e.hCenter&&"50%"===d.left&&(u.left="50%")}return u}function s(t){var e=Object(i.Immutable)(t),n=t.left;return e.set("left",t.right).set("right",n)}function u(t,e,n){void 0===n&&(n=!1);var o={},i=e.hCenter&&"50%"===t.left,r=e.vCenter&&"50%"===t.top;return i&&r?(o.right="auto",o.bottom="auto",o.transform="translate(-50%, -50%)"):i?(o.right="auto",o.transform="translateX(-50%)"):r&&(o.bottom="auto",o.transform="translateY(-50%)"),!n&&c(t,e)&&(o.height="auto"),o}function c(t,e){return Object(o.getLayoutItemSizeMode)("width",t,e.autoProps)===r.f.Custom&&Object(o.getLayoutItemSizeMode)("height",t,e.autoProps)===r.f.Custom&&"ratio"===e.heightMode}function d(t,e,n,a){var l,s,u=t,c=Object(i.Immutable)(null!=e?e:{});return(null===(l=null==e?void 0:e.autoProps)||void 0===l?void 0:l.width)!==r.f.Stretch&&(c=a.left<a.right?Object(o.isRTL)()?c.setIn(["autoProps","right"],!1).setIn(["autoProps","left"],!0):c.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!0):Object(o.isRTL)()?c.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!0):c.setIn(["autoProps","right"],!1).setIn(["autoProps","left"],!0)),(null===(s=null==e?void 0:e.autoProps)||void 0===s?void 0:s.height)!==r.f.Stretch&&(c=a.top<a.bottom?c.setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!0):c.setIn(["autoProps","top"],!0).setIn(["autoProps","bottom"],!1)),["left","right","top","bottom","width","height"].forEach((function(e){var i="left"===e||"right"===e||"width"===e?n.width:n.height,r=Object(o.isPercentage)(t[e]);Object(o.isRTL)()&&("left"===e?r=Object(o.isPercentage)(t.right):"right"===e&&(r=Object(o.isPercentage)(t.left))),u=null==t[e]||r?u.set(e,Object(o.toRatio)(a[e],i)):u.set(e,Math.round(a[e])+"px")})),{bbox:u,setting:c}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var o=n(2),i={gutter:0,style:{padding:{number:[0],unit:"px"},justifyContent:"flex-start",alignItems:"stretch",borderRadius:{number:[0],unit:o.UnitTypes.PIXEL}}},r={lockParent:!0,heightMode:"auto",offsetX:0,offsetY:0}},function(t,e,n){"use strict";e.a={previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"Add view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var o=n(0),i=o.lodash.assign({},{gridSize:1}),r=o.lodash.assign({},{order:0},{lockParent:!1,lockLayout:!1,autoProps:{}})},function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d}));var o,i=n(0),r=n(2),a=n(5),l=n(8),s=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function u(t,e){var n,o,a,s,u=!0,c=!1,d=e.layoutItem,p=null===(n=t.appRuntimeInfo)||void 0===n?void 0:n.selection;if(p&&(c=p.layoutId===e.layoutId&&p.layoutItemId===d.id),d.type===i.LayoutItemType.Widget){var g=d.widgetId,h=t.appConfig.widgets[g],f=[0,0,0,0];if(h){f=r.styleUtils.expandStyleArray(null===(s=null===(a=null===(o=h.config)||void 0===o?void 0:o.style)||void 0===a?void 0:a.padding)||void 0===s?void 0:s.number);var y=Object.keys(h.layouts)[0],v=Object(l.a)(h.layouts[y],t.browserSizeMode,t.appConfig.mainSizeMode),m=t.appConfig.layouts[v];m&&Object.keys(m.content||[]).length>0&&Object.keys(m.content||[]).some((function(t){if(!m.content[t].isPending)return u=!1,!0}))}return{isEmpty:u,selected:c,padding:f[0]+f[2]}}return{selected:c,isEmpty:!1,padding:0}}function c(t){var e=parseFloat(null==t?void 0:t.width);return e>0?(""+t.width).includes("px")?Math.round(e)+"px":Math.round(e)+"%":"100%"}function d(t,e){var n,r,l;void 0===e&&(e={});var u=t.setting,c=null!==(n=null==u?void 0:u.floatingArea)&&void 0!==n?n:1,d=(null!==(r=null==u?void 0:u.offsetX)&&void 0!==r?r:0)+"px",p=(null!==(l=null==u?void 0:u.offsetY)&&void 0!==l?l:0)+"px",g=e.dh,h=e.dw,f=e.initWidth,y=e.initHeight,v=e.isResizing,m=Object(a.isRTL)()?"translateX(calc(50% + "+d+"))":"translateX(calc(-50% + "+d+"))",b={};switch(c){case 1:b.left=d,b.top=p,b.transform=null;break;case 2:b.left="50%",b.top=p,b.transform=m;break;case 3:b.right=d,b.top=p,b.transform=null;break;case 4:b.left=d,b.top="50%",b.transform="translateY(calc(-50% + "+p+"))";break;case 5:b.left="50%",b.top="50%",b.transform=m+" translateY(calc(-50% + "+p+"))";break;case 6:b.right=d,b.top="50%",b.transform="translateY(calc(-50% + "+p+"))";break;case 7:b.left=d,b.bottom=p,b.transform=null;break;case 8:b.left="50%",b.bottom=p,b.transform=m;break;case 9:b.right=d,b.bottom=p,b.transform=null}return Object(i.css)(o||(o=s(["\n    position: fixed;\n    z-index: 1;\n    width: ",";\n    height: ",";\n    left: ",";\n    right: ",";\n    top: ",";\n    bottom: ",";\n    transform: ",";\n  "],["\n    position: fixed;\n    z-index: 1;\n    width: ",";\n    height: ",";\n    left: ",";\n    right: ",";\n    top: ",";\n    bottom: ",";\n    transform: ",";\n  "])),v?f+h+"px":Object(a.getValueOfBBox)(t.bbox,"width"),v?y+g+"px":Object(a.getValueOfBBox)(t.bbox,"height"),b.left,b.right,b.top,b.bottom,b.transform)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l}));var o=n(0),i=n(4);function r(t,e){var n=t.layouts[e];if(null!=n)switch(n.parentType){case i.j.Widget:return t.widgets[n.parent].parent;case i.j.View:var o=t.views[n.parent].parent;return t.sections[o].parent;case i.j.Screen:var r=t.screens[n.parent].parent;return t.screenGroups[r].parent}return null}function a(t,e,n,r,l,s){var u,c=null!=s?s:Object(o.Immutable)({}),d=t.layouts[e];return null!=d&&(c=c.setIn(["layouts",e],{id:e,parent:n,parentType:r}),Object.keys(null!==(u=d.content)&&void 0!==u?u:{}).forEach((function(n){var r=d.content[n];switch(r.type){case o.LayoutItemType.Widget:c=function(t,e,n,o,r){var l=r,s=t.widgets[n];null!=s&&(l=l.setIn(["widgets",n],{id:n,parent:o}),null!=s.layouts&&Object.keys(s.layouts).forEach((function(o){var r=s.layouts[o][e];l=a(t,r,n,i.j.Widget,e,l)})));return l}(t,l,r.widgetId,e,c);break;case o.LayoutItemType.Section:c=function(t,e,n,o,r){var l=r,s=t.sections[n];null!=s&&(l=l.setIn(["sections",n],{id:n,parent:o}),s.views.forEach((function(o){l=l.setIn(["views",o],{id:o,parent:n});var r=t.views[o].layout[e];l=a(t,r,o,i.j.View,e,l)})));return l}(t,l,r.sectionId,e,c);break;case o.LayoutItemType.ScreenGroup:c=function(t,e,n,o,r){var l=r,s=t.screenGroups[n];null!=s&&(l=l.setIn(["screenGroups",n],{id:n,parent:o}),s.screens.forEach((function(o){var r;l=l.setIn(["screens",o],{id:o,parent:n});var s=t.screens[o],u=s.main.layout[e];if(l=a(t,u,o,i.j.Screen,e,l),null!=(null===(r=s.panel)||void 0===r?void 0:r.layout)){var c=s.panel.layout[e];l=a(t,c,o,i.j.Screen,e,l)}})));return l}(t,l,r.screenGroupId,e,c)}}))),c}function l(t,e,n,l){var s,u,c=t.layoutId,d=a(e,n,"",i.j.Page,l),p=d.layouts[c];if(p.parentType===i.j.Widget)u=p.parent;else if(p.parentType===i.j.View){var g=p.parent;u=d.views[g].parent}else if(p.parentType===i.j.Screen){var h=p.parent;u=d.screens[h].parent}var f=r(d,c);if(null!=f){var y=e.layouts[f];return{layoutId:f,layoutItemId:Object.keys(null!==(s=y.content)&&void 0!==s?s:{}).find((function(t){var e=y.content[t];return e.type===o.LayoutItemType.Widget&&e.widgetId===u||e.type===o.LayoutItemType.Section&&e.sectionId===u||e.type===o.LayoutItemType.ScreenGroup&&e.screenGroupId===u}))}}return null}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d}));var o,i,r=n(0),a=n(2),l=n(20),s=n(11),u=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function c(t,e,n,l,c,d,p,g,h){var f=t.panel||{},y=f.side,v=f.size,m=f.offset,b=f.background,x=f.overlay,I=void 0===x||x,w=f.padding,j=Object(r.getAppStore)().getState().appContext.isRTL?"left"===y?"-":"":"right"===y?"-":"",O=a.styleUtils.toBackgroundEmotionStyle(null!=b?b:{}),S=parseFloat(c);if(h){var C=!I;return Object(r.css)(o||(o=u(["\n      width: 100%;\n      background: transparent;\n      pointer-events: none;\n      position: relative;\n      opacity: ",";\n      min-height: ",";\n      padding-top: ",";\n\n      &.top-spacing > .panel-content {\n        /* margin-top: ","px; */\n      }\n\n      .panel-content {\n        width: 100%;\n        ",";\n        /* margin-top: ","; */\n\n        > .layout, > .layout-wrapper > .layout {\n          pointer-events: all;\n          ",";\n          min-height: ","px;\n          padding: ",";\n        }\n\n        > .layout-wrapper > .column-layout > .trail-container,\n        > .column-layout > .trail-container {\n          overflow-y: hidden;\n        }\n\n        > .layout-wrapper > .placeholder-btn {\n          pointer-events: all;\n          ",";\n        }\n\n        .panel-spacing {\n          height: ","px;\n        }\n      }\n\n      .panel-content-placeholder {\n        width: 1px;\n        min-height: ","px;\n      }\n\n      body:not(.design-mode) & {\n        min-height: ",";\n        min-height: ",";\n        padding-top: ",";\n        padding-top: ",";\n\n        > .layout, > .layout-wrapper > .layout {\n          min-height: ","vh;\n          min-height: calc(var(--vh) * ",");\n        }\n\n        .panel-content-placeholder {\n          min-height: 100vh;\n          min-height: calc(var(--vh) * 100);\n        }\n\n        .panel-spacing {\n          height: ","vh;\n          height: calc(var(--vh) * ",");\n        }\n      }\n    "],["\n      width: 100%;\n      background: transparent;\n      pointer-events: none;\n      position: relative;\n      opacity: ",";\n      min-height: ",";\n      padding-top: ",";\n\n      &.top-spacing > .panel-content {\n        /* margin-top: ","px; */\n      }\n\n      .panel-content {\n        width: 100%;\n        ",";\n        /* margin-top: ","; */\n\n        > .layout, > .layout-wrapper > .layout {\n          pointer-events: all;\n          ",";\n          min-height: ","px;\n          padding: ",";\n        }\n\n        > .layout-wrapper > .column-layout > .trail-container,\n        > .column-layout > .trail-container {\n          overflow-y: hidden;\n        }\n\n        > .layout-wrapper > .placeholder-btn {\n          pointer-events: all;\n          ",";\n        }\n\n        .panel-spacing {\n          height: ","px;\n        }\n      }\n\n      .panel-content-placeholder {\n        width: 1px;\n        min-height: ","px;\n      }\n\n      body:not(.design-mode) & {\n        min-height: ",";\n        min-height: ",";\n        padding-top: ",";\n        padding-top: ",";\n\n        > .layout, > .layout-wrapper > .layout {\n          min-height: ","vh;\n          min-height: calc(var(--vh) * ",");\n        }\n\n        .panel-content-placeholder {\n          min-height: 100vh;\n          min-height: calc(var(--vh) * 100);\n        }\n\n        .panel-spacing {\n          height: ","vh;\n          height: calc(var(--vh) * ",");\n        }\n      }\n    "])),p===r.ScreenTransitionType.Fade?l?"1":"0.5":null,g===r.ScreenTransitionType.Cover?e+"px":null,g!==r.ScreenTransitionType.Fade&&C?Math.round(e*s.b)+"px":null,Math.round(e*s.b),I?"":O,p===r.ScreenTransitionType.Push?"${Math.round(viewHeight * SCREEN_RATIO_IN_SMALL_SIZE)}px":"unset",I?O:"",Math.round(.25*e),a.styleUtils.toCSSPadding(w),I?O:"",Math.round(e*S/100),e,g===r.ScreenTransitionType.Cover?"100vh":null,g===r.ScreenTransitionType.Cover?"calc(var(--vh) * 100)":null,g!==r.ScreenTransitionType.Fade&&C?100*s.b+"vh":null,g!==r.ScreenTransitionType.Fade&&C?"calc(var(--vh) * "+100*s.b+")":null,Math.round(25),Math.round(25),S,S)}return Object(r.css)(i||(i=u(["\n    width: 100%;\n    background: transparent;\n    pointer-events: none;\n    display: flex;\n    flex-direction: ",";\n    justify-content: ",";\n    position: relative;\n    opacity: ",";\n\n    &.top-spacing > .panel-content {\n      /* margin-top: ","px; */\n    }\n\n    .panel-content {\n      width: ",";\n      transform: ",";\n      flex: 0 auto;\n      min-height: ",";\n      ",";\n\n      > .layout,\n      > .layout-wrapper > .layout {\n        pointer-events: all;\n        ",";\n        min-height: ","px;\n        padding: ",";\n      }\n\n      > .layout-wrapper > .column-layout > .trail-container,\n      > .column-layout > .trail-container {\n        overflow-y: hidden;\n      }\n\n      > .layout-wrapper > .placeholder-btn {\n        pointer-events: all;\n        ",";\n      }\n\n      .panel-spacing {\n        height: ","px;\n\n        &.last-item {\n          height: ","px;\n        }\n      }\n    }\n\n    .panel-content-placeholder {\n      width: 1px;\n      min-height: ","px;\n    }\n\n    body:not(.design-mode) & {\n      &.top-spacing > .panel-content {\n        /* margin-top: ","vh; */\n      }\n\n      .panel-content {\n        min-height: ",";\n        min-height: ",";\n        > .layout, > .layout-wrapper > .layout {\n          min-height: unset;\n        }\n\n        .panel-spacing {\n          height: ","vh;\n          height: calc(var(--vh) * ",");\n\n          &.last-item {\n            height: ","vh;\n            height: calc(var(--vh) * ",");\n          }\n        }\n      }\n      .panel-content-placeholder {\n        min-height: ","vh;\n        min-height: calc(var(--vh) * ",");\n      }\n    }\n  "],["\n    width: 100%;\n    background: transparent;\n    pointer-events: none;\n    display: flex;\n    flex-direction: ",";\n    justify-content: ",";\n    position: relative;\n    opacity: ",";\n\n    &.top-spacing > .panel-content {\n      /* margin-top: ","px; */\n    }\n\n    .panel-content {\n      width: ",";\n      transform: ",";\n      flex: 0 auto;\n      min-height: ",";\n      ",";\n\n      > .layout,\n      > .layout-wrapper > .layout {\n        pointer-events: all;\n        ",";\n        min-height: ","px;\n        padding: ",";\n      }\n\n      > .layout-wrapper > .column-layout > .trail-container,\n      > .column-layout > .trail-container {\n        overflow-y: hidden;\n      }\n\n      > .layout-wrapper > .placeholder-btn {\n        pointer-events: all;\n        ",";\n      }\n\n      .panel-spacing {\n        height: ","px;\n\n        &.last-item {\n          height: ","px;\n        }\n      }\n    }\n\n    .panel-content-placeholder {\n      width: 1px;\n      min-height: ","px;\n    }\n\n    body:not(.design-mode) & {\n      &.top-spacing > .panel-content {\n        /* margin-top: ","vh; */\n      }\n\n      .panel-content {\n        min-height: ",";\n        min-height: ",";\n        > .layout, > .layout-wrapper > .layout {\n          min-height: unset;\n        }\n\n        .panel-spacing {\n          height: ","vh;\n          height: calc(var(--vh) * ",");\n\n          &.last-item {\n            height: ","vh;\n            height: calc(var(--vh) * ",");\n          }\n        }\n      }\n      .panel-content-placeholder {\n        min-height: ","vh;\n        min-height: calc(var(--vh) * ",");\n      }\n    }\n  "])),"right"===y?"row-reverse":"row","center"===y&&I?"center":"flex-start",p===r.ScreenTransitionType.Fade?l?"1":"0.5":null,Math.round(2*e/3),v,I&&Math.abs(parseFloat(m))>0?"translateX("+j+m+")":null,d?e+"px":"unset",I?"":O,I?O:"",Math.round(.25*e),a.styleUtils.toCSSPadding(w),I?O:"",Math.round(e*S/100),d?""+Math.round(e*S/100):e,d?e:Math.round(.25*e),66.7,d?n>0?"calc(100vh - "+n+"px)":"100vh":"unset",d?n>0?"calc(var(--vh) * 100 - "+n+"px)":"calc(var(--vh) * 100)":"unset",S,S,d?S:100,d?S:100,d?"100":Math.round(25),d?"100":Math.round(25))}function d(t){var e,n=t.index,o=t.screenId,i=t.onInterctionChange,a=t.onHeightChange,s=t.viewHeight,u=t.headerHeight,d=t.layoutEntry,p=t.isActive,g=t.isSmallSize,h=t.transitionType,f=t.screenTransitionType,y=t.triggerType,v=t.stretched,m=t.verticalSpace,b=void 0===m?"0":m,x=r.ReactRedux.useSelector((function(t){return t.appConfig.screens[o]})),I=x.panel,w=r.React.useRef(),j=r.React.useState(!1),O=(j[0],j[1]),S=r.React.useRef(),C=r.React.useCallback((function(t){i(n,t)}),[n,i]);r.React.useEffect((function(){return S.current=r.lodash.debounce(a,200),function(){var t;null===(t=S.current)||void 0===t||t.cancel()}}),[a]);var P=r.React.useCallback((function(t,e){var o;null===(o=S.current)||void 0===o||o.call(S,n,e)}),[n]);return Object(l.a)(w.current,t.refElement,g?r.ScreenTriggerType.Lower:null!=y?y:r.ScreenTriggerType.Bottom,C),r.React.useEffect((function(){O(!0)}),[]),Object(r.jsx)("div",{className:Object(r.classNames)("screen-side-panel",{"top-spacing":0===n&&((null===(e=x.panel)||void 0===e?void 0:e.overlay)||g)}),"data-screenid":o,"data-index":n,ref:w,css:c(x,s,u,p,b,v,h,f,g)},I&&Object(r.jsx)("div",{className:"panel-content"},Object(r.jsx)(d,{layouts:I.layout}),Object(r.jsx)("div",{className:Object(r.classNames)("panel-spacing",{"last-item":t.isLast})})),!I&&Object(r.jsx)("div",{className:"panel-content-placeholder"}),Object(r.jsx)(r.ReactResizeDetector,{handleHeight:!0,onResize:P}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(0);function i(){for(var t=[0],e=1;e<=100;e++)t.push(e/100);return t}function r(t){switch(t){case o.ScreenTriggerType.Top:return"0% 0% -98% 0%";case o.ScreenTriggerType.Bottom:return"-98% 0% -2px 0%";case o.ScreenTriggerType.Upper:return"-"+(100/3-1)+"% 0% -"+(200/3-1)+"% 0%";case o.ScreenTriggerType.Lower:return"-"+(200/3-1)+"% 0% -"+(100/3-1)+"% 0%";default:return}}function a(t,e,n,a){var l=o.React.useRef(),s=o.React.useRef();o.React.useEffect((function(){l.current&&(l.current.unobserve(t),l.current=null);if(t&&"function"==typeof IntersectionObserver){var o=new IntersectionObserver((function(t){!function(t){var e=t.boundingClientRect,n=t.rootBounds,o=Math.abs(e.bottom-n.top)>=Math.abs(e.top-n.top);if(t.isIntersecting){if(s.current=!0,o)a(!0)}else if(s.current&&(s.current=!1,o))a(!1)}(t[0])}),{threshold:i(),root:e||document.body,rootMargin:r(n)});return o.observe(t),l.current=o,function(){l.current.unobserve(t),l.current=null}}}),[t,e,a,n])}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a.a})),n.d(e,"a",(function(){return w}));var o,i,r,a=n(19),l=n(0),s=n(2),u=n(7),c=n(11),d=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},p=n(36);function g(t){var e=t.viewHeight,n=t.headerHeight,a=t.screenId,g=t.isActive,h=t.isAbsolute,f=t.isLast,y=t.isSmallSize,v=t.layoutEntry,m=t.isDesignMode,b=t.formatMessage,x=t.builderTheme,I=l.ReactRedux.useSelector((function(t){return t.appConfig.screens[a]})),w=l.ReactRedux.useSelector((function(t){var e,n,o;return null===(o=null===(n=null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.screenPanelStates)||void 0===n?void 0:n[a])||void 0===o||o})),j=I.main,O=I.panel||{},S=O.side,C=O.size,P=O.overlay,T=void 0===P||P,A=l.React.useRef(),M=l.React.useCallback((function(){Object(l.getAppStore)().dispatch(l.appActions.screenPanelVisibleChanged(a,!0))}),[a]);var R=Object(l.classNames)("screen-main-panel",{"is-active":g,"last-one":f});return Object(l.jsx)(u.b.Provider,{value:!h||g},Object(l.jsx)("div",{className:R,css:function(){var t,a,u,p;if(y){var g=!T&&null!=I.panel,f=g?Math.round(e*c.b)+"px":e+"px",v=g?""+Math.round(100*c.b):"100";return Object(l.css)(o||(o=d(["\n        pointer-events: all;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: ","px;\n\n        > .layout {\n          ",";\n          height: "," !important;\n          border: none !important;\n        }\n\n        body:not(.design-mode) & {\n          height: ",";\n          height: ",";\n          > .layout {\n            height: ","vh !important;\n            height: calc(var(--vh) * ",") !important;\n          }\n        }\n\n        .spacing-area {\n          flex: 1;\n          background: transparent;\n          pointer-events: none;\n        }\n\n        .toggle-visible-btn {\n          position: absolute;\n          bottom: 0;\n          right: left;\n        }\n      "],["\n        pointer-events: all;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n        height: ","px;\n\n        > .layout {\n          ",";\n          height: "," !important;\n          border: none !important;\n        }\n\n        body:not(.design-mode) & {\n          height: ",";\n          height: ",";\n          > .layout {\n            height: ","vh !important;\n            height: calc(var(--vh) * ",") !important;\n          }\n        }\n\n        .spacing-area {\n          flex: 1;\n          background: transparent;\n          pointer-events: none;\n        }\n\n        .toggle-visible-btn {\n          position: absolute;\n          bottom: 0;\n          right: left;\n        }\n      "])),e,s.styleUtils.toBackgroundEmotionStyle(null!==(a=null===(t=I.main)||void 0===t?void 0:t.background)&&void 0!==a?a:{}),f,n>0?"calc(100vh - "+n+"px)":"100vh",n>0?"calc(var(--vh) * 100 - "+n+"px)":"calc(var(--vh) * 100)",v,v)}var m="0px",b="0px";"none"!==S&&(T||"right"===S||(m=C),T||"right"!==S||(b=C));var w=x?Object(l.css)(i||(i=d(["\n      color: ",";\n      background-color: ",";\n      border-color: ",";\n      &:hover {\n        color: ",";\n        background-color: ",";\n      }\n    "],["\n      color: ",";\n      background-color: ",";\n      border-color: ",";\n      &:hover {\n        color: ",";\n        background-color: ",";\n      }\n    "])),x.colors.palette.dark[900],x.colors.palette.light[400],x.colors.palette.light[600],x.colors.black,x.colors.palette.light[600]):null;return Object(l.css)(r||(r=d(["\n      ",";\n      left: ",";\n      right: ",";\n      margin-left: ",";\n      margin-right: ",";\n      pointer-events: all;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n\n      > .layout {\n        height: ","px !important;\n        background: transparent;\n        border: none !important;\n      }\n\n      body:not(.design-mode) & {\n        > .layout {\n          height: "," !important;\n          height: "," !important;\n        }\n      }\n\n      .spacing-area {\n        flex: 1;\n        background: transparent;\n        pointer-events: none;\n      }\n\n      .toggle-visible-btn {\n        position: absolute;\n        bottom: 0;\n        right: 0;\n\n        > button {\n          ",";\n          svg {\n            margin-right: 0;\n            margin-left: 0;\n          }\n        }\n      }\n    "],["\n      ",";\n      left: ",";\n      right: ",";\n      margin-left: ",";\n      margin-right: ",";\n      pointer-events: all;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n\n      > .layout {\n        height: ","px !important;\n        background: transparent;\n        border: none !important;\n      }\n\n      body:not(.design-mode) & {\n        > .layout {\n          height: "," !important;\n          height: "," !important;\n        }\n      }\n\n      .spacing-area {\n        flex: 1;\n        background: transparent;\n        pointer-events: none;\n      }\n\n      .toggle-visible-btn {\n        position: absolute;\n        bottom: 0;\n        right: 0;\n\n        > button {\n          ",";\n          svg {\n            margin-right: 0;\n            margin-left: 0;\n          }\n        }\n      }\n    "])),s.styleUtils.toBackgroundEmotionStyle(null!==(p=null===(u=I.main)||void 0===u?void 0:u.background)&&void 0!==p?p:{}),h?m:null,h?b:null,h?null:m,h?null:b,e,n>0?"calc(100vh - "+n+"px)":"100vh",n>0?"calc(var(--vh) * 100 - "+n+"px)":"calc(var(--vh) * 100)",w)}(),ref:A,"data-screenid":a,"data-index":t.index},Object(l.jsx)(v,{layouts:j.layout,isInWidget:!0}),Object(l.jsx)("div",{className:"spacing-area"}),m&&!w&&Object(l.jsx)("div",{className:"toggle-visible-btn",onClick:M,"data-testid":"toggleBtn"},Object(l.jsx)(s.Tooltip,{placement:"auto",title:b("showInDesignView")},Object(l.jsx)(s.Button,{type:"default",size:"sm",className:"rounded"},Object(l.jsx)(s.Icon,{icon:p,size:16}))))))}var h,f,y,v,m,b=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function x(t,e,n,o,i){return t===l.ScreenTransitionType.Fade?Object(l.css)(h||(h=b(["\n      position: sticky;\n      height: ","px;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: ",";\n        height: ",";\n        top: ",";\n        .layout .exb-drop-area {\n          pointer-events: none !important;\n        }\n      }\n\n      .screen-main-panel {\n        position: absolute;\n        opacity: 0;\n        visibility: hidden;\n        z-index: 0;\n        transition: ",";\n        top: 0;\n        /* height: ","; */\n\n        .layout .exb-drop-area {\n          pointer-events: none;\n        }\n\n        &.is-active {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n          z-index: 1;\n\n          .layout .exb-drop-area {\n            pointer-events: all;\n          }\n        }\n      }\n    "],["\n      position: sticky;\n      height: ","px;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: ",";\n        height: ",";\n        top: ",";\n        .layout .exb-drop-area {\n          pointer-events: none !important;\n        }\n      }\n\n      .screen-main-panel {\n        position: absolute;\n        opacity: 0;\n        visibility: hidden;\n        z-index: 0;\n        transition: ",";\n        top: 0;\n        /* height: ","; */\n\n        .layout .exb-drop-area {\n          pointer-events: none;\n        }\n\n        &.is-active {\n          opacity: 1;\n          visibility: visible;\n          pointer-events: all;\n          z-index: 1;\n\n          .layout .exb-drop-area {\n            pointer-events: all;\n          }\n        }\n      }\n    "])),e,n>0?"calc(100vh - "+n+"px)":"100vh",n>0?"calc(var(--vh) * 100 - "+n+"px)":"calc(var(--vh) * 100)",n>0?n+"px":0,o?null:"opacity 400ms",o?"unset":"100% !important"):t===l.ScreenTransitionType.Cover?Object(l.css)(f||(f=b(["\n      position: sticky;\n      height: ","px;\n      overflow: hidden;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: 100%;\n        overflow: unset;\n        position: relative;\n\n        .screen-main-panel {\n          top: ",";\n        }\n      }\n\n      & > div:first-of-type {\n        margin-top: 0 !important;\n      }\n\n      .screen-main-panel {\n        position: sticky;\n        top: 0;\n        margin-top: ",";\n\n        .spacing-area {\n          display: none;\n        }\n      }\n    "],["\n      position: sticky;\n      height: ","px;\n      overflow: hidden;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: 100%;\n        overflow: unset;\n        position: relative;\n\n        .screen-main-panel {\n          top: ",";\n        }\n      }\n\n      & > div:first-of-type {\n        margin-top: 0 !important;\n      }\n\n      .screen-main-panel {\n        position: sticky;\n        top: 0;\n        margin-top: ",";\n\n        .spacing-area {\n          display: none;\n        }\n      }\n    "])),e,n>0?n+"px":0,1===i?"0 !important":null):t===l.ScreenTransitionType.Push?Object(l.css)(y||(y=b(["\n      position: sticky;\n      height: ","px;\n      overflow: hidden;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: auto;\n        overflow: unset;\n\n        .screen-main-panel > .layout {\n          top: ",";\n        }\n      }\n\n      .screen-main-panel > .layout {\n        position: sticky !important;\n        top: 0;\n      }\n    "],["\n      position: sticky;\n      height: ","px;\n      overflow: hidden;\n      top: 0;\n\n      body:not(.design-mode) & {\n        height: auto;\n        overflow: unset;\n\n        .screen-main-panel > .layout {\n          top: ",";\n        }\n      }\n\n      .screen-main-panel > .layout {\n        position: sticky !important;\n        top: 0;\n      }\n    "])),e,n>0?n+"px":0):void 0}function I(t,e,n){return t===l.ScreenTransitionType.Fade?Object(l.css)(v||(v=b(["\n      height: calc(100% - ","px);\n      background: transparent;\n      pointer-events: none;\n\n      body:not(.design-mode) & {\n        height: calc(100% - 100vh);\n        height: calc(100% - var(--vh) * 100);\n      }\n    "],["\n      height: calc(100% - ","px);\n      background: transparent;\n      pointer-events: none;\n\n      body:not(.design-mode) & {\n        height: calc(100% - 100vh);\n        height: calc(100% - var(--vh) * 100);\n      }\n    "])),e):t===l.ScreenTransitionType.Cover||t===l.ScreenTransitionType.Push?Object(l.css)(m||(m=b(["\n      height: calc(100% - ","px);\n      background: transparent;\n      pointer-events: none;\n      display: block;\n\n      body:not(.design-mode) & {\n        height: calc(100% - 100vh);\n        height: calc(100% - var(--vh) * 100);\n        display: none;\n      }\n    "],["\n      height: calc(100% - ","px);\n      background: transparent;\n      pointer-events: none;\n      display: block;\n\n      body:not(.design-mode) & {\n        height: calc(100% - 100vh);\n        height: calc(100% - var(--vh) * 100);\n        display: none;\n      }\n    "])),e):void 0}function w(t){var e=t.activeIndex,n=t.viewHeight,o=t.headerHeight,i=t.screens,r=t.transitionType,a=t.isSmallSize,s=t.layoutEntry,u=t.isDesignMode,c=t.formatMessage,d=t.builderTheme;return Object(l.jsx)(l.React.Fragment,null,Object(l.jsx)("div",{className:"screen-container",css:x(r,n,o,a,i.length)},i.map((function(t,p){return Object(l.jsx)(g,{key:t,index:p,isActive:e===p,screenId:t,viewHeight:n,headerHeight:o,isAbsolute:r===l.ScreenTransitionType.Fade,isLast:p===i.length-1,isSmallSize:a,layoutEntry:s,isDesignMode:u,formatMessage:c,builderTheme:d})}))),Object(l.jsx)("div",{className:"screen-placeholder",css:I(r,n)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(0);function i(){for(var t=[0],e=1;e<=10;e++)t.push(e/10);return t}function r(t,e){var n=o.React.useRef(),r=o.React.useState(!0),a=r[0],l=r[1];return o.React.useEffect((function(){if(n.current&&(n.current.unobserve(t),n.current=null),e){if(t&&"function"==typeof IntersectionObserver){var o=new IntersectionObserver((function(t){var e;(e=t[0]).target.classList.contains("playing-animation")||e.boundingClientRect.width>0&&e.boundingClientRect.height>0&&l(e.isIntersecting)}),{threshold:i(),root:document.body,rootMargin:"20%"});return o.observe(t),n.current=o,function(){n.current.unobserve(t),n.current=null}}}}),[t,e]),a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o={min:16,space:10}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(0),i=function(){function t(){this.id="flow-layout-transformer",this.layoutType=o.LayoutType.FlowLayout}return t.prototype.transformLayout=function(t,e,n){if(e!==n&&n===o.BrowserSizeMode.Small){var i=Object(o.Immutable)(t);return(t.order||[]).forEach((function(t){i=i.setIn(["content",t,"setting","heightMode"],"auto")})),i}return t},t.prototype.transformLayoutItem=function(t,e,n,o,i,r){return{index:e,item:t}},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(0);function i(t,e,n){for(var i=t.querySelectorAll("div.screen-main-panel"),r=e.querySelectorAll("div.screen-side-panel"),a=i.length,l=1;l<a;l++){var s=i.item(l),u=i.item(l-1),c=r.item(l-1);s.style.marginTop=c.clientHeight-u.clientHeight+"px"}n!==o.BrowserSizeMode.Small&&(t.style.height=e.clientHeight+"px")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var o=n(0),i=n(4),r=n(2);function a(t,e){if(!t)return null;var n={};t.backgroundIMage&&(n="string"==typeof t.backgroundIMage?{}:t.backgroundIMage);var o=t.backgroundPosition?r.FillType[t.backgroundPosition.toUpperCase()]:r.FillType.FILL,i={color:null==t.backgroundColor?e:""===t.backgroundColor?"transparent":t.backgroundColor?t.backgroundColor:"",fillType:o,image:n};return r.styleUtils.toBackgroundStyle(i)}function l(t){var e=t.viewId,n=t.isActive,i=t.layoutEntryComponent,r=t.viewVisibilityContext,l=o.ReactRedux.useSelector((function(t){var n,o;return null===(o=null===(n=t.appConfig)||void 0===n?void 0:n.views)||void 0===o?void 0:o[e]})),s=o.ReactRedux.useSelector((function(t){var e,n;return null===(n=null===(e=t.theme)||void 0===e?void 0:e.body)||void 0===n?void 0:n.bg})),u=i,c=r,d=o.React.useMemo((function(){return{isInView:!0,isInCurrentView:n}}),[n]);return Object(o.jsx)("div",{className:"w-100 h-100 d-flex section-view",style:a(l,s),key:e},Object(o.jsx)(o.ErrorBoundary,null,Object(o.jsx)(c.Provider,{value:d},Object(o.jsx)(u,{layouts:null==l?void 0:l.layout,isInSection:!0,className:"w-100"}))))}function s(t){var e,n,i=t.views,r=t.navInfo,a=t.animationPreview,s=t.playMode,u=t.currentIndex,c=t.previousIndex,d=t.progress,p=t.loop,g=t.viewTransition,h=a&&s===o.AnimationPlayMode.OneByOne,f=o.React.useContext(o.AnimationContext),y=f.setting,v=f.playId,m=f.onAnimationEnd,b=f.depth,x=o.ReactRedux.useSelector((function(t){var e;return!y||y.type===o.AnimationType.None||(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===o.AppMode.Design})),I=!x||h||(null==r?void 0:r.playId)&&(null==r?void 0:r.withOneByOne)?y:null,w=o.React.useMemo((function(){return{trigger:o.AnimationTriggerType.Manual,setting:I,playId:!x||h?v:null,inheritedOneByOneSetting:null,depth:b+1,onAnimationEnd:m}}),[x,I,h,v,b,m]);return Object(o.jsx)(o.AnimationContext.Provider,{value:w},Object(o.jsx)("div",{className:"section-content"},Object(o.jsx)(o.TransitionContainer,{useProgress:null!==(e=null==r?void 0:r.useProgress)&&void 0!==e&&e,useStep:null!==(n=null==r?void 0:r.useStep)&&void 0!==n&&n,previousIndex:c,currentIndex:u,progress:d,transitionType:null==g?void 0:g.type,direction:null==g?void 0:g.direction,playId:null==r?void 0:r.playId,withOneByOne:null==r?void 0:r.withOneByOne,loop:p},i.map((function(e){var n=e===i[u];return Object(o.jsx)(l,{key:e,viewId:e,isActive:n,layoutEntryComponent:t.layoutEntryComponent,viewVisibilityContext:t.viewVisibilityContext})})))))}var u,c,d=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},p=n(33),g=n(34);function h(t){var e,n,i,a=t.sectionId,l=t.currentIndex,s=t.numOfViews,h=t.onCurrentViewChange,f=o.ReactRedux.useSelector((function(t){var e;return null===(e=t.appConfig.sections[a])||void 0===e?void 0:e.arrowsNav})),y=o.ReactRedux.useSelector((function(t){var e;return null===(e=t.appConfig.sections[a])||void 0===e?void 0:e.dotsNav})),v=null!==(e=null==y?void 0:y.position)&&void 0!==e?e:"b",m=o.React.useMemo((function(){for(var t=[],e=0;e<s;e++)t.push(e);return t}),[s]),b=function(){var t,e,n,i;return Object(o.css)(u||(u=d(["\n      position: absolute;\n      cursor: pointer;\n\n      &.disabled {\n        cursor: default;\n        svg {\n          color: var(--light-400);\n        }\n      }\n\n      &.first {\n        left: ","px;\n        top: 50%;\n        transform: translateY(-50%);\n\n        &.vertical {\n          top: ","px;\n          left: 50%;\n          transform: translateX(-50%) rotate(90deg);\n        }\n      }\n      &.second {\n        right: ","px;\n        top: 50%;\n        transform: translateY(-50%);\n\n        &.vertical {\n          bottom: ","px;\n          left: 50%;\n          top: auto;\n          right: auto;\n          transform: translateX(-50%) rotate(90deg);\n        }\n      }\n    "],["\n      position: absolute;\n      cursor: pointer;\n\n      &.disabled {\n        cursor: default;\n        svg {\n          color: var(--light-400);\n        }\n      }\n\n      &.first {\n        left: ","px;\n        top: 50%;\n        transform: translateY(-50%);\n\n        &.vertical {\n          top: ","px;\n          left: 50%;\n          transform: translateX(-50%) rotate(90deg);\n        }\n      }\n      &.second {\n        right: ","px;\n        top: 50%;\n        transform: translateY(-50%);\n\n        &.vertical {\n          bottom: ","px;\n          left: 50%;\n          top: auto;\n          right: auto;\n          transform: translateX(-50%) rotate(90deg);\n        }\n      }\n    "])),null!==(t=f.offset)&&void 0!==t?t:0,null!==(e=f.offset)&&void 0!==e?e:0,null!==(n=f.offset)&&void 0!==n?n:0,null!==(i=f.offset)&&void 0!==i?i:0)},x=o.React.useCallback((function(t,e){return Object(o.jsx)("div",{key:t,className:Object(o.classNames)("dot rounded-circle",{active:e,disabled:s<=1}),onClick:e?void 0:function(){return h(t)}})}),[h,s]),I=o.React.useCallback((function(){h(l>0?l-1:s-1)}),[l,s,h]),w=o.React.useCallback((function(){h(l<s-1?l+1:0)}),[l,s,h]),j=s>1&&0!==l,O=s>1&&l!==s-1;return Object(o.jsx)(o.React.Fragment,null,(null==f?void 0:f.visible)&&Object(o.jsx)(o.React.Fragment,null,Object(o.jsx)("div",{className:Object(o.classNames)("arrows-nav first",{vertical:"v"===f.direction,disabled:!j}),css:b(),onClick:j?I:null},Object(o.jsx)(r.Icon,{icon:p,autoFlip:"v"!==f.direction,size:null!==(n=f.size)&&void 0!==n?n:12})),Object(o.jsx)("div",{className:Object(o.classNames)("arrows-nav second",{vertical:"v"===f.direction,disabled:!O}),css:b(),onClick:O?w:null},Object(o.jsx)(r.Icon,{icon:g,autoFlip:"v"!==f.direction,size:null!==(i=f.size)&&void 0!==i?i:12}))),(null==y?void 0:y.visible)&&Object(o.jsx)("div",{className:Object(o.classNames)("dots-nav",{"snap-left":"l"===v,"snap-top":"t"===v,"snap-right":"r"===v,"snap-bottom":"b"===v}),css:function(){var t,e,n,i,r,a,l,s,u,p,g,h,f,m;return Object(o.css)(c||(c=d(["\n      position: absolute;\n      display: flex;\n      flex-direction: ",";\n      justify-content: center;\n      align-items: center;\n      overflow: visible;\n      pointer-events: none;\n      background: transparent;\n\n      .dot {\n        pointer-events: all;\n        cursor: pointer;\n        border: 1px solid var(--light-500);\n        background: var(--light-100);\n        width: ","px;\n        height: ","px;\n\n        &.active {\n          border-color: var(--white);\n          background: var(--primary-500);\n          width: ","px;\n          height: ","px;\n        }\n\n        &.disabled {\n          cursor: default;\n        }\n      }\n\n      &.snap-left {\n        height: 100%;\n        top: 0;\n        left: ","px;\n        width: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-top: ","px;\n        }\n      }\n      &.snap-right {\n        height: 100%;\n        top: 0;\n        right: ","px;\n        width: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-top: ","px;\n        }\n      }\n      &.snap-top {\n        width: 100%;\n        top: ","px;\n        height: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-left: ","px;\n        }\n      }\n      &.snap-bottom {\n        width: 100%;\n        bottom: ","px;\n        height: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-left: ","px;\n        }\n      }\n    "],["\n      position: absolute;\n      display: flex;\n      flex-direction: ",";\n      justify-content: center;\n      align-items: center;\n      overflow: visible;\n      pointer-events: none;\n      background: transparent;\n\n      .dot {\n        pointer-events: all;\n        cursor: pointer;\n        border: 1px solid var(--light-500);\n        background: var(--light-100);\n        width: ","px;\n        height: ","px;\n\n        &.active {\n          border-color: var(--white);\n          background: var(--primary-500);\n          width: ","px;\n          height: ","px;\n        }\n\n        &.disabled {\n          cursor: default;\n        }\n      }\n\n      &.snap-left {\n        height: 100%;\n        top: 0;\n        left: ","px;\n        width: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-top: ","px;\n        }\n      }\n      &.snap-right {\n        height: 100%;\n        top: 0;\n        right: ","px;\n        width: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-top: ","px;\n        }\n      }\n      &.snap-top {\n        width: 100%;\n        top: ","px;\n        height: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-left: ","px;\n        }\n      }\n      &.snap-bottom {\n        width: 100%;\n        bottom: ","px;\n        height: ","px;\n\n        > div:not(:first-child) /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */ {\n          margin-left: ","px;\n        }\n      }\n    "])),"l"===v||"r"===v?"column":"row",null!==(t=y.size)&&void 0!==t?t:8,null!==(e=y.size)&&void 0!==e?e:8,y.size>0?1.5*y.size:12,y.size>0?1.5*y.size:12,null!==(n=y.offset)&&void 0!==n?n:50,null!==(i=y.size)&&void 0!==i?i:8,null!==(r=y.spacing)&&void 0!==r?r:10,null!==(a=y.offset)&&void 0!==a?a:50,null!==(l=y.size)&&void 0!==l?l:8,null!==(s=y.spacing)&&void 0!==s?s:10,null!==(u=y.offset)&&void 0!==u?u:50,null!==(p=y.size)&&void 0!==p?p:8,null!==(g=y.spacing)&&void 0!==g?g:10,null!==(h=y.offset)&&void 0!==h?h:50,null!==(f=y.size)&&void 0!==f?f:8,null!==(m=y.spacing)&&void 0!==m?m:10)}()},m.map((function(t){return x(t,t===l)}))))}function f(t){var e=t.sectionId,n=t.autoPlay,r=t.interval,a=void 0===r?i.e:r,l=t.loop,s=void 0!==l&&l,u=o.React.useRef(),c=o.ReactRedux.useSelector((function(t){var e;return n?(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===o.AppMode.Design:null})),d=o.React.useRef(c),p=o.React.useCallback((function(){u.current&&(clearInterval(u.current),u.current=null)}),[]),g=o.React.useCallback((function(){p(),u.current=setInterval((function(){(function(t,e){var n,i,r=Object(o.getAppStore)().getState(),a=r.appConfig.sections[t].views,l=null===(i=null===(n=r.appRuntimeInfo)||void 0===n?void 0:n.sectionNavInfos)||void 0===i?void 0:i[t],s=(null==l?void 0:l.currentViewId)?a.indexOf(l.currentViewId):0,u=s<a.length-1?s+1:0;return!(!e&&0===u)&&(o.jimuHistory.changeView(t,a[u]),!0)})(e,s)||p()}),1e3*a)}),[e,s,a,p]);o.React.useEffect((function(){if(!d.current){if(!n)return void p();g()}return function(){p()}}),[n,a,s,p,g]),o.React.useEffect((function(){if(d.current!==c&&null!==c){if(d.current=c,c)return void p();n&&g()}}),[c,g,p,n])}var y,v=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},m=function(){return(m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},b=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};function x(t){return Object(o.css)(y||(y=v(["\n    overflow: visible;\n    position: relative;\n\n    .section-content {\n      position: relative;\n      overflow: hidden;\n      width: 100%;\n      height: 100%;\n      z-index: 0;\n    }\n\n    .section-view {\n      position: absolute;\n    }\n\n    &.aspect-ratio-wrapper {\n      padding-top: ","%;\n    }\n    &.aspect-ratio-wrapper > .section-content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n    }\n\n    .hidden {\n      display: none !important;\n    }\n  "],["\n    overflow: visible;\n    position: relative;\n\n    .section-content {\n      position: relative;\n      overflow: hidden;\n      width: 100%;\n      height: 100%;\n      z-index: 0;\n    }\n\n    .section-view {\n      position: absolute;\n    }\n\n    &.aspect-ratio-wrapper {\n      padding-top: ","%;\n    }\n    &.aspect-ratio-wrapper > .section-content {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n    }\n\n    .hidden {\n      display: none !important;\n    }\n  "])),100*(t||0))}function I(t){var e=t.views,n=t.navInfo,a=t.activeView,l=t.animationPreview,u=t.playMode,c=t.transition,d=t.sectionId,p=t.autoPlay,g=t.interval,y=void 0===g?i.e:g,v=t.loop,I=void 0===v||v,w=t.className,j=t.sectionStyle,O=t.forceAspectRatio,S=t.aspectRatio,C=t.rotate,P=t.layoutEntryComponent,T=t.viewVisibilityContext,A=o.React.useRef(),M=o.React.useState(!1),R=M[0],z=M[1],k=null==a?void 0:a.id,L=o.React.useMemo((function(){var t,i,r,a,l=e;n?(l=null!==(t=n.visibleViews)&&void 0!==t?t:e,n.useProgress?(a=n.progress,i=Object(o.getIndexFromProgress)(a,l.length).currentIndex):(i=Math.max(0,l.indexOf(n.currentViewId)),r=n.previousViewId?Math.max(0,l.indexOf(n.previousViewId)):Math.max(0,i-1))):r=i=Math.max(0,l.indexOf(k));return A.current=i,{currentIndex:i,previousIndex:r,progress:a}}),[k,n,e]),N=o.React.useMemo((function(){return r.styleUtils.toCSSStyle(j)}),[j]),B=N.transform,E=b(N,["transform"]),D=C>0||C<0?"rotateZ("+C+"deg)":"",_=D;B&&(_=B+" "+D);var V=o.React.useCallback((function(){z(!0)}),[]),F=o.React.useCallback((function(){z(!1)}),[]),H=p&&!R;f({sectionId:d,interval:y,loop:I,autoPlay:H});var W=o.React.useCallback((function(t){o.jimuHistory.changeView(d,e[t])}),[d,e]);return Object(o.jsx)("div",{className:Object(o.classNames)("section-layout w-100",w,{"aspect-ratio-wrapper":O&&S>0}),css:x(S),"data-sectionid":d,style:m(m({},E),{transform:_}),onMouseEnter:p?V:null,onMouseLeave:p?F:null},Object(o.jsx)(s,{views:e,navInfo:n,animationPreview:l,playMode:u,currentIndex:L.currentIndex,previousIndex:L.previousIndex,progress:L.progress,loop:H&&I,viewTransition:c,layoutEntryComponent:P,viewVisibilityContext:T}),Object(o.jsx)(h,{sectionId:d,numOfViews:e.length,currentIndex:L.currentIndex,onCurrentViewChange:W}))}},function(t,e,n){"use strict";t.exports=function(t,e,n,o,i,r,a,l){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,i,r,a,l],c=0;(s=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M9 6V2.333C9 .939 10.408 0 12 0h8c1.592 0 3 .939 3 2.333V6h8a1 1 0 010 2h-3l-1.858 22.153A2 2 0 0124.148 32H7.852a2 2 0 01-1.994-1.847L4 8H1a1 1 0 010-2h8zm2 0h10V2c0-.078-10-.078-10 0v4zM6.006 8l1.846 22h16.296l1.846-22H6.006zM13 12a1 1 0 011 1v12a1 1 0 01-2 0V13a1 1 0 011-1zm6 0a1 1 0 011 1v12a1 1 0 01-2 0V13a1 1 0 011-1z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.185 0c.105 0 .195.118.232.24l.013.062.245 1.567c.294.145.588.29.85.465l.19.138 1.53-.603c.154-.05.264-.016.332.031l.036.03 1.224 2.11c.051.1.06.201-.01.302l-.05.06-1.286 1.025c.061.181.061.362.061.603 0 .181-.034.328-.052.467l-.01.136 1.409.965c.105.052.12.192.083.307l-.022.055-1.224 2.11c-.053.104-.195.163-.312.14l-.056-.019-1.53-.603a4.796 4.796 0 01-.82.494l-.22.109-.245 1.568c0 .103-.135.207-.25.234L7.246 12H4.798c-.157 0-.27-.089-.298-.19l-.253-1.619c-.293-.145-.587-.29-.85-.465l-.19-.138-1.53.603c-.153.05-.264.017-.332-.03l-.036-.03L.085 8.02c-.05-.101-.06-.202.01-.302l.051-.06 1.286-1.026c-.061-.18-.061-.362-.061-.603 0-.18.034-.328.051-.466l.01-.137-1.286-.965c-.104-.103-.164-.25-.14-.329L1.247 1.99c.102-.1.204-.16.342-.141l.087.02 1.469.603.419-.281c.135-.09.268-.17.407-.236l.214-.086.245-1.628c0-.103.135-.207.25-.234L4.738 0h2.448zm-.658 1h-1.2l-.243 1.627-.586.192a1.42 1.42 0 00-.3.154l-.503.335-.441.29-1.439-.593-.59 1.017 1.207.905v.5c0 .088-.003.147-.013.228l-.044.31a.577.577 0 00-.004.065l.005.26.005.027.223.66L1.258 8.05l.581 1.001 1.536-.604.45.356c.162.126.334.226.712.416l.618.304.23 1.476h1.274l.23-1.476.751-.371c.206-.106.342-.182.453-.258l.126-.091.451-.356 1.506.595.587-1.01-1.272-.872v-.607l.009-.117.048-.341.003-.035v-.18l-.003-.098-.004-.034-.225-.665 1.345-1.073-.581-1.002-1.535.605-.451-.355-.126-.092a5.312 5.312 0 00-.59-.326l-.614-.303L6.527 1zM6 3.75a2.25 2.25 0 110 4.5 2.25 2.25 0 010-4.5zm0 1a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M3.828 15H15V3.828l-2.05 2.05a.999.999 0 11-1.414-1.414L16 0l4.314 4.314A.999.999 0 1118.9 5.728l-1.899-1.899v11.172h11.172L25.972 12.8a.999.999 0 111.414-1.414l4.615 4.615-4.464 4.464a.999.999 0 11-1.414-1.414l2.05-2.05H17.001v11.172l2.05-2.05a.999.999 0 111.414 1.414l-4.464 4.464-4.615-4.615a.999.999 0 111.414-1.414l2.201 2.201V17.001H3.829L5.728 18.9a.999.999 0 11-1.414 1.414L0 16l4.464-4.464a.999.999 0 111.414 1.414L3.828 15z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 9 12" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 0A2.5 2.5 0 017 2.5V4h1a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h1V2.5A2.5 2.5 0 014.5 0zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2zm0-6a1.5 1.5 0 00-1.493 1.356L3 2.5V4h3V2.5a1.5 1.5 0 00-1.356-1.493L4.5 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.305 7.294L10.693.215a.79.79 0 011.083 0c.299.287.299.751 0 1.038L4.736 8l7.04 6.747c.299.287.299.751 0 1.038a.79.79 0 01-1.083 0l-7.388-7.08a.968.968 0 010-1.41z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M12.695 7.294L5.307.215a.79.79 0 00-1.083 0c-.299.287-.299.751 0 1.038L11.264 8l-7.04 6.747c-.299.287-.299.751 0 1.038a.79.79 0 001.083 0l7.388-7.08a.968.968 0 000-1.41z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 7V0h16v7H0zm1-6h14v5H1V1zM0 16V9h16v7H0zm1-6h14v5H1v-5z" fill="#000"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 12 8" xmlns="http://www.w3.org/2000/svg"><path d="M6 5.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm0 1a2.5 2.5 0 110-5 2.5 2.5 0 010 5zM6 1c-2.124 0-3.714.967-4.867 3C2.286 6.033 3.876 7 6 7s3.714-.967 4.867-3C9.714 1.967 8.124 1 6 1zm0 7C3.333 8 1.333 6.667 0 4c1.333-2.667 3.333-4 6-4s4.667 1.333 6 4c-1.333 2.667-3.333 4-6 4z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h11a1 1 0 011 1v11a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1zm0 1v11h11V4H4zm-4 7.5V1a1 1 0 011-1h9.5a.5.5 0 010 1H1v10.5a.5.5 0 01-1 0z" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 1l4.846 4.743a.508.508 0 010 .73.535.535 0 01-.746 0L8.527 2.976v12.508A.522.522 0 018 16a.522.522 0 01-.527-.516V2.976L3.9 6.473a.535.535 0 01-.746 0 .508.508 0 010-.73L8 1zm7.5-1a.5.5 0 010 1H.5a.5.5 0 010-1h15z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 11 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 2.5C6 1.12 7.122 0 8.507 0c1.263 0 2.308.932 2.481 2.144l.011.145a.487.487 0 01-.463.51l-.024.001a.525.525 0 01-.524-.483 1.28 1.28 0 00-.023-.185 1.504 1.504 0 00-1.313-1.125L8.507 1c-.782 0-1.425.595-1.497 1.356l-.007.144V4H8a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h5V2.5zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H1v3h14V1zM4 8H1v7h3V8zm11 0H8v7h7V8zm1-8v5H0V0h16zM5 7v9H0V7h5zm2 0v9h9V7H7z" fill="#000"></path></svg>'},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX3B1c2g8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MS4wMDAwMDAsIC0yNzAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi90cmFuc2l0aW9uL3B1c2giIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjAwMDAwMCwgMjE4LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNiIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05MiwwIEw5Miw3MiBMMCw3MiBMMCwwIEw5MiwwIFogTTkxLDM3IEwxLDM3IEwxLDcxIEw5MSw3MSBMOTEsMzcgWiBNNDYsNDQgTDU2LDU0IEw1MC4xNjY2NjY3LDU0IEw1MC4xNjY2NjY3LDY0IEw0MS44MzMzMzMzLDY0IEw0MS44MzMzMzMzLDU0IEwzNiw1NCBMNDYsNDQgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIiBmaWxsPSIjNkE2QTZBIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 14a.522.522 0 01-.527-.516V3.976L3.9 7.473a.535.535 0 01-.746 0 .508.508 0 010-.73L8 2l4.846 4.743a.508.508 0 010 .73.535.535 0 01-.746 0L8.527 3.976v9.508A.522.522 0 018 14z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 011.415 0l2.12 2.121a1 1 0 010 1.414l-8.935 8.937a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.087l.212-2.333a1 1 0 01.289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 010 1H.5a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports=s},function(t,e,n){"use strict";var o=n(78),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function s(t){return o.isMemo(t)?a:l[t.$$typeof]||i}l[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[o.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,h=Object.prototype;t.exports=function t(e,n,o){if("string"!=typeof n){if(h){var i=g(n);i&&i!==h&&t(e,i,o)}var a=c(n);d&&(a=a.concat(d(n)));for(var l=s(e),f=s(n),y=0;y<a.length;++y){var v=a[y];if(!(r[v]||o&&o[v]||f&&f[v]||l&&l[v])){var m=p(n,v);try{u(e,v,m)}catch(t){}}}}return e}},function(t,e){t.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 01.708 0 .464.464 0 010 .677l-2.833 2.71a.517.517 0 01-.708 0L.813 2.983a.464.464 0 010-.677.517.517 0 01.708 0z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3 3.5h6a.5.5 0 010 1H3a.5.5 0 010-1zm0 3h6a.5.5 0 010 1H3a.5.5 0 010-1zm0 3h2a.5.5 0 010 1H3a.5.5 0 010-1zm8.5-1A.5.5 0 0111 8V1H1v12h3.5a.5.5 0 010 1H1a1 1 0 01-1-1V1a1 1 0 011-1h10a1 1 0 011 1v7a.5.5 0 01-.5.5zm2.696 2.43A6.01 6.01 0 0116 12.925c-1.333 2.333-3.5 3-5 3a5.622 5.622 0 01-1.57-.23l.824-.824a5.2 5.2 0 00.746.054c1 0 2.731-.297 3.83-2a4.233 4.233 0 00-1.318-1.313l.684-.684zm-1.966-.863l-.871.871a5.177 5.177 0 00-.359-.012c-1 0-2.731.297-3.83 2 .313.485.677.856 1.062 1.139l-.676.676A6.082 6.082 0 016 12.926c1.333-2.334 3.5-3 5-3 .376 0 .794.042 1.23.141zm1.988-.58a.5.5 0 010 .707L8.56 15.85a.5.5 0 01-.707-.707l5.656-5.657a.5.5 0 01.708 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a4 4 0 014 4v8a4 4 0 01-4 4H4a4 4 0 01-4-4V4a4 4 0 014-4h8zm0 1H4a3 3 0 00-2.995 2.824L1 4v8a3 3 0 002.824 2.995L4 15h8a3 3 0 002.995-2.824L15 12V4a3 3 0 00-2.824-2.995L12 1zM8 4a4 4 0 110 8 4 4 0 010-8zm0 1a3 3 0 100 6 3 3 0 000-6z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a4 4 0 014 4v8a4 4 0 01-4 4H4a4 4 0 01-4-4V4a4 4 0 014-4h8zm0 1H4a3 3 0 00-2.995 2.824L1 4v8a3 3 0 002.824 2.995L4 15h8a3 3 0 002.995-2.824L15 12V4a3 3 0 00-2.824-2.995L12 1zM8 4a4 4 0 110 8 4 4 0 010-8z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 11"><path d="M4 8.5c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zm12 0c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zm12 0c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 32"><path d="M18.568 27.566c.873.913.873 2.392 0 3.305s-2.288.913-3.16 0L2.766 17.652a2.413 2.413 0 010-3.305L15.408 1.128c.873-.913 2.288-.913 3.16 0s.873 2.392 0 3.305L7.507 15.999l11.061 11.566z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 32"><path d="M1.473 27.897c-.898.939-.898 2.46 0 3.399s2.353.939 3.251 0L17.727 17.7a2.481 2.481 0 000-3.399L4.724.705c-.898-.939-2.353-.939-3.251 0s-.898 2.46 0 3.399L12.85 16.001 1.473 27.898z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M18 14h10.667a2 2 0 110 4H18v10.667a2 2 0 11-4 0V18H3.333a2 2 0 110-4H14V3.333a2 2 0 114 0V14z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M9.625 5C10.385 5 11 5.616 11 6.375v8.25c0 .76-.616 1.375-1.375 1.375h-8.25C.615 16 0 15.384 0 14.625v-8.25C0 5.615.616 5 1.375 5zM9.55 6h-8.1a.45.45 0 00-.45.45v8.1c0 .249.201.45.45.45h8.1a.45.45 0 00.45-.45v-8.1A.45.45 0 009.55 6zM8 12v1H3v-1h5zm6.625-12c.715 0 1.302.545 1.369 1.243l.006.132v8.25c0 .715-.545 1.302-1.243 1.369l-.132.006h-2.738v-.917h2.738a.458.458 0 00.45-.376l.008-.082v-8.25a.458.458 0 00-.376-.45l-.082-.008h-8.25a.458.458 0 00-.45.376l-.008.082v2.75H5v-2.75C5 .66 5.545.073 6.243.006L6.375 0h8.25zM8 10v1H3v-1h5zm0-2v1H3V8h5z" fill="#C5C5C5" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.462 12l10.235 10.235a1.034 1.034 0 11-1.462 1.462L12 13.462 1.765 23.697a1.034 1.034 0 11-1.462-1.462L10.538 12 .303 1.765A1.034 1.034 0 111.765.303L12 10.538 22.235.303a1.034 1.034 0 111.462 1.462L13.462 12z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 32"><path d="M1 0a1 1 0 011 1v30a1 1 0 01-2 0V1a1 1 0 011-1zm5 20v4h20v-4H6zm0-2h20a2 2 0 012 2v4a2 2 0 01-2 2H6a2 2 0 01-2-2v-4a2 2 0 012-2zM6 8v4h12V8H6zm0-2h12a2 2 0 012 2v4a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M.5 0a.5.5 0 01.5.5v15a.5.5 0 01-1 0V.5A.5.5 0 01.5 0zm5.973 3.154a.535.535 0 010 .746L2.976 7.473h12.508c.285 0 .516.236.516.527a.522.522 0 01-.516.527H2.976L6.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L1 8l4.743-4.846a.508.508 0 01.73 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 0a.5.5 0 01.5.5v15a.5.5 0 11-1 0V.5A.5.5 0 018 0zm4.973 5.154a.535.535 0 010 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527a.522.522 0 01-.516.527h-3.508l1.497 1.573a.535.535 0 010 .746.508.508 0 01-.73 0L9.5 8l2.743-2.846a.508.508 0 01.73 0zm-9.946 0a.508.508 0 01.73 0L6.5 8l-2.743 2.846a.508.508 0 01-.73 0 .535.535 0 010-.746l1.497-1.573H1.016A.522.522 0 01.5 8c0-.291.231-.527.516-.527h3.508L3.027 5.9a.535.535 0 010-.746z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 0a.5.5 0 01.5.5v15a.5.5 0 01-1 0V.5a.5.5 0 01.5-.5zm-5.243 3.154L15 8l-4.743 4.846a.508.508 0 01-.73 0 .535.535 0 010-.746l3.497-3.573H.516A.522.522 0 010 8c0-.291.231-.527.516-.527h12.508L9.527 3.9a.535.535 0 010-.746.508.508 0 01.73 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 9.5l2.846 2.743a.508.508 0 010 .73.535.535 0 01-.746 0l-1.573-1.497v3.508A.522.522 0 018 15.5a.522.522 0 01-.527-.516v-3.508L5.9 12.973a.535.535 0 01-.746 0 .508.508 0 010-.73L8 9.5zm0-9c.291 0 .527.231.527.516v3.508L10.1 3.027a.535.535 0 01.746 0 .508.508 0 010 .73L8 6.5 5.154 3.757a.508.508 0 010-.73.535.535 0 01.746 0l1.573 1.497V1.016C7.473.731 7.709.5 8 .5zm-7.5 7h15a.5.5 0 110 1H.5a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 15a.5.5 0 010 1H.5a.5.5 0 010-1h15zM8 0c.291 0 .527.231.527.516v12.508L12.1 9.527a.535.535 0 01.746 0 .508.508 0 010 .73L8 15l-4.846-4.743a.508.508 0 010-.73.535.535 0 01.746 0l3.573 3.497V.516C7.473.231 7.709 0 8 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.086 8.5H10v-1h3.086L12.06 6.475a.5.5 0 11.707-.707L15 8l-2.157 2.157a.5.5 0 11-.707-.707l.95-.95zm-10.172 0l.95.95a.5.5 0 11-.707.707L1 8l2.232-2.232a.5.5 0 11.707.707L2.914 7.5H6v1H2.914zM15 1H1v14h14V1zm1 0v14a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h14a1 1 0 011 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 2.914V6h-1V2.914L6.475 3.94a.5.5 0 01-.707-.707L8 1l2.157 2.157a.5.5 0 01-.707.707l-.95-.95zm0 10.172l.95-.95a.5.5 0 01.707.707L8 15l-2.232-2.232a.5.5 0 01.707-.707L7.5 13.086V10h1v3.086zM1 1v14h14V1H1zm0-1h14a1 1 0 011 1v14a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.293 1H12.95a.5.5 0 010-1H16v3.157a.5.5 0 11-1 0v-1.45L8.707 8l6.29 6.29v-1.55a.5.5 0 011 0v3.263H12.84a.5.5 0 010-1h1.456L8 8.707l-6.296 6.296h1.453a.5.5 0 110 1H0V12.74a.5.5 0 011 0v1.553L7.293 8 1 1.707v1.45a.5.5 0 11-1 0V0h3.05a.5.5 0 010 1H1.707L8 7.293 14.293 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7.433.2a.903.903 0 011.134 0l7 5.024c.1.079.188.178.257.292.313.517.198 1.223-.257 1.578l-7 4.706a.903.903 0 01-1.134 0l-7-4.706a1.078 1.078 0 01-.257-.292c-.313-.516-.198-1.223.257-1.578l7-5.024zM15 6.16L8 1.134 1 6.159l7 4.706 7-4.706zM.777 10.083L8 14.899l7.223-4.815a.5.5 0 11.554.832l-7.5 5a.5.5 0 01-.554 0l-7.5-5a.5.5 0 11.554-.832z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 14.084l.948-.948a.5.5 0 01.708.707L7.999 16l-2.233-2.232a.5.5 0 01.708-.707L7.5 14.087V1h-7a.5.5 0 010-1h15a.5.5 0 010 1h-7v13.084zM1.5 7a.5.5 0 010-1H6v1H1.5zm13 0H10V6h4.5a.5.5 0 010 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 1.916V15h7a.5.5 0 010 1H.5a.5.5 0 010-1h7V1.913L6.474 2.939a.5.5 0 01-.708-.707L8 0l2.157 2.157a.5.5 0 01-.708.707L8.5 1.916zM1.5 9H6v1H1.5a.5.5 0 010-1zm13 0a.5.5 0 010 1H10V9h4.5z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 13.084l.948-.948a.5.5 0 01.708.707L7.999 15l-2.233-2.232a.5.5 0 01.708-.707L7.5 13.087V1h-7a.5.5 0 010-1h15a.5.5 0 010 1h-7v12.084zM.5 16a.5.5 0 010-1h15a.5.5 0 010 1H.5zm1-9a.5.5 0 010-1H6v1H1.5zm13 0H10V6h4.5a.5.5 0 010 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8.5 2.916V15h7a.5.5 0 010 1H.5a.5.5 0 010-1h7V2.913L6.474 3.939a.5.5 0 01-.708-.707L8 1l2.157 2.157a.5.5 0 01-.708.707L8.5 2.916zM.5 0h15a.5.5 0 010 1H.5a.5.5 0 010-1zm1 9H6v1H1.5a.5.5 0 010-1zm13 0a.5.5 0 010 1H10V9h4.5z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 20 6" xmlns="http://www.w3.org/2000/svg"><path d="M4 .5v2h1v1H4v2L0 3 4 .5zm12 0L20 3l-4 2.5v-2h-1v-1h1v-2zm-8 2v1H6v-1h2zm3 0v1H9v-1h2zm3 0v1h-2v-1h2z" fill="#8B8B8B" fill-rule="evenodd"></path></svg>'},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX2ZhZGU8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNjEuMDAwMDAwLCAtMTUwLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbC1MMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb24vYW5pbWF0aW9uL3RyYW5zaXRpb24vZmFkZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjAwMDAwMCwgOTguMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS0xMyIgb3BhY2l0eT0iMC4xMDAwMDAwMDEiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS0yIiBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI0OCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsLW9wYWNpdHk9IjAuNSIgZmlsbD0iIzM2MzYzNiIgeD0iMCIgeT0iMCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjQ4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02NCwwIEw2NCw0OCBMMCw0OCBMMCwwIEw2NCwwIFogTTYzLDEgTDEsMSBMMSw0NyBMNjMsNDcgTDYzLDEgWiIgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzZBNkE2QSIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.637 15.866L30.951 27.18a2.667 2.667 0 01-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 01.781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 014.552.781l11.314 11.314L27.18.781a2.667 2.667 0 013.771 3.771L19.637 15.866z"></path></svg>'},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9ub25lPC90aXRsZT4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQxLjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi9pbi9ub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMDAwMDAsIDE0MC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTUiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyLUNvcHktNiIgZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSI0NiA0OCAzMS44OTMxNTM5IDU1LjQxNjQwNzkgMzQuNTg3MzIxOCAzOS43MDgyMDM5IDIzLjE3NDY0MzYgMjguNTgzNTkyMSAzOC45NDY1NzcgMjYuMjkxNzk2MSA0NiAxMiA1My4wNTM0MjMgMjYuMjkxNzk2MSA2OC44MjUzNTY0IDI4LjU4MzU5MjEgNTcuNDEyNjc4MiAzOS43MDgyMDM5IDYwLjEwNjg0NjEgNTUuNDE2NDA3OSI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 5.5v-5a.5.5 0 011 0v5h5a.5.5 0 010 1h-5v5a.5.5 0 01-1 0v-5h-5a.5.5 0 010-1h5z" fill="#000" fill-rule="nonzero"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 9.56a.5.5 0 00.708 0L6 4.208l5.146 5.354a.5.5 0 00.708-.708l-5.5-5.707a.5.5 0 00-.708 0l-5.5 5.707a.5.5 0 000 .708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},function(t,e){t.exports='<svg viewBox="0 0 12 10" xmlns="http://www.w3.org/2000/svg"><path d="M6.62 6.366L4.635 4.379a1.5 1.5 0 001.987 1.987zm.746-.745a1.5 1.5 0 00-1.987-1.987l1.987 1.987zM3.899 3.644l-.825-.825C2.322 3.314 1.678 4.038 1.133 5 2.286 7.033 3.876 8 6 8c.702 0 1.345-.106 1.934-.32L7.356 7.1A2.5 2.5 0 013.9 3.645zm.745-.745A2.5 2.5 0 018.1 6.355l.826.826c.752-.495 1.396-1.219 1.941-2.181C9.714 2.967 8.124 2 6 2c-.702 0-1.345.106-1.934.32l.578.579zM2.354 2.1L1.155.9A.527.527 0 011.9.154l1.4 1.4C4.107 1.184 5.008 1 6 1c2.667 0 4.667 1.333 6 4-.634 1.268-1.419 2.235-2.355 2.9l1.2 1.2a.527.527 0 01-.745.746l-1.4-1.4C7.893 8.816 6.992 9 6 9 3.333 9 1.333 7.667 0 5c.634-1.268 1.419-2.235 2.355-2.9z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 5H1v6h5V5zM0 4v8h7V4H0zM15 5h-5v6h5V5zM9 4v8h7V4H9z" fill="#000"></path></svg>'},function(t,e,n){"use strict";t.exports=n(79)},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,r=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,s=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,c=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.async_mode"):60111,p=o?Symbol.for("react.concurrent_mode"):60111,g=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,f=o?Symbol.for("react.suspense_list"):60120,y=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116,m=o?Symbol.for("react.block"):60121,b=o?Symbol.for("react.fundamental"):60117,x=o?Symbol.for("react.responder"):60118,I=o?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case d:case p:case a:case s:case l:case h:return t;default:switch(t=t&&t.$$typeof){case c:case g:case v:case y:case u:return t;default:return e}}case r:return e}}}function j(t){return w(t)===p}e.AsyncMode=d,e.ConcurrentMode=p,e.ContextConsumer=c,e.ContextProvider=u,e.Element=i,e.ForwardRef=g,e.Fragment=a,e.Lazy=v,e.Memo=y,e.Portal=r,e.Profiler=s,e.StrictMode=l,e.Suspense=h,e.isAsyncMode=function(t){return j(t)||w(t)===d},e.isConcurrentMode=j,e.isContextConsumer=function(t){return w(t)===c},e.isContextProvider=function(t){return w(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===g},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===v},e.isMemo=function(t){return w(t)===y},e.isPortal=function(t){return w(t)===r},e.isProfiler=function(t){return w(t)===s},e.isStrictMode=function(t){return w(t)===l},e.isSuspense=function(t){return w(t)===h},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===p||t===s||t===l||t===h||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===y||t.$$typeof===u||t.$$typeof===c||t.$$typeof===g||t.$$typeof===b||t.$$typeof===x||t.$$typeof===I||t.$$typeof===m)},e.typeOf=w},function(t,e,n){"use strict";n.r(e),n.d(e,"withRnd",(function(){return Ss})),n.d(e,"CanvasPane",(function(){return vo})),n.d(e,"bindDragHandler",(function(){return mt})),n.d(e,"GLOBAL_DRAGGING_CLASS_NAME",(function(){return ft})),n.d(e,"GLOBAL_H5_DRAGGING_CLASS_NAME",(function(){return yt})),n.d(e,"bindResizeHandler",(function(){return jt})),n.d(e,"GLOBAL_RESIZING_CLASS_NAME",(function(){return It})),n.d(e,"sectionMenuItems",(function(){return ge})),n.d(e,"Toolbar",(function(){return Nt})),n.d(e,"LayoutEntry",(function(){return nn})),n.d(e,"PageRenderer",(function(){return hs})),n.d(e,"LayoutBuilder",(function(){return Co})),n.d(e,"ColumnLayoutBuilder",(function(){return ei})),n.d(e,"CommonLayoutItemSetting",(function(){return si})),n.d(e,"CommonTransformSetting",(function(){return ci})),n.d(e,"FixedLayoutItemSetting",(function(){return Si})),n.d(e,"FlowLayoutItemSetting",(function(){return Xi})),n.d(e,"ColumnLayoutItemSetting",(function(){return nr})),n.d(e,"FlowLayoutSetting",(function(){return lr})),n.d(e,"LayoutItemInBuilder",(function(){return mn})),n.d(e,"addItemToLayout",(function(){return F})),n.d(e,"getRootLayoutId",(function(){return N})),n.d(e,"DropArea",(function(){return ke})),n.d(e,"mergeWidgetsIntoColumn",(function(){return X})),n.d(e,"duplicateLayoutItem",(function(){return E})),n.d(e,"pendLayoutItem",(function(){return B})),n.d(e,"supportFloating",(function(){return J})),n.d(e,"supportSinking",(function(){return q})),n.d(e,"floatingLayoutItem",(function(){return Q})),n.d(e,"sinkingLayoutItem",(function(){return K})),n.d(e,"createPageFromTemplate",(function(){return Cs})),n.d(e,"createDialogFromTemplate",(function(){return Ps})),n.d(e,"createSectionFromTemplate",(function(){return Ts})),n.d(e,"createWidgetFromTemplate",(function(){return As})),n.d(e,"fixedLayoutActions",(function(){return o}));var o={};n.r(o),n.d(o,"bringForward",(function(){return xn})),n.d(o,"bringToFront",(function(){return In})),n.d(o,"sendBackward",(function(){return wn})),n.d(o,"sendToBack",(function(){return jn})),n.d(o,"toggleLockLayout",(function(){return On})),n.d(o,"alignTo",(function(){return Sn})),n.d(o,"alignFullWidth",(function(){return Cn})),n.d(o,"alignVerticalCenter",(function(){return Tn})),n.d(o,"alignHorizontalCenter",(function(){return An})),n.d(o,"alignFullHeight",(function(){return Mn})),n.d(o,"alignFullSize",(function(){return Rn}));var i,r,a,l,s,u,c,d,p,g=n(0),h=n(3),f=n(2),y=n(16),v=n(1),m=n(12),b=g.React.createContext({}),x=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},I=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(){return(w=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},j=Object(g.css)(r||(r=x(["\n  width: 50px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],["\n  width: 50px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),O=[{name:"flip",options:{fallbackPlacements:["top","right"]}}],S=function(t){function e(e){var n=t.call(this,e)||this;return n.togglePopper=function(){var t=n.props,e=t.settingPanel,o=t.uid,i=e&&n.contextProps.activeItem===o&&n.contextProps.toggleOn;n.setState({showPopper:!i})},v.utils.autoBindHandlers(n,["select"]),n.state={showPopper:!1},n}return I(e,t),e.prototype.select=function(t){if(t.stopPropagation(),this.props.onClick){var e=this.contextProps.parentRef;this.props.onClick({layoutId:this.contextProps.layoutId,layoutItem:this.contextProps.layoutItem,clientRect:e&&e.getBoundingClientRect()},t),this.contextProps.onItemClick(this.props.uid),this.togglePopper()}},e.prototype.getValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.getStyle=function(){var t=this.contextProps.theme;return Object(g.css)(a||(a=x(["\n      cursor: pointer;\n      width: 32px;\n      min-height: 32px;\n      display: flex;\n      justify-content: flex-start;\n      user-select: none;\n      background: ",";\n\n      &:hover {\n        background: ",";\n      }\n      &.selected {\n        background: ",";\n      }\n\n      &.disabled,\n      &.no-action {\n        cursor: default;\n        pointer-events: none;\n        &:hover {\n          background: ",";\n        }\n        &.msg {\n          color: ",";\n        }\n      }\n\n      &.msg {\n        width: auto;\n        font-size: 12px;\n        color: ",";\n        letter-spacing: 0.33px;\n        text-align: center;\n        padding: 0 8px;\n        &:hover {\n          background: ",";\n        }\n      }\n\n      .toolbar-group & {\n        justify-content: flex-start;\n      }\n\n      .popper {\n        border: 1px solid ",";\n      }\n    "],["\n      cursor: pointer;\n      width: 32px;\n      min-height: 32px;\n      display: flex;\n      justify-content: flex-start;\n      user-select: none;\n      background: ",";\n\n      &:hover {\n        background: ",";\n      }\n      &.selected {\n        background: ",";\n      }\n\n      &.disabled,\n      &.no-action {\n        cursor: default;\n        pointer-events: none;\n        &:hover {\n          background: ",";\n        }\n        &.msg {\n          color: ",";\n        }\n      }\n\n      &.msg {\n        width: auto;\n        font-size: 12px;\n        color: ",";\n        letter-spacing: 0.33px;\n        text-align: center;\n        padding: 0 8px;\n        &:hover {\n          background: ",";\n        }\n      }\n\n      .toolbar-group & {\n        justify-content: flex-start;\n      }\n\n      .popper {\n        border: 1px solid ",";\n      }\n    "])),t.colors.palette.light[300],t.colors.palette.light[500],t.colors.primary,t.colors.palette.light[300],t.colors.palette.dark[400],t.colors.black,t.colors.palette.light[500],t.colors.palette.dark[400])},e.prototype.separatorStyle=function(){var t=this.contextProps.theme;return this.props.isInGroup?Object(g.css)(l||(l=x(["\n        width: 100%;\n        height: 1px;\n        background-color: ",";\n        align-self: center;\n      "],["\n        width: 100%;\n        height: 1px;\n        background-color: ",";\n        align-self: center;\n      "])),t.colors.palette.light[600]):Object(g.css)(s||(s=x(["\n      div.toolbar-item + &,\n      div.toolbar-group + & {\n        display: block;\n      }\n      display: none;\n      width: 1px;\n      height: 30px;\n      border-left: 1px solid ",";\n      align-self: center;\n    "],["\n      div.toolbar-item + &,\n      div.toolbar-group + & {\n        display: block;\n      }\n      display: none;\n      width: 1px;\n      height: 30px;\n      border-left: 1px solid ",";\n      align-self: center;\n    "])),t.colors.palette.light[600])},e.prototype.tooltipStyle=function(){var t=this.contextProps.theme;return Object(g.css)(u||(u=x(["\n      border: none;\n\n      .tooltip {\n        color: ",";\n        background-color: ",";\n        border-color: ",";\n      }\n    "],["\n      border: none;\n\n      .tooltip {\n        color: ",";\n        background-color: ",";\n        border-color: ",";\n      }\n    "])),t.colors.black,t.colors.palette.light[600],t.colors.palette.light[300])},e.prototype.render=function(){var t=this,e=this.props,n=e.icon,o=e.autoFlipIcon,i=e.label,r=e.size,a=e.checked,l=e.disabled,s=e.visible,u=e.rotate,d=e.settingPanel,p=e.title,h=e.uid,y=e.widgetId,v=e.className;if(e.seperator)return Object(g.jsx)(b.Consumer,null,(function(e){return t.contextProps=e,Object(g.jsx)("div",{"data-testid":"toolbarSeparator",css:t.separatorStyle()})}));var m=null==this.props.onClick,I=r||16,S=d;return Object(g.jsx)(b.Consumer,null,(function(e){if(t.contextProps=e,y&&e.layoutItem.widgetId!==y)return null;var r="";"function"==typeof p?r=p(e):"string"==typeof p&&(r=p);var b=d&&e.activeItem===h&&e.toggleOn,C=b||t.getValue(a,e),P=t.getValue(l,e),T=t.getValue(s,e),A=t.getValue(i,e),M=t.getValue(n,e);return null==s||T?Object(g.jsx)("div",{className:Object(g.classNames)("toolbar-item",v,{selected:C,disabled:P,msg:A,"no-action":m}),css:t.getStyle()},!S&&Object(g.jsx)(f.Tooltip,{placement:"bottom",title:A?"":r,modifiers:O,css:t.tooltipStyle()},Object(g.jsx)("div",{className:"d-flex justify-content-start align-items-center w-100",onClick:t.select},M&&Object(g.jsx)("div",{className:"icon-container",css:j},Object(g.jsx)(f.Icon,{className:Object(g.classNames)("tool-item-icon",{checked:C}),icon:M,rotate:u,size:I,color:e.theme.colors.black,autoFlip:o})),A&&Object(g.jsx)("span",{className:"pl-2 text-nowrap"},A))),S&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(f.Tooltip,{placement:"bottom",title:A?"":r,modifiers:O,css:t.tooltipStyle()},Object(g.jsx)("div",{ref:function(e){return t.reference=e},css:j,onClick:t.select},M&&Object(g.jsx)(f.Icon,{className:Object(g.classNames)("tool-item-icon",{checked:C}),icon:M,rotate:u,size:I,color:e.theme.colors.black,autoFlip:o}),A&&Object(g.jsx)("span",null,A))),Object(g.jsx)(f.Popper,{placement:"bottom-start",reference:t.reference,open:b,disablePortal:!0},Object(g.jsx)("div",{css:Object(g.css)(c||(c=x(["\n                          display: flex;\n                          pointer-events: all;\n                          background-color: ",";\n                          border-radius: 2px;\n                          box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n                        "],["\n                          display: flex;\n                          pointer-events: all;\n                          background-color: ",";\n                          border-radius: 2px;\n                          box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n                        "])),e.theme.colors.white),className:"d-flex"},b&&Object(g.jsx)(S,w({},e)))))):null}))},e}(g.React.PureComponent),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},T=function(){return(T=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},A=function(){},M=[{name:"preventOverflow",options:{boundariesElement:"viewport",padding:{bottom:20}}}],R=function(t){function e(e){var n=t.call(this,e)||this;return n.handleOutsideClick=function(t){var e=n.contextProps,o=e.activeItem,i=e.toggleOn;o===n.props.uid&&i&&!n.ref.contains(t.target)&&n.contextProps.onItemClick(n.props.uid)},v.utils.autoBindHandlers(n,["togglePopToolItems","onItemClick"]),n}return C(e,t),e.prototype.componentDidMount=function(){document.addEventListener("click",this.handleOutsideClick)},e.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleOutsideClick)},e.prototype.getBaseStyle=function(){var t=this.contextProps.theme;return Object(g.css)(d||(d=P(["\n      cursor: pointer;\n      min-width: 50px;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      background-color: ",";\n\n      &:hover {\n        background-color: "," !important;\n      }\n    "],["\n      cursor: pointer;\n      min-width: 50px;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      background-color: ",";\n\n      &:hover {\n        background-color: "," !important;\n      }\n    "])),t.colors.palette.light[300],t.colors.palette.light[500])},e.prototype.getPopStyle=function(){return Object(g.css)(p||(p=P(["\n      display: flex;\n      pointer-events: all;\n      background-color: ",";\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n      padding: 4px 0;\n\n      .toolbar-item {\n        .icon-container {\n          width: auto;\n        }\n      }\n    "],["\n      display: flex;\n      pointer-events: all;\n      background-color: ",";\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n      padding: 4px 0;\n\n      .toolbar-item {\n        .icon-container {\n          width: auto;\n        }\n      }\n    "])),this.contextProps.theme.colors.palette.light[300])},e.prototype.getValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.togglePopToolItems=function(t){t&&t.stopPropagation(),this.contextProps.onItemClick(this.props.uid)},e.prototype.onItemClick=function(t,e){var n=this.contextProps.parentRef;t.onClick(T(T({},e),{clientRect:n.getBoundingClientRect()}))},e.prototype.createToolItem=function(t,e,n){var o=this;return t.onClick||t.seperator?Object(g.jsx)(S,T({key:n,uid:this.props.uid+"_"+(n+1),isInGroup:!0},t,{onClick:function(){return o.onItemClick(t,e)}})):null},e.prototype.getGroupMenu=function(t,e){var n=this.contextProps.theme;return t?Object(g.jsx)(f.Icon,{rotate:t.rotate,icon:t.icon,size:t.size||16,color:n.colors.black}):e[0].icon?Object(g.jsx)(f.Icon,{icon:e[0].icon,size:e[0].size||16,color:n.colors.black}):Object(g.jsx)(S,T({uid:this.props.uid+"_0",onClick:A},e[0]))},e.prototype.render=function(){var t=this,e=this.props,o=e.tools,i=e.uid;return o&&0!==o.length?Object(g.jsx)(b.Consumer,null,(function(e){t.contextProps=e;var r=o[0].visible,a=t.getValue(r,e);if(void 0!==r&&!a)return null;var l,s=o.filter((function(n){var o=n.visible,i=t.getValue(o,e);return void 0===o||i}));return 0===s.length?null:1===s.length?Object(g.jsx)(S,T({uid:i+"_0"},s[0])):(s.some((function(n){var o=n.checked;if(t.getValue(o,e))return l=n,!0})),Object(g.jsx)("div",{className:"toolbar-group",css:t.getBaseStyle(),ref:function(e){return t.ref=e},onClick:t.togglePopToolItems},Object(g.jsx)("div",{ref:function(e){return t.reference=e},className:"d-flex w-100 justify-content-around align-items-center"},t.getGroupMenu(l,s),Object(g.jsx)(f.Icon,{icon:n(46),size:8,color:e.theme.colors.black})),e.activeItem===i&&e.toggleOn&&Object(g.jsx)(f.Popper,{toggle:t.togglePopToolItems,placement:"bottom",modifiers:M,reference:t.reference,open:!0},Object(g.jsx)("div",{css:t.getPopStyle(),className:"d-flex flex-column"},s.map((function(n,o){return t.createToolItem(n,e,o)}))))))})):null},e}(g.React.PureComponent),z=function(){return(z=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},k=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},L=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};function N(){if(v.utils.getCurrentDialogId())return v.utils.getCurrentDialogRootLayoutId();switch(v.utils.getActivePagePart()){case g.PagePart.Header:return v.utils.getHeaderRootLayoutId();case g.PagePart.Footer:return v.utils.getFooterRootLayoutId();default:return v.utils.getCurrentPageRootLayoutId()}}function B(t){var e=Object(h.getAppConfigAction)();e.setLayoutItemToPending(t,!0),window.jimuConfig.isBuilder?(e.exec(),h.builderAppSync.publishChangeSelectionToApp(null)):Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(e.appConfig,null))}function E(t){var e=t.layoutId,n=t.layoutItemId,o=Object(h.getAppConfigAction)(),i=o.duplicateLayoutItem(e,e,n,!0),r=o.appConfig,a=r.layouts[e];if(a.type===g.LayoutType.FixedLayout)r=_(r,i);else if(a.type===g.LayoutType.FlowLayout)r=V(r,t,i);else{var l=v.searchUtils.getWidgetIdThatUseTheLayoutId(o.appConfig,e);if(l)switch(o.appConfig.widgets[l].manifest.name){case"column":r=V(r,t,i);break;case"row":r=function(t,e,n){var o=t,i=e.layoutId,r=t.layouts[i],a=function(t,e){return parseInt(o.layouts[i].content[t].bbox[e],10)},l=function(t,e,n){o=o.setIn(["layouts",i,"content",t,"bbox",e],n)},s=Object.keys(r.content).sort((function(t,e){return a(t,"left")-a(e,"left")})),u=s.indexOf(n.layoutItemId);s.splice(u,1);var c=s.indexOf(e.layoutItemId);s.splice(c+1,0,n.layoutItemId),o=o.setIn(["layouts",i,"order"],s);for(var d=0,p=0;p<s.length;p++)d+=a(s[p],"width");if(l(s[0],"left",0),d<=12)for(p=1;p<s.length;p++)l(s[p],"left",a(s[p-1],"left")+a(s[p-1],"width"));else{var g=d/12;l(s[0],"width",Math.max(1,Math.floor(a(s[0],"width")/g)));for(p=1;p<s.length;p++)l(s[p],"left",a(s[p-1],"left")+a(s[p-1],"width")),l(s[p],"width",Math.max(1,Math.floor(a(s[p],"width")/g)))}return o}(r,t,i);break;case"fixed":r=_(r,i)}}window.jimuConfig.isBuilder?(Object(h.getAppConfigAction)(r).exec(),h.builderAppSync.publishChangeSelectionToApp(i)):Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(r,i))}function D(t,e){var n,o,i=Object(h.getAppConfigAction)(),r=t.layoutId,a=t.layoutItemId;if(null===(o=null===(n=i.appConfig.layouts[r])||void 0===n?void 0:n.content)||void 0===o?void 0:o[a]){var l=i.appConfig.layouts[e].type;l===g.LayoutType.FlowLayout?function(t,e){var n,o,i;k(this,void 0,Promise,(function(){var r,a,l,s,u,c,d,p,f;return L(this,(function(y){switch(y.label){case 0:return r=Object(h.getAppConfigAction)(),a=t.layoutId,l=t.layoutItemId,s=t.width,u=t.height,c=r.duplicateLayoutItem(a,a,l,!0),d=null!==(o=null===(n=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===n?void 0:n.zoomScale)&&void 0!==o?o:1,-1===(p=function(t,e,n){var o=window.parent.document.querySelector('iframe[name="_appWindow"]'),i=document.querySelectorAll('div.flow-layout[data-layoutid="'+t+'"] > div.trail-container > div.builder-layout-item'),r=-1,a=2;if(o&&i){var l=o.getBoundingClientRect();i.forEach((function(t,e){if(-1===r){var n=t.getBoundingClientRect();(n.top+l.top>=0||n.top+n.height+l.top>=0)&&(r=e+1)}})),a=Math.round(12*e*n/l.width)}return{colSpan:a,insertIndex:r}}(e,s,d)).insertIndex&&(p.insertIndex=(null===(i=r.appConfig.layouts[e].order)||void 0===i?void 0:i.length)||0),r.appConfig.layouts[a].type!==g.LayoutType.FlowLayout?[3,2]:[4,F(r.appConfig,{layoutInfo:c},{layoutId:e},{left:0,top:0,width:s,height:u},{left:0,top:0,width:s,height:u},p.insertIndex)];case 1:return f=y.sent().updatedAppConfig,window.jimuConfig.isBuilder?(Object(h.getAppConfigAction)(f).exec(),h.builderAppSync.publishChangeSelectionToApp(c)):Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(f,c)),[3,3];case 2:$({layoutInfo:c},{layoutId:e},{left:0,top:0,width:s,height:u},{left:0,top:0,width:s,height:u},p.colSpan,p.insertIndex,r.appConfig).catch((function(t){return console.error(t)})),y.label=3;case 3:return[2]}}))}))}(t,e):l===g.LayoutType.FixedLayout?function(t,e,n){var o,i,r,a;void 0===n&&(n=null);var l=Object(h.getAppConfigAction)(),s=t.layoutId,u=t.layoutItemId,c=t.width,d=t.height,p=(null===(i=null===(o=l.appConfig.layouts[s])||void 0===o?void 0:o.content)||void 0===i?void 0:i[u]).bbox,f=l.duplicateLayoutItem(s,s,u,!0),y=null!==(a=null===(r=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===r?void 0:r.zoomScale)&&void 0!==a?a:1;F(l.appConfig,{layoutInfo:f},{layoutId:e},{left:0,right:0,width:c,height:d},{left:0,right:0,width:c,height:d}).then((function(t){var o=t.layoutInfo,i=t.updatedAppConfig;if(l=Object(h.getAppConfigAction)(i),n||(n=function(t){var e,n,o,i,r,a=window.parent.document.querySelector('div[data-layoutid="right-sidebar-left-layout"]'),l=window.parent.document.querySelector('iframe[name="_appWindow"]');if(a&&l){var s=a.getBoundingClientRect(),u=l.getBoundingClientRect();if(n=u.left,o=u.top,i=u.width,r=u.height,t){var c=l.contentDocument||l.contentWindow.document;if(e=c.querySelector('div.layout[data-layoutid="'+t+'"]')){var d=e.getBoundingClientRect();n+=d.left,o+=d.top,i=d.width,r=d.height}}var p=n>=s.left?0:s.left-n,g=o>=s.top?0:s.top-o;return{left:p,top:g,width:i,height:r}}return null}(e)),n){var r=n.width/y,a=n.height/y;l.editLayoutItemBBox(o,v.utils.replaceBoundingBox(p,{left:0,top:0,right:0,bottom:0,width:Math.round(c),height:Math.round(d)},{width:r,height:a}))}l.editLayoutItemSetting(o,{vCenter:!0,hCenter:!0});var s=l.appConfig.layouts[o.layoutId].content[o.layoutItemId].bbox;l.editLayoutItemBBox(o,s.set("left","50%").set("top","50%")),Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(l.appConfig,o))}))}(t,e):console.error("unknown layout type: "+l)}}function _(t,e){var n,o,i=e.layoutId,r=e.layoutItemId,a=t.layouts[i].content[r],l=a.bbox,s=a.setting,u=function(t){if(v.utils.isPercentage(t))return parseFloat(t)+5+"%";var e=parseInt(t,10);return isNaN(e)?t:e+20};return l=(null===(n=null==s?void 0:s.autoProps)||void 0===n?void 0:n.left)?l.set("right",u(l.right)):l.set("left",u(l.left)),l=(null===(o=null==s?void 0:s.autoProps)||void 0===o?void 0:o.top)?l.set("bottom",u(l.bottom)):l.set("top",u(l.top)),(null==s?void 0:s.hCenter)&&(null==s?void 0:s.vCenter)&&(s=s.set("vCenter",!1)),t.setIn(["layouts",i,"content",r,"bbox"],l).setIn(["layouts",i,"content",r,"setting"],s)}function V(t,e,n){var o,i=e.layoutId,r=t.layouts[i],a=[].concat(r.order),l=a.indexOf(n.layoutItemId);a.splice(l,1);var s=a.indexOf(e.layoutItemId);a.splice(s+1,0,n.layoutItemId);var u=r.content[n.layoutItemId],c=t.setIn(["layouts",i,"order"],a);return(null===(o=u.setting)||void 0===o?void 0:o.isFloating)&&(c=_(c,n)),c}function F(t,e,n,o,i,r){return k(this,void 0,Promise,(function(){var a;return L(this,(function(l){switch(l.label){case 0:return a=e.layoutInfo,e.id?[4,H(t,e,n,o,i,r)]:[3,2];case 1:return[2,l.sent()];case 2:return a&&a.layoutId&&a.layoutItemId?[4,W(t,e,n,o,i,r)]:[3,4];case 3:return[2,l.sent()];case 4:return e.itemType!==g.LayoutItemType.Section?[3,6]:[4,G(t,n,o,i,r)];case 5:return[2,l.sent()];case 6:return e.uri?[4,U(t,e,n,o,i,r)]:[3,8];case 7:return[2,l.sent()];case 8:return[4,Y(t,e,n,o,i,r)];case 9:return[2,l.sent()]}}))}))}function H(t,e,n,o,i,r){var a;return k(this,void 0,Promise,(function(){var l,s,u,c,d,p,f,y,m;return L(this,(function(b){switch(b.label){case 0:return s=Object(h.getAppConfigAction)(t),u=""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),l=e.itemType===g.LayoutItemType.Section?Object(g.Immutable)({id:u,type:g.LayoutItemType.Section,bbox:v.utils.replaceBoundingBox(null,i,o),sectionId:e.id}):Object(g.Immutable)({id:u,type:g.LayoutItemType.Widget,bbox:v.utils.replaceBoundingBox(null,i,o),widgetId:e.id}),c=e.layoutInfo,d=c.layoutId,p=c.layoutItemId,f=t.layouts[d].content[p],(null===(a=f.setting)||void 0===a?void 0:a.lockParent)&&(l=l.setIn(["setting","lockParent"],!0)),e.isFromCurrentSizeMode||(y=v.searchUtils.getBrowserSizeModeByLayoutId(s.appConfig,e.layoutInfo.layoutId)),m=s.addItemIntoLayout(n.layoutId,l,r,y),e.isFromCurrentSizeMode&&s.removeLayoutItem(e.layoutInfo,!1),[4,Promise.resolve({layoutInfo:m,updatedAppConfig:s.appConfig})];case 1:return[2,b.sent()]}}))}))}function W(t,e,n,o,i,r){var a,l,s,u;return k(this,void 0,Promise,(function(){var c,d,p,g,f,y,m,b;return L(this,(function(x){switch(x.label){case 0:return c=e.layoutInfo,d=Object(h.getAppConfigAction)(t),p=c.layoutId,g=c.layoutItemId,p!==n.layoutId?[3,2]:((f=null===(u=null===(s=null===(l=null===(a=d.appConfig.layouts)||void 0===a?void 0:a[p])||void 0===l?void 0:l.content)||void 0===s?void 0:s[g])||void 0===u?void 0:u.bbox)&&(y=(y=v.utils.replaceBoundingBox(f,i,o)).set("width",f.width).set("height",f.height),d.editLayoutItemBBox(c,y)),r>=0&&d.editLayoutItemIndex(c,n,r),d.setLayoutItemToPending(c,!1),[4,Promise.resolve({layoutInfo:c,updatedAppConfig:d.appConfig})]);case 1:return[2,x.sent()];case 2:return m=d.moveLayoutItemToAnotherLayout(c,n,v.utils.replaceBoundingBox(null,i,o),r),d.clearRedundantLayout(c),(b=v.searchUtils.getWidgetIdThatUseTheLayoutId(t,n.layoutId))&&Z(t.widgets[b])&&d.editLayoutItemSetting(m,{lockParent:!0}),[4,Promise.resolve({layoutInfo:m,updatedAppConfig:d.appConfig})];case 3:return[2,x.sent()]}}))}))}function G(t,e,n,o,i){return k(this,void 0,Promise,(function(){var r,a,l,s,u;return L(this,(function(c){switch(c.label){case 0:return r=Object(h.getAppConfigAction)(t),a=r.createSection().id,l=""+(v.utils.getMaximumId(t.layouts[e.layoutId])+1),s=Object(g.Immutable)({sectionId:a,id:l,type:g.LayoutItemType.Section,bbox:v.utils.replaceBoundingBox(null,o,n)}),u=r.addItemIntoLayout(e.layoutId,s,i),[4,Promise.resolve({layoutInfo:u,updatedAppConfig:r.appConfig})];case 1:return[2,c.sent()]}}))}))}function U(t,e,n,o,i,r){return k(this,void 0,Promise,(function(){var a,l=this;return L(this,(function(s){switch(s.label){case 0:return a={uri:e.uri},h.appBuilderSync.publishIsBusyToBuilder(!0),[4,g.WidgetManager.getInstance().handleNewWidgetJson(a).then((function(e){var a,l=Object(h.getAppConfigAction)(t),s=""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),u=g.appConfigUtils.getUniqueId(l.appConfig,"widget");if(e.id=u,l.createWidget(Object(g.Immutable)(e)),(!i.width||!i.height)&&(null===(a=e.manifest)||void 0===a?void 0:a.defaultSize)){var c=e.manifest.defaultSize,d=c.width,p=c.height;i=z(z({},i),{width:d,height:p})}var f=Object(g.Immutable)({id:s,type:g.LayoutItemType.Widget,bbox:v.utils.replaceBoundingBox(null,i,o),widgetId:e.id}),y=v.searchUtils.getWidgetIdThatUseTheLayoutId(t,n.layoutId);y&&Z(t.widgets[y])&&(f=f.setIn(["setting","lockParent"],!0));var m=l.addItemIntoLayout(n.layoutId,f,r);return h.appBuilderSync.publishIsBusyToBuilder(!1),{layoutInfo:m,updatedAppConfig:l.appConfig}})).catch((function(t){return k(l,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return h.appBuilderSync.publishIsBusyToBuilder(!1),[4,Promise.reject(t)];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,s.sent()]}}))}))}function Y(t,e,n,o,i,r){return k(this,void 0,Promise,(function(){var e,a,l,s,u;return L(this,(function(c){switch(c.label){case 0:return e=Object(h.getAppConfigAction)(t),a=""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),l=Object(g.Immutable)({id:a,type:g.LayoutItemType.Widget,bbox:v.utils.replaceBoundingBox(null,i,o)}),(s=v.searchUtils.getWidgetIdThatUseTheLayoutId(t,n.layoutId))&&Z(t.widgets[s])&&(l=l.setIn(["setting","lockParent"],!0)),u=e.addItemIntoLayout(n.layoutId,l,r),[4,Promise.resolve({layoutInfo:u,updatedAppConfig:e.appConfig})];case 1:return[2,c.sent()]}}))}))}function Z(t){var e,n,o,i,r,a,l,s=null===(e=null==t?void 0:t.manifest)||void 0===e?void 0:e.widgetType,u=null!==(i=null===(o=null===(n=null==t?void 0:t.manifest)||void 0===n?void 0:n.properties)||void 0===o?void 0:o.hasEmbeddedLayout)&&void 0!==i&&i,c=null!==(l=null===(a=null===(r=null==t?void 0:t.manifest)||void 0===r?void 0:r.properties)||void 0===a?void 0:a.lockChildren)&&void 0!==l&&l;return s!==g.WidgetType.Layout&&u&&c}function X(t,e,n,o,i,r){return k(this,void 0,Promise,(function(){var a,l,s,u,c=this;return L(this,(function(d){switch(d.label){case 0:return a=Object(h.getAppConfigAction)(t),l=t.layouts[i.layoutId].content[i.layoutItemId],s=g.appConfigUtils.getUniqueId(a.appConfig,"widget"),u={id:s,uri:"widgets/layout/column/"},h.appBuilderSync.publishIsBusyToBuilder(!0),[4,g.WidgetManager.getInstance().handleNewWidgetJson(u).then((function(t){a.createWidget(Object(g.Immutable)(t)),a.updateLayoutItem(i,"widgetId",t.id),a.editLayoutItemSetting(i,{maintainedByLayout:!0});var e=Object(g.Immutable)(l.bbox),n=Math.round(parseFloat(e.height)+o.height+20);e=e.set("height",n+"px"),a.editLayoutItemBBox(i,e)})).then((function(){return k(c,void 0,void 0,(function(){var t,s,c,d,p,h=this;return L(this,(function(f){switch(f.label){case 0:return t=a.appConfig.widgets[u.id],s=Object(g.getAppStore)().getState().browserSizeMode,c=Object.keys(t.layouts)[0],d=t.layouts[c],p=v.searchUtils.findLayoutId(d,s,a.appConfig.mainSizeMode),[4,F(a.appConfig,e,{layoutId:p},n,o).then((function(t){var e=t.updatedAppConfig;return k(h,void 0,void 0,(function(){var t,n,o,a;return L(this,(function(s){switch(s.label){case 0:return t=v.utils.getMaximumId(e.layouts[p]),n={id:""+(t+1),widgetId:l.widgetId,type:g.LayoutItemType.Widget,bbox:l.bbox,setting:{autoProps:null===(a=l.setting)||void 0===a?void 0:a.autoProps}},o="top"===r?[""+t,n.id]:[n.id,""+t],e=e.setIn(["layouts",p,"content",n.id],n).setIn(["layouts",p,"order"],o),[4,Promise.resolve({updatedAppConfig:e,layoutInfo:i})];case 1:return[2,s.sent()]}}))}))}))];case 1:return[2,f.sent()]}}))}))})).then((function(t){var e=t.updatedAppConfig;return h.appBuilderSync.publishIsBusyToBuilder(!1),{updatedAppConfig:e,layoutInfo:i}})).catch((function(t){return k(c,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return h.appBuilderSync.publishIsBusyToBuilder(!1),[4,Promise.reject(t)];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,d.sent()]}}))}))}function J(t){var e,n,o,i,r,a=t.layoutId,l=t.layoutItemId,s=Object(h.getAppConfigAction)().appConfig,u=null===(o=null===(n=null===(e=null==s?void 0:s.layouts)||void 0===e?void 0:e[a])||void 0===n?void 0:n.content)||void 0===o?void 0:o[l];if(!u||(null===(i=u.setting)||void 0===i?void 0:i.isFloating))return!1;var c=v.utils.getActivePagePart();if(c!==g.PagePart.Header&&c!==g.PagePart.Footer){var d=v.utils.getCurrentPageRootLayoutId();return(null===(r=s.layouts[d])||void 0===r?void 0:r.type)===g.LayoutType.FlowLayout&&a!==d}return!1}function q(t){var e,n,o,i,r,a=t.layoutId,l=t.layoutItemId,s=Object(h.getAppConfigAction)().appConfig,u=null===(o=null===(n=null===(e=null==s?void 0:s.layouts)||void 0===e?void 0:e[a])||void 0===n?void 0:n.content)||void 0===o?void 0:o[l];return null!==(r=null===(i=null==u?void 0:u.setting)||void 0===i?void 0:i.isFloating)&&void 0!==r&&r}function Q(t,e,n){var o=v.utils.getCurrentPageRootLayoutId(),i=Object(h.getAppConfigAction)();F(i.appConfig,{layoutInfo:t},{layoutId:o},{left:0,top:0,width:1e3,height:1e3},e).then((function(t){(i=Object(h.getAppConfigAction)(t.updatedAppConfig)).editLayoutItemBBox(t.layoutInfo,{top:0,left:0,right:0,width:e.width+"px",height:e.height+"px"}).editLayoutItemSetting(t.layoutInfo,{isFloating:!0,lockParent:!0,floatingArea:n}),window.jimuConfig.isBuilder?(Object(h.getAppConfigAction)(i.appConfig).exec(),h.builderAppSync.publishChangeSelectionToApp(t.layoutInfo)):Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(i.appConfig,t.layoutInfo))}))}function K(t,e){var n,o,i=t.layoutId,r=t.layoutItemId,a=Object(h.getAppConfigAction)(),l=-1,s=2,u=document.querySelectorAll('div.flow-layout[data-layoutid="'+i+'"] > div.trail-container > div.builder-layout-item:not(.floating)');if((null==u?void 0:u.length)>1)for(var c=0;c<u.length;c++){var d=u[c];if(-1===l&&d.getAttribute("data-layoutitemid")!==r){var p=d.getBoundingClientRect();if(s=Math.round(12*e.width/p.width),v.utils.contains(p,e)){l=c,o=p;break}if(v.utils.intersects(p,e)){l=c+1,o=p;break}}}else{var f=g.utils.findViewportSize(v.utils.getAppConfig(),v.utils.getCurrentSizeMode());o={left:0,top:0,width:f.width,height:f.height},s=Math.round(12*e.width/f.width)}-1===l&&(l=(null===(n=a.appConfig.layouts[i].order)||void 0===n?void 0:n.length)||0),$({layoutInfo:t},{layoutId:i},o||e,e,s,l)}function $(t,e,n,o,i,r,a){return k(this,void 0,void 0,(function(){var l,s,u=this;return L(this,(function(c){switch(c.label){case 0:return l=Object(h.getAppConfigAction)(a),s={name:"row",label:"row",uri:"widgets/layout/row/",icon:null,itemType:g.LayoutItemType.Widget,manifest:{widgetType:g.WidgetType.Layout,properties:{}}},10,[4,F(l.appConfig,s,e,n,o,r).then((function(r){return k(u,void 0,void 0,(function(){var a,l,s,u,c,d,p,h,f;return L(this,(function(y){switch(y.label){case 0:return a=r.updatedAppConfig,l=v.searchUtils.findLayoutItem(a,r.layoutInfo),s=a.widgets[l.widgetId],u=Object.keys(s.layouts)[0],c=s.layouts[u],d=v.searchUtils.findLayoutId(c,Object(g.getAppStore)().getState().browserSizeMode,a.mainSizeMode),p=g.i18n.getIntl().formatMessage({id:"block"}),h=g.appConfigUtils.getUniqueLabel(a,"widget",p),a=(a=a.setIn(["widgets",s.id,"label"],h)).setIn(["layouts",e.layoutId,"content",l.id,"setting","heightMode"],"fixed").setIn(["layouts",e.layoutId,"content",l.id,"bbox","height"],o.height+20),f=Math.round(Math.min(o.height,n.height)),[4,F(a,t,{layoutId:d},n,{width:i,height:f,left:0},0)];case 1:return[2,y.sent()]}}))}))})).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;(l=Object(h.getAppConfigAction)(n)).editLayoutItemSetting(e,{heightMode:"fit"}),window.jimuConfig.isBuilder?(Object(h.getAppConfigAction)(l.appConfig).exec(),h.builderAppSync.publishChangeSelectionToApp(e)):Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(l.appConfig,e))}))];case 1:return[2,c.sent()]}}))}))}var tt,et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ot=function(t){function e(e){var n=t.call(this,e)||this;return n.topLeft=n.updateFloatingArea.bind(n,1),n.topCenter=n.updateFloatingArea.bind(n,2),n.topRight=n.updateFloatingArea.bind(n,3),n.middleLeft=n.updateFloatingArea.bind(n,4),n.middleCenter=n.updateFloatingArea.bind(n,5),n.middleRight=n.updateFloatingArea.bind(n,6),n.bottomLeft=n.updateFloatingArea.bind(n,7),n.bottomCenter=n.updateFloatingArea.bind(n,8),n.bottomRight=n.updateFloatingArea.bind(n,9),n}return et(e,t),e.prototype.updateFloatingArea=function(t){var e=this.props;Q({layoutId:e.layoutId,layoutItemId:e.layoutItem.id},this.getSizeOfItem(),t)},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=document.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+n.id+'"]');return o?o.getBoundingClientRect():null},e.prototype.getStyle=function(t){var e=t.colors.palette.light[500];return Object(g.css)(tt||(tt=nt(["\n      background-color: ",";\n      position: relative;\n      padding: 4px;\n\n      .content {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        grid-row-gap: 0;\n        grid-column-gap: 0;\n        border: 1px solid ",";\n\n        & > div {\n          cursor: pointer;\n          height: 50px;\n          width: 50px;\n          position: relative;\n\n          &:after {\n            content: '';\n            position: absolute;\n            left: 1px;\n            top: 1px;\n            right: 1px;\n            bottom: 1px;\n          }\n\n          &:hover {\n            &:after {\n              outline: 1px solid ",";\n              background: ",";\n            }\n          }\n        }\n\n        & > div:nth-of-type(3n+1) {\n          border-right: 1px solid ",";\n        }\n        & > div:nth-of-type(3n) {\n          border-left: 1px solid ",";\n        }\n        & > div:nth-of-type(1), & > div:nth-of-type(2), & > div:nth-of-type(3) {\n          border-bottom: 1px solid ",";\n        }\n        & > div:nth-of-type(7), & > div:nth-of-type(8), & > div:nth-of-type(9) {\n          border-top: 1px solid ",";\n        }\n\n        .selected:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          background-color: ",";\n          border: 1px solid ",";\n        }\n      }\n    "],["\n      background-color: ",";\n      position: relative;\n      padding: 4px;\n\n      .content {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        grid-row-gap: 0;\n        grid-column-gap: 0;\n        border: 1px solid ",";\n\n        & > div {\n          cursor: pointer;\n          height: 50px;\n          width: 50px;\n          position: relative;\n\n          &:after {\n            content: '';\n            position: absolute;\n            left: 1px;\n            top: 1px;\n            right: 1px;\n            bottom: 1px;\n          }\n\n          &:hover {\n            &:after {\n              outline: 1px solid ",";\n              background: ",";\n            }\n          }\n        }\n\n        & > div:nth-of-type(3n+1) {\n          border-right: 1px solid ",";\n        }\n        & > div:nth-of-type(3n) {\n          border-left: 1px solid ",";\n        }\n        & > div:nth-of-type(1), & > div:nth-of-type(2), & > div:nth-of-type(3) {\n          border-bottom: 1px solid ",";\n        }\n        & > div:nth-of-type(7), & > div:nth-of-type(8), & > div:nth-of-type(9) {\n          border-top: 1px solid ",";\n        }\n\n        .selected:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          background-color: ",";\n          border: 1px solid ",";\n        }\n      }\n    "])),t.colors.palette.light[300],e,t.colors.palette.primary[700],t.colors.palette.primary[100],e,e,e,e,t.colors.palette.primary[100],t.colors.palette.primary[600])},e.prototype.render=function(){var t=this.props,e=t.area,n=t.theme;return Object(g.jsx)("div",{className:"floating-area-chooser d-flex",css:this.getStyle(n)},Object(g.jsx)("div",{className:"content w-100"},Object(g.jsx)("div",{className:Object(g.classNames)("top-left",{selected:1===e}),onClick:this.topLeft}),Object(g.jsx)("div",{className:Object(g.classNames)("top-center",{selected:2===e}),onClick:this.topCenter}),Object(g.jsx)("div",{className:Object(g.classNames)("top-right",{selected:3===e}),onClick:this.topRight}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-left",{selected:4===e}),onClick:this.middleLeft}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-center",{selected:5===e}),onClick:this.middleCenter}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-right",{selected:6===e}),onClick:this.middleRight}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-left",{selected:7===e}),onClick:this.bottomLeft}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-center",{selected:8===e}),onClick:this.bottomCenter}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-right",{selected:9===e}),onClick:this.bottomRight})))},e.defaultProps={area:0},e}(g.React.PureComponent),it=g.themeUtils.withBuilderTheme(ot);function rt(){var t;return null===(t=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===t?void 0:t.appMode}function at(){var t,e,n;return null!==(n=null===(e=null===(t=Object(g.getAppStore)().getState().appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===e?void 0:e.lockLayout)&&void 0!==n&&n}function lt(){var t;return(null===(t=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===t?void 0:t.appMode)===g.AppMode.Design}var st={icon:n(28),title:function(t){return t.formatMessage("delete")},visible:function(t){return rt()===g.AppMode.Design&&(!at()||function(t){var e;if(t.type===g.LayoutItemType.Widget&&t.widgetId){var n=Object(g.getAppStore)().getState().appConfig.widgets[t.widgetId];if(n)return(null===(e=n.manifest)||void 0===e?void 0:e.widgetType)!==g.WidgetType.Layout}return!1}(t.layoutItem))},onClick:function(t){var e=t.layoutItem,n={layoutId:t.layoutId,layoutItemId:e.id};h.appBuilderSync.publishConfirmDeleteToApp(n)}},ut={icon:n(47),title:function(t){return t.formatMessage("pendingTip")},visible:function(){return rt()===g.AppMode.Design&&!at()},onClick:function(t){B({layoutId:t.layoutId,layoutItemId:t.layoutItem.id})}},ct={icon:n(30),title:function(t){return t.formatMessage("setting")},onClick:function(t){var e=t.layoutId,n=t.layoutItem;Object(g.getAppStore)().dispatch(g.appActions.selectionChanged({layoutId:e,layoutItemId:n.id}))}},dt={icon:n(31),title:function(t){return t.formatMessage("dragToMove")},visible:function(){return rt()===g.AppMode.Design&&!at()}},pt={icon:n(37),title:function(t){return t.formatMessage("duplicate")},visible:function(t){var e,n,o;if(at())return!1;var i=t.layoutId,r=null===(e=Object(g.getAppStore)().getState().appConfig)||void 0===e?void 0:e.layouts[i];return"ROW"!==(null==r?void 0:r.type)||(null!==(o=null===(n=r.order)||void 0===n?void 0:n.length)&&void 0!==o?o:0)<12},onClick:function(t){E({layoutId:t.layoutId,layoutItemId:t.layoutItem.id})}},gt={icon:n(48),title:function(t){return t.formatMessage("floating")},visible:function(t){var e=t.layoutItem,n=t.layoutId;return!at()&&J({layoutId:n,layoutItemId:e.id})},settingPanel:it,onClick:function(){}},ht={icon:n(49),title:function(t){return t.formatMessage("sinking")},visible:function(t){var e,n,o=t.layoutItem;return!at()&&null!==(n=null===(e=o.setting)||void 0===e?void 0:e.isFloating)&&void 0!==n&&n},onClick:function(t){var e=t.layoutId,n=t.layoutItem,o=t.clientRect;K({layoutId:e,layoutItemId:n.id},o)}},ft="interactjs-dragging",yt="exb-h5-dragging",vt=!1;function mt(t,e){if(!t)return null;var n,o,i,r,a,l,s=e.layoutItemId,u=e.useDragHandler,c=e.onDragStart,d=e.onDragging,p=e.onDragEnd;return t.styleCursor(!1).draggable({inertia:!1,autoScroll:!1,allowFrom:u?".tool-drag-handler":void 0,ignoreFrom:".no-drag-action",onstart:function(t){if(!at()&&lt()){var e=t.target;if(e.classList.contains("no-drag-action"))t.target._canDrag=!1;else{t.target._canDrag=!0,t.stopPropagation(),e.classList.add("is-dragging"),a=e.style.transform,i=t.rect;var l=t.target.parentNode;r=l.getBoundingClientRect(),document.body.classList.add(ft);var u=function(t){void 0===t&&(t="");var e="0",n="0";if(t.includes("matrix(")){var o=t.substring(t.indexOf("(")+1,t.indexOf(")")).split(",");return e=parseInt(o[4],10)+"px",n=parseInt(o[5],10)+"px",[e,n]}if(t.includes("translate(")){return 3===(i=t.match(/translate\((.*)\s*,\s*(.*)\)/)).length&&(e=i[1],n=i[2]),[e,n]}if(t.includes("translateX(")){2===(i=t.match(/translateX\((.*)\)/)).length&&(e=i[1])}if(t.includes("translateY(")){var i;2===(i=t.match(/translateY\((.*)\)/)).length&&(n=i[1])}return[e,n]}(getComputedStyle(e,null).getPropertyValue("transform")),d=u[0],p=u[1];n=v.utils.isPercentage(d)?v.utils.fromRatio(d,i.width):parseFloat(d),o=v.utils.isPercentage(p)?v.utils.fromRatio(p,i.height):parseFloat(p),e.setAttribute("data-translatex",n),e.setAttribute("data-translatey",o),c&&c(s)}}else t.interaction.stop()},onmove:function(t){t.stopPropagation(),n+=t.dx,o+=t.dy;var e,u,c=t.target,p=t.client.x,g=t.client.y;if(!(p>=0&&p<=r.width&&g>=0&&g<=r.height)&&!l)return e=i,(u=document.createElement("div")).setAttribute("id","interact_dragging_placeholder"),u.style.position="fixed",u.style.left=e.left+"px",u.style.top=e.top+"px",u.style.width=e.width+"px",u.style.height=e.height+"px",u.style.backgroundColor="var(--primary-700)",u.style.opacity="0.2",u.style.zIndex="1100",l=u,l=document.body.appendChild(l),c.style.transform=a,void(c.style.visibility="hidden");var h=l||c;h.style.webkitTransform=h.style.transform="translate("+Math.round(n)+"px, "+Math.round(o)+"px) translateZ(0)",h.setAttribute("data-translatex",Math.round(n)),h.setAttribute("data-translatey",Math.round(o)),d&&d(s,n,o)},onend:function(t){t.stopPropagation();var e=t.target;e.classList.remove("is-dragging"),document.body.classList.remove(ft),l&&(document.body.removeChild(l),l=null),e.style.visibility=null,e.style.transform=a,p&&p(s,n,o)}})}function bt(t){vt=t}function xt(){return vt}var It="interactjs-resizing",wt=!1;function jt(t,e){if(!t)return null;var n,o,i,r,a=null,l=e.layoutItemId,s=e.onResizeStart,u=e.onResizing,c=e.onResizeEnd,d=e.restrictEdges,p=void 0===d||d;return t.resizable({inertia:!1,edges:{top:".rnd-resize-top",left:v.utils.isRTL()?".rnd-resize-right":".rnd-resize-left",bottom:".rnd-resize-bottom",right:v.utils.isRTL()?".rnd-resize-left":".rnd-resize-right"},modifiers:[m.interact.modifiers.restrictEdges({outer:p?"parent":null}),m.interact.modifiers.restrictSize({min:{width:16,height:16}})],onstart:function(t){t.stopPropagation(),n=0,o=0,i=0,r=0;var e=t.target.getBoundingClientRect();s&&s(l,e.width,e.height),document.body.classList.add(It)},onmove:function(t){t.stopPropagation();var e=t.deltaRect;n+=e.left,o+=e.top,i+=e.width,r+=e.height,a&&(cancelAnimationFrame(a),a=null),a=requestAnimationFrame((function(){u&&u(l,n,o,i,r,t.shiftKey,t.speed),a=null}))},onend:function(t){t.stopPropagation(),a&&(cancelAnimationFrame(a),a=null),c&&c(l,n,o,i,r,t.shiftKey),document.body.classList.remove(It)}})}function Ot(t){wt=t}function St(){return wt}var Ct,Pt,Tt,At,Mt,Rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zt=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},kt=function(){return(kt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Lt=function(t){function e(e){var n=t.call(this,e)||this;return n.state={activeItem:null},v.utils.autoBindHandlers(n,["onItemClick"]),n}return Rt(e,t),e.prototype.onItemClick=function(t){var e=this.state.toggleOn;e=t!==this.state.activeItem||!e,this.setState({activeItem:t,toggleOn:e})},e.prototype.getStyle=function(){var t=this.props.theme;return Object(g.css)(Ct||(Ct=zt(["\n      display: flex;\n      pointer-events: all;\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0,0,0,0.20);\n      height: 100%;\n      margin: 5px 0;\n      background: ",";\n\n      ."," &,\n      ."," &,\n      ."," & {\n        display: none;\n      }\n    "],["\n      display: flex;\n      pointer-events: all;\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0,0,0,0.20);\n      height: 100%;\n      margin: 5px 0;\n      background: ",";\n\n      ."," &,\n      ."," &,\n      ."," & {\n        display: none;\n      }\n    "])),t.colors.palette.light[300],ft,It,yt)},e.prototype.render=function(){var t=this.props,e=t.tools,n=t.isLockLayout;if(!e||0===e.length)return null;var o=this.state,i=o.activeItem,r=o.toggleOn;return Object(g.jsx)(b.Provider,{value:kt(kt({},this.props),{activeItem:i,toggleOn:r,onItemClick:this.onItemClick,isLockLayout:n})},Object(g.jsx)("div",{css:this.getStyle(),className:"layout-item-toolbar"},e.map((function(t,e){return Array.isArray(t)?Object(g.jsx)(R,{uid:""+e,key:e,tools:t}):Object(g.jsx)(S,kt({uid:""+e,key:e},t))}))))},e}(g.React.PureComponent),Nt=g.ReactRedux.connect((function(t){var e,n,o;return{isLockLayout:null!==(o=null===(n=null===(e=t.appConfig)||void 0===e?void 0:e.forBuilderAttributes)||void 0===n?void 0:n.lockLayout)&&void 0!==o&&o}}))(Lt),Bt=n(15),Et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dt=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},_t=n(50),Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={showMenus:!0},e.formatMessage=function(t){return e.props.intl?e.props.intl.formatMessage({id:t,defaultMessage:Bt.a[t]}):Bt.a[t]},e.showContextMenu=function(){},e.hideContextMenu=function(){},e}return Et(e,t),e.prototype.getPositionStyle=function(){var t=this.props.positionType;return"left"===t?Object(g.css)(Pt||(Pt=Dt(["\n        position: absolute;\n        top: 0;\n        left: 0;\n      "],["\n        position: absolute;\n        top: 0;\n        left: 0;\n      "]))):"center"===t?Object(g.css)(Tt||(Tt=Dt(["\n        position: absolute;\n        top: 0;\n        left: 50%;\n        transform: translateX(-50%);\n      "],["\n        position: absolute;\n        top: 0;\n        left: 50%;\n        transform: translateX(-50%);\n      "]))):Object(g.css)(At||(At=Dt(["\n      position: absolute;\n      top: 0;\n      left: right;\n    "],["\n      position: absolute;\n      top: 0;\n      left: right;\n    "])))},e.prototype.getStyle=function(){var t=this.props,e=t.size,n=t.builderTheme,o=t.rotate;return Object(g.css)(Mt||(Mt=Dt(["\n      body:not(.design-mode) & {\n        display: none !important;\n      }\n\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      background: transparent;\n      pointer-events: none;\n      transform: "," ;\n\n      .content {\n        ",";\n        pointer-events: all;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        transition: all 100ms;\n        z-index: ",";\n\n        .menu-hint {\n          background-color: ",";\n          width: ","px;\n          height: 10px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          cursor: pointer;\n          line-height: 10px;\n        }\n\n        .menu-content {\n          display: none;\n          height: ","px;\n          transform: "," ;\n\n          .tool-drag-handler {\n            cursor: move;\n          }\n\n          .layout-item-toolbar {\n            margin: 0;\n          }\n        }\n\n        &:hover {\n          /* height: ","px; */\n          /* width: auto; */\n\n          .menu-hint {\n            display: none;\n          }\n\n          .menu-content {\n            display: flex;\n          }\n        }\n      }\n\n    "],["\n      body:not(.design-mode) & {\n        display: none !important;\n      }\n\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      background: transparent;\n      pointer-events: none;\n      transform: "," ;\n\n      .content {\n        ",";\n        pointer-events: all;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        transition: all 100ms;\n        z-index: ",";\n\n        .menu-hint {\n          background-color: ",";\n          width: ","px;\n          height: 10px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          cursor: pointer;\n          line-height: 10px;\n        }\n\n        .menu-content {\n          display: none;\n          height: ","px;\n          transform: "," ;\n\n          .tool-drag-handler {\n            cursor: move;\n          }\n\n          .layout-item-toolbar {\n            margin: 0;\n          }\n        }\n\n        &:hover {\n          /* height: ","px; */\n          /* width: auto; */\n\n          .menu-hint {\n            display: none;\n          }\n\n          .menu-content {\n            display: flex;\n          }\n        }\n      }\n\n    "])),o>0||o<0?"rotateZ("+o+"deg)":"",this.getPositionStyle(),v.LayoutZIndex.HandlerTools,n.colors.palette.light[300],e,e,o>0||o<0?"rotateZ("+-o+"deg)":"",e)},e.prototype.render=function(){var t=this,e=this.props,n=e.builderTheme,o=e.menuItems,i=e.layoutId,r=e.layoutItem;return Object(g.jsx)("div",{className:"widget-context-menu",css:this.getStyle()},Object(g.jsx)("div",{ref:function(e){return t.ref=e},className:"content"},Object(g.jsx)("div",{className:"menu-hint",onMouseEnter:this.showContextMenu},Object(g.jsx)(f.Icon,{icon:_t,color:n.colors.black,size:16})),this.state.showMenus&&Object(g.jsx)("div",{className:"menu-content",onMouseLeave:this.hideContextMenu},Object(g.jsx)(Nt,{layoutId:i,layoutItem:r,theme:n,parentRef:this.ref,tools:o,formatMessage:this.formatMessage})),this.props.children))},e}(g.React.PureComponent),Ft=Object(g.injectIntl)(Vt),Ht=n(7);function Wt(t,e){var n=function(t){if(isNaN(t))return 0;var e=t%360;return e<0?e+360:e}(t+e);return n>=337.5||n<22.5||n>=157.5&&n<202.5?"ns-resize":n>=22.5&&n<67.5||n>=202.5&&n<247.5?"nesw-resize":n>=67.5&&n<112.5||n>=247.5&&n<292.5?"ew-resize":n>=112.5&&n<157.5||n>=292.5&&n<337.5?"nwse-resize":void 0}var Gt,Ut,Yt,Zt,Xt,Jt,qt,Qt,Kt,$t,te=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ee=function(t){return Object(g.css)(Gt||(Gt=te(["\n  top: ","px;\n  left: ","px;\n  /* cursor: nwse-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nesw-resize; */\n    cursor: ",";\n  }\n"],["\n  top: ","px;\n  left: ","px;\n  /* cursor: nwse-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nesw-resize; */\n    cursor: ",";\n  }\n"])),-5,-5,Wt(t,135),Wt(t,225))},ne=function(t){return Object(g.css)(Ut||(Ut=te(["\n  top: ","px;\n  right: ","px;\n  /* cursor: nesw-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nwse-resize; */\n    cursor: ",";\n  }\n"],["\n  top: ","px;\n  right: ","px;\n  /* cursor: nesw-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nwse-resize; */\n    cursor: ",";\n  }\n"])),-5,-5,Wt(t,225),Wt(t,315))},oe=function(t){return Object(g.css)(Yt||(Yt=te(["\n  bottom: ","px;\n  left: ","px;\n  /* cursor: nesw-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nwse-resize; */\n    cursor: ",";\n  }\n"],["\n  bottom: ","px;\n  left: ","px;\n  /* cursor: nesw-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nwse-resize; */\n    cursor: ",";\n  }\n"])),-5,-5,Wt(t,45),Wt(t,135))},ie=function(t){return Object(g.css)(Zt||(Zt=te(["\n  bottom: ","px;\n  right: ","px;\n  /* cursor: nwse-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nesw-resize; */\n    cursor: ",";\n  }\n"],["\n  bottom: ","px;\n  right: ","px;\n  /* cursor: nwse-resize; */\n  cursor: ",";\n  .jimu-rtl & {\n    /* cursor: nesw-resize; */\n    cursor: ",";\n  }\n"])),-5,-5,Wt(t,315),Wt(t,405))},re=function(t){return Object(g.css)(Xt||(Xt=te(["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  top: ","px;\n  /* cursor: ns-resize; */\n  cursor: ",";\n\n  &:after {\n    left: 50%;\n    top: 50%;\n    margin-left: ","px;\n    margin-top: ","px;\n  }\n"],["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  top: ","px;\n  /* cursor: ns-resize; */\n  cursor: ",";\n\n  &:after {\n    left: 50%;\n    top: 50%;\n    margin-left: ","px;\n    margin-top: ","px;\n  }\n"])),16,10,10,-8,Wt(t,180),-5,-5)},ae=function(t){return Object(g.css)(Jt||(Jt=te(["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  right: ","px;\n  /* cursor: ew-resize; */\n  cursor: ",";\n\n  &:after {\n    top: 50%;\n    right: 50%;\n    margin-top: ","px;\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  right: ","px;\n  /* cursor: ew-resize; */\n  cursor: ",";\n\n  &:after {\n    top: 50%;\n    right: 50%;\n    margin-top: ","px;\n    margin-right: ","px;\n  }\n"])),16,10,10,-8,Wt(t,270),-5,-5)},le=function(t){return Object(g.css)(qt||(qt=te(["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  bottom: ","px;\n  /* cursor: ns-resize; */\n  cursor: ",";\n\n  &:after {\n    left: 50%;\n    bottom: 50%;\n    margin-left: ","px;\n    margin-bottom: ","px;\n  }\n"],["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  bottom: ","px;\n  /* cursor: ns-resize; */\n  cursor: ",";\n\n  &:after {\n    left: 50%;\n    bottom: 50%;\n    margin-left: ","px;\n    margin-bottom: ","px;\n  }\n"])),16,10,10,-8,Wt(t,0),-5,-5)},se=function(t){return Object(g.css)(Qt||(Qt=te(["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  left: ","px;\n  /* cursor: ew-resize; */\n  cursor: ",";\n\n  &:after {\n    top: 50%;\n    left: 50%;\n    margin-top: ","px;\n    margin-left: ","px;\n  }\n"],["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  left: ","px;\n  /* cursor: ew-resize; */\n  cursor: ",";\n\n  &:after {\n    top: 50%;\n    left: 50%;\n    margin-top: ","px;\n    margin-left: ","px;\n  }\n"])),16,10,10,-8,Wt(t,90),-5,-5)};function ue(t){var e=t.rotation,n=void 0===e?0:e,o=t.builderTheme,i=function(t){var e=t.left,n=void 0===e||e,o=t.top,i=void 0===o||o,r=t.right,a=void 0===r||r,l=t.bottom,s=void 0===l||l;return{top:i,right:a,bottom:s,left:n,topRight:i&&a,bottomRight:s&&a,bottomLeft:s&&n,topLeft:i&&n}}(t),r=i.top,a=i.right,l=i.bottom,s=i.left,u=i.topLeft,c=i.topRight,d=i.bottomRight,p=i.bottomLeft,h=Object(g.css)(Kt||(Kt=te(["\n    width: ","px;\n    height: ","px;\n    background: ",";\n    border: 1px solid ",";\n    box-shadow: 0 2px 4px 0 ",";\n    z-index: ",";\n  "],["\n    width: ","px;\n    height: ","px;\n    background: ",";\n    border: 1px solid ",";\n    box-shadow: 0 2px 4px 0 ",";\n    z-index: ",";\n  "])),10,10,o.colors.black,o.colors.palette.light[600],g.polished.rgba(o.colors.white,.5),v.LayoutZIndex.HandlerTools),f=h,y=Object(g.css)($t||($t=te(["\n    box-shadow: none;\n\n    &:after {\n      position: absolute;\n      content: '';\n      ",";\n    }\n  "],["\n    box-shadow: none;\n\n    &:after {\n      position: absolute;\n      content: '';\n      ",";\n    }\n  "])),h);return Object(g.jsx)("div",{className:"w-100 h-100 action-area"},r&&Object(g.jsx)("span",{key:"2","data-testid":"top",className:"rnd-resize-top handle no-drag-action",css:[y,re(n)]}),a&&Object(g.jsx)("span",{key:"4","data-testid":"right",className:"rnd-resize-right handle no-drag-action",css:[y,ae(n)]}),l&&Object(g.jsx)("span",{key:"6","data-testid":"bottom",className:"rnd-resize-bottom handle no-drag-action",css:[y,le(n)]}),s&&Object(g.jsx)("span",{key:"8","data-testid":"left",className:"rnd-resize-left handle no-drag-action",css:[y,se(n)]}),u&&Object(g.jsx)("span",{key:"1","data-testid":"topLeft",className:"rnd-resize-top rnd-resize-left handle no-drag-action",css:[f,ee(n)]}),c&&Object(g.jsx)("span",{key:"3","data-testid":"topRight",className:"rnd-resize-top rnd-resize-right handle no-drag-action",css:[f,ne(n)]}),d&&Object(g.jsx)("span",{key:"5","data-testid":"bottomRight",className:"rnd-resize-bottom rnd-resize-right handle no-drag-action",css:[f,ie(n)]}),p&&Object(g.jsx)("span",{key:"7","data-testid":"bottomLeft",className:"rnd-resize-bottom rnd-resize-left handle no-drag-action",css:[f,oe(n)]}))}function ce(t){var e=Object(g.getAppStore)().getState();return v.searchUtils.getSectionInfo(e,t.sectionId)}function de(t){var e,n=t.navInfo,o=t.views,i=t.activeView;if(!n)return null==i?void 0:i.id;if(!n.useProgress)return n.currentViewId;var r=(null===(e=n.visibleViews)||void 0===e?void 0:e.length)>0?n.visibleViews:o;return r[Object(g.getIndexFromProgress)(n.progress,r.length).currentIndex]}var pe,ge=[{label:function(t){var e=ce(t.layoutItem);if(!e)return"";var n=e.views,o=de(e),i=Math.max(0,n.indexOf(o));return t.formatMessage("view")+": "+(i+1)+" / "+n.length}},{icon:n(51),autoFlipIcon:!0,size:10,title:function(t){return t.formatMessage("previousView")},onClick:function(t){var e=t.layoutItem,n=ce(e),o=n.views,i=de(n),r=o.indexOf(i);r>0&&g.jimuHistory.changeView(e.sectionId,o[r-1])},disabled:function(t){var e=ce(t.layoutItem);if(!e)return!0;var n=e.views,o=de(e);return n.indexOf(o)<=0}},{icon:n(52),autoFlipIcon:!0,size:10,title:function(t){return t.formatMessage("nextView")},onClick:function(t){var e=t.layoutItem,n=ce(e),o=n.views,i=de(n),r=o.indexOf(i);r>=0&&r<o.length-1&&g.jimuHistory.changeView(e.sectionId,o[r+1])},disabled:function(t){var e=ce(t.layoutItem);if(!e)return!0;var n=e.views,o=de(e),i=n.indexOf(o);return i<0||i>=n.length-1}},{icon:n(53),title:function(t){return t.formatMessage("addView")},visible:function(){return rt()===g.AppMode.Design&&!at()},onClick:function(t){var e,n=Object(g.getAppStore)().getState().appConfig,o=t.layoutItem,i=g.appConfigUtils.getUniqueId(n,"layout"),r=Object(g.Immutable)({}).merge({id:i,type:g.LayoutType.FixedLayout}),a=Object(g.Immutable)({}).merge({id:g.appConfigUtils.getUniqueId(n,"view"),label:g.appConfigUtils.getUniqueLabel(n,"view",g.i18n.getIntl().formatMessage({id:"view"})),layout:(e={},e[Object(g.getAppStore)().getState().browserSizeMode]=i,e)});Object(h.getAppConfigAction)().addView(a,o.sectionId,[r]).exec(),g.jimuHistory.changeView(o.sectionId,a.id)}},{icon:n(54),title:function(t){return t.formatMessage("duplicateView")},visible:function(){return rt()===g.AppMode.Design&&!at()},onClick:function(t){var e=t.layoutItem,n=de(ce(e));n||(n=ce(e).views[0]);var o=Object(h.getAppConfigAction)(),i=o.duplicateView(n,e.sectionId,!0);o.exec(),g.jimuHistory.changeView(e.sectionId,i.id)}},{icon:n(55),title:function(t){return t.formatMessage("deleteView")},visible:function(t){if(rt()!==g.AppMode.Design||at())return!1;var e=ce(t.layoutItem);if(!e)return!1;var n=e.views;return n&&n.length>1},onClick:function(t){var e=t.layoutItem,n=ce(e),o=n.views,i=de(n);if(o.length>1){var r=o.indexOf(i),a=void 0;a=r>0?o[r-1]:o[1],Object(h.getAppConfigAction)().removeView(i,e.sectionId).exec(),g.jimuHistory.changeView(t.layoutItem.sectionId,a)}}},{seperator:!0}],he=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},fe=[pt,gt,ht,ut,st],ye=[].concat(ge,fe),ve=0;function me(t){var e=t.layoutId,n=t.layoutItem,o=t.refElement,i=n.widgetId;if(!i)return[];var r=g.ExtensionManager.getInstance().getExtensions(g.extensionSpec.ExtensionPoints.ContextTool),a=o.getBoundingClientRect();return r.filter((function(t){return t.widgetId===i})).map((function(t){return{widgetId:i,icon:t.getIcon(),title:t.getTitle(),onClick:t.onClick.bind(t),checked:t.checked&&t.checked.bind(t),disabled:t.disabled?"function"==typeof t.disabled?t.disabled.bind(t):t.disabled:null,visible:t.visible?"function"==typeof t.visible?t.visible.bind(t):t.visible:null,settingPanel:t.getSettingPanel({layoutId:e,layoutItem:n,clientRect:a}),index:t.index}})).sort((function(t,e){return t.index-e.index}))}function be(t){var e=t.layoutId,n=t.layoutItem,o=t.refElement,i=t.modifiers,r=t.formatMessage,a=t.builderTheme,l=t.toolItems,s=void 0===l?[]:l,u=t.showDefaultTools,c=void 0===u||u;if(!o)return null;var d,p=n.type===g.LayoutItemType.Section;c?d=[].concat(s,p?ye:fe,me(t)):d=me(t);return 0===d.length?null:Object(g.jsx)(f._Popper,{placement:"top-start",reference:o,open:!0,modifiers:i,version:ve++,css:Object(g.css)(pe||(pe=he(["\n        background: transparent;\n        box-shadow: none;\n      "],["\n        background: transparent;\n        box-shadow: none;\n      "])))},Object(g.jsx)("div",null,Object(g.jsx)(Nt,{layoutId:e,layoutItem:n,theme:a,parentRef:o,tools:d,formatMessage:r})))}var xe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ie=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},we=n(32),je=function(t){function e(e){var n=t.call(this,e)||this;return n.formatMessage=function(t){return null!=n.props.intl?n.props.intl.formatMessage({id:t,defaultMessage:Bt.a[t]}):Bt.a[t]},n.isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},n.copyItem=function(){var t=n.props,e=t.layoutId,o=t.layoutItem;if(!t.lockLayout){var i=n.ref.getBoundingClientRect(),r=i.width,a=i.height;Object(g.getAppStore)().dispatch(g.appActions.clipboardChanged({layoutId:e,width:r,height:a,layoutItemId:o.id}))}},n.deleteSelectedItem=function(){var t=n.props,e=t.selected,o=t.layoutId,i=t.layoutItem,r=t.lockLayout,a=t.isFunctionalWidget,l=t.isDesignMode;if(e&&l&&(!r||a)){var s={layoutId:o,layoutItemId:i.id};return h.appBuilderSync.publishConfirmDeleteToApp(s)}},n.state={selected:!1},n.screenGroupInfo="",n.isMac()?n.keyBindings={delete:n.deleteSelectedItem,backspace:n.deleteSelectedItem,"command+keyc":n.copyItem}:n.keyBindings={delete:n.deleteSelectedItem,backspace:n.deleteSelectedItem,"ctrl+keyc":n.copyItem},n}return xe(e,t),e.prototype.componentDidMount=function(){var t,e=this.screenGroupInfo.split(":");if(e.length>1){var n=e[0],o=e[1];t=document.querySelector('div.builder-layout-item[data-layoutid="'+n+'"][data-layoutitemid="'+o+'"]')}this.modifiers=[{name:"preventOverflow",enabled:!0,options:{boundary:null!=t?t:"viewport",altAxis:!0}},{name:"flip",enabled:!0,options:{boundary:null!=t?t:"viewport",fallbackPlacements:Object(f.getFallbackPlacementsModifier)(["top-start","bottom-start"],!0).options.fallbackPlacements}}],this.props.selected&&this.setState({selected:!0})},e.prototype.componentDidUpdate=function(){this.scrollIntoView()},e.prototype.doScroll=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=document.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+n.id+'"]');null!=o&&o.scrollIntoView({behavior:"auto",block:"center"})},e.prototype.scrollIntoView=function(){var t=this,e=this.props,n=e.selected,o=e.autoScroll;if(n&&o){var i=this.props.layoutId,r=!1,a=!1,l=Object(h.getAppConfigAction)().appConfig,s=v.searchUtils.buildLayoutStructure(l,this.pageContext.rootLayoutId,this.pageContext.pageId,v.ParentType.Page,v.utils.getCurrentSizeMode()),u=v.searchUtils.findParentViewId(i,s),c=u.viewId,d=u.sectionId,p=v.searchUtils.findParentScreenId(i,s),f=p.screenId,y=p.screenGroupId;if(null!==c&&null!=d&&(g.jimuHistory.changeView(d,c),r=!0),null!=y&&null!=y){var m=l.screenGroups[y].screens.indexOf(f);Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(y,m,!0)),a=!0}r||a?g.lodash.defer((function(){t.doScroll()})):this.doScroll()}},e.prototype.getStyle=function(){var t=this.props,e=t.isFunctionalWidget,n=t.isSection,o=t.selected,i=t.isBlock,r=t.rotate,a=void 0===r?0:r,l=g.polished.rgba(this.pageContext.builderTheme.colors.palette.dark[300],.6),s=this.pageContext.builderTheme.colors.palette.primary[600],u=!e||n?"dashed":"solid";return Object(g.css)(Oe||(Oe=Ie(["\n      ."," &,\n      ."," & {\n        > .action-area {\n          display: none !important;\n        }\n        > div.selected-tip {\n          .tip-content {\n            outline-color: ",";\n          }\n        }\n      }\n\n      transform: ",";\n      padding: inherit;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      top: 0;\n      right: 0;\n      z-index: ",";\n      pointer-events: none;\n\n      & > div.selected-tip {\n        display: block;\n        padding: inherit;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        top: 0;\n        right: 0;\n        pointer-events: none;\n        .tip-content {\n          height: 100%;\n          padding: 1px;\n          &:after {\n            content: '';\n            width: 100%;\n            height: 100%;\n            outline: ",";\n            display: block;\n            outline-color: ",";\n          }\n        }\n      }\n\n      .exb-rnd.selected > & > div.selected-tip {\n        display: block;\n        .tip-content {\n          &:after {\n            outline-color: ",";\n          }\n        }\n      }\n\n      & > .action-area {\n        position: relative;\n        .handle {\n          position: absolute;\n          pointer-events: all;\n        }\n      }\n\n      .lock-layout-tip {\n        background: ",";\n        border: 1px solid ",";\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);\n        width: 20px;\n        height: 20px;\n        position: absolute;\n        left: -10px;\n        top: -10px;\n\n        svg {\n          margin-bottom: 6px;\n          margin-left: 4px;\n        }\n      }\n    "],["\n      ."," &,\n      ."," & {\n        > .action-area {\n          display: none !important;\n        }\n        > div.selected-tip {\n          .tip-content {\n            outline-color: ",";\n          }\n        }\n      }\n\n      transform: ",";\n      padding: inherit;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      top: 0;\n      right: 0;\n      z-index: ",";\n      pointer-events: none;\n\n      & > div.selected-tip {\n        display: block;\n        padding: inherit;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        top: 0;\n        right: 0;\n        pointer-events: none;\n        .tip-content {\n          height: 100%;\n          padding: 1px;\n          &:after {\n            content: '';\n            width: 100%;\n            height: 100%;\n            outline: ",";\n            display: block;\n            outline-color: ",";\n          }\n        }\n      }\n\n      .exb-rnd.selected > & > div.selected-tip {\n        display: block;\n        .tip-content {\n          &:after {\n            outline-color: ",";\n          }\n        }\n      }\n\n      & > .action-area {\n        position: relative;\n        .handle {\n          position: absolute;\n          pointer-events: all;\n        }\n      }\n\n      .lock-layout-tip {\n        background: ",";\n        border: 1px solid ",";\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.5);\n        width: 20px;\n        height: 20px;\n        position: absolute;\n        left: -10px;\n        top: -10px;\n\n        svg {\n          margin-bottom: 6px;\n          margin-left: 4px;\n        }\n      }\n    "])),yt,ft,l,a>0||a<0?"rotateZ("+a+"deg)":"",o?v.LayoutZIndex.HandlerTools:"auto",i&&!o?"none":"1px "+u+" "+l,!e||n?l:"transparent",s,this.pageContext.builderTheme.colors.palette.dark[100],this.pageContext.builderTheme.colors.palette.light[700])},e.prototype.getKeyboardComponent=function(){return Object(g.jsx)(g.Keyboard,{bindings:this.keyBindings})},e.prototype.isResizable=function(){var t=this.props,e=t.resizable,n=void 0===e||e,o=t.selected,i=t.isInlineEditing;return o&&!this.pageContext.viewOnly&&!this.props.lockLayout&&n&&!i},e.prototype.showToolbar=function(){var t=this.props,e=t.forbidToolbar,n=t.selected;return!e&&!this.pageContext.viewOnly&&n},e.prototype.render=function(){var t=this;return Object(g.jsx)(Ht.c.Consumer,null,(function(e){return t.screenGroupInfo=e,Object(g.jsx)(v.PageContext.Consumer,null,(function(e){if(t.pageContext=e,!t.props.isDesignMode)return null;var n=t.props,o=n.layoutId,i=n.layoutItem,r=n.resizable,a=void 0===r||r,l=n.draggable,s=void 0===l||l,u=n.selected,c=n.toolItems,d=n.showDefaultTools,p=n.left,h=n.top,y=n.right,v=n.bottom,m=n.rotate,b=!s&&!a;return Object(g.jsx)("div",{"data-testid":"select-wrapper",ref:function(e){return t.ref=e},css:t.getStyle(),className:Object(g.classNames)("select-wrapper",{selected:u,"no-embed-layout":!t.props.hasEmbeddedLayout})},!e.viewOnly&&Object(g.jsx)("div",{className:"selected-tip"},Object(g.jsx)("div",{className:"tip-content"})),t.showToolbar()&&Object(g.jsx)(be,{layoutId:o,layoutItem:i,refElement:t.ref,modifiers:t.modifiers,builderTheme:t.pageContext.builderTheme,formatMessage:t.formatMessage,toolItems:c,showDefaultTools:d}),t.isResizable()&&Object(g.jsx)(ue,{left:p,right:y,top:h,bottom:v,rotation:m,builderTheme:e.builderTheme}),b&&u&&Object(g.jsx)("div",{className:"lock-layout-tip rounded-circle"},Object(g.jsx)(f.Icon,{icon:we,size:12,color:e.builderTheme.colors.black})),u&&t.getKeyboardComponent())}))}))},e}(g.React.PureComponent);var Oe,Se=g.ReactRedux.connect((function(t,e){var n,o,i,r,a;return{lockLayout:null!==(i=null===(o=null===(n=t.appConfig)||void 0===n?void 0:n.forBuilderAttributes)||void 0===o?void 0:o.lockLayout)&&void 0!==i&&i,isDesignMode:t.appRuntimeInfo.appMode===g.AppMode.Design,sectionNavInfo:e.isSection?null===(a=null===(r=t.appRuntimeInfo)||void 0===r?void 0:r.sectionNavInfos)||void 0===a?void 0:a[e.layoutItem.sectionId]:null}}))(Object(g.injectIntl)(je)),Ce=n(6);function Pe(t){if(t&&"function"==typeof t.getAttribute){var e=t.getAttribute("data-layoutid"),n=t.getAttribute("data-layoutitemid");if(e&&n)return function(t,e){var n,o,i,r,a,l,s=Object(g.getAppStore)().getState(),u=s.appConfig,c=u.layouts,d=u.widgets,p=c[t],h=null===(n=null==p?void 0:p.content)||void 0===n?void 0:n[e];if(h){var f={layoutId:t,layoutItemId:e},y=function(t,e){var n,o,i;if(e.type===g.LayoutItemType.Widget){var r=e.widgetId;if(r)return null===(i=null===(o=null===(n=t.appConfig)||void 0===n?void 0:n.widgets)||void 0===o?void 0:o[r])||void 0===i?void 0:i.manifest}return null}(s,h),v=null;return h.type===g.LayoutItemType.Widget&&h.widgetId&&(v=null===(o=d[h.widgetId])||void 0===o?void 0:o.uri),{itemType:h.type,layoutInfo:f,uri:v,manifest:y,rotation:null!==(l=null===(a=null===(r=null===(i=h.setting)||void 0===i?void 0:i.style)||void 0===r?void 0:r.transform)||void 0===a?void 0:a.rotate)&&void 0!==l?l:0}}}(e,n)}return null}function Te(t,e){var n={};return n.width=Math.min(t.width,e.width),n.height=Math.min(t.height,e.height),n.left=Math.max(0,t.left),n.top=Math.max(0,t.top),n.left+n.width>e.width&&(n.left=e.width-n.width),n.top+n.height>e.height&&(n.top=e.height-n.height),n}function Ae(t,e,n,o){var i,r=function(t,e){var n,o,i,r;if(!e)return!1;if(null!==(n=e.isFromCurrentSizeMode)&&void 0!==n&&!n)return!0;var a=e.layoutInfo;if(a){var l=Object(g.getAppStore)().getState().appConfig.layouts[a.layoutId],s=null===(o=null==l?void 0:l.content)||void 0===o?void 0:o[a.layoutItemId];if(s){var u=null!==(r=null===(i=s.setting)||void 0===i?void 0:i.lockParent)&&void 0!==r&&r;if(l.type===g.LayoutType.FlowLayout||u)return a.layoutId===t}}return!0}(o,t);return r&&"function"==typeof e.isItemAccepted&&(r=e.isItemAccepted(t,null!==(i=n.isPlaceholder)&&void 0!==i&&i)),r}function Me(t,e){var n,o,i=g.lodash.throttle((function(t,n,i){if(!t||isNaN(n)||isNaN(i))return;var r=200,a=100,l=e.current.props;t.manifest.defaultSize&&(r=isNaN(t.manifest.defaultSize.width)?r:t.manifest.defaultSize.width,a=isNaN(t.manifest.defaultSize.height)?a:t.manifest.defaultSize.height);l.onDragOver&&l.onDragOver(t,null,o,{left:n-r/2-o.left,top:i-a/2-o.top,width:r,height:a,right:n-r/2-o.left+r,bottom:i-a/2-o.top+a},n-o.left,i-o.top)}),100);function r(){var o=e.current,i=o.props,r=o.layoutId,a=o.layoutContext,l=window.parent&&window.parent._dragging_widget_item?window.parent._dragging_widget_item:null;n&&n===l||Ae(n=l,a,i,r)&&(t.classList.add("drop-target"),i.onToggleDragoverEffect&&i.onToggleDragoverEffect(!0,n))}function a(){if(!n)return!1;var t=e.current,o=t.props,i=t.layoutId,r=t.pageContext,a=t.layoutContext;return!r.viewOnly&&Ae(n,a,o,i)}t.addEventListener("dragenter",(function(i){var l=e.current.props;if(i.stopPropagation(),i.preventDefault(),r(),!a())return;o=t.getBoundingClientRect(),n&&l.onDragEnter&&l.onDragEnter(n)})),t.addEventListener("dragleave",(function(o){var i=e.current.props;if(o.stopPropagation(),o.preventDefault(),t.classList.remove("drop-target"),t.classList.remove("drop-active"),!a())return;i.onDragLeave&&i.onDragLeave(n);i.onToggleDragoverEffect&&i.onToggleDragoverEffect(!1,n);n=null})),t.addEventListener("dragover",(function(o){var l=e.current,s=l.layoutId,u=l.pageContext;if(o.stopPropagation(),o.preventDefault(),r(),!a())return void(o.dataTransfer&&(o.dataTransfer.dropEffect="none"));o.dataTransfer&&(o.dataTransfer.dropEffect="copy");if(t.classList.contains("drop-target")){var c=o.clientX,d=o.clientY;t.classList.contains("drop-active")||s===u.rootLayoutId||t.classList.add("drop-active"),i(n,c,d)}})),t.addEventListener("drop",(function(o){if(o.stopPropagation(),t.classList.remove("drop-target"),t.classList.remove("drop-active"),document.documentElement.classList.remove(yt),!a())return void(n=null);var i=e.current.props,r=o.clientX,l=o.clientY,s=t.getBoundingClientRect(),u=200,c=100;n.manifest.defaultSize&&(u=isNaN(n.manifest.defaultSize.width)?u:n.manifest.defaultSize.width,c=isNaN(n.manifest.defaultSize.height)?c:n.manifest.defaultSize.height);var d={width:u,height:c,left:r-u/2-s.left,top:l-c/2-s.top};(d=Te(d,{left:0,top:0,width:s.width,height:s.height})).right=d.left+d.width,d.bottom=d.top+d.height,i.onToggleDragoverEffect&&i.onToggleDragoverEffect(!1,n);i.onDrop&&i.onDrop(n,s,d,r-s.left,l-s.top);n=null}))}var Re,ze=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function ke(t){var e=g.React.useRef(),n=g.ReactRedux.useSelector((function(e){return t.layouts[e.browserSizeMode]})),o=g.React.useContext(v.PageContext),i=g.React.useContext(v.LayoutContext),r=g.React.useRef();r.current={props:t,layoutId:n,pageContext:o,layoutContext:i},g.React.useEffect((function(){var t;return e.current&&(t=function(t,e){var n,o,i,r;return Object(m.interact)(t).dropzone({accept:".exb-rnd",checker:function(t,o,i,r,a,l,s){var u=e.current,c=u.props,d=u.layoutId,p=u.pageContext,g=u.layoutContext;return"none"!==getComputedStyle(a).pointerEvents&&(n=Pe(s),!p.viewOnly&&i&&!s.contains(a)&&Ae(n,g,c,d))},ondragenter:function(t){var r=e.current,a=r.props,l=r.layoutId,s=r.pageContext;t.stopPropagation(),t.target.classList.add("drop-target"),l!==s.rootLayoutId&&t.target.classList.add("drop-active"),o=document.getElementById("interact_dragging_placeholder")||t.relatedTarget,i=t.dropzone.getRect(),a.onDragEnter&&a.onDragEnter(n),a.onToggleDragoverEffect&&a.onToggleDragoverEffect(!0,n)},ondragleave:function(t){var a=e.current.props;t.stopPropagation(),t.target.classList.remove("drop-target"),t.target.classList.remove("drop-active"),o=null,i=null,r&&cancelAnimationFrame(r),a.onDragLeave&&a.onDragLeave(n),a.onToggleDragoverEffect&&a.onToggleDragoverEffect(!1,n)},ondropmove:function(t){var a=e.current.props;t.stopPropagation(),r&&cancelAnimationFrame(r),r=requestAnimationFrame((function(){var e=t.dragEvent.rect,l=t.dragEvent._interaction.coords.cur.client,s=l.x-i.left,u=l.y-i.top;a.onDragOver&&a.onDragOver(n,o,i,{left:e.left-i.left,top:e.top-i.top,width:e.width,height:e.height,right:e.left-i.left+e.width,bottom:e.top-i.top+e.height},s,u,t.dragEvent.speed),r=null}))},ondrop:function(t){var o=e.current.props;if(t.stopPropagation(),t.target.classList.remove("drop-target"),t.target.classList.remove("drop-active"),o.onToggleDragoverEffect&&o.onToggleDragoverEffect(!1,n),r&&cancelAnimationFrame(r),o.onDrop){var a=t.dragEvent.rect,l={left:a.left-i.left,top:a.top-i.top,width:a.width,height:a.height};(l=Te(l,{left:0,top:0,width:i.width,height:i.height})).right=l.left+l.width,l.bottom=l.top+l.height;var s=t.dragEvent._interaction.coords.cur.client,u=s.x-i.left,c=s.y-i.top;o.onDrop(n,i,l,u,c)}}})}(e.current,r)),function(){t&&t.unset()}}),[]),g.React.useEffect((function(){e.current&&Me(e.current,r)}),[]);var a=t.className,l=t.style,s=t.highlightDragover,u=Object(g.classNames)("exb-drop-area d-flex",a);return Object(g.jsx)("div",{className:u,css:Object(g.css)(Re||(Re=ze(["\n      background: transparent;\n      padding: inherit;\n\n      & > .highlight-content {\n        display: none;\n        pointer-events: none;\n      }\n\n      &.drop-target > .highlight-content {\n        display: flex;\n      }\n\n      &.drop-active {\n        background: ",";\n      }\n    "],["\n      background: transparent;\n      padding: inherit;\n\n      & > .highlight-content {\n        display: none;\n        pointer-events: none;\n      }\n\n      &.drop-target > .highlight-content {\n        display: flex;\n      }\n\n      &.drop-active {\n        background: ",";\n      }\n    "])),g.polished.rgba(o.builderTheme.colors.palette.primary[700],.2)),style:l,ref:function(t){return e.current=t}},s&&Object(g.jsx)("div",{className:"w-100 highlight-content"},t.children))}var Le,Ne,Be,Ee,De,_e,Ve,Fe,He=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},We=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ge=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},Ue=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},Ye=Object(g.css)(Le||(Le=He(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  right: 0;\n  display: flex;\n  z-index: 0;\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  right: 0;\n  display: flex;\n  z-index: 0;\n"]))),Ze=function(t){function e(e){var n,o=t.call(this,e)||this;return o.toggleModal=function(t){t.stopPropagation(),o.setState((function(t){return{showModal:!t.showModal}}))},o.closeModal=function(){o.state.showModal&&o.setState({showModal:!1})},o.toggleDragoverEffect=function(t,e){o.ref&&t&&o.canDrop(e)?o.ref.classList.add("dragover"):o.ref.classList.remove("dragover")},o.onDrop=function(t,e,n){if(o.canDrop(t)){var i=Object(h.getAppConfigAction)();if(t.layoutInfo){var r=t.layoutInfo,a=r.layoutId,l=r.layoutItemId,s=i.appConfig.layouts[a].content[l];s.type===g.LayoutItemType.Widget&&(i.removeLayoutItem(t.layoutInfo,!1),i.updateLayoutItem({layoutId:o.props.layoutId,layoutItemId:o.props.layoutItemId},"widgetId",s.widgetId),i.exec())}else o.newWidget(t.uri)}},o.setWidget=function(t){o.newWidget(t.uri).then((function(){o.setState({isBusy:!1})})),o.setState({showModal:!1,isBusy:!0})},o.isItemAccepted=function(t){return o.layoutContext.isItemAccepted(t,!0)},o.fakeLayouts=Object(g.Immutable)(((n={})[g.BrowserSizeMode.Large]=o.props.layoutId+"_"+o.props.layoutItemId+"_tlarge",n[g.BrowserSizeMode.Medium]=o.props.layoutId+"_"+o.props.layoutItemId+"_tmedium",n[g.BrowserSizeMode.Small]=o.props.layoutId+"_"+o.props.layoutItemId+"_tsmall",n)),o.state={showModal:!1,isBusy:!1},o}return We(e,t),e.prototype.getStyle=function(t){return Object(g.css)(Ne||(Ne=He(["\n      position: relative;\n      overflow: hidden;\n\n      &.no-widget {\n        border: 1px dashed ",";\n      }\n\n      &.dragover .drop-tip {\n        background: "," !important;\n      }\n\n      .add-btn {\n        z-index: 1;\n      }\n\n      .mask {\n        position: absolute;\n        left:0;\n        top:0;\n        right:0;\n        bottom:0;\n        z-index:2;\n        background: transparent;\n      }\n    "],["\n      position: relative;\n      overflow: hidden;\n\n      &.no-widget {\n        border: 1px dashed ",";\n      }\n\n      &.dragover .drop-tip {\n        background: "," !important;\n      }\n\n      .add-btn {\n        z-index: 1;\n      }\n\n      .mask {\n        position: absolute;\n        left:0;\n        top:0;\n        right:0;\n        bottom:0;\n        z-index:2;\n        background: transparent;\n      }\n    "])),t.colors.palette.dark[300],g.polished.rgba(t.colors.palette.primary[700],.5))},e.prototype.canDrop=function(t){var e,n,o=Object(h.getAppConfigAction)();if(t.layoutInfo){var i=t.layoutInfo,r=i.layoutId,a=i.layoutItemId,l=o.appConfig.layouts[r].content[a];if(l.type===g.LayoutItemType.Widget&&l.widgetId){var s=o.appConfig.widgets[l.widgetId];if((null===(e=null==s?void 0:s.manifest)||void 0===e?void 0:e.widgetType)!==g.WidgetType.Layout)return!0}}else if(t.itemType===g.LayoutItemType.Widget&&t.manifest){if((null===(n=t.manifest)||void 0===n?void 0:n.widgetType)!==g.WidgetType.Layout&&t.uri)return!0}return!1},e.prototype.newWidget=function(t){return Ge(this,void 0,void 0,(function(){var e,n,o=this;return Ue(this,(function(i){switch(i.label){case 0:return e=Object(h.getAppConfigAction)(),n={uri:t},[4,g.WidgetManager.getInstance().handleNewWidgetJson(n).then((function(t){var n=g.appConfigUtils.getUniqueId(e.appConfig,"widget");t.id=n,e.createWidget(Object(g.Immutable)(t)),e.updateLayoutItem({layoutId:o.props.layoutId,layoutItemId:o.props.layoutItemId},"widgetId",n),e.exec()}))];case 1:return[2,i.sent()]}}))}))},e.prototype.getPopupStyle=function(){var t=this.pageContext.builderTheme;return Object(g.css)(Be||(Be=He(["\n      background-color: ",";\n      max-height: 400px;\n      overflow: auto;\n    "],["\n      background-color: ",";\n      max-height: 400px;\n      overflow: auto;\n    "])),t.colors.palette.light[300])},e.prototype.getModalStyle=function(){var t=this.pageContext.builderTheme;return Object(g.css)(Ee||(Ee=He(["\n      .modal-content {\n        background-color: ",";\n      }\n\n      .modal-header {\n        color: ",";\n        .close {\n          color: ",";\n          &:hover {\n            color: ",";\n          }\n        }\n      }\n    "],["\n      .modal-content {\n        background-color: ",";\n      }\n\n      .modal-header {\n        color: ",";\n        .close {\n          color: ",";\n          &:hover {\n            color: ",";\n          }\n        }\n      }\n    "])),t.colors.palette.light[300],t.colors.black,t.colors.palette.dark[700],t.colors.black)},e.prototype.render=function(){var t=this;return Object(g.jsx)(v.PageContext.Consumer,null,(function(e){return t.pageContext=e,Object(g.jsx)(v.LayoutContext.Consumer,null,(function(o){return t.layoutContext=o,Object(g.jsx)("div",{className:"layout-widget no-widget w-100 d-flex justify-content-center align-items-center",ref:function(e){return t.ref=e},css:t.getStyle(e.builderTheme)},Object(g.jsx)(ke,{css:Ye,className:"drop-tip",layouts:t.fakeLayouts,isPlaceholder:!0,highlightDragover:!1,onToggleDragoverEffect:t.toggleDragoverEffect,onDrop:t.onDrop}),t.state.isBusy&&Object(g.jsx)(f.Loading,{type:f.LoadingType.Primary}),!t.state.isBusy&&Object(g.jsx)("div",{ref:function(e){return t.btnRef=e},className:"add-btn"},Object(g.jsx)(f.Button,{icon:!0,css:Object(g.css)(De||(De=He(["width: 36px; height: 36px; padding: 0.5rem;"],["width: 36px; height: 36px; padding: 0.5rem;"]))),onClick:t.toggleModal},Object(g.jsx)(f.Icon,{icon:n(29)}))),!t.state.isBusy&&t.state.showModal&&Object(g.jsx)(Ce.WidgetListPopper,{builderTheme:e.builderTheme,referenceElement:t.btnRef,isItemAccepted:t.isItemAccepted,onItemSelect:t.setWidget,onClose:t.closeModal}),t.pageContext.viewOnly&&Object(g.jsx)("div",{className:"mask"}))}))}))},e}(g.React.PureComponent),Xe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},qe=function(){return(qe=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xe(e,t),e.prototype.mask=function(){return Object(g.jsx)("div",{className:"widget-mask"})},e.prototype.getStyle=function(){return Object(g.css)(_e||(_e=Je(["\n      ."," & {\n        overflow: visible !important;\n      }\n      z-index: ",";\n\n      .widget-mask {\n        position: absolute;\n        background: transparent;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        z-index: 1;\n      }\n\n      body:not(.design-mode) & .widget-mask {\n        display: none !important;\n      }\n    "],["\n      ."," & {\n        overflow: visible !important;\n      }\n      z-index: ",";\n\n      .widget-mask {\n        position: absolute;\n        background: transparent;\n        left: 0;\n        right: 0;\n        top: 0;\n        bottom: 0;\n        z-index: 1;\n      }\n\n      body:not(.design-mode) & .widget-mask {\n        display: none !important;\n      }\n    "])),ft,this.props.isInlineEditing?v.LayoutZIndex.HandlerTools:0)},e.prototype.getPlaceholderStyle=function(){return Object(g.css)(Ve||(Ve=Je(["\n      body:not(.design-mode) & {\n        display: none !important;\n      }\n    "],["\n      body:not(.design-mode) & {\n        display: none !important;\n      }\n    "])))},e.prototype.render=function(){var t=this.props,e=t.widgetId,n=t.layoutId,o=t.layoutItemId,i=t.isInlineEditing,r=t.isFunctionalWidget,a=t.hasEmbeddedLayout;if(!e)return Object(g.jsx)(Ze,{css:this.getPlaceholderStyle(),layoutId:n,layoutItemId:o});var l=!i&&r&&!a;return Object(g.jsx)(v.WidgetRenderer,qe({className:"w-100",css:this.getStyle()},this.props),l&&this.mask())},e}(g.React.PureComponent),Ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(){return($e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},tn=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};!function(t){t[t.ChooseLayoutType=0]="ChooseLayoutType",t[t.RenderLayout=1]="RenderLayout"}(Fe||(Fe={}));var en=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={mode:Fe.RenderLayout},e.onLayoutTypeSelected=function(){e.setState({mode:Fe.RenderLayout})},e.switchToChoosingMobe=function(){e.setState({mode:Fe.ChooseLayoutType})},e}return Ke(e,t),e.prototype.shouldComponentUpdate=function(t){var e=this;return!(t.isPageItem&&!t.visible)&&Object.keys(t).some((function(n){return t[n]!==e.props[n]}))},e.prototype.render=function(){var t=this.props.layout;if(!t)return null;var e=Object(v.findLayoutBuilder)(t.type||g.LayoutType.FlowLayout);if(!e)return null;var n=this.props,o=n.isItemAccepted,i=tn(n,["isItemAccepted"]);return Object(g.jsx)(v.LayoutContext.Provider,{value:{isItemAccepted:o||on}},Object(g.jsx)(e,$e({},i)))},e}(g.React.Component),nn=g.ReactRedux.connect(v.utils.mapStateToLayoutProps)(en);function on(t,e){var n;return!!t&&(!e||t.itemType===g.LayoutItemType.Widget&&null!=t.uri&&(null===(n=t.manifest)||void 0===n?void 0:n.widgetType)!==g.WidgetType.Layout)}var rn=n(26),an=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ln=function(){return(ln=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return an(e,t),e.prototype.render=function(){return g.React.createElement(rn.a,ln({},this.props,{layoutEntryComponent:nn,viewVisibilityContext:v.ViewVisibilityContext}))},e}(g.React.PureComponent);function un(t,e){var n=g.React.useState(!0),o=n[0],i=n[1],r=g.React.useContext(Ht.b);return g.React.useEffect((function(){null!=t&&i(r)}),[t,r]),o}var cn,dn=n(22),pn=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},gn=function(){return(gn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},hn=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},fn=m.interact.modifiers.restrictRect({restriction:"parent"}),yn=m.interact.modifiers.restrictRect({restriction:"div.limited-drag-boundary"}),vn=[ct,dt,ut,st];function mn(t){var e,n,o,i,r,a,l,s,u,c,d=g.ReactRedux.useSelector((function(e){return function(t,e){var n,o=v.utils.mapStateToLayoutItemProps(t,e),i=e.layoutId,r=null===(n=t.appConfig.layouts[i])||void 0===n?void 0:n.type;if(!o.layoutItem)return gn({layoutType:r},o);if(o.layoutItem.type===g.LayoutItemType.Widget)return gn(gn({layoutType:r},o),v.utils.mapStateToWidgetProps(t,e));var a=v.searchUtils.getSectionInfo(t,o.layoutItem.sectionId),l=de(a);return gn(gn(gn({layoutType:r},o),a),{activeView:t.appConfig.views[l]})}(e,t)}),g.ReactRedux.shallowEqual),p=gn(gn({},d),t),h=g.React.useContext(v.PageContext),f=g.React.useRef(),y=g.React.useRef(),b=null!==(n=null===(e=p.layoutItem)||void 0===e?void 0:e.setting)&&void 0!==n?n:{},x=b.effect,I=b.oneByOneEffect,w=p.animationPreview,j=p.previewId,O=p.playMode,S=p.layoutType,C=g.React.useCallback((function(){return h.rootLayoutId}),[h.rootLayoutId]),P=Object(dn.a)(f.current,p.watchViewportVisibility),T=function(t){var e,n=t.effect,o=t.isPreview,i=t.previewId,r=t.playMode,a=t.isParentPlaying,l=(g.React.useContext(v.PageContext).pageId,g.React.useRef()),s=g.React.useState(),u=s[0],c=s[1],d=g.React.useRef(g.AnimationTriggerType.Manual),p=null===(e=null==n?void 0:n[g.AnimationTriggerType.ScrollIntoView])||void 0===e?void 0:e.type;p=p&&p!==g.AnimationType.None?p:null;var h=g.ReactRedux.useSelector((function(t){var e;return null===p||(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===g.AppMode.Design})),f=g.ReactRedux.useSelector((function(t){return null===p?null:t.browserSizeMode})),y=un(p),m=g.React.useRef(y),b=g.React.useRef(f),x=g.React.useMemo((function(){return p?o&&l.current!==i&&r!==g.AnimationPlayMode.OneByOne?(l.current=i,i):u:null}),[p,o,r,i,u]);g.React.useEffect((function(){h||c(Symbol("autoplay when switching to live view")),d.current=g.AnimationTriggerType.Manual}),[h]),g.React.useEffect((function(){h||b.current===f||(c(Symbol("autoplay when size mode changed")),d.current=g.AnimationTriggerType.Manual),b.current=f}),[f,h]),g.React.useEffect((function(){h||m.current===y||(m.current=y,c(Symbol("autoplay when visible change")),d.current=g.AnimationTriggerType.Manual)}),[y,h]);var I=g.React.useCallback((function(){u&&(d.current=g.AnimationTriggerType.ScrollIntoView,c(null))}),[u]);if(!p)return{};var w={type:!h||x&&x===i||a?p:null,trigger:x?g.AnimationTriggerType.Manual:d.current,revert:!y};return w.playId=null===w.type?null:x,w.onAnimationEnd=null===w.type?null:I,w}({effect:x,isPreview:w,previewId:j,playMode:O,isParentPlaying:p.isParentPlaying}),A=T.type,M=T.trigger,R=T.playId,z=T.revert,k=T.onAnimationEnd,L=function(t){var e,n,o,i=t.effect,r=t.isSection,a=t.isPreview,l=t.previewId,s=t.playMode,u=t.isParentPlaying,c=(g.React.useContext(v.PageContext).pageId,g.React.useContext(g.AnimationContext)),d=g.React.useRef(),p=g.React.useRef(g.AnimationTriggerType.Manual),h=null===(e=null==i?void 0:i[g.AnimationTriggerType.ScrollIntoView])||void 0===e?void 0:e.type;h=h&&h!==g.AnimationType.None?h:null;var f=g.ReactRedux.useSelector((function(t){var e;return null===h||(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===g.AppMode.Design})),y=un(h),m=g.React.useRef(y),b=g.React.useState(),x=b[0],I=b[1],w=g.React.useMemo((function(){return h?a&&d.current!==l&&s!==g.AnimationPlayMode.AsOne?(d.current=l,l):x:null}),[h,a,s,l,x]);g.React.useEffect((function(){f||I(Symbol("autoplay when switching to live view")),p.current=g.AnimationTriggerType.Manual}),[f]),g.React.useEffect((function(){f||m.current===y||(m.current=y,I(Symbol("autoplay when visible change")),p.current=g.AnimationTriggerType.Manual)}),[y,f]);var j=g.React.useCallback((function(){x&&(p.current=g.AnimationTriggerType.ScrollIntoView,I(null))}),[x]);if(!h)return{inheritedOneByOneSetting:null==c?void 0:c.setting,depth:(null!==(n=null==c?void 0:c.depth)&&void 0!==n?n:0)+1};var O={setting:!f||w&&w===l||r||u?null==i?void 0:i[g.AnimationTriggerType.ScrollIntoView]:null,onAnimationEnd:j,trigger:w?g.AnimationTriggerType.Manual:p.current,inheritedOneByOneSetting:null==c?void 0:c.setting,depth:(null!==(o=null==c?void 0:c.depth)&&void 0!==o?o:0)+1};return O.playId=null===O.setting?null:w,O.revert=!(!O.setting&&!O.inheritedOneByOneSetting)&&!y,O}({effect:I,isSection:(null===(o=p.layoutItem)||void 0===o?void 0:o.type)===g.LayoutItemType.Section,isPreview:w,previewId:j,playMode:O,isParentPlaying:p.isParentPlaying}),N=L.setting,B=L.trigger,E=L.inheritedOneByOneSetting,D=L.playId,_=L.depth,V=L.revert,F=L.onAnimationEnd;g.React.useEffect((function(){if(f.current&&!y.current){var e=t.layoutId,n=t.layoutItemId,o=t.useDragHandler,i=t.onDragging,r=t.onResizing,a=d.layoutItem;y.current=Object(m.interact)(f.current).origin("parent"),y.current=mt(y.current,{layoutId:e,layoutItemId:n,useDragHandler:o,onDragging:i,onDragStart:W,onDragEnd:G,itemType:a.type,rootLayoutId:C,restrict:function(){return t.restrict}}),y.current=jt(y.current,{layoutItemId:n,onResizing:r,restrictEdges:S!==g.LayoutType.FlowLayout,onResizeStart:U,onResizeEnd:Y})}return y.current&&(t.restrict?y.current.draggable({modifiers:[fn]}):y.current.draggable({modifiers:[yn]})),t.resizeObserver&&t.resizeObserver.observe(f.current),function(){y.current&&(y.current.unset(),y.current=null),t.resizeObserver&&t.resizeObserver.unobserve(f.current)}}),[t.restrict]);var H=g.React.useMemo((function(){return{trigger:B,setting:N,inheritedOneByOneSetting:E,playId:D,depth:_,revert:V,onAnimationEnd:F}}),[B,N,E,D,_,V,F]);function W(e){bt(!0),Ot(!1),t.onDragStart&&t.onDragStart(e)}function G(e,n,o){g.lodash.defer((function(){bt(!1)})),t.onDragEnd&&t.onDragEnd(e,n,o)}function U(e,n,o){bt(!1),Ot(!0),t.onResizeStart&&t.onResizeStart(e,n,o)}function Y(e,n,o,i,r,a){g.lodash.defer((function(){Ot(!1)})),t.onResizeEnd&&t.onResizeEnd(e,n,o,i,r,a)}function Z(){var t,e=p.selected,n=p.draggable,o=void 0===n||n,i=null!==(t=d.isInlineEditing)&&void 0!==t&&t,r=g.utils.isTouchDevice();return o&&!h.viewOnly&&!i&&(!r||e)}var X=p.layoutId,J=p.layoutItemId,q=p.top,Q=p.left,K=p.right,$=p.bottom,tt=p.resizable,et=p.draggable,nt=p.isBlock,ot=p.autoScroll,it=p.layoutItem,rt=p.isFunctionalWidget,st=p.selected,ut=p.isInlineEditing,ct=p.hasEmbeddedLayout,dt=p.hasExtension,pt=p.isParentPlaying,gt=p.isParentRevert,ht=p.isParentEnableScroll,vt=p.parentAnimationStyle,It=p.parentPlayId;if(!it)return null;var wt=p.className,Ct=p.forbidContextMenu,Pt=(p.onClick,p.onDoubleClick,p.children,hn(p,["className","forbidContextMenu","onClick","onDoubleClick","children"])),Tt=it.type===g.LayoutItemType.Widget,At=it.type===g.LayoutItemType.Section,Mt=!Ct&&!h.viewOnly&&(it.widgetId||it.sectionId)&&(!rt||At),Rt=null===(i=null==x?void 0:x[g.AnimationTriggerType.ScrollIntoView])||void 0===i?void 0:i.option,zt=null!==(s=null===(l=null===(a=null===(r=it.setting)||void 0===r?void 0:r.style)||void 0===a?void 0:a.transform)||void 0===l?void 0:l.rotate)&&void 0!==s?s:0;return Object(g.jsx)(g.AnimationContext.Provider,{value:H},Object(g.jsx)(v.ViewportVisibilityContext.Provider,{value:!!lt()||P},Object(g.jsx)(g.Animation,{type:A,trigger:M,configType:null==Rt?void 0:Rt.configType,direction:null==Rt?void 0:Rt.direction,playId:R,onAnimationEnd:k,parentAnimationStyle:vt,isParentPlaying:pt,isParentRevert:gt,isParentEnableScroll:ht,parentPlayId:It,revert:z,css:function(t){var e,n=Z(),o=null!==(e=d.isInlineEditing)&&void 0!==e&&e,i=g.polished.rgba(h.builderTheme.colors.palette.dark[300],.6),r=h.builderTheme.colors.palette.primary[600],a=rt&&!At||st?"solid":"dashed";return Object(g.css)(cn||(cn=pn(["\n      position: relative;\n      overflow: visible;\n      cursor: ",";\n      touch-action: ",";\n      user-select: ",";\n      min-width: ","px;\n      min-height: ","px;\n\n      & > div.widget-context-menu {\n        display: none;\n      }\n\n      &:hover > div.widget-context-menu {\n        display: flex;\n      }\n\n      ."," &.functional-widget {\n        pointer-events: none;\n      }\n      ."," &.functional-widget .exb-drop-area {\n        pointer-events: all;\n      }\n\n      ."," &,\n      ."," & {\n        > div.highlight-tip {\n          .tip-content {\n            outline-color: ",";\n          }\n        }\n      }\n\n      body:not(.design-mode) &,\n      body.lock-layout & {\n        cursor: default;\n      }\n\n      body:not(.design-mode) & > div.highlight-tip {\n        display: none !important;\n      }\n\n      & > div.highlight-tip {\n        display: block;\n        padding: inherit;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        top: 0;\n        right: 0;\n        pointer-events: none;\n        transform: ",";\n        .tip-content {\n          height: 100%;\n          padding: 1px;\n          &:after {\n            content: '';\n            width: 100%;\n            height: 100%;\n            outline: ",";\n            display: block;\n            outline-color: ",";\n          }\n        }\n      }\n\n      &:hover > div.highlight-tip {\n        display: block;\n        .tip-content {\n          &:after {\n            outline-color: ",";\n          }\n        }\n      }\n    "],["\n      position: relative;\n      overflow: visible;\n      cursor: ",";\n      touch-action: ",";\n      user-select: ",";\n      min-width: ","px;\n      min-height: ","px;\n\n      & > div.widget-context-menu {\n        display: none;\n      }\n\n      &:hover > div.widget-context-menu {\n        display: flex;\n      }\n\n      ."," &.functional-widget {\n        pointer-events: none;\n      }\n      ."," &.functional-widget .exb-drop-area {\n        pointer-events: all;\n      }\n\n      ."," &,\n      ."," & {\n        > div.highlight-tip {\n          .tip-content {\n            outline-color: ",";\n          }\n        }\n      }\n\n      body:not(.design-mode) &,\n      body.lock-layout & {\n        cursor: default;\n      }\n\n      body:not(.design-mode) & > div.highlight-tip {\n        display: none !important;\n      }\n\n      & > div.highlight-tip {\n        display: block;\n        padding: inherit;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        top: 0;\n        right: 0;\n        pointer-events: none;\n        transform: ",";\n        .tip-content {\n          height: 100%;\n          padding: 1px;\n          &:after {\n            content: '';\n            width: 100%;\n            height: 100%;\n            outline: ",";\n            display: block;\n            outline-color: ",";\n          }\n        }\n      }\n\n      &:hover > div.highlight-tip {\n        display: block;\n        .tip-content {\n          &:after {\n            outline-color: ",";\n          }\n        }\n      }\n    "])),n?"move":"default",o||!st?"auto":"none",o?"auto":"none",v.MIN_LAYOUT_ITEM_SIZE,v.MIN_LAYOUT_ITEM_SIZE,yt,yt,yt,ft,i,t>0||t<0?"rotateZ("+t+"deg)":"",nt&&!st?"none":"1px "+a+" "+i,!rt||At?i:"transparent",r)}(zt),ref:f,className:Object(g.classNames)("builder-layout-item exb-rnd",wt,{selected:st,"is-widget":Tt,"is-section":At,"functional-widget":Tt&&rt,"no-drag-action":!Z()}),onDoubleClick:function(e){var n=t.layoutId,o=t.layoutItemId,i=d.supportInlineEditing,r=d.widgetId;t.onDoubleClick&&t.onDoubleClick(e,{layoutId:n,layoutItemId:o}),h.viewOnly||(e.stopPropagation(),i&&Object(g.getAppStore)().dispatch(g.appActions.setWidgetIsInlineEditingState(r,!0)))},onClick:function(e){if(Math.abs(e.screenX-u)>v.CLICK_TOLRERANCE||Math.abs(e.screenY-c)>v.CLICK_TOLRERANCE)e.stopPropagation();else{var n=h.viewOnly,o=d.isFunctionalWidget,i=d.layoutItem;if(!n&&(!at()&&lt()||o||i.type===g.LayoutItemType.Section)&&(e.stopPropagation(),!St()&&!xt())){if(t.onClick){var r=p.layoutId,a=p.layoutItemId;t.onClick(e,{layoutId:r,layoutItemId:a})}!function(){var e=t.layoutId,n=t.layoutItemId;d.selected||Object(g.getAppStore)().dispatch(g.appActions.selectionChanged({layoutId:e,layoutItemId:n}))}()}}},onMouseDown:function(t){u=t.screenX,c=t.screenY},"data-layoutitemid":J,"data-layoutid":X},Tt&&Object(g.jsx)(Qe,gn({rotate:zt},Pt)),At&&Object(g.jsx)(sn,gn({rotate:zt},Pt)),Mt&&function(e){var n=h.builderTheme;return Object(g.jsx)(Ft,{builderTheme:n,layoutId:t.layoutId,layoutItem:d.layoutItem,positionType:"center",size:v.CONTEXT_MENU_ITEM_SIZE,rotate:e,iconSize:v.CONTEXT_MENU_ICON_SIZE,className:"widget-context-menu",menuItems:t.contextMenuItems||vn})}(zt),!h.viewOnly&&st&&Object(g.jsx)(Se,{layoutId:X,layoutItem:it,top:q,left:Q,right:K,bottom:$,resizable:tt,draggable:et,selected:st,autoScroll:ot,forbidToolbar:t.forbidToolbar,toolItems:t.toolItems,showDefaultTools:t.showDefaultTools,isInlineEditing:ut,isFunctionalWidget:rt,hasEmbeddedLayout:ct,isSection:At,isBlock:nt,hasExtension:Tt&&dt,widgetJson:d.widgetJson,widgetState:d.widgetState,rotate:zt}),!h.viewOnly&&Object(g.jsx)("div",{className:"highlight-tip"},Object(g.jsx)("div",{className:"tip-content"})),t.children)))}var bn=n(27);function xn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=t.layoutId,i=t.layoutItemId,r=n.layouts[o];bn(r.order,"parent order must not be empty to alter order");var a=[].concat(r.order),l=a.indexOf(i);l===a.length-1||l<0||(a[l]=a[l+1],a[l+1]=t.layoutItemId,e.editLayoutOrder({layoutId:o},a).exec())}function In(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=t.layoutId,i=t.layoutItemId,r=n.layouts[o];bn(r.order,"parent order must not be empty to alter order");var a=[].concat(r.order),l=a.indexOf(i);l===a.length-1||l<0||(a.splice(l,1),a.push(t.layoutItemId),e.editLayoutOrder({layoutId:o},a).exec())}function wn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=t.layoutId,i=t.layoutItemId,r=n.layouts[o];bn(r.order,"parent order must not be empty to alter order");var a=[].concat(r.order),l=a.indexOf(i);l<=0||(a[l]=a[l-1],a[l-1]=t.layoutItemId,e.editLayoutOrder({layoutId:o},a).exec())}function jn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=t.layoutId,i=t.layoutItemId,r=n.layouts[o];bn(r.order,"parent order must not be empty to alter order");var a=[].concat(r.order),l=a.indexOf(i);l<=0||(a.splice(l,1),a.splice(0,0,t.layoutItemId),e.editLayoutOrder({layoutId:o},a).exec())}function On(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=v.searchUtils.findLayoutItem(n,t).setting||Object(g.Immutable)({});o=o.set("lockLayout",!o.lockLayout),e.editLayoutItemSetting(t,o).exec()}function Sn(t,e){var n,o=Object(h.getAppConfigAction)(),i=o.appConfig,r=v.searchUtils.findLayoutItem(i,t),a=r.bbox,l=r.setting||Object(g.Immutable)({});switch(0!==parseInt(a[e],10)&&o.editLayoutItemBBox(t,a.set(e,v.utils.isPercentage(a[e])?"0%":"0px")),l=l.setIn(["autoProps",e],!1),e){case"top":n="bottom";break;case"bottom":n="top";break;case"left":n="right";break;case"right":n="left"}l=l.setIn(["autoProps",n],!0),"left"===e||"right"===e?l=l.set("hCenter",!1):"top"!==e&&"bottom"!==e||(l=l.set("vCenter",!1)),o.editLayoutItemSetting(t,l).exec()}function Cn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=v.searchUtils.findLayoutItem(n,t),i=o.bbox,r=o.setting||Object(g.Immutable)({});r=r.set("hCenter",!1).setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!1).setIn(["autoProps","width"],v.LayoutItemSizeModes.Stretch),e.editLayoutItemBBox(t,i.set("left",v.utils.isPercentage(i.left)?"0%":"0px").set("right",v.utils.isPercentage(i.right)?"0%":"0px").set("width","100%")).editLayoutItemSetting(t,r).exec()}function Pn(t,e){var n,o,i=Object(h.getAppConfigAction)(),r=i.appConfig,a=v.searchUtils.findLayoutItem(r,t),l=a.setting||Object(g.Immutable)({}),s=a.bbox;if("h"===e)if((null===(n=l.autoProps)||void 0===n?void 0:n.width)===v.LayoutItemSizeModes.Stretch){if(v.utils.isPercentage(s.left)!==v.utils.isPercentage(s.right))return;var u=v.utils.isPercentage(s.left)?"%":"px",c=parseFloat(s.left)+parseFloat(s.right);s=s.set("left",""+c/2+u).set("right",""+c/2+u)}else s=s.set("left","50%"),l=l.set("hCenter",!0).setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!0);else if((null===(o=l.autoProps)||void 0===o?void 0:o.height)===v.LayoutItemSizeModes.Stretch){if(v.utils.isPercentage(s.top)!==v.utils.isPercentage(s.bottom))return;u=v.utils.isPercentage(s.top)?"%":"px",c=parseFloat(s.top)+parseFloat(s.bottom);s=s.set("top",""+c/2+u).set("bottom",""+c/2+u)}else s=s.set("top","50%"),l=l.set("vCenter",!0).setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!0);i.editLayoutItemBBox(t,s).editLayoutItemSetting(t,l).exec()}function Tn(t){Pn(t,"v")}function An(t){Pn(t,"h")}function Mn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=v.searchUtils.findLayoutItem(n,t),i=o.bbox,r=o.setting||Object(g.Immutable)({});r=r.set("vCenter",!1).setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!1).setIn(["autoProps","height"],v.LayoutItemSizeModes.Stretch),e.editLayoutItemBBox(t,i.set("top",v.utils.isPercentage(i.top)?"0%":"0px").set("bottom",v.utils.isPercentage(i.bottom)?"0%":"0px").set("height","100%")).editLayoutItemSetting(t,r).exec()}function Rn(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig,o=v.searchUtils.findLayoutItem(n,t),i=o.bbox,r=o.setting||Object(g.Immutable)({});r=r.set("vCenter",!1).set("hCenter",!1).setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!1).setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!1).setIn(["autoProps","height"],v.LayoutItemSizeModes.Stretch).setIn(["autoProps","width"],v.LayoutItemSizeModes.Stretch),e.editLayoutItemBBox(t,i.set("top",v.utils.isPercentage(i.top)?"0%":"0px").set("bottom",v.utils.isPercentage(i.bottom)?"0%":"0px").set("left",v.utils.isPercentage(i.left)?"0%":"0px").set("right",v.utils.isPercentage(i.right)?"0%":"0px").set("width","100%").set("height","100%")).editLayoutItemSetting(t,r).exec()}var zn=[[{icon:n(56),visible:function(){return rt()===g.AppMode.Design&&!at()}},{icon:n(57),label:function(t){return t.formatMessage(v.utils.isRTL()?"snapToRight":"snapToLeft")},title:function(t){return t.formatMessage(v.utils.isRTL()?"snapToRight":"snapToLeft")},autoFlipIcon:!0,onClick:function(t){var e=t.layoutItem;Sn({layoutId:t.layoutId,layoutItemId:e.id},"left")}},{icon:n(58),label:function(t){return t.formatMessage("alignHCenter")},title:function(t){return t.formatMessage("alignHCenter")},onClick:function(t){var e=t.layoutItem;An({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(59),label:function(t){return t.formatMessage(v.utils.isRTL()?"snapToLeft":"snapToRight")},title:function(t){return t.formatMessage(v.utils.isRTL()?"snapToLeft":"snapToRight")},autoFlipIcon:!0,onClick:function(t){var e=t.layoutItem;Sn({layoutId:t.layoutId,layoutItemId:e.id},"right")}},{icon:n(38),label:function(t){return t.formatMessage("snapToTop")},title:function(t){return t.formatMessage("snapToTop")},onClick:function(t){var e=t.layoutItem;Sn({layoutId:t.layoutId,layoutItemId:e.id},"top")}},{icon:n(60),label:function(t){return t.formatMessage("alignVCenter")},title:function(t){return t.formatMessage("alignVCenter")},onClick:function(t){var e=t.layoutItem;Tn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(61),label:function(t){return t.formatMessage("snapToBottom")},title:function(t){return t.formatMessage("snapToBottom")},onClick:function(t){var e=t.layoutItem;Sn({layoutId:t.layoutId,layoutItemId:e.id},"bottom")}},{icon:n(62),label:function(t){return t.formatMessage("fullWidth")},title:function(t){return t.formatMessage("fullWidth")},onClick:function(t){var e=t.layoutItem;Cn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(63),label:function(t){return t.formatMessage("fullHeight")},title:function(t){return t.formatMessage("fullHeight")},onClick:function(t){var e=t.layoutItem;Mn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(64),label:function(t){return t.formatMessage("fullSize")},title:function(t){return t.formatMessage("fullSize")},onClick:function(t){var e=t.layoutItem;Rn({layoutId:t.layoutId,layoutItemId:e.id})}}],[{icon:n(65),visible:function(){return rt()===g.AppMode.Design&&!at()}},{icon:n(66),label:function(t){return t.formatMessage("sendBackward")},title:function(t){return t.formatMessage("sendBackward")},onClick:function(t){var e=t.layoutItem;wn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(67),label:function(t){return t.formatMessage("bringForward")},title:function(t){return t.formatMessage("bringForward")},onClick:function(t){var e=t.layoutItem;xn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(68),label:function(t){return t.formatMessage("sendToBack")},title:function(t){return t.formatMessage("sendToBack")},onClick:function(t){var e=t.layoutItem;jn({layoutId:t.layoutId,layoutItemId:e.id})}},{icon:n(69),label:function(t){return t.formatMessage("bringToFront")},title:function(t){return t.formatMessage("bringToFront")},onClick:function(t){var e=t.layoutItem;In({layoutId:t.layoutId,layoutItemId:e.id})}}],{icon:function(t){var e,o,i=null!==(o=null===(e=t.layoutItem.setting)||void 0===e?void 0:e.lockLayout)&&void 0!==o&&o;return n(i?32:39)},visible:function(){return rt()===g.AppMode.Design&&!at()},title:function(t){var e,n,o=null!==(n=null===(e=t.layoutItem.setting)||void 0===e?void 0:e.lockLayout)&&void 0!==n&&n;return t.formatMessage(o?"unlockLayout":"lockLayout")},onClick:function(t){var e=t.layoutItem;On({layoutId:t.layoutId,layoutItemId:e.id})}},{seperator:!0}],kn=n(13),Ln=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nn=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Bn=function(){return(Bn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},En=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.handleResizeEnd=function(t,n,o,i,r,a){var l=e.props.layoutItem,s="ratio"===e.itemSetting.heightMode?e.itemSetting.aspectRatio*i:r;e.props.onResizeEnd(t,n,o,i,s,a,l,e.itemSetting)},e.handleResizing=function(t,n,o,i,r,a,l){var s="ratio"===e.itemSetting.heightMode?e.itemSetting.aspectRatio*i:r;e.props.onResizing(t,n,o,i,s,a,l)},e.moveUp=function(){e.props.onMoveByKey(e.props.layoutItemId,0,-1)},e.moveDown=function(){e.props.onMoveByKey(e.props.layoutItemId,0,1)},e.moveLeft=function(){e.props.onMoveByKey(e.props.layoutItemId,-1,0)},e.moveRight=function(){e.props.onMoveByKey(e.props.layoutItemId,1,0)},e}return Ln(e,t),e.prototype.getKeyboardComponent=function(){return Object(g.jsx)(g.Keyboard,{bindings:{up:this.moveUp,down:this.moveDown,left:this.moveLeft,right:this.moveRight}})},e.prototype.getPositionStyle=function(){var t,e,n=this.props,o=n.layoutItem,i=n.offsetX,r=n.offsetY,a=n.dw,l=n.dh,s=n.initRect,u=n.containerRect,c=Object(kn.e)(o.bbox,this.itemSetting),d=o.setting;null!=s&&(c=Object(kn.f)(s,u,{dw:a,dh:"ratio"===this.itemSetting.heightMode?this.itemSetting.aspectRatio*a:l,dx:i,dy:r},!0),(null==d?void 0:d.hCenter)&&"50%"===(null===(t=o.bbox)||void 0===t?void 0:t.left)&&(c.left="50%"),(null==d?void 0:d.vCenter)&&"50%"===(null===(e=o.bbox)||void 0===e?void 0:e.top)&&(c.top="50%"));var p=Bn(Bn({},c),Object(kn.a)(o.bbox,this.itemSetting,Boolean(s)));return 0===a&&0===l||(p.right="auto"),Object(g.css)(Dn||(Dn=Nn(["\n      position: absolute;\n      transform: ",";\n      left: ",";\n      right: ",";\n      top: ",";\n      bottom: ",";\n      width: ",";\n      height: ",";\n    "],["\n      position: absolute;\n      transform: ",";\n      left: ",";\n      right: ",";\n      top: ",";\n      bottom: ",";\n      width: ",";\n      height: ",";\n    "])),p.transform,v.utils.getValueOfBBox(p,"left"),v.utils.getValueOfBBox(p,"right"),v.utils.getValueOfBBox(p,"top"),v.utils.getValueOfBBox(p,"bottom"),v.utils.getValueOfBBox(p,"width"),v.utils.getValueOfBBox(p,"height"))},e.prototype.render=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=t.isLayoutLockChildren,i=t.draggable,r=void 0===i||i,a=t.resizable,l=void 0===a||a;if(null==n||n.isPending)return null;this.itemSetting=g.lodash.assign({},y.a,n.setting);var s=this.itemSetting.lockLayout,u=v.utils.parseAspectRatio(this.itemSetting.aspectRatio),c=Object(kn.d)(n.bbox,this.itemSetting),d=v.utils.getLayoutItemSizeMode("width",n.bbox,this.itemSetting.autoProps),p=v.utils.getLayoutItemSizeMode("height",n.bbox,this.itemSetting.autoProps),h=v.utils.handleOnebyOneAnimation(this.props);return Object(g.jsx)(mn,Bn({className:"d-flex",css:this.getPositionStyle(),layoutId:e,layoutItemId:n.id,restrict:this.itemSetting.lockParent||o,draggable:r&&!s,resizable:l&&!s,showDefaultTools:this.props.showDefaultTools,toolItems:zn,onResizeStart:this.props.onResizeStart,onResizing:this.handleResizing,onResizeEnd:this.handleResizeEnd,onClick:this.props.onClick,top:p!==v.LayoutItemSizeModes.Auto&&!c,bottom:p!==v.LayoutItemSizeModes.Auto&&!c,left:d!==v.LayoutItemSizeModes.Auto,right:d!==v.LayoutItemSizeModes.Auto,forceAspectRatio:c,aspectRatio:u,isInSection:this.props.isInSection},h),this.props.selected&&this.getKeyboardComponent())},e}(g.React.PureComponent);var Dn,_n=g.ReactRedux.connect((function(t,e){var n,o=!1,i=null===(n=t.appRuntimeInfo)||void 0===n?void 0:n.selection;return null!=i&&(o=i.layoutId===e.layoutId&&i.layoutItemId===e.layoutItemId),{selected:o}}))(En);function Vn(t){return[t<0?"-":"",g.i18n.getIntl().formatNumber(Math.abs(t))]}function Fn(t){var e=Object(g.getAppStore)().getState().appContext.locale,n=Vn(parseFloat(t)),o=n[0],i=n[1];return v.utils.isRTL()?"he"===(null==e?void 0:e.toLowerCase())?""+o+i+"%":o+"%"+i:"tr"===(null==e?void 0:e.toLowerCase())?o+"%"+i:""+o+i+"%"}function Hn(t){var e=Vn(parseFloat(t)),n=e[0],o=e[1];return v.utils.isRTL()?n+"px"+o:""+n+o+"px"}function Wn(t,e){var n,o,i,r,a;if(e.rect.top>t.rect.bottom||e.rect.bottom<t.rect.top)return!1;if(e.rect.right+5<t.rect.left&&(null!=(null===(n=e.right)||void 0===n?void 0:n.value)&&null!=(null===(o=t.left)||void 0===o?void 0:o.value)&&(a=e.right.usePercentage)===t.left.usePercentage))return a||e.right.origin===t.left.origin;if(t.rect.right+5<e.rect.left&&(null!=(null===(i=t.right)||void 0===i?void 0:i.value)&&null!=(null===(r=e.left)||void 0===r?void 0:r.value)&&(a=e.left.usePercentage)===t.right.usePercentage))return a||e.left.origin===t.right.origin;return!1}function Gn(t,e){var n,o,i,r,a;if(e.rect.left>t.rect.right||e.rect.right<t.rect.left)return!1;if(e.rect.bottom+5<t.rect.top&&(null!=(null===(n=e.bottom)||void 0===n?void 0:n.value)&&null!=(null===(o=t.top)||void 0===o?void 0:o.value)&&(a=e.bottom.usePercentage)===t.top.usePercentage))return a||e.bottom.origin===t.top.origin;if(t.rect.bottom+5<e.rect.top&&(null!=(null===(i=t.bottom)||void 0===i?void 0:i.value)&&null!=(null===(r=e.top)||void 0===r?void 0:r.value)&&(a=e.top.usePercentage)===t.bottom.usePercentage))return a||e.top.origin===t.bottom.origin;return!1}function Un(t,e,n,o,i,r,a,l){if(null!=r&&null!=l){var s=Math.max(t.rect.top,e.rect.top),u=Math.min(t.rect.bottom,e.rect.bottom);r.setColor(g.polished.rgba(l.colors.palette.danger[800],.6));var c={left:i?e.rect.left-n:t.rect.right,top:s,width:n,height:u-s};if(r.drawRect(c),o){var d=(s+u)/2,p=t.right.usePercentage?Fn(v.utils.toRatio(n,a)):Hn(n+"px");r.setColor(l.colors.palette.primary[600]),r.drawLine(i?e.rect.left-n:t.rect.right,d,i?e.rect.left:t.rect.right+n,d,!1,p)}}}function Yn(t,e,n,o,i,r,a,l){if(null!=r&&null!=l){var s=Math.max(t.rect.left,e.rect.left),u=Math.min(t.rect.right,e.rect.right);r.setColor(g.polished.rgba(l.colors.palette.danger[800],.6));var c={left:s,top:i?e.rect.top-n:t.rect.bottom,width:u-s,height:n};if(r.drawRect(c),o){var d=(s+u)/2,p=t.bottom.usePercentage?Fn(v.utils.toRatio(n,a)):Hn(n+"px");r.setColor(l.colors.palette.primary[600]),r.drawLine(d,i?e.rect.top-n:t.rect.bottom,d,i?e.rect.top:t.rect.bottom+n,!1,p)}}}function Zn(t,e,n,o,i,r,a){var l,s,u,c,d,p,g,h=0,f=0,y=0!==n.w||0!==n.h;y&&0===n.w||(p=function(t,e){var n={id:"",right:{value:e?"0%":"0px",pixelValue:0,usePercentage:e,origin:0,from:Number.NEGATIVE_INFINITY,to:Number.POSITIVE_INFINITY},rect:{left:-100,width:100,right:0,top:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY}};if(null==t)return{value:n};for(var o=t;null!=o.next;)o=o.next;return o.next={value:n},t}(p=function t(e,n){var o;return n.filter((function(t){var n,o;return(null===(n=t.right)||void 0===n?void 0:n.pixelValue)<(null===(o=e.left)||void 0===o?void 0:o.pixelValue)})).sort((function(t,e){return e.right.pixelValue-t.right.pixelValue})).some((function(t){if(Wn(e,t))return o={value:t},!0})),null!=o&&(o.next=t(o.value,n)),o}(t,e),null==(null===(l=t.left)||void 0===l?void 0:l.value)||(null===(s=t.left)||void 0===s?void 0:s.usePercentage)),g=function(t,e,n){var o={id:"",left:{value:e?"0%":"0px",pixelValue:n,usePercentage:e,origin:1,from:Number.NEGATIVE_INFINITY,to:Number.POSITIVE_INFINITY},rect:{left:n,width:100,right:n+100,top:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY}};if(null==t)return{value:o};for(var i=t;null!=i.next;)i=i.next;return i.next={value:o},t}(g=function t(e,n){var o;return n.filter((function(t){var n,o;return(null===(n=t.left)||void 0===n?void 0:n.pixelValue)>(null===(o=e.right)||void 0===o?void 0:o.pixelValue)})).sort((function(t,e){return t.left.pixelValue-e.left.pixelValue})).some((function(t){if(Wn(e,t))return o={value:t},!0})),null!=o&&(o.next=t(o.value,n)),o}(t,e),null==(null===(u=t.right)||void 0===u?void 0:u.value)||t.right.usePercentage,o),0!==(h=function(t,e,n,o,i,r){if(e.gridline.rect.top===Number.NEGATIVE_INFINITY&&n.gridline.rect.top===Number.NEGATIVE_INFINITY||null==t.left||null==t.right)return 0;var a=t.left.pixelValue-e.gridline.right.pixelValue,l=n.gridline.left.pixelValue-t.right.pixelValue,s=e.fixed||n.fixed?5:10;if(Math.abs(l-a)<s){var u=void 0,c=void 0;return u=e.fixed||n.fixed?l-a:(l-a)/2,c=e.fixed?a:n.fixed?l:a+u,Un(e.gridline,t,c,!1,!1,o,i,r),Un(t,n.gridline,c,!1,!0,o,i,r),u}return 0}(t,{gridline:p.value,fixed:0!==n.w&&0===n.x},{gridline:g.value,fixed:0!==n.w&&0!==n.x},r,o,a))||0!==n.w&&0===n.x||(h=function(t,e,n,o,i){if(null==(null==e?void 0:e.next))return 0;for(var r=t.rect.left-e.value.rect.right,a=e,l=-1;null!=a.next;){var s=a.next,u=a.value.rect.left-s.value.rect.right;-1===l?Math.abs(u-r)<=5&&(l=u,Un(s.value,a.value,l,!0,!1,n,o,i)):u===l&&Un(s.value,a.value,l,!0,!1,n,o,i),a=s}if(l>0){var c=l-r;return Un(e.value,t,l,!1,!1,n,o,i),c}return 0}(t,p,r,o,a)),0!==h||0!==n.w&&0!==n.x||(h=function(t,e,n,o,i){if(null==(null==e?void 0:e.next))return 0;for(var r=e.value.rect.left-t.rect.right,a=e,l=-1;null!=a.next;){var s=a.next,u=s.value.rect.left-a.value.rect.right;-1===l?Math.abs(u-r)<=5&&(l=u,Un(a.value,s.value,l,!0,!0,n,o,i)):u===l&&Un(a.value,s.value,l,!0,!0,n,o,i),a=s}if(l>0){var c=r-l;return Un(t,e.value,l,!1,!0,n,o,i),c}return 0}(t,g,r,o,a)),function(t,e,n,o,i,r,a,l){var s;if(null!=r&&null!=l){r.setColor(l.colors.palette.primary[600]);var u=(null===(s=e.gridline)||void 0===s?void 0:s.rect.top)===Number.NEGATIVE_INFINITY,c=e.gridline.rect;if(null!=c&&null!=t.left&&(!u||o&&!e.fixed)){var d=(Math.max(t.rect.top,c.top)+Math.min(t.rect.bottom,c.bottom))/2,p=t.left.usePercentage,g=t.rect.left-c.right;e.fixed||(g+=i);var h=p?Fn(v.utils.toRatio(g,a)):Hn(g+"px");r.drawLine(c.right,d,c.right+g,d,!1,h)}u=n.gridline.rect.top===Number.NEGATIVE_INFINITY;var f=n.gridline.rect;if(null!=f&&null!=t.right&&(!u||o&&!n.fixed)){d=(Math.max(t.rect.top,f.top)+Math.min(t.rect.bottom,f.bottom))/2,p=t.right.usePercentage,g=f.left-t.rect.right;n.fixed||(g-=i);h=p?Fn(v.utils.toRatio(g,a)):Hn(g+"px");r.drawLine(f.left,d,f.left-g,d,!1,h)}}}(t,{gridline:p.value,fixed:0!==n.w&&0===n.x},{gridline:g.value,fixed:0!==n.w&&0!==n.x},0!==n.w,h,r,o,a));y&&0===n.h||(p=function(t,e){var n={id:"",bottom:{value:e?"0%":"0px",pixelValue:0,usePercentage:e,origin:0,from:Number.NEGATIVE_INFINITY,to:Number.POSITIVE_INFINITY},rect:{top:-100,height:100,bottom:0,left:Number.NEGATIVE_INFINITY,right:Number.POSITIVE_INFINITY}};if(null==t)return{value:n};for(var o=t;null!=o.next;)o=o.next;return o.next={value:n},t}(p=function t(e,n){var o;return n.filter((function(t){var n,o;return(null===(n=t.bottom)||void 0===n?void 0:n.pixelValue)<(null===(o=e.top)||void 0===o?void 0:o.pixelValue)})).sort((function(t,e){return e.bottom.pixelValue-t.bottom.pixelValue})).some((function(t){if(Gn(e,t))return o={value:t},!0})),null!=o&&(o.next=t(o.value,n)),o}(t,e),null==(null===(c=t.top)||void 0===c?void 0:c.value)||t.top.usePercentage),g=function(t,e,n){var o={id:"",top:{value:e?"0%":"0px",pixelValue:n,usePercentage:e,origin:1,from:Number.NEGATIVE_INFINITY,to:Number.POSITIVE_INFINITY},rect:{top:n,height:100,bottom:n+100,left:Number.NEGATIVE_INFINITY,right:Number.POSITIVE_INFINITY}};if(null==t)return{value:o};for(var i=t;null!=i.next;)i=i.next;return i.next={value:o},t}(g=function t(e,n){var o;return n.filter((function(t){var n,o;return(null===(n=t.top)||void 0===n?void 0:n.pixelValue)>(null===(o=e.bottom)||void 0===o?void 0:o.pixelValue)})).sort((function(t,e){return t.top.pixelValue-e.top.pixelValue})).some((function(t){if(Gn(e,t))return o={value:t},!0})),null!=o&&(o.next=t(o.value,n)),o}(t,e),null==(null===(d=t.bottom)||void 0===d?void 0:d.value)||t.bottom.usePercentage,i),0!==(f=function(t,e,n,o,i,r){if(e.gridline.rect.left===Number.NEGATIVE_INFINITY&&n.gridline.rect.left===Number.NEGATIVE_INFINITY||null==t.top||null==t.bottom)return 0;var a=t.top.pixelValue-e.gridline.bottom.pixelValue,l=n.gridline.top.pixelValue-t.bottom.pixelValue,s=e.fixed||n.fixed?5:10;if(Math.abs(l-a)<s){var u=void 0,c=void 0;return u=e.fixed||n.fixed?l-a:(l-a)/2,c=e.fixed?a:n.fixed?l:a+u,Yn(e.gridline,t,c,!1,!1,o,i,r),Yn(t,n.gridline,c,!1,!0,o,i,r),u}return 0}(t,{gridline:p.value,fixed:0!==n.h&&0===n.y},{gridline:g.value,fixed:0!==n.h&&0!==n.y},r,i,a))||0!==n.h&&0===n.y||(f=function(t,e,n,o,i){if(null==(null==e?void 0:e.next))return 0;for(var r=t.rect.top-e.value.rect.bottom,a=e,l=-1;null!=a.next;){var s=a.next,u=a.value.rect.top-s.value.rect.bottom;-1===l?Math.abs(u-r)<=5&&(l=u,Yn(s.value,a.value,l,!0,!1,n,o,i)):u===l&&Yn(s.value,a.value,l,!0,!1,n,o,i),a=s}if(l>0){var c=l-r;return Yn(e.value,t,l,!1,!1,n,o,i),c}return 0}(t,p,r,i,a)),0!==f||0!==n.h&&0!==n.y||(f=function(t,e,n,o,i){if(null==(null==e?void 0:e.next))return 0;for(var r=e.value.rect.top-t.rect.bottom,a=e,l=-1;null!=a.next;){var s=a.next,u=s.value.rect.top-a.value.rect.bottom;-1===l?Math.abs(u-r)<=5&&(l=u,Yn(a.value,s.value,l,!0,!0,n,o,i)):u===l&&Yn(a.value,s.value,l,!0,!0,n,o,i),a=s}if(l>0){var c=r-l;return Yn(t,e.value,l,!1,!0,n,o,i),c}return 0}(t,g,r,i,a)),function(t,e,n,o,i,r,a,l){if(null!=r&&null!=l){r.setColor(l.colors.palette.primary[600]);var s=e.gridline.rect.left===Number.NEGATIVE_INFINITY,u=e.gridline.rect;if(null!=u&&null!=t.top&&(!s||o&&!e.fixed)){var c=(Math.max(t.rect.left,u.left)+Math.min(t.rect.right,u.right))/2,d=t.top.usePercentage,p=t.rect.top-u.bottom;e.fixed||(p+=i);var g=d?Fn(v.utils.toRatio(p,a)):Hn(p+"px");r.drawLine(c,u.bottom,c,u.bottom+p,!1,g)}s=n.gridline.rect.left===Number.NEGATIVE_INFINITY;var h=n.gridline.rect;if(null!=h&&null!=t.bottom&&(!s||o&&!n.fixed)){c=(Math.max(t.rect.left,h.left)+Math.min(t.rect.right,h.right))/2,d=t.bottom.usePercentage,p=h.top-t.rect.bottom;n.fixed||(p-=i);g=d?Fn(v.utils.toRatio(p,a)):Hn(p+"px");r.drawLine(c,h.top,c,h.top-p,!1,g)}}}(t,{gridline:null==p?void 0:p.value,fixed:0!==n.h&&0===n.y},{gridline:null==g?void 0:g.value,fixed:0!==n.y&&0!==n.y},0!==n.h,f,r,i,a));return{dx:h,dy:f}}function Xn(t,e){return Math.abs(e.pixelValue-t.pixelValue)}function Jn(t,e,n){if(t.pixelValue+e===n.pixelValue){var o=n.usePercentage;if(o===t.usePercentage)return o||n.origin===t.origin}return!1}function qn(t,e){return e.filter((function(e){return function(t,e){if(Xn(e,t)<20){var n=e.usePercentage;if(n===t.usePercentage)return n||e.origin===t.origin}return!1}(t,e)})).sort((function(e,n){return Xn(e,t)-Xn(n,t)}))}function Qn(t,e,n,o,i,r,a){var l=0,s=0;if(!o&&!i)return{dx:l,dy:s};var u=[],c=[];if(e.forEach((function(e){if(o){var r=[e.left,e.xm,e.right].filter((function(o){var i,r;if(null!=o)return o.from=e.rect.top,o.to=e.rect.bottom,0!==n.w?0===n.x?o.pixelValue>=(null===(i=t.right)||void 0===i?void 0:i.pixelValue):o.pixelValue<=(null===(r=t.left)||void 0===r?void 0:r.pixelValue):0===n.h}));u=u.concat(r)}if(i){var a=[e.top,e.ym,e.bottom].filter((function(o){var i,r;if(null!=o)return o.from=e.rect.left,o.to=e.rect.right,0!==n.h?0===n.y?o.pixelValue>=(null===(i=t.bottom)||void 0===i?void 0:i.pixelValue):o.pixelValue<=(null===(r=t.top)||void 0===r?void 0:r.pixelValue):0===n.w}));c=c.concat(a)}})),o){var d=[t.left,t.xm,t.right];d.some((function(t){if(null!=t){var e=qn(t,u);if((null==e?void 0:e.length)>0){null!=r&&null!=a&&e.forEach((function(t){return function(t,e,n){null!=e&&null!=n&&(e.setColor(n.colors.palette.danger[500]),e.drawLine(t.pixelValue,t.from,t.pixelValue,t.to,!0))}(t,r,a)}));var n=e[0];if(Xn(n,t)<=5)return l=n.pixelValue-t.pixelValue,function(t,e,n,o,i){null!=o&&null!=i&&(o.setColor(i.colors.palette.danger[500]),t.forEach((function(t){if(null!=t){var i=t.from,r=t.to,a=!1;if(e.forEach((function(e){Jn(t,n,e)&&(i=Math.min(i,e.from),r=Math.max(r,e.to),a=!0)})),a){var l=t.pixelValue+n;o.drawLine(l,i,l,r)}}})))}(d,u,l,r,a),!0}}}))}if(i){var p=[t.top,t.ym,t.bottom];p.some((function(t){if(null!=t){var e=qn(t,c);if((null==e?void 0:e.length)>0){null!=r&&null!=a&&e.forEach((function(t){return function(t,e,n){null!=e&&null!=n&&(e.setColor(n.colors.palette.danger[500]),e.drawLine(t.from,t.pixelValue,t.to,t.pixelValue,!0))}(t,r,a)}));var n=e[0];if(Xn(n,t)<=5)return s=n.pixelValue-t.pixelValue,function(t,e,n,o,i){null!=o&&null!=i&&(o.setColor(i.colors.palette.danger[500]),t.forEach((function(t){if(null!=t){var i=t.from,r=t.to,a=!1;if(e.forEach((function(e){Jn(t,n,e)&&(i=Math.min(i,e.from),r=Math.max(r,e.to),a=!0)})),a){var l=t.pixelValue+n;o.drawLine(i,l,r,l)}}})))}(p,c,s,r,a),!0}}}))}return{dx:l,dy:s}}var Kn,$n=n(5);function to(t,e){void 0===e&&(e=!1);var n={};if(["left","right","width","top","bottom","height"].forEach((function(e){null!=(null==t?void 0:t[e])?n[e]=v.utils.isPercentage(t[e])?"%":"px":n[e]="%"})),e){var o=n.left;n.left=n.right,n.right=o}return n}function eo(t,e){var n=t.top,o=e.height-(t.top+t.height),i=t.left;return[e.width-(t.left+t.width)<i?1:0,o<n?1:0]}function no(t,e){return v.utils.isPercentage(t)?Math.round(v.utils.fromRatio(t,e)):Math.round(parseFloat(t))}function oo(t,e,n){var o,i,r,a,l,s,u,c,d,p=t.bbox,g=to(p,Object($n.isRTL)()),h=null!==(o=t.setting)&&void 0!==o?o:{},f=function(t,e,n){var o,i,r,a={},l=null!==(o=t.bbox)&&void 0!==o?o:{},s=null!==(r=null===(i=t.setting)||void 0===i?void 0:i.autoProps)&&void 0!==r?r:{};return s.width===v.LayoutItemSizeModes.Stretch?(a.left=no(l.left,e),a.right=e-no(l.right,e),a.width=a.right-a.left):s.width===v.LayoutItemSizeModes.Auto?s.left?a.right=e-no(l.right,e):a.left=no(l.left,e):(a.width=no(l.width,e),s.left?(a.right=e-no(l.right,e),a.left=a.right-a.width):(a.left=no(l.left,e),a.right=a.left+a.width)),s.height===v.LayoutItemSizeModes.Stretch?(a.top=no(l.top,n),a.bottom=n-no(l.bottom,n),a.height=a.bottom-a.top):s.height===v.LayoutItemSizeModes.Auto?s.top?a.bottom=n-no(l.bottom,n):a.top=no(l.top,n):(a.height=no(l.height,n),s.top?(a.bottom=n-no(l.bottom,n),a.top=a.bottom-a.height):(a.top=no(l.top,n),a.bottom=a.top+a.height)),a}(t,e,n),y={id:t.id,rect:f},m=function(t){return v.utils.isPercentage(t)?100-parseFloat(t)+"%":t},b=function(t){return v.utils.isPercentage(t)?100-parseFloat(t)+"%":e-parseFloat(t)+"px"},x={value:p.left,pixelValue:f.left,usePercentage:"%"===g.left,origin:0},I={value:p.top,pixelValue:f.top,usePercentage:"%"===g.top,origin:0},w={value:m(p.right),pixelValue:f.right,usePercentage:"%"===g.right,origin:1},j={value:m(p.bottom),pixelValue:f.bottom,usePercentage:"%"===g.bottom,origin:1};if((null===(i=h.autoProps)||void 0===i?void 0:i.width)===v.LayoutItemSizeModes.Stretch)y.left=x,y.right=w,g.left===g.right&&"%"===g.left&&(y.xm={value:(parseFloat(y.left.value)+parseFloat(y.right.value))/2+"%",pixelValue:(f.left+f.right)/2,usePercentage:"%"===g.left});else if((null===(r=h.autoProps)||void 0===r?void 0:r.width)===v.LayoutItemSizeModes.Auto)(null===(a=h.autoProps)||void 0===a?void 0:a.left)?y.right=w:y.left=x;else if(null===(l=h.autoProps)||void 0===l?void 0:l.left){if(y.right=w,g.right===g.width){var O=parseFloat(p.right),S=parseFloat(p.width),C="px"===g.right?O+S:100-(O+S),P="px"===g.right?O+S/2:100-(O+S/2);y.left={value:""+C+g.right,pixelValue:f.left,usePercentage:"%"===g.right,origin:1},y.xm={value:""+P+g.right,pixelValue:f.left+f.width/2,usePercentage:"%"===g.right,origin:1}}}else if(y.left=x,g.left===g.width){O=(C=parseFloat(p.left))+(S=parseFloat(p.width));y.right={value:""+O+g.left,pixelValue:f.right,usePercentage:"%"===g.left,origin:0},y.xm={value:""+(C+S/2)+g.left,pixelValue:f.left+f.width/2,usePercentage:"%"===g.left,origin:0}}if(Object($n.isRTL)()){var T,A;y.rect.left=e-y.rect.right,y.rect.right=y.rect.left+y.rect.width;var M=void 0;null!=y.left&&(A={value:b(y.left.value),pixelValue:y.rect.right,usePercentage:"%"===g.left,origin:0===y.left.origin?1:0}),null!=y.right&&(T={value:b(y.right.value),pixelValue:y.rect.left,usePercentage:"%"===g.right,origin:0===y.right.origin?1:0}),null!=y.xm&&(M={value:b(y.xm.value),pixelValue:y.rect.left+y.rect.width/2,usePercentage:y.xm.usePercentage,origin:0===y.xm.origin?1:0}),y.right=A,y.left=T,y.xm=M}if((null===(s=h.autoProps)||void 0===s?void 0:s.height)===v.LayoutItemSizeModes.Stretch)y.top=I,y.bottom=j,g.top===g.bottom&&"%"===g.top&&(y.ym={value:(parseFloat(y.top.value)+parseFloat(y.bottom.value))/2+"%",pixelValue:(f.top+f.bottom)/2,usePercentage:"%"===g.top});else if((null===(u=h.autoProps)||void 0===u?void 0:u.height)===v.LayoutItemSizeModes.Auto)(null===(c=h.autoProps)||void 0===c?void 0:c.top)?y.bottom=j:y.top=I;else if(null===(d=h.autoProps)||void 0===d?void 0:d.top){if(y.bottom=j,g.bottom===g.height){var R=parseFloat(p.bottom),z=parseFloat(p.height),k="px"===g.bottom?R+z:100-(R+z);P="px"===g.bottom?R+z/2:100-(R+z/2);y.top={value:""+k+g.bottom,pixelValue:f.top,usePercentage:"%"===g.bottom,origin:1},y.ym={value:""+P+g.bottom,pixelValue:f.top+f.height/2,usePercentage:"%"===g.bottom,origin:1}}}else if(y.top=I,g.top===g.height){R=(k=parseFloat(p.top))+(z=parseFloat(p.height));y.bottom={value:""+R+g.top,pixelValue:f.bottom,usePercentage:"%"===g.top,origin:0},y.ym={value:""+(k+z/2)+g.top,pixelValue:f.top+f.height/2,usePercentage:"%"===g.top,origin:0}}return y}function io(t,e,n,o){var i,r=[];Object.keys(null!==(i=t.content)&&void 0!==i?i:{}).forEach((function(i){if(i!==o){var a=t.content[i];if(!a.isPending){var l=oo(a,e,n);r.push(l)}}}));var a={left:0,right:e,width:e,top:0,bottom:n,height:n};return r.push({id:"",left:{value:"0px",pixelValue:0,usePercentage:!1,origin:0,from:0,to:n},right:{value:"0px",pixelValue:e,usePercentage:!1,origin:1,from:0,to:n},top:{value:"0px",pixelValue:0,origin:0,usePercentage:!1,from:0,to:e},bottom:{value:"0px",pixelValue:n,usePercentage:!1,origin:1,from:0,to:e},rect:a}),r.push({id:"",left:{value:"0%",pixelValue:0,usePercentage:!0,origin:0,from:0,to:n},xm:{value:"50%",pixelValue:Math.round(e/2),usePercentage:!0,origin:0,from:0,to:n},right:{value:"0%",pixelValue:e,usePercentage:!0,origin:1,from:0,to:n},top:{value:"0%",pixelValue:0,usePercentage:!0,origin:0,from:0,to:e},ym:{value:"50%",pixelValue:Math.round(n/2),usePercentage:!0,origin:0,from:0,to:e},bottom:{value:"0%",pixelValue:n,usePercentage:!0,origin:1,from:0,to:e},rect:a}),r}function ro(t,e,n,o,i,r,a,l){var s,u,c=null!==(s=null==t?void 0:t.setting)&&void 0!==s?s:{},d=null!==(u=null==t?void 0:t.bbox)&&void 0!==u?u:{},p=0!==o.w||0!==o.h;if(p&&(c.hCenter&&"50%"===d.left||c.vCenter&&"50%"===d.top))return o;var g=function(t,e){if(0!==e.w||0!==e.h){var n={x:e.x,y:e.y,w:e.w,h:e.h};return t.width+e.w<16&&(n.w=16-t.width,0!==e.x&&(n.x=-n.w)),t.height+e.h<16&&(n.h=16-t.height,0!==e.y&&(n.y=-n.h)),n}return e}(n,o);i&&(g=function(t,e){if(0===e.w&&0===e.h)return e;var n=t.height/t.width,o=e.w,i=e.h,r=e.x,a=e.y;Math.abs(o)*n>Math.abs(i)?i=Math.round(o*n):o=Math.round(i/n);0!==r&&(r=-o);0!==a&&(a=-i);return{x:r,y:a,w:o,h:i}}(n,g));var h=function(t,e,n,o,i){var r,a,l,s,u,c,d,p=null!=i?i:{x:0,y:0,w:0,h:0},g=p.x,h=p.y,f=p.w,y=p.h,m=null!==(r=null==t?void 0:t.setting)&&void 0!==r?r:{},b={left:Math.round(e.left+g),width:Math.round(e.width+f),right:0,top:Math.round(e.top+h),height:Math.round(e.height+y),bottom:0};b.right=b.left+b.width,b.bottom=b.top+b.height;var x={id:null==t?void 0:t.id,rect:b},I=eo(b,{width:n,height:o}),w=to(null==t?void 0:t.bbox,Object($n.isRTL)());if(Object($n.isRTL)()){var j=w.left;w.left=w.right,w.right=j}return(null===(a=m.autoProps)||void 0===a?void 0:a.width)===v.LayoutItemSizeModes.Stretch?(x.left={value:"1"+w.left,pixelValue:b.left,usePercentage:"%"===w.left,origin:I[0],from:b.top,to:b.bottom},x.right={value:"1"+w.right,pixelValue:b.left+b.width,usePercentage:"%"===w.right,origin:I[1],from:b.top,to:b.bottom}):0===I[0]?(x.left={value:"1"+w.left,pixelValue:b.left,usePercentage:"%"===w.left,origin:I[0],from:b.top,to:b.bottom},w.width===w.left&&(null===(l=m.autoProps)||void 0===l?void 0:l.width)!==v.LayoutItemSizeModes.Auto&&(x.xm={value:"1"+w.left,pixelValue:b.left+b.width/2,usePercentage:"%"===w.left,origin:I[0],from:b.top,to:b.bottom},x.right={value:"1"+w.left,pixelValue:b.left+b.width,usePercentage:"%"===w.left,origin:I[0],from:b.top,to:b.bottom})):(x.right={value:"1"+w.right,pixelValue:b.left+b.width,usePercentage:"%"===w.right,origin:I[0],from:b.top,to:b.bottom},w.width===w.right&&(null===(s=m.autoProps)||void 0===s?void 0:s.width)!==v.LayoutItemSizeModes.Auto&&(x.xm={value:"1"+w.right,pixelValue:b.left+b.width/2,usePercentage:"%"===w.right,origin:I[0],from:b.top,to:b.bottom},x.left={value:"1"+w.right,pixelValue:b.left,usePercentage:"%"===w.right,origin:I[0],from:b.top,to:b.bottom})),(null===(u=m.autoProps)||void 0===u?void 0:u.height)===v.LayoutItemSizeModes.Stretch?(x.top={value:"1"+w.top,pixelValue:b.top,usePercentage:"%"===w.top,origin:I[1],from:b.left,to:b.right},x.bottom={value:"1"+w.bottom,pixelValue:b.top+b.height,usePercentage:"%"===w.bottom,origin:I[1],from:b.left,to:b.right}):0===I[1]?(x.top={value:"1"+w.top,pixelValue:b.top,usePercentage:"%"===w.top,origin:I[1],from:b.left,to:b.right},w.height===w.top&&(null===(c=m.autoProps)||void 0===c?void 0:c.height)!==v.LayoutItemSizeModes.Auto&&(x.ym={value:"1"+w.top,pixelValue:b.top+b.height/2,usePercentage:"%"===w.top,origin:I[1],from:b.left,to:b.right},x.bottom={value:"1"+w.top,pixelValue:b.top+b.height,usePercentage:"%"===w.top,origin:I[1],from:b.left,to:b.right})):(x.bottom={value:"1"+w.bottom,pixelValue:b.top+b.height,usePercentage:"%"===w.bottom,origin:I[1],from:b.left,to:b.right},w.height===w.bottom&&(null===(d=m.autoProps)||void 0===d?void 0:d.height)!==v.LayoutItemSizeModes.Auto&&(x.ym={value:"1"+w.bottom,pixelValue:b.top+b.height/2,usePercentage:"%"===w.bottom,origin:I[1],from:b.left,to:b.right},x.top={value:"1"+w.bottom,pixelValue:b.top,usePercentage:"%"===w.bottom,origin:I[1],from:b.left,to:b.right})),x}(t,n,e.width,e.height,g),f=Zn(h,r,g,e.width,e.height,a,l),y=f.dx,m=f.dy,b=Qn(h,r,g,0===y&&(!p||0!==o.w),0===m&&(!p||0!==o.h),a,l);y=0!==y?y:b.dx,m=0!==m?m:b.dy;var x=g;return 0===y&&0===m||(x=function(t,e,n){var o,i,r=t.x,a=t.y,l=t.w,s=t.h;o=0===l?Kn.None:0===r?Kn.Start:Kn.End;i=0===s?Kn.None:0===a?Kn.Start:Kn.End;0!==e&&(o===Kn.None?r+=e:o===Kn.End?(r+=e,l+=-e):l+=e);0!==n&&(i===Kn.None?a+=n:i===Kn.End?(a+=n,s+=-n):s+=n);return{x:r,y:a,w:l,h:s}}(g,y,m)),x}!function(t){t[t.Start=0]="Start",t[t.End=1]="End",t[t.None=2]="None"}(Kn||(Kn={}));var ao,lo,so=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},uo=n(40),co=Object(g.css)(ao||(ao=so(["\n  pointer-events: all;\n"],["\n  pointer-events: all;\n"])));function po(t){return Object(g.css)(lo||(lo=so(["\n    position: relative;\n    height: 200px;\n    padding: 1rem;\n    pointer-events: none;\n    z-index: 1;\n    .btn-text {\n      line-height: 32px;\n    }\n    .btn {\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    }\n    .action-item {\n      width: 32px;\n    }\n    .action-seprator {\n      width: 300px;\n      height: 1px;\n      background-color: ",";\n    }\n  "],["\n    position: relative;\n    height: 200px;\n    padding: 1rem;\n    pointer-events: none;\n    z-index: 1;\n    .btn-text {\n      line-height: 32px;\n    }\n    .btn {\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    }\n    .action-item {\n      width: 32px;\n    }\n    .action-seprator {\n      width: 300px;\n      height: 1px;\n      background-color: ",";\n    }\n  "])),t.colors.palette.light[600],t.colors.palette.light[800],t.colors.palette.dark[800])}function go(t){var e,n=t.pageContext,o=t.onPageTemplateSelected,i=n.builderTheme,r=n.formatMessage,a=n.isHeader,l=n.isFooter,s=g.React.useState(!1),u=s[0],c=s[1],d=g.React.useRef(null),p=function(){c(!1)};return e=n.isHeader?r("chooseHeaderTemplate"):n.isFooter?r("chooseFooterTemplate"):r("chooseTemplate",{type:n.isDialog?r("dialog").toLocaleLowerCase():r("page").toLocaleLowerCase()}),Object(g.jsx)("div",{className:"d-flex w-100 flex-column justify-content-center align-items-center",css:po(i)},Object(g.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",ref:d},Object(g.jsx)(f.Tooltip,{placement:"bottom",title:e},Object(g.jsx)("div",{className:"action-item"},Object(g.jsx)(f.Button,{icon:!0,onClick:function(t){t.stopPropagation(),c(!u)},css:co,className:"rounded-circle"},Object(g.jsx)(f.Icon,{icon:uo,size:16,color:i.colors.palette.dark[800]})))),Object(g.jsx)("div",{className:"action-seprator mt-3"}),Object(g.jsx)("h5",{className:"btn-text mt-2"},r("dropWidgetToAdd"))),u&&!n.isDialog&&Object(g.jsx)(Ce.PageTemplatePopper,{isHeader:a,isFooter:l,theme:i,pageMode:g.PageMode.FitWindow,referenceElement:d.current,formatMessage:r,onItemSelect:o,onClose:p}),u&&n.isDialog&&Object(g.jsx)(Ce.DialogTemplatePopper,{theme:i,referenceElement:d.current,formatMessage:r,onItemSelect:o,onClose:p}))}var ho,fo,yo,vo=function(){function t(t,e){this.canvas=t,this.ctx=t.getContext("2d"),this.ctx.font="1rem",this.theme=e}return t.prototype.setSize=function(t,e,n){void 0===n&&(n=1);var o=Math.round(e*n),i=Math.round(t*n);n<1?(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=t,this.canvas.height=e,this.ctx.scale(1,1)):this.canvas.width===i&&this.canvas.height===o||(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=i,this.canvas.height=o,this.ctx.scale(n,n))},t.prototype.setColor=function(t){this.ctx.fillStyle=t,this.ctx.strokeStyle=t},t.prototype.drawRect=function(t){this.ctx.fillRect(t.left,t.top,t.width,t.height)},t.prototype.drawLine=function(t,e,n,o,i,r){if(void 0===i&&(i=!1),i?this.ctx.setLineDash([5,3]):this.ctx.setLineDash([]),this.ctx.beginPath(),t===n){var a=t<this.canvas.width/2?.5:-.5;a=Number.isInteger(t)?a:0,this.ctx.moveTo(t+a,e),this.ctx.lineTo(n+a,o)}if(e===o){a=e<this.canvas.height/2?.5:-.5;a=Number.isInteger(e)?a:0,this.ctx.moveTo(t,e+a),this.ctx.lineTo(n,o+a)}if(this.ctx.stroke(),null!=r){var l=(t+n)/2,s=(e+o)/2;this.drawLabel(l,s,r,e===o)}},t.prototype.drawTailedLine=function(t,e,n,o,i,r){if(void 0===i&&(i=!1),i?this.ctx.setLineDash([5,3]):this.ctx.setLineDash([]),this.ctx.beginPath(),t===n){var a=t<this.canvas.width/2?.5:-.5;a=Number.isInteger(t)?a:0;var l=(u=Math.min(e,o))<this.canvas.height/2?.5:-.5;l=Number.isInteger(u)?l:0;var s=(c=Math.max(e,o))<this.canvas.height/2?.5:-.5;s=Number.isInteger(c)?s:0,this.ctx.moveTo(t+a,e),this.ctx.lineTo(n+a,o),this.ctx.moveTo(t-5,u+l),this.ctx.lineTo(t+5,u+l),this.ctx.moveTo(n-5,c+s),this.ctx.lineTo(n+5,c+s)}if(e===o){a=e<this.canvas.height/2?.5:-.5;a=Number.isInteger(e)?a:0;var u;l=(u=Math.min(t,n))<this.canvas.width/2?.5:-.5;l=Number.isInteger(u)?l:0;var c;s=(c=Math.max(t,n))<this.canvas.width/2?.5:-.5;s=Number.isInteger(c)?s:0,this.ctx.moveTo(t,e+a),this.ctx.lineTo(n,o+a),this.ctx.moveTo(u+l,e-5),this.ctx.lineTo(u+l,e+5),this.ctx.moveTo(c+s,o-5),this.ctx.lineTo(c+s,o+5)}if(this.ctx.stroke(),null!=r){var d=(t+n)/2,p=(e+o)/2;this.drawLabel(d,p,r,e===o)}},t.prototype.drawLabel=function(t,e,n,o){void 0===o&&(o=!0);var i=this.ctx.measureText(n),r=i.width,a=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent,l=r+8,s=a+8,u=v.utils.isRTL()?-1:1;this.ctx.save(),this.theme?this.ctx.fillStyle=this.theme.colors.palette.primary[500]:this.ctx.fillStyle="var(--primary-500)",o?(this.drawRoundRect(t-l/2,e-s-8,l,s),this.ctx.fillStyle="#FFFFFF",this.ctx.fillText(n,t-r*u/2,e-12)):(this.drawRoundRect(t+8,e-s/2,l,s),this.ctx.fillStyle="#FFFFFF",-1===u?this.ctx.fillText(n,t+r+12,e+a/2):this.ctx.fillText(n,t+12,e+a/2)),this.ctx.restore()},t.prototype.drawRoundRect=function(t,e,n,o,i){void 0===i&&(i=2);var r=i,a=i,l=i,s=i;this.ctx.beginPath(),this.ctx.moveTo(t+r,e),this.ctx.lineTo(t+n-a,e),this.ctx.quadraticCurveTo(t+n,e,t+n,e+a),this.ctx.lineTo(t+n,e+o-s),this.ctx.quadraticCurveTo(t+n,e+o,t+n-s,e+o),this.ctx.lineTo(t+l,e+o),this.ctx.quadraticCurveTo(t,e+o,t,e+o-l),this.ctx.lineTo(t,e+r),this.ctx.quadraticCurveTo(t,e,t+r,e),this.ctx.closePath(),this.ctx.fill()},t.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t}(),mo=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xo=function(){return(xo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Io=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},wo=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},jo=Object(g.css)(ho||(ho=mo(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"]))),Oo=Object(g.css)(fo||(fo=mo(["\n  ",";\n  pointer-events: none;\n"],["\n  ",";\n  pointer-events: none;\n"])),jo),So=function(t){function e(e){var n,o=t.call(this,e)||this;if(o.handleMouseDown=function(t){o.mousedownX=t.screenX,o.mousedownY=t.screenY},o.updateDeviceRatio=function(){o.canvasPane.setSize(o.ref.clientWidth,o.ref.clientHeight,window.devicePixelRatio)},o.handleMoveItemByKey=function(t,e,n){var i,r,a,l,s,u=o.props.layout,c=u.content[t].bbox,d=null!==(i=u.content[t].setting)&&void 0!==i?i:Object(g.Immutable)({}),p=null!==(r=null==d?void 0:d.hCenter)&&void 0!==r&&r||null!==(a=null==d?void 0:d.vCenter)&&void 0!==a&&a;if(p){var f=o.ref.querySelector('div[data-layoutitemid="'+t+'"]');l=f.clientWidth,s=f.clientHeight}if(0!==e){if(v.utils.isPercentage(c.left)){var y=parseFloat(c.left);c=(null==d?void 0:d.hCenter)?c.set("left",50-100*l/2/o.ref.clientWidth+.1*e+"%"):c.set("left",y+.1*e+"%")}else{y=parseFloat(c.left);c=(null==d?void 0:d.hCenter)?c.set("left",(o.ref.clientWidth-l)/2+e+"px"):c.set("left",y+e+"px")}if(v.utils.isPercentage(c.right)){y=parseFloat(c.right);c=(null==d?void 0:d.hCenter)?c.set("right",50+100*l/2/o.ref.clientWidth-.1*e+"%"):c.set("right",y-.1*e+"%")}else{y=parseFloat(c.right);c=(null==d?void 0:d.hCenter)?c.set("right",(o.ref.clientWidth+l)/2-e+"px"):c.set("right",y-e+"px")}(null==d?void 0:d.hCenter)&&(d=d.set("hCenter",!1))}if(0!==n){if(v.utils.isPercentage(c.top)){y=parseFloat(c.top);c=(null==d?void 0:d.vCenter)?c.set("top",50-100*s/2/o.ref.clientHeight+.1*n+"%"):c.set("top",y+.1*n+"%")}else{y=parseFloat(c.top);c=(null==d?void 0:d.vCenter)?c.set("top",(o.ref.clientHeight-s)/2+n+"px"):c.set("top",y+n+"px")}if(v.utils.isPercentage(c.bottom)){y=parseFloat(c.bottom);c=(null==d?void 0:d.vCenter)?c.set("bottom",50+100*s/2/o.ref.clientHeight-.1*n+"%"):c.set("bottom",y-.1*n+"%")}else{y=parseFloat(c.bottom);c=(null==d?void 0:d.hCenter)?c.set("bottom",(o.ref.clientHeight+s)/2-n+"px"):c.set("bottom",y-n+"px")}(null==d?void 0:d.vCenter)&&(d=d.set("vCenter",!1))}var m=Object(h.getAppConfigAction)();p&&m.editLayoutItemSetting({layoutId:u.id,layoutItemId:t},d),m.editLayoutItemBBox({layoutId:u.id,layoutItemId:t},c).exec()},o.toggleShowWidgetList=function(t){t.stopPropagation(),o.setState({showWidgetList:!o.state.showWidgetList})},o.closeWidgetList=function(){o.state.showWidgetList&&o.setState({showWidgetList:!1})},o.handlePageTemplateSelected=function(t){var e=Object(h.getAppConfigAction)().appConfig;o.setState({isLoadingTemplate:!0}),o.pageContext.isHeader?h.templateUtils.applyPageTemplateToHeader(e,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).catch((function(t){return console.error(t)})):o.pageContext.isFooter?h.templateUtils.applyPageTemplateToFooter(e,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).catch((function(t){return console.error(t)})):o.pageContext.isDialog?h.templateUtils.applyPageTemplateToDialog(e,o.pageContext.dialogId,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).catch((function(t){return console.error(t)})):h.templateUtils.applyPageTemplateToBody(e,o.pageContext.pageId,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).catch((function(t){return console.error(t)}))},null==o.props.layout)return o;v.utils.autoBindHandlers(o,["handleResizeStart","handleResizing","handleResizeEnd","handleDragStart","handleDragEnd","handleDragOver","handleDragEnter","handleDragLeave","handleDrop","handleActivate","handleToggleDragoverEffect"]);var i=g.ExtensionManager.getInstance().getExtensions(""+g.extensionSpec.ExtensionPoints.LayoutTransformer);if((null==i?void 0:i.length)>0){var r=i.find((function(t){return t.layoutType===o.props.layout.type}));o.layoutTransform=null===(n=r)||void 0===n?void 0:n.transformLayout}return o.flipLeftRight=v.utils.isRTL(),o.state={offsetX:0,offsetY:0,dw:0,dh:0,isDragover:!1,showWidgetList:!1,isLoadingTemplate:!1},o}return bo(e,t),e.prototype.handleActivate=function(t){if(lt())if(Math.abs(t.screenX-this.mousedownX)>v.CLICK_TOLRERANCE||Math.abs(t.screenY-this.mousedownY)>v.CLICK_TOLRERANCE)t.stopPropagation();else{var e=this.props,n=e.isInSection,o=e.isInWidget;this.pageContext.viewOnly||n||o||St()||xt()||(t.stopPropagation(),Object(g.getAppStore)().dispatch(g.appActions.selectionChanged(null)))}},e.prototype.componentDidMount=function(){var t,e,n;this.canvasPane=new vo(this.canvasRef,this.pageContext.builderTheme),this.updateDeviceRatio();var o="(resolution: "+window.devicePixelRatio+"dppx)";this.mediaQueryList=null===(t=window.matchMedia)||void 0===t?void 0:t.call(window,o);var i=window.jimuUA.browser,r=i.name,a=i.version;"safari"===r.toLowerCase()&&parseInt(a)<14?null===(e=this.mediaQueryList)||void 0===e||e.addListener(this.updateDeviceRatio):null===(n=this.mediaQueryList)||void 0===n||n.addEventListener("change",this.updateDeviceRatio)},e.prototype.componentWillUnmount=function(){var t,e,n=window.jimuUA.browser,o=n.name,i=n.version;"safari"===o.toLowerCase()&&parseInt(i)<14?null===(t=this.mediaQueryList)||void 0===t||t.removeListener(this.updateDeviceRatio):null===(e=this.mediaQueryList)||void 0===e||e.removeEventListener("change",this.updateDeviceRatio)},e.prototype.componentDidUpdate=function(){this.updateDeviceRatio()},e.prototype.isResizingItem=function(){return 0!==this.state.dh||0!==this.state.dw},e.prototype.handleResizeStart=function(t){var e=this.props.layout;this.rndingLayoutId=t;var n=this.ref.querySelector('div.exb-rnd[data-layoutid="'+e.id+'"][data-layoutitemid="'+t+'"]');this.domRect=this.ref.getBoundingClientRect(),this.bboxGridlines=io(this.props.layout,this.domRect.width,this.domRect.height,t);var o=n.getBoundingClientRect(),i=this.getPositionUnit(t);this.resizingRect=xo({units:i},v.utils.relativeClientRect(o,this.domRect))},e.prototype.getResizingDelta=function(t,e,n,o,i,r){return ro(this.props.layout.content[t],this.domRect,this.resizingRect,{x:e,w:o,y:n,h:i},r,this.bboxGridlines,this.canvasPane,this.pageContext.builderTheme)},e.prototype.handleResizing=function(t,e,n,o,i,r,a){if(this.canvasPane.clear(),a>500)this.setState({offsetX:e,offsetY:n,dw:o,dh:i});else{var l=this.getResizingDelta(t,e,n,o,i,r);this.setState({offsetX:l.x,offsetY:l.y,dw:l.w,dh:l.h})}},e.prototype.handleResizeEnd=function(t,e,n,o,i,r,a,l){var s,u;this.rndingLayoutId=null;var c=this.props.layout,d=this.getResizingDelta(t,e,n,o,i,r);this.canvasPane.clear();var p=Object(kn.f)(this.resizingRect,this.domRect,{dx:d.x,dy:d.y,dw:d.w,dh:d.h}),f=Object(h.getAppConfigAction)(),y={layoutId:c.id,layoutItemId:t},v=Object(kn.b)(Object(g.Immutable)(a.bbox),a.setting,this.domRect,p),m=v.bbox,b=v.setting,x=m;(null==l?void 0:l.hCenter)&&"50%"===(null===(s=a.bbox)||void 0===s?void 0:s.left)&&(x=x.set("left","50%")),(null==l?void 0:l.vCenter)&&"50%"===(null===(u=a.bbox)||void 0===u?void 0:u.top)&&(x=x.set("top","50%")),f.editLayoutItemBBox(y,this.flipLeftRight?Object(kn.c)(x):x).editLayoutItemSetting(y,b).exec(),this.bboxGridlines=null,this.setState({offsetX:0,offsetY:0,dw:0,dh:0})},e.prototype.handleDragOver=function(t,e,n,o,i,r,a){var l,s,u;if(this.canvasPane.clear(),this.state.isDragover&&!(a>500)){var c,d,p,h,f;(null===(l=t.layoutInfo)||void 0===l?void 0:l.layoutId)===this.props.layout.id?(p=t.layoutInfo.layoutItemId,f=this.getPositionUnit(p),h=this.props.layout.content[p]):f=to({},this.flipLeftRight);var y=t.rotation>0||t.rotation<0,m=ro(h,this.domRect,o,{x:0,y:0,w:0,h:0},!1,this.bboxGridlines,y?null:this.canvasPane,y?null:this.pageContext.builderTheme);if(null!=e&&(0!==m.x||0!==m.y)){var b=null!==(s=parseFloat(e.getAttribute("data-translatex")))&&void 0!==s?s:0,x=null!==(u=parseFloat(e.getAttribute("data-translatey")))&&void 0!==u?u:0;e.style.transform="translate("+(b+m.x)+"px, "+(x+m.y)+"px)"}if(c=m.x,d=m.y,this.canvasPane.setColor(this.pageContext.builderTheme.colors.palette.primary[600]),function(t,e,n){var o=e.width-(t.left+t.width),i=e.height-(t.top+t.height),r="px"===t.units.left?Hn(Math.round(t.left)+"px"):Fn(v.utils.toRatio(t.left,e.width)),a="px"===t.units.right?Hn(Math.round(o)+"px"):Fn(v.utils.toRatio(o,e.width)),l="px"===t.units.top?Hn(Math.round(t.top)+"px"):Fn(v.utils.toRatio(t.top,e.height)),s="px"===t.units.bottom?Hn(Math.round(i)+"px"):Fn(v.utils.toRatio(i,e.height));t.left<=o?t.top<=i?(n.drawLine(0,t.top,t.left,t.top,!1,r),n.drawLine(t.left,0,t.left,t.top,!1,l)):(n.drawLine(0,t.top+t.height,t.left,t.top+t.height,!1,r),n.drawLine(t.left,t.top+t.height,t.left,e.height,!1,s)):t.top<=i?(n.drawLine(t.left+t.width,t.top,e.width,t.top,!1,a),n.drawLine(t.left+t.width,0,t.left+t.width,t.top,!1,l)):(n.drawLine(t.left+t.width,t.top+t.height,e.width,t.top+t.height,!1,a),n.drawLine(t.left+t.width,t.top+t.height,t.left+t.width,e.height,!1,s))}({width:o.width,height:o.height,left:o.left+c,top:o.top+d,units:f},this.domRect,this.canvasPane),null==t.layoutInfo){this.canvasPane.setColor(g.polished.rgba(this.pageContext.builderTheme.colors.palette.primary[700],.2));var I={left:o.left+c,top:o.top+d,width:o.width,height:o.height};this.canvasPane.drawRect(I)}}},e.prototype.handleToggleDragoverEffect=function(t,e){var n;if(this.canvasPane.clear(),t){this.domRect=this.ref.getBoundingClientRect();var o=void 0;(null===(n=e.layoutInfo)||void 0===n?void 0:n.layoutId)===this.props.layout.id&&(o=e.layoutInfo.layoutItemId),this.bboxGridlines=io(this.props.layout,this.domRect.width,this.domRect.height,o)}this.setState({isDragover:t})},e.prototype.handleDragEnter=function(t){},e.prototype.handleDragLeave=function(){},e.prototype.handleDrop=function(t,e,n){var o;o=null==t.layoutInfo||t.layoutInfo.layoutId!==this.props.layout.id?to({},this.flipLeftRight):this.getPositionUnit(t.layoutInfo.layoutItemId);var i=this.calSnappedRect(t,e,xo({units:o},n),t.layoutInfo),r=i.snappedRect,a=i.delta;this.canvasPane.clear();var l={left:n.left+a.x,top:n.top+a.y,width:n.width,height:n.height,right:e.width-(n.left+a.x+n.width),bottom:e.height-(n.top+a.y+n.height)};this.addWidgetToLayout(t,e,l,r).catch((function(t){return console.error(t)})),this.bboxGridlines=null},e.prototype.calSnappedRect=function(t,e,n,o){var i;(null==o?void 0:o.layoutId)===this.props.layout.id&&(i=this.props.layout.content[o.layoutItemId]);var r=ro(i,this.domRect,n,{x:0,y:0,w:0,h:0},!1,this.bboxGridlines),a={left:n.left+r.x,top:n.top+r.y,width:n.width,height:n.height};return a.right=e.width-(+a.left+ +a.width),a.bottom=e.height-(+a.top+ +a.height),n.width>e.width&&(a.width=e.width,a.left=0),n.height>e.height&&(a.height=e.height,a.top=0),a.left=v.utils.toRatio(a.left,e.width),a.top=v.utils.toRatio(a.top,e.height),a.width=v.utils.toRatio(a.width,e.width),a.height=v.utils.toRatio(a.height,e.height),a.right=v.utils.toRatio(a.right,e.width),a.bottom=v.utils.toRatio(a.bottom,e.height),{snappedRect:a,delta:r}},e.prototype.addWidgetToLayout=function(t,e,n,o,i){var r;return Io(this,void 0,Promise,(function(){var a,l,s,u,c,d,p,f,y,v;return wo(this,(function(m){switch(m.label){case 0:return a=this.props.layout,[4,F((l=Object(h.getAppConfigAction)(i)).appConfig,t,{layoutId:a.id},e,o)];case 1:return s=m.sent(),u=s.layoutInfo,c=s.updatedAppConfig,l=Object(h.getAppConfigAction)(c),null!=t.layoutInfo&&t.layoutInfo.layoutId===a.id&&l.editLayoutItemSetting(u,{vCenter:!1,hCenter:!1}),d=l.appConfig.layouts[u.layoutId].content[u.layoutItemId],p=Object(g.Immutable)(null!==(r=d.setting)&&void 0!==r?r:{}),f=Object(kn.b)(d.bbox,p,this.domRect,n),y=f.bbox,v=f.setting,l.editLayoutItemBBox(u,this.flipLeftRight?Object(kn.c)(y):y).editLayoutItemSetting(u,v),Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(l.appConfig,u)),[2]}}))}))},e.prototype.getPositionUnit=function(t){return to(this.props.layout.content[t].bbox,this.flipLeftRight)},e.prototype.createItem=function(t,e,n){var o=this.props,i=o.itemResizable,r=o.itemDraggable,a=o.itemSelectable,l=o.showDefaultTools,s=this.state,u=s.offsetX,c=s.offsetY,d=s.dw,p=s.dh,h=e===this.rndingLayoutId?u:0,f=e===this.rndingLayoutId?c:0,y=e===this.rndingLayoutId?d:0,v=e===this.rndingLayoutId?p:0,m=e===this.rndingLayoutId?this.resizingRect:void 0,b=e===this.rndingLayoutId?this.domRect:void 0,x=t.content[e];return Object(g.jsx)(_n,{key:e,index:n,layoutItem:x,offsetX:h,offsetY:f,dw:y,dh:v,initRect:m,containerRect:b,layoutId:t.id,layoutItemId:e,draggable:r,resizable:i,selectable:a,showDefaultTools:l,isLayoutLockChildren:this.layoutSetting.lockChildren,onResizeStart:this.handleResizeStart,onResizing:this.handleResizing,onResizeEnd:this.handleResizeEnd,onMoveByKey:this.handleMoveItemByKey,isInSection:this.props.isInSection})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,o=e.className,i=e.style,r=e.layouts,a=e.isPageItem;return null==n?null:Object(g.jsx)(v.PageContext.Consumer,null,(function(e){var l,s,u;t.pageContext=e;var c=n,d=r[e.browserSizeMode]!==n.id;d&&null!=t.layoutTransform&&(c=t.layoutTransform(n,e.mainSizeMode,e.browserSizeMode)),t.layoutSetting=g.lodash.assign({},y.b,d?{}:n.setting);var p=null!==(s=c.order)&&void 0!==s?s:[],h=Object(g.classNames)("layout fixed-layout",o,((l={})["limited-drag-boundary"]=null===(u=n.setting)||void 0===u?void 0:u.lockDescendants,l)),v=0!==t.state.dh||0!==t.state.dw,m=xo(xo(xo({height:"auto",position:"relative"},i),f.styleUtils.toCSSStyle(t.layoutSetting.style)),{width:"100%",overflow:"hidden"}),b={display:t.state.isDragover||v?"block":"none",zIndex:p.length+1},x=!t.state.isLoadingTemplate&&0===p.length&&!e.viewOnly&&n.id===e.rootLayoutId;return Object(g.jsx)("div",{className:h,ref:function(e){return t.ref=e},onClick:t.handleActivate,onMouseDown:t.handleMouseDown,style:m,"data-layoutid":c.id},Object(g.jsx)(g.OneByOneAnimation,{"data-layoutid":c.id,className:"trail-container",css:Object(g.css)(yo||(yo=mo(["\n                  position: absolute;\n                  left: 0;\n                  right: 0;\n                  top: 0;\n                  bottom: 0;\n                "],["\n                  position: absolute;\n                  left: 0;\n                  right: 0;\n                  top: 0;\n                  bottom: 0;\n                "])))},Object(g.jsx)(ke,{css:jo,layouts:t.props.layouts,highlightDragover:!a,onDragEnter:t.handleDragEnter,onDragLeave:t.handleDragLeave,onDragOver:t.handleDragOver,onDrop:t.handleDrop,onToggleDragoverEffect:t.handleToggleDragoverEffect,isRepeat:t.props.isRepeat}),p.map((function(e,n){return t.createItem(c,e,n)}))),x&&Object(g.jsx)(go,{pageContext:t.pageContext,onPageTemplateSelected:t.handlePageTemplateSelected}),t.state.isLoadingTemplate&&Object(g.jsx)(f.Loading,{type:f.LoadingType.Primary}),Object(g.jsx)("canvas",{css:Oo,style:b,ref:function(e){return t.canvasRef=e}}))}))},e.displayName="FixedLayout",e}(g.React.PureComponent),Co=g.ReactRedux.connect(v.utils.mapStateToLayoutProps)(So);var Po,To,Ao,Mo,Ro,zo,ko,Lo,No,Bo,Eo,Do,_o,Vo,Fo,Ho,Wo,Go=n(23),Uo=n(4),Yo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zo=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Xo=function(){return(Xo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Jo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isResizing:!1,dw:0,dh:0},e.onResizeStart=function(t,n,o){e.initWidth=n,e.initHeight=o,e.props.onResizeStart(t),e.setState({isResizing:!0})},e.onResizing=function(t,n,o,i,r){e.props.onResizing(t,n,o,i,r),e.setState({dw:i,dh:r,isResizing:!0})},e.onResizeEnd=function(t,n,o,i,r,a){var l=e.props.layoutItem;e.props.onResizeEnd(t,n,o,i,r,l),e.setState({isResizing:!1,dw:0,dh:0})},e}return Yo(e,t),e.prototype.isStretchInCrossAxis=function(){var t,e;return(null===(e=null===(t=this.props.layoutItem.setting)||void 0===t?void 0:t.autoProps)||void 0===e?void 0:e.width)!==Uo.f.Custom},e.prototype.calHeight=function(t,e){var n,o;return(null===(n=t.autoProps)||void 0===n?void 0:n.height)===Uo.f.Auto||"ratio"===t.heightMode?"ratio"===t.heightMode?{height:"auto",flex:"0 0 auto"}:{height:"auto"}:(null===(o=t.autoProps)||void 0===o?void 0:o.height)===Uo.f.Stretch||"fit"===t.heightMode?{flex:"1 1 auto"}:{height:e.height,flexShrink:0}},e.prototype.getStyle=function(t,e){var n,o,i=this.props,r=i.index,a=i.layoutItem,l=i.space,s=this.state,u=s.dw,c=s.dh,d=s.isResizing,p=a.bbox||{},h=this.calHeight(t,p);return h.width=e?"auto":p.width,d&&(u||c)&&(h.height=this.initHeight+c,h.width=this.initWidth+u),Object(g.css)(Po||(Po=Zo(["\n      margin-top: ",";\n      align-self: ",";\n      width: ",";\n      height: ",";\n      flex: ",";\n      flex-shrink: ",";\n    "],["\n      margin-top: ",";\n      align-self: ",";\n      width: ",";\n      height: ",";\n      flex: ",";\n      flex-shrink: ",";\n    "])),r>0?l+"px":"unset",e?"stretch":null!==(o=null===(n=t.style)||void 0===n?void 0:n.alignSelf)&&void 0!==o?o:"auto",Object($n.getValueOfBBox)(h,"width"),Object($n.getValueOfBBox)(h,"height"),h.flex,h.flexShrink)},e.prototype.render=function(){var t,e,n=this.props,o=n.layoutId,i=n.layoutItem,r=n.draggable,a=n.resizable,l=n.selectable,s=n.showDefaultTools;if(!i||i.isPending)return null;var u=i.setting||{},c=Object(g.classNames)("flexbox-layout-item d-flex"),d=this.isStretchInCrossAxis(),p=null!==(e=null===(t=u.autoProps)||void 0===t?void 0:t.height)&&void 0!==e?e:Uo.f.Custom,h="ratio"===u.heightMode,f=Object($n.parseAspectRatio)(u.aspectRatio),y=Object($n.handleOnebyOneAnimation)(this.props);return Object(g.jsx)(mn,Xo({css:this.getStyle(u,d),layoutId:o,layoutItemId:i.id,onResizeStart:this.onResizeStart,onResizing:this.onResizing,onResizeEnd:this.onResizeEnd,left:!d,right:!d,top:!1,bottom:p===Uo.f.Custom&&!h,draggable:r,resizable:a,selectable:l,showDefaultTools:s,onClick:this.props.onClick,className:c,forceAspectRatio:h,aspectRatio:f},y))},e}(g.React.PureComponent),qo=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Qo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ko=Object(g.css)(To||(To=qo(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"]))),$o=Object(g.css)(Ao||(Ao=qo(["\n  ",";\n  z-index: 20;\n  pointer-events: none;\n"],["\n  ",";\n  z-index: 20;\n  pointer-events: none;\n"])),Ko),ti=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isDragover:!1},n.handleItemResizing=function(){},v.utils.autoBindHandlers(n,["handleItemResizeStart","handleItemResizing","handleItemResizeEnd","handleDrop","handleDragOver","handleDragEnter","handleDragLeave","handleToggleDragoverEffect"]),n}return Qo(e,t),e.prototype.componentDidMount=function(){this.canvasPane=new vo(this.canvasRef),this.canvasPane.setSize(this.ref.clientWidth,this.ref.clientHeight)},e.prototype.componentDidUpdate=function(){this.canvasPane.setSize(this.ref.clientWidth,this.ref.clientHeight)},e.prototype.handleItemResizeStart=function(t){var e=this.props.layout;this.domRect=this.ref.getBoundingClientRect();var n=this.ref.querySelector('div.exb-rnd[data-layoutid="'+e.id+'"][data-layoutitemid="'+t+'"]').getBoundingClientRect();this.resizingRect=v.utils.relativeClientRect(n,this.domRect)},e.prototype.handleItemResizeEnd=function(t,e,n,o,i,r){var a=this.props.layout.content[t].bbox,l={width:v.utils.isPercentage(a.width)?(100*(this.resizingRect.width+o)/this.domRect.width).toFixed(4)+"%":Math.round(this.resizingRect.width+o)+"px",height:Math.round(this.resizingRect.height+i)};this.childRects=[],this.domRect=null,Object(h.getAppConfigAction)().editLayoutItemBBox({layoutId:this.props.layout.id,layoutItemId:t},l).exec()},e.prototype.handleDragOver=function(t,e,n,o){var i,r=o;if(this.canvasPane.clear(),(null===(i=this.childRects)||void 0===i?void 0:i.length)>0){var a=function(t,e,n){var o,i,r=e.top+e.height/2,a=!1;if(n.some((function(t,e){if(t.top+t.height/2>r){if(0===e)o=t.top/2;else{var l=n[e-1];o=(t.top+l.top+l.height)/2}a=!0,i=t.id}return a})),!a){var l=n[n.length-1];o=(l.top+l.height+t.height)/2}return{refId:i,insertY:o}}(n,r,this.childRects),l=a.insertY,s=a.refId;this.referenceId=s,r={top:l-5+this.ref.scrollTop,width:n.width-10,left:5,height:10}}else r={top:n.height/2-5,width:n.width-10,left:5,height:10};this.canvasPane.setColor(g.polished.rgba(this.builderTheme.colors.palette.primary[700],1)),this.canvasPane.drawRect(r)},e.prototype.handleToggleDragoverEffect=function(t){t&&(this.referenceId=null,this.collectBounds(null)),this.setState({isDragover:t})},e.prototype.handleDragEnter=function(){},e.prototype.handleDragLeave=function(){},e.prototype.handleDrop=function(t,e,n){this.canvasPane.clear();var o=this.props.layout,i={layoutId:o.id},r=0;null!=this.referenceId?r=o.order.indexOf(this.referenceId):null!=o.order&&(r=o.order.length),F(Object(h.getAppConfigAction)().appConfig,t,i,e,n,r).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig,o=e.layoutId,i=e.layoutItemId,r=n.layouts[o].content[i].bbox;r=r.without("left").without("top").without("right").without("bottom");var a=n.setIn(["layouts",o,"content",i,"bbox"],r);Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(a,e))})).finally(null),this.referenceId=null,this.childRects=[]},e.prototype.collectBounds=function(t){var e=this,n=this.props.layout;this.childRects=[],this.domRect=this.ref.getBoundingClientRect();var o=this.ref.parentNode.querySelectorAll('div[data-layoutid="'+n.id+'"] > .trail-container > div.exb-rnd');return(null==o?void 0:o.length)>0&&o.forEach((function(o){var i=o.getAttribute("data-layoutitemid");if(t!==i&&n.order.includes(i)){var r=v.utils.relativeClientRect(o.getBoundingClientRect(),e.domRect);r.id=i,e.childRects.push(r)}})),this.childRects.sort((function(t,e){return t.top-e.top}))},e.prototype.createItem=function(t,e,n){var o=this.props,i=o.layout,r=o.itemDraggable,a=o.itemResizable,l=o.itemSelectable,s=o.showDefaultTools;return Object(g.jsx)(Jo,{key:t,index:e,space:n.space,layoutId:i.id,layoutItemId:t,layoutItem:i.content[t],draggable:r,resizable:a,selectable:l,showDefaultTools:s,onResizeStart:this.handleItemResizeStart,onResizing:this.handleItemResizing,onResizeEnd:this.handleItemResizeEnd})},e.prototype.isEmpty=function(){var t,e=this.props.layout,n=null!==(t=e.order)&&void 0!==t?t:[];return!(n.length>0&&n.some((function(t){return!e.content[t].isPending})))},e.prototype.render=function(){var t,e=this,n=this.props,o=n.layout,i=n.className,r=null!==(t=o.order)&&void 0!==t?t:[],a=Object.assign({},Go.a,o.setting),l=this.isEmpty();return Object(g.jsx)(v.PageContext.Consumer,null,(function(t){e.builderTheme=t.builderTheme,e.theme=t.theme;var n={position:"relative",minWidth:a.min},s=Object(g.classNames)("layout column-layout",i),u={display:e.state.isDragover?"block":"none"};return Object(g.jsx)("div",{className:s,ref:function(t){return e.ref=t},style:n,"data-layoutid":o.id},Object(g.jsx)(g.OneByOneAnimation,{enableScroll:!0,className:"trail-container d-flex flex-column w-100",css:Object(g.css)(Mo||(Mo=qo(["\n                  position: ",";\n                  height: 100%;\n                  overflow-x: hidden;\n                  padding: ",";\n                  justify-content: ",";\n                  overflow-y: ","\n                "],["\n                  position: ",";\n                  height: 100%;\n                  overflow-x: hidden;\n                  padding: ",";\n                  justify-content: ",";\n                  overflow-y: ","\n                "])),l?"absolute":null,f.styleUtils.toCSSPadding(a.padding),a.justifyContent,!1===a.overflowY?"hidden !important":null)},Object(g.jsx)(ke,{css:Ko,layouts:e.props.layouts,highlightDragover:!0,onDragEnter:e.handleDragEnter,onDragLeave:e.handleDragLeave,onDragOver:e.handleDragOver,onDrop:e.handleDrop,onToggleDragoverEffect:e.handleToggleDragoverEffect}),r.map((function(t,n){return e.createItem(t,n,a)}))),l&&e.props.children,Object(g.jsx)("canvas",{css:$o,style:u,ref:function(t){return e.canvasRef=t}}))}))},e}(g.React.PureComponent),ei=g.ReactRedux.connect(v.utils.mapStateToLayoutProps)(ti),ni=n(10),oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ii=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ri=function(t){function e(e){var n=t.call(this,e)||this;return n.modalStyle={position:"absolute",top:"0",bottom:"0",width:"100%",height:"auto",paddingBottom:"1px"},n.onTransitionSettingChange=function(t){var e=n.props,o=e.layoutId,i=e.layoutItemId,r=Object(h.getAppConfigAction)(),a=r.appConfig.layouts[o].content[i];r.editSectionProperty(a.sectionId,"transition",t).exec(),(null==t?void 0:t.type)!==g.TransitionType.None&&n.previewTransition()},n.onEffectSettingChange=function(t,e){var o=g.AnimationTriggerType.ScrollIntoView,i=n.props,r=i.layoutId,a=i.layoutItemId,l=i.setting||Object(g.Immutable)({}),s=t===g.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";n.props.onSettingChange({layoutId:r,layoutItemId:a},l.setIn([s,o],e)),(null==e?void 0:e.type)!==g.AnimationType.None&&h.builderAppSync.publishAnimationPreviewToApp({layoutInfo:{layoutId:r,layoutItemId:a},playMode:t,id:Symbol("preview animation")})},n.onSectionOneByOneEffectSettingChange=function(t){n.onEffectSettingChange(g.AnimationPlayMode.OneByOne,t)},n.previewAnimation=function(t){n.hasAnimationEffect()&&h.builderAppSync.publishAnimationPreviewToApp({layoutInfo:{layoutId:n.props.layoutId,layoutItemId:n.props.layoutItemId},playMode:t,id:Symbol("preview animation")})},n.previewTransition=function(t){var e,o,i;void 0===t&&(t=!1);var r=n.props.sectionId,a=v.searchUtils.getSectionInfo(Object(g.getAppStore)().getState().appStateInBuilder,r),l=a.views;if((null==l?void 0:l.length)>1){var s=null===(i=null===(o=null===(e=Object(g.getAppStore)().getState().appStateInBuilder)||void 0===e?void 0:e.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===i?void 0:i[r];if(!s){var u=de(a),c=l.indexOf(u),d=c>0?c-1:c+1;s=Object(g.Immutable)({currentViewId:u,previousViewId:l[d]})}h.builderAppSync.publishSectionNavInfoToApp(r,s.set("playId",Symbol("play transition")).set("withOneByOne",t).asMutable())}},n.previewTransitionAndOnebyOne=function(){n.previewTransition(!0)},n.previewOneByOneInSection=function(){n.previewAnimation(g.AnimationPlayMode.OneByOne)},n.onPlayModeChange=function(t){var e=n.props,o=e.layoutId,i=e.layoutItemId,r=e.setting||Object(g.Immutable)({}),a=Object(h.getAppConfigAction)().appConfig;a=a.setIn(["layouts",o,"content",i,"setting"],r.set("effectPlayMode",t)),Object(h.getAppConfigAction)(a).exec()},n.switchToIn=function(){n.setState({animationType:"in"})},n.switchToTransition=function(){n.setState({animationType:"transition"})},n.state={animationType:"in"},n}return oi(e,t),e.prototype.hasAnimationEffect=function(){var t,e,n=this.props.setting,o=null===(t=null==n?void 0:n.effect)||void 0===t?void 0:t[g.AnimationTriggerType.ScrollIntoView],i=null===(e=null==n?void 0:n.oneByOneEffect)||void 0===e?void 0:e[g.AnimationTriggerType.ScrollIntoView];return o&&o.type!==g.AnimationType.None||i&&i.type!==g.AnimationType.None},e.prototype.render=function(){var t,e,n=this.props,o=n.formatMessage,i=n.isLayoutWidget,r=n.isSection,a=n.transitionType,l=n.transitionDirection,s=n.setting,u=this.state.animationType,c=null===(t=null==s?void 0:s.effect)||void 0===t?void 0:t[g.AnimationTriggerType.ScrollIntoView],d=null===(e=null==s?void 0:s.oneByOneEffect)||void 0===e?void 0:e[g.AnimationTriggerType.ScrollIntoView];return Object(g.jsx)(Ce.SettingSection,{title:o("animation")},r&&Object(g.jsx)(Ce.SettingRow,null,Object(g.jsx)(f.ButtonGroup,{className:"w-100",css:Object(g.css)(Ro||(Ro=ii(["\n            border-bottom: 1px solid var(--primary-500);\n            .jimu-btn {\n              width: 50%;\n              border-radius: 2px 2px 0 0;\n            }\n          "],["\n            border-bottom: 1px solid var(--primary-500);\n            .jimu-btn {\n              width: 50%;\n              border-radius: 2px 2px 0 0;\n            }\n          "])))},Object(g.jsx)(f.Button,{type:"in"===u?"primary":"default",onClick:this.switchToIn},o("in")),Object(g.jsx)(f.Button,{className:"ml-1",type:"transition"===u?"primary":"default",onClick:this.switchToTransition},o("transition")))),"in"===u&&Object(g.jsx)(Ce.SettingRow,{flow:"wrap",label:o("scrollIntoView")},Object(g.jsx)(ni.AnimationSettingComponent,{effectSetting:c,oneByOneSetting:d,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:i,onPreviewClicked:this.previewAnimation,formatMessage:o})),"transition"===u&&Object(g.jsx)(Ce.SettingRow,{flow:"wrap"},Object(g.jsx)(ni.TransitionSetting,{transition:{type:a,direction:l},transitionLabel:o("view"),oneByOneEffect:d,onOneByOneChange:this.onSectionOneByOneEffectSettingChange,onTransitionChange:this.onTransitionSettingChange,onPreviewTransitionClicked:this.previewTransition,onPreviewOneByOneClicked:this.previewOneByOneInSection,onPreviewAsAWhoneClicked:this.previewTransitionAndOnebyOne,formatMessage:o})))},e}(g.React.PureComponent),ai=g.ReactRedux.connect((function(t,e){var n,o,i,r,a,l,s,u,c,d,p=null===(o=null===(n=t.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===o?void 0:o.layouts[e.layoutId].content[e.layoutItemId],h=!1,f=(null==p?void 0:p.type)===g.LayoutItemType.Section,y=(null==p?void 0:p.type)===g.LayoutItemType.Widget;if(y){var v=null===(i=t.appStateInBuilder)||void 0===i?void 0:i.appConfig.widgets[p.widgetId];h=(null===(r=null==v?void 0:v.manifest)||void 0===r?void 0:r.widgetType)===g.WidgetType.Layout}if(f){var m=null===(a=t.appStateInBuilder)||void 0===a?void 0:a.appConfig.sections[p.sectionId];d=m.id,u=null===(l=m.transition)||void 0===l?void 0:l.type,c=null===(s=m.transition)||void 0===s?void 0:s.direction}return{setting:p.setting,isLayoutWidget:h,isSection:f,isWidget:y,transitionType:u,transitionDirection:c,sectionId:d}}))(ri),li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),si=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onBackgroundStyleChange=function(t){var n,o,i=Object(g.Immutable)(null!==(o=null===(n=e.props.style)||void 0===n?void 0:n.background)&&void 0!==o?o:{});for(var r in t)switch(r){case"fillType":i.fillType!==t[r]&&(i=i.set("fillType",t[r]));break;case"color":i=i.set("color",t[r]);break;case"image":i=i.set("image",t[r])}e.updateStyle("background",i)},e.updateBorder=function(t){e.updateStyle("border",t)},e.updateRadius=function(t){e.updateStyle("borderRadius",t)},e.updateShadow=function(t){e.updateStyle("boxShadow",t)},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return li(e,t),e.prototype.updateStyle=function(t,e){var n,o=Object(g.Immutable)(null!==(n=this.props.style)&&void 0!==n?n:{});this.props.onStyleChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItemId},o.set(t,e))},e.prototype.allowCoverBackground=function(){var t,e,n,o=this.props,i=o.layoutId,r=o.layoutItemId,a=Object(h.getAppConfigAction)().appConfig,l=a.layouts[i].content[r];if(l.type===g.LayoutItemType.Widget){var s=l.widgetId;return null===(n=null===(e=null===(t=a.widgets[s])||void 0===t?void 0:t.manifest)||void 0===e?void 0:e.properties)||void 0===n?void 0:n.coverLayoutBackground}return!1},e.prototype.render=function(){var t=this.props,e=t.layoutId,n=t.layoutItemId,o=this.props.style||{};return Object(g.jsx)("div",{className:"common-layout-item-setting"},Object(g.jsx)(ai,{layoutId:e,layoutItemId:n,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}),!this.props.isSection&&!this.allowCoverBackground()&&Object(g.jsx)(Ce.SettingSection,{title:this.formatMessage("background")},Object(g.jsx)(Ce.SettingRow,null,Object(g.jsx)(ni.BackgroundSetting,{background:o.background,onChange:this.onBackgroundStyleChange}))),Object(g.jsx)(Ce.SettingSection,{title:this.formatMessage("border")},Object(g.jsx)(Ce.SettingRow,{flow:"wrap"},Object(g.jsx)(ni.BorderSetting,{value:o.border,onChange:this.updateBorder})),Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("borderRadius"),flow:"wrap"},Object(g.jsx)(ni.BorderRadiusSetting,{value:o.borderRadius,onChange:this.updateRadius}))),Object(g.jsx)(Ce.SettingSection,{title:this.formatMessage("boxShadow")},Object(g.jsx)(Ce.SettingRow,{flow:"wrap"},Object(g.jsx)(ni.BoxShadowSetting,{value:o.boxShadow,onChange:this.updateShadow}))))},e}(g.React.PureComponent),ui=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ci=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateRotation=function(t){var n,o=Object(g.Immutable)(null!==(n=e.props.setting)&&void 0!==n?n:{});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItemId},o.setIn(["style","transform","rotate"],t))},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return ui(e,t),e.prototype.render=function(){var t,e,n,o=this.props.setting||{};return Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("rotation"),className:"rotation-setting"},Object(g.jsx)(f.NumericInput,{value:null!==(n=null===(e=null===(t=o.style)||void 0===t?void 0:t.transform)||void 0===e?void 0:e.rotate)&&void 0!==n?n:0,min:-360,max:360,onChange:this.updateRotation,formatter:function(t){return t+"°"},parser:function(t){return t.replace("°","")},style:{width:"7.5rem"},size:"sm"}))},e}(g.React.PureComponent),di=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pi=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},gi=[f.UnitTypes.PIXEL,f.UnitTypes.PERCENTAGE],hi=n(70),fi=function(t){function e(e){var n=t.call(this,e)||this;return n.updateBBox=function(t,e){var o=n.props.layoutItem.bbox,i=e.distance,r=e.unit,a=o[t],l=i.toFixed(2);if(v.utils.isPercentage(a)&&r===f.UnitTypes.PIXEL)null!=(s=n.getSizeOfContainer())&&(l="left"===t||"right"===t||"width"===t?Math.round(parseFloat(a)*s.width/100):Math.round(parseFloat(a)*s.height/100));else if(!v.utils.isPercentage(a)&&r===f.UnitTypes.PERCENTAGE){var s;null!=(s=n.getSizeOfContainer())&&(l="left"===t||"right"===t||"width"===t?(100*parseFloat(a)/s.width).toFixed(2):(100*parseFloat(a)/s.height).toFixed(2))}n.props.onPosChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},o.set(t,e.unit===f.UnitTypes.PERCENTAGE?l+"%":l+"px"))},n.flipLeftRight=v.utils.isRTL(),n}return di(e,t),e.prototype.getStyle=function(){return Object(g.css)(zo||(zo=pi(["\n      .position-setting {\n        background-color: var(--light-500);\n        position: relative;\n        width: 100%;\n        padding-top: 60%;\n        overflow: visible;\n      }\n\n      .content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        padding: 7px;\n      }\n\n      .w-half {\n        width: calc(50% - 16px);\n        position: relative;\n        z-index: 0;\n      }\n      .h-half {\n        height: calc(50% - 16px);\n        position: relative;\n        z-index: 0;\n      }\n      .pos-label {\n        z-index: 1;\n      }\n\n      .box-column {\n        width: 32px;\n        overflow: visible;\n      }\n\n      .box-item {\n        width: 24px;\n        height: 24px;\n        background-color: var(--dark-200);\n        margin: 4px 0;\n        position: relative;\n        overflow: visible;\n\n        &.stretch {\n          background-color: transparent;\n          border: 1px solid var(--dark-200);\n        }\n        .h-arrow, .v-arrow {\n          display: none;\n          .arrow-icon {\n            color: var(--dark-200);\n            width: 100%;\n            height: 100%;\n          }\n          position: absolute;\n          width: 100%;\n        }\n        .h-arrow {\n          top: 50%;\n          transform: translateY(-50%);\n        }\n        .v-arrow {\n          left: 50%;\n          transform: translateX(-50%);\n        }\n        &.stretch-w .h-arrow,\n        &.stretch-h .v-arrow {\n          display: block;\n        }\n      }\n\n      .anchor {\n        position: absolute;\n        width: 16px;\n        height: 16px;\n        background: transparent;\n        overflow: visible;\n\n        &.selected {\n          width: 10px;\n          height: 10px;\n          opacity: 1;\n          background: var(--primary-100);\n          border: 2px solid var(--primary-600) !important;\n          border-radius: 3px !important;\n        }\n        &.top.left {\n          border-radius: 3px 0 0 0;\n        }\n        &.top.right {\n          border-radius: 0 3px 0 0;\n        }\n        &.bottom.right {\n          border-radius: 0 0 3px 0;\n        }\n        &.bottom.left {\n          border-radius: 0 0 0 3px;\n        }\n        &.left {\n          left: 6px;\n          border-left: 2px solid var(--dark-200);\n          &.selected:before {\n            position: absolute;\n            right: -10px;\n            top: 50%;\n            transform: translateY(-50%);\n            content: '';\n            height: 2px;\n            width: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.top {\n          top: 6px;\n          border-top: 2px solid var(--dark-200);\n          &.selected:after {\n            position: absolute;\n            bottom: -10px;\n            left: 50%;\n            transform: translateX(-50%);\n            content: '';\n            width: 2px;\n            height: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.bottom {\n          bottom: 6px;\n          border-bottom: 2px solid var(--dark-200);\n          &.selected:after {\n            position: absolute;\n            top: -10px;\n            left: 50%;\n            transform: translateX(-50%);\n            content: '';\n            width: 2px;\n            height: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.right {\n          right: 6px;\n          border-right: 2px solid var(--dark-200);\n          &.selected:before {\n            position: absolute;\n            left: -10px;\n            top: 50%;\n            transform: translateY(-50%);\n            content: '';\n            height: 2px;\n            width: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n      }\n\n      .from-left {\n        border-left: 2px solid var(--primary-600);\n        &.is-auto {\n          border-left-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-left-color: var(--primary-600);\n        }\n      }\n      .from-top {\n        border-top: 2px solid var(--primary-600);\n        &.is-auto {\n          border-top-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-top-color: var(--primary-600);\n        }\n      }\n      .from-right {\n        border-right: 2px solid var(--primary-600);\n        &.is-auto {\n          border-right-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-right-color: var(--primary-600);\n        }\n      }\n      .from-bottom {\n        border-bottom: 2px solid var(--primary-600);\n        &.is-auto {\n          border-bottom-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-bottom-color: var(--primary-600);\n        }\n      }\n      /* .line-h.is-auto,\n      .line-v.is-auto {\n        border-color: var(--dark-200);\n      } */\n      .line-h {\n        position: absolute;\n        width: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        height: 12px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        z-index: 0;\n\n        &.allow-change {\n          cursor: pointer;\n          &:hover:after {\n            border-top-color: var(--primary-600);\n          }\n        }\n        &:after {\n          content: '';\n          height: 0;\n          width: 100%;\n          border-top: 2px solid var(--primary-600);\n        }\n        &.is-auto:after {\n          border-top-style: dashed;\n          border-top-color: var(--dark-200);\n        }\n      }\n      .line-v {\n        position: absolute;\n        height: 100%;\n        width: 12px;\n        left: 50%;\n        transform: translateX(-50%);\n        display: flex;\n        justify-content: center;\n        z-index: 0;\n\n        &.allow-change {\n          cursor: pointer;\n          &:hover:after {\n            border-left-color: var(--primary-600);\n          }\n        }\n        &:after {\n          content: '';\n          width: 0;\n          height: 100%;\n          border-left: 2px solid var(--primary-600);\n        }\n        &.is-auto:after {\n          border-left-style: dashed;\n          border-left-color: var(--dark-200);\n        }\n      }\n\n      .auto-label {\n        width: 16px;\n        height: 16px;\n        background: var(--primary);\n        border: 1px solid var(--light-500);\n        font-size: 12px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--light-300);\n      }\n\n      .style-setting--input-unit {\n        &:hover {\n          input.jimu-numeric-input-input {\n            background-color: var(--light-200);\n          }\n          .style-setting--unit-selector {\n            background-color: var(--light-200);\n          }\n        }\n        border-radius: 2px;\n        width: 52px;\n        height: 24px;\n\n        input.jimu-numeric-input-input {\n          height: 24px;\n          font-size: 12px;\n          padding: 0;\n          text-align: center;\n          border: none;\n          background-color: var(--light-500);\n          &:focus {\n            background-color: var(--light-200);\n          }\n        }\n        .style-setting--unit-selector {\n          background-color: var(--light-500);\n          color: var(--dark-400);\n          height: 24px;\n          width: 20px;\n          min-width: 0;\n          padding: 0;\n          margin-left: 0;\n          font-size: 12px;\n          border: none;\n        }\n      }\n\n      .origin-tip {\n        margin-top: 8px;\n        font-size: 12px;\n        color: var(--dark-400);\n      }\n    "],["\n      .position-setting {\n        background-color: var(--light-500);\n        position: relative;\n        width: 100%;\n        padding-top: 60%;\n        overflow: visible;\n      }\n\n      .content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        padding: 7px;\n      }\n\n      .w-half {\n        width: calc(50% - 16px);\n        position: relative;\n        z-index: 0;\n      }\n      .h-half {\n        height: calc(50% - 16px);\n        position: relative;\n        z-index: 0;\n      }\n      .pos-label {\n        z-index: 1;\n      }\n\n      .box-column {\n        width: 32px;\n        overflow: visible;\n      }\n\n      .box-item {\n        width: 24px;\n        height: 24px;\n        background-color: var(--dark-200);\n        margin: 4px 0;\n        position: relative;\n        overflow: visible;\n\n        &.stretch {\n          background-color: transparent;\n          border: 1px solid var(--dark-200);\n        }\n        .h-arrow, .v-arrow {\n          display: none;\n          .arrow-icon {\n            color: var(--dark-200);\n            width: 100%;\n            height: 100%;\n          }\n          position: absolute;\n          width: 100%;\n        }\n        .h-arrow {\n          top: 50%;\n          transform: translateY(-50%);\n        }\n        .v-arrow {\n          left: 50%;\n          transform: translateX(-50%);\n        }\n        &.stretch-w .h-arrow,\n        &.stretch-h .v-arrow {\n          display: block;\n        }\n      }\n\n      .anchor {\n        position: absolute;\n        width: 16px;\n        height: 16px;\n        background: transparent;\n        overflow: visible;\n\n        &.selected {\n          width: 10px;\n          height: 10px;\n          opacity: 1;\n          background: var(--primary-100);\n          border: 2px solid var(--primary-600) !important;\n          border-radius: 3px !important;\n        }\n        &.top.left {\n          border-radius: 3px 0 0 0;\n        }\n        &.top.right {\n          border-radius: 0 3px 0 0;\n        }\n        &.bottom.right {\n          border-radius: 0 0 3px 0;\n        }\n        &.bottom.left {\n          border-radius: 0 0 0 3px;\n        }\n        &.left {\n          left: 6px;\n          border-left: 2px solid var(--dark-200);\n          &.selected:before {\n            position: absolute;\n            right: -10px;\n            top: 50%;\n            transform: translateY(-50%);\n            content: '';\n            height: 2px;\n            width: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.top {\n          top: 6px;\n          border-top: 2px solid var(--dark-200);\n          &.selected:after {\n            position: absolute;\n            bottom: -10px;\n            left: 50%;\n            transform: translateX(-50%);\n            content: '';\n            width: 2px;\n            height: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.bottom {\n          bottom: 6px;\n          border-bottom: 2px solid var(--dark-200);\n          &.selected:after {\n            position: absolute;\n            top: -10px;\n            left: 50%;\n            transform: translateX(-50%);\n            content: '';\n            width: 2px;\n            height: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n        &.right {\n          right: 6px;\n          border-right: 2px solid var(--dark-200);\n          &.selected:before {\n            position: absolute;\n            left: -10px;\n            top: 50%;\n            transform: translateY(-50%);\n            content: '';\n            height: 2px;\n            width: 10px;\n            background-color: var(--primary-600);\n          }\n        }\n      }\n\n      .from-left {\n        border-left: 2px solid var(--primary-600);\n        &.is-auto {\n          border-left-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-left-color: var(--primary-600);\n        }\n      }\n      .from-top {\n        border-top: 2px solid var(--primary-600);\n        &.is-auto {\n          border-top-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-top-color: var(--primary-600);\n        }\n      }\n      .from-right {\n        border-right: 2px solid var(--primary-600);\n        &.is-auto {\n          border-right-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-right-color: var(--primary-600);\n        }\n      }\n      .from-bottom {\n        border-bottom: 2px solid var(--primary-600);\n        &.is-auto {\n          border-bottom-color: var(--dark-200);\n        }\n        &.allow-change:hover {\n          border-bottom-color: var(--primary-600);\n        }\n      }\n      /* .line-h.is-auto,\n      .line-v.is-auto {\n        border-color: var(--dark-200);\n      } */\n      .line-h {\n        position: absolute;\n        width: 100%;\n        top: 50%;\n        transform: translateY(-50%);\n        height: 12px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        z-index: 0;\n\n        &.allow-change {\n          cursor: pointer;\n          &:hover:after {\n            border-top-color: var(--primary-600);\n          }\n        }\n        &:after {\n          content: '';\n          height: 0;\n          width: 100%;\n          border-top: 2px solid var(--primary-600);\n        }\n        &.is-auto:after {\n          border-top-style: dashed;\n          border-top-color: var(--dark-200);\n        }\n      }\n      .line-v {\n        position: absolute;\n        height: 100%;\n        width: 12px;\n        left: 50%;\n        transform: translateX(-50%);\n        display: flex;\n        justify-content: center;\n        z-index: 0;\n\n        &.allow-change {\n          cursor: pointer;\n          &:hover:after {\n            border-left-color: var(--primary-600);\n          }\n        }\n        &:after {\n          content: '';\n          width: 0;\n          height: 100%;\n          border-left: 2px solid var(--primary-600);\n        }\n        &.is-auto:after {\n          border-left-style: dashed;\n          border-left-color: var(--dark-200);\n        }\n      }\n\n      .auto-label {\n        width: 16px;\n        height: 16px;\n        background: var(--primary);\n        border: 1px solid var(--light-500);\n        font-size: 12px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--light-300);\n      }\n\n      .style-setting--input-unit {\n        &:hover {\n          input.jimu-numeric-input-input {\n            background-color: var(--light-200);\n          }\n          .style-setting--unit-selector {\n            background-color: var(--light-200);\n          }\n        }\n        border-radius: 2px;\n        width: 52px;\n        height: 24px;\n\n        input.jimu-numeric-input-input {\n          height: 24px;\n          font-size: 12px;\n          padding: 0;\n          text-align: center;\n          border: none;\n          background-color: var(--light-500);\n          &:focus {\n            background-color: var(--light-200);\n          }\n        }\n        .style-setting--unit-selector {\n          background-color: var(--light-500);\n          color: var(--dark-400);\n          height: 24px;\n          width: 20px;\n          min-width: 0;\n          padding: 0;\n          margin-left: 0;\n          font-size: 12px;\n          border: none;\n        }\n      }\n\n      .origin-tip {\n        margin-top: 8px;\n        font-size: 12px;\n        color: var(--dark-400);\n      }\n    "])))},e.prototype.inputUnit=function(t){var e=this,n=this.props.layoutItem,o=f.utils.stringOfLinearUnit(n.bbox[t]);return Object(g.jsx)("div",{className:"pos-label"},Object(g.jsx)(ni.InputUnit,{units:gi,min:-1/0,max:1/0,value:o,onChange:function(n){return e.updateBBox(t,n)}}))},e.prototype.getSizeOfContainer=function(){var t=this.querySelector('div.fixed-layout[data-layoutid="'+this.props.layoutId+'"]');return null==t?void 0:t.getBoundingClientRect()},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+n.id+'"]');return null==o?void 0:o.getBoundingClientRect()},e.prototype.querySelector=function(t){var e,n=document.querySelector('iframe[name="'+g.APP_FRAME_NAME_IN_BUILDER+'"]');return null!=n?(null!==(e=n.contentDocument)&&void 0!==e?e:n.contentWindow.document).querySelector(t):null},e.prototype.switchAuto=function(t,e,n){var o,i,r=this.props,a=r.layoutId,l=r.layoutItem,s=null!==(o=l.setting)&&void 0!==o?o:Object(g.Immutable)({}),u=null!==(i=l.bbox)&&void 0!==i?i:Object(g.Immutable)({});if(n&&null==u[t]){var c=this.getSizeOfContainer(),d=this.getSizeOfItem();switch(t){case"left":u=u.set(t,v.utils.toRatio(d.left,c.width));break;case"right":u=u.set(t,v.utils.toRatio(c.width-d.right,c.width));break;case"top":u=u.set(t,v.utils.toRatio(d.top,c.height));break;case"bottom":u=u.set(t,v.utils.toRatio(c.height-d.bottom,c.height))}this.props.onPosChange({layoutId:a,layoutItemId:l.id},u)}this.props.onSettingChange({layoutId:a,layoutItemId:l.id},s.setIn(["autoProps",t],!n).setIn(["autoProps",e],n))},e.prototype.checkAutoProps=function(t){var e=Object(kn.e)(this.props.layoutItem.bbox,t);return{leftAuto:null==e.left||t.hCenter&&"50%"===e.left,rightAuto:null==e.right||t.hCenter&&"50%"===e.left,topAuto:null==e.top||t.vCenter&&"50%"===e.top,bottomAuto:null==e.bottom||t.vCenter&&"50%"===e.top}},e.prototype.checkOrigin=function(t,e,n,o){var i=t,r=e,a=n,l=o;return t===e&&(r=!(i=v.utils.isRTL())),n===o&&(a=!1,l=!0),{top:a,bottom:l,left:i,right:r}},e.prototype.allowChangeAutoProps=function(t){var e,n=this.props.layoutItem.setting,o=null!==(e=null==n?void 0:n.autoProps)&&void 0!==e?e:{};return!(v.utils.getLayoutItemSizeMode(t,this.props.layoutItem.bbox,o)===v.LayoutItemSizeModes.Stretch||"width"===t&&(null==n?void 0:n.hCenter)||"height"===t&&(null==n?void 0:n.vCenter))},e.prototype.getOrigin=function(t,e,n,o){var i=this.props.formatMessage;return t||e?n||e?n||o?t||o?"":i("BL"):i("BR"):i("TR"):i("TL")},e.prototype.render=function(){var t=this.props,e=t.layoutItem,n=t.widthMode,o=t.heightMode,i=t.formatMessage;if(null==e)return null;var r=g.lodash.assign({},y.a,e.setting),a=this.checkAutoProps(r),l=a.leftAuto,s=a.rightAuto,u=a.topAuto,c=a.bottomAuto,d=this.checkOrigin(l,s,u,c),p=d.top,h=d.bottom,m=d.left,b=d.right,x=this.allowChangeAutoProps("width"),I=this.allowChangeAutoProps("height");return Object(g.jsx)("div",{css:this.getStyle(),className:"w-100"},Object(g.jsx)("div",{className:"position-setting rounded-lg"},Object(g.jsx)("div",{className:"content d-flex justify-content-center align-items-center"},Object(g.jsx)("div",{className:"d-flex w-half flex-column justify-content-center align-items-center"},Object(g.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},Object(g.jsx)(f.Tooltip,{placement:"bottom",title:x?i(l?"changeToCustom":"changeToAuto"):""},Object(g.jsx)("div",{className:Object(g.classNames)("from-left line-h flex-grow-1 flex-shrink-1",{"is-auto":l,"allow-change":x}),onClick:x?this.switchAuto.bind(this,"left","right",l):null})),l?null:this.inputUnit("left"))),Object(g.jsx)("div",{className:"d-flex h-100 flex-column justify-content-center align-items-center box-column"},Object(g.jsx)("div",{className:"d-flex h-half w-100 flex-column justify-content-center align-items-center"},Object(g.jsx)(f.Tooltip,{placement:"bottom",title:I?i(u?"changeToCustom":"changeToAuto"):""},Object(g.jsx)("div",{className:Object(g.classNames)("from-top line-v flex-grow-1 flex-shrink-1",{"is-auto":u,"allow-change":I}),onClick:I?this.switchAuto.bind(this,"top","bottom",u):null})),u?null:this.inputUnit("top")),Object(g.jsx)("div",{className:Object(g.classNames)("box-item rounded-lg",{stretch:n===v.LayoutItemSizeModes.Stretch||o===v.LayoutItemSizeModes.Stretch,"stretch-w":n===v.LayoutItemSizeModes.Stretch,"stretch-h":o===v.LayoutItemSizeModes.Stretch})},Object(g.jsx)("div",{className:"h-arrow"},Object(g.jsx)(f.Icon,{icon:hi,className:"arrow-icon"})),Object(g.jsx)("div",{className:"v-arrow"},Object(g.jsx)(f.Icon,{icon:hi,rotate:90,className:"arrow-icon"}))),Object(g.jsx)("div",{className:"d-flex h-half w-100 flex-column justify-content-center align-items-center"},Object(g.jsx)(f.Tooltip,{placement:"bottom",title:I?i(c?"changeToCustom":"changeToAuto"):""},Object(g.jsx)("div",{className:Object(g.classNames)("from-bottom line-v flex-grow-1 flex-shrink-1",{"is-auto":c,"allow-change":I}),onClick:I?this.switchAuto.bind(this,"bottom","top",c):null})),c?null:this.inputUnit("bottom"))),Object(g.jsx)("div",{className:"d-flex w-half flex-column justify-content-center align-items-center"},Object(g.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},Object(g.jsx)(f.Tooltip,{placement:"bottom",title:x?i(s?"changeToCustom":"changeToAuto"):""},Object(g.jsx)("div",{className:Object(g.classNames)("from-right line-h flex-grow-1 flex-shrink-1",{"is-auto":s,"allow-change":x}),onClick:x?this.switchAuto.bind(this,"right","left",s):null})),s?null:this.inputUnit("right"))),Object(g.jsx)("div",{className:Object(g.classNames)("anchor top left",{selected:!m&&!p})}),Object(g.jsx)("div",{className:Object(g.classNames)("anchor top right",{selected:!b&&!p})}),Object(g.jsx)("div",{className:Object(g.classNames)("anchor bottom left",{selected:!m&&!h})}),Object(g.jsx)("div",{className:Object(g.classNames)("anchor bottom right",{selected:!h&&!b})}))),Object(g.jsx)("div",{className:"origin-tip d-flex justify-content-center align-item-center"},this.getOrigin(m,p,b,h)))},e}(g.React.PureComponent),yi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vi=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},mi=function(){return(mi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},bi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,l=r.length;a<l;a++,i++)o[i]=r[a];return o},xi=n(32),Ii=n(39),wi=[v.LayoutItemSizeModes.Auto,v.LayoutItemSizeModes.Custom,v.LayoutItemSizeModes.Stretch],ji=[f.UnitTypes.PIXEL],Oi=bi([zn[1][1],zn[1][2],zn[1][3],zn[1][4],{seperator:!0},zn[0][1],zn[0][2],zn[0][3]].map((function(t){return mi(mi({},t),{title:t.title,label:null})})),[[{icon:n(38)},zn[0][4],zn[0][5],zn[0][6],{seperator:!0},zn[0][7],zn[0][8],zn[0][9]]]),Si=function(t){function e(e){var n=t.call(this,e)||this;return n.updateBBox=function(t,e){var o,i,r=n.props.layoutItem.bbox,a=e.distance,l=e.unit,s=r[t],u=n.getSizeOfContainer(),c=a.toFixed(2);if(v.utils.isPercentage(s)&&l===f.UnitTypes.PIXEL?u&&(i=c="left"===t||"right"===t||"width"===t?Math.round(parseFloat(s)*u.width/100):Math.round(parseFloat(s)*u.height/100)):v.utils.isPercentage(s)||l!==f.UnitTypes.PERCENTAGE||(u&&(c="left"===t||"right"===t||"width"===t?(100*parseFloat(s)/u.width).toFixed(4):(100*parseFloat(s)/u.height).toFixed(4)),i=parseFloat(s)),i||l!==f.UnitTypes.PERCENTAGE)i||l!==f.UnitTypes.PIXEL||(i=a);else{var d="width"===t?u.width:u.height;i=Math.round(a*d/100)}if(r=r.set(t,l===f.UnitTypes.PERCENTAGE?c+"%":c+"px"),"ratio"===(null===(o=n.props.layoutItem.setting)||void 0===o?void 0:o.heightMode)){var p=n.props.layoutItem.setting.aspectRatio;if("width"===t){var g=i*p;if(v.utils.isPercentage(r.height)){var h=(100*g/u.height).toFixed(4);r=r.set("height",h+"%")}else r=r.set("height",Math.round(g)+"px")}else{var y=i/p;if(v.utils.isPercentage(r.width)){var m=(100*y/u.width).toFixed(4);r=r.set("width",m+"%")}else r=r.set("width",Math.round(y)+"px")}}n.props.onPosChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},r)},n.updateMode=function(t,e){var o,i=null!==(o=n.props.layoutItem.setting)&&void 0!==o?o:Object(g.Immutable)({});n.props.onSettingChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},i.setIn(["autoProps",t],e))},n.updateLockParent=function(t){var e=n.props.layoutItem.setting||Object(g.Immutable)({});e=e.set("lockParent",t.target.checked),n.props.onSettingChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},e)},n.toggleHeightMode=function(){var t=n.props.layoutItem.setting||Object(g.Immutable)({}),e="ratio"===t.heightMode?"fixed":"ratio";if(t=t.set("heightMode",e),"ratio"===e){var o=n.getSizeOfItem();o&&(t=t.set("aspectRatio",Number((o.height/o.width).toFixed(2))))}n.props.onSettingChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},t)},n.updateAspectRatio=function(t){var e=n.props.layoutItem.setting||Object(g.Immutable)({});e=e.set("aspectRatio",t),n.props.onSettingChange({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id},e)},n.flipLeftRight=v.utils.isRTL(),n.state={enableToolbar:!1},n}return yi(e,t),e.prototype.componentDidMount=function(){this.ref&&this.setState({enableToolbar:!0})},e.prototype.getSizeOfContainer=function(){var t=this.querySelector('div.fixed-layout[data-layoutid="'+this.props.layoutId+'"]');return t?t.getBoundingClientRect():null},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+n.id+'"]');return o?o.getBoundingClientRect():null},e.prototype.querySelector=function(t){var e=document.querySelector('iframe[name="'+g.APP_FRAME_NAME_IN_BUILDER+'"]');return e?(e.contentDocument||e.contentWindow.document).querySelector(t):null},e.prototype.getAspectRatio=function(){var t,e,n=null!==(e=null===(t=this.props.layoutItem.setting)||void 0===t?void 0:t.aspectRatio)&&void 0!==e?e:-1;if(n<0)return"";var o=Math.round(100*n),i=v.utils.gcd(100,o);return 100/i+" : "+o/i},e.prototype.sizeModeOptions=function(){var t=this;return wi.map((function(e,n){return Object(g.jsx)("option",{value:e,key:n},t.props.formatMessage(e.toLowerCase()))}))},e.prototype.getStyle=function(){return Object(g.css)(ko||(ko=vi(["\n      .layout-item-toolbar {\n        box-shadow: none;\n        background: transparent;\n\n        .toolbar-item, icon-container {\n          width: 26px;\n          min-height: 26px;\n        }\n        .toolbar-group {\n          background: transparent;\n          margin: 0 1px;\n          min-width: 40px;\n        }\n        .toolbar-item {\n          margin: 0 1px;\n          background: transparent;\n          &:hover {\n            background: var(--light-500);\n          }\n\n          svg {\n            width: 14px;\n            height: 14px;\n          }\n        }\n      }\n\n      .ratio-value {\n        font-size: 12px;\n      }\n    "],["\n      .layout-item-toolbar {\n        box-shadow: none;\n        background: transparent;\n\n        .toolbar-item, icon-container {\n          width: 26px;\n          min-height: 26px;\n        }\n        .toolbar-group {\n          background: transparent;\n          margin: 0 1px;\n          min-width: 40px;\n        }\n        .toolbar-item {\n          margin: 0 1px;\n          background: transparent;\n          &:hover {\n            background: var(--light-500);\n          }\n\n          svg {\n            width: 14px;\n            height: 14px;\n          }\n        }\n      }\n\n      .ratio-value {\n        font-size: 12px;\n      }\n    "])))},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutItem,o=e.layoutId,i=e.formatMessage,r=e.isLockLayout;if(!n)return null;this.itemSetting=g.lodash.assign({},y.a,n.setting);var a="ratio"===this.itemSetting.heightMode,l=a?v.LayoutItemSizeModes.Custom:v.utils.getLayoutItemSizeMode("width",n.bbox,this.itemSetting.autoProps),s=a?v.LayoutItemSizeModes.Custom:v.utils.getLayoutItemSizeMode("height",n.bbox,this.itemSetting.autoProps),u=n.bbox,c=Object(g.getAppStore)().getState().theme,d=!v.utils.isPercentage(u.width),p=!v.utils.isPercentage(u.height),h=s===v.LayoutItemSizeModes.Custom&&l===s&&p&&d,m=Object(g.css)(Lo||(Lo=vi(["width: 60%;"],["width: 60%;"])));return Object(g.jsx)("div",{className:"fixed-item-setting",css:this.getStyle(),ref:function(e){return t.ref=e}},!r&&this.state.enableToolbar&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(Ce.SettingSection,{className:"p-0 d-flex justify-content-center"},Object(g.jsx)(Nt,{layoutId:o,layoutItem:n,parentRef:this.ref,theme:c,tools:Oi,formatMessage:this.props.formatMessage})),Object(g.jsx)(Ce.SettingSection,{title:i("size")+" & "+i("position")},Object(g.jsx)(Ce.SettingRow,{label:i("width")},Object(g.jsx)("div",{css:m},Object(g.jsx)(ni.SizeEditor,{label:"W",mode:l,disableModeSelect:a,availableUnits:a?ji:null,value:f.utils.stringOfLinearUnit(u.width),onChange:function(e){return t.updateBBox("width",e)},onModeChange:function(e){return t.updateMode("width",e)}}))),Object(g.jsx)("div",{className:"ml-3 d-flex",css:Object(g.css)(No||(No=vi(["\n                  visibility: ",";\n                  .icon {\n                    cursor: pointer;\n                    width: 12px;\n                  }\n                "],["\n                  visibility: ",";\n                  .icon {\n                    cursor: pointer;\n                    width: 12px;\n                  }\n                "])),h?"visible":"hidden")},Object(g.jsx)(f.Tooltip,{title:i("aspectRatio"),placement:"bottom"},Object(g.jsx)("div",{className:"icon",onClick:this.toggleHeightMode},Object(g.jsx)(f.Icon,{icon:"ratio"===this.itemSetting.heightMode?xi:Ii,size:12})))),Object(g.jsx)(Ce.SettingRow,{label:i("height")},Object(g.jsx)("div",{css:m},Object(g.jsx)(ni.SizeEditor,{label:"H",mode:s,disableModeSelect:a,availableUnits:a?ji:null,value:f.utils.stringOfLinearUnit(u.height),onChange:function(e){return t.updateBBox("height",e)},onModeChange:function(e){return t.updateMode("height",e)}}))),Object(g.jsx)(Ce.SettingRow,null,Object(g.jsx)(fi,mi({},this.props,{widthMode:l,heightMode:s}))),Object(g.jsx)(ci,{layoutId:o,layoutItemId:n.id,setting:n.setting,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage})),Object(g.jsx)(Ce.SettingSection,null,Object(g.jsx)(Ce.SettingRow,{label:i("lockParent")},Object(g.jsx)(f.Switch,{checked:this.itemSetting.lockParent,onChange:this.updateLockParent})))),(n.widgetId||n.sectionId)&&Object(g.jsx)(si,{layoutId:o,layoutItemId:n.id,style:this.props.style,isSection:n.type===g.LayoutItemType.Section,onStyleChange:this.props.onStyleChange,formatMessage:this.props.formatMessage,setting:n.setting||Object(g.Immutable)({}),onSettingChange:this.props.onSettingChange}))},e}(g.React.PureComponent),Ci=n(14),Pi=n(17),Ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ai=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Mi=((Bo={})[g.ScreenTransitionType.Push]=n(41),Bo[g.ScreenTransitionType.Fade]=n(71),Bo[g.ScreenTransitionType.Cover]=n(41),Bo),Ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTypeChanged=function(t,n,o){o?e.props.onPanelTransitionTypeChange(n):e.props.onTransitionTypeChange(n)},e.updateFirstPanel=function(t){},e}return Ti(e,t),e.prototype.getStyle=function(){return Object(g.css)(Eo||(Eo=Ai(["\n      .animation-cards {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-row-gap: 12px;\n        grid-column-gap: 12px;\n      }\n\n      .card-item {\n        font-size: 13px;\n        flex: 0 0 45%;\n\n        user-select: none;\n        cursor: pointer;\n        position: relative;\n\n        .card-content {\n          width: 100%;\n          height: 5rem;\n          background-color: var(--light-200);\n        }\n\n        &.selected .card-content {\n          outline: 2px solid var(--primary-700);\n        }\n\n        .card-image {\n          width: 100%;\n          height: 100%;\n          padding: 8px;\n          &:after {\n            display: none;\n          }\n        }\n\n        .card-name {\n          max-width: 90px;\n          margin: 0 auto;\n          color: var(--dark-800);\n          .card-name-content {\n            line-height: 1rem;\n            max-height: 2rem;\n            white-space: normal;\n          }\n        }\n      }\n    "],["\n      .animation-cards {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        grid-row-gap: 12px;\n        grid-column-gap: 12px;\n      }\n\n      .card-item {\n        font-size: 13px;\n        flex: 0 0 45%;\n\n        user-select: none;\n        cursor: pointer;\n        position: relative;\n\n        .card-content {\n          width: 100%;\n          height: 5rem;\n          background-color: var(--light-200);\n        }\n\n        &.selected .card-content {\n          outline: 2px solid var(--primary-700);\n        }\n\n        .card-image {\n          width: 100%;\n          height: 100%;\n          padding: 8px;\n          &:after {\n            display: none;\n          }\n        }\n\n        .card-name {\n          max-width: 90px;\n          margin: 0 auto;\n          color: var(--dark-800);\n          .card-name-content {\n            line-height: 1rem;\n            max-height: 2rem;\n            white-space: normal;\n          }\n        }\n      }\n    "])))},e.prototype.createAnimationCard=function(t,e,n){var o=this;void 0===n&&(n=!1);var i,r=this.props,a=r.transitionType,l=r.panelTransitionType;return i=n?null!=l?l:g.ScreenTransitionType.Push:null!=a?a:g.ScreenTransitionType.Fade,Object(g.jsx)("div",{className:Object(g.classNames)("d-flex flex-column align-items-center card-item",{selected:t===i}),key:e,onClick:function(e){return o.onTypeChanged(e,t,n)}},Object(g.jsx)("div",{className:"d-flex justify-content-center card-content"},Object(g.jsx)("div",{className:"card-image"},Object(g.jsx)(f.Icon,{className:"w-100",options:{currentColor:!1},icon:Mi[t],size:72}))),Object(g.jsx)("div",{className:"card-name flex-grow-1 d-flex align-items-start mt-1"},Object(g.jsx)("span",{className:"text-center text-truncate card-name-content",title:this.props.formatMessage(t.toLowerCase())},this.props.formatMessage(t.toLowerCase()))))},e.prototype.render=function(){var t=this,e=this.props.formatMessage;return Object(g.jsx)("div",{className:"bg-light-300 border-color-gray-400",css:this.getStyle()},Object(g.jsx)(Ce.SettingSection,{title:e("mainStage")},Object(g.jsx)("div",{className:"animation-cards"},[g.ScreenTransitionType.Fade,g.ScreenTransitionType.Cover,g.ScreenTransitionType.Push].map((function(e,n){return t.createAnimationCard(e,n)})))),Object(g.jsx)(Ce.SettingSection,{title:e("scrollingPanel")},Object(g.jsx)("div",{className:"animation-cards"},[g.ScreenTransitionType.Push,g.ScreenTransitionType.Fade].map((function(e,n){return t.createAnimationCard(e,n,!0)})))),Object(g.jsx)(Ce.SettingSection,null,Object(g.jsx)(Ce.SettingRow,null,Object(g.jsx)(f.Checkbox,{onChange:this.updateFirstPanel,className:"mr-2"}),e("applyToFirstPanel"))))},e}(g.React.PureComponent),zi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ki=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Li=n(72),Ni=n(73),Bi=function(t){function e(e){var n=t.call(this,e)||this;return n.onTransitionTypeChange=function(t){var e=n.props.layoutItem.screenGroupId,o=Object(h.getAppConfigAction)().appConfig;o=o.setIn(["screenGroups",e,"transitionType"],t),Object(h.getAppConfigAction)(o).exec()},n.onPanelTransitionTypeChange=function(t){var e=n.props.layoutItem.screenGroupId,o=Object(h.getAppConfigAction)().appConfig;o=o.setIn(["screenGroups",e,"panelTransitionType"],t),Object(h.getAppConfigAction)(o).exec()},n.toggleSidePanel=function(){n.setState({showSidePanel:!n.state.showSidePanel})},n.state={showSidePanel:!1},n}return zi(e,t),e.prototype.getAnimBoxStyle=function(){return Object(g.css)(Do||(Do=ki(["\n      background-color: transparent;\n      width: 100%;\n      height: 72px;\n\n      .img-tip {\n        position: relative;\n        min-width: 90px;\n        height: 72px;\n        cursor: pointer;\n        background: var(--light-200);\n\n        .has-sibling {\n          position: absolute;\n          &.first {\n            left: 5px;\n            top: 5px;\n          }\n          &.second {\n            bottom: 5px;\n            right: 5px;\n          }\n        }\n\n        .diag-sep {\n          position: absolute;\n          height: 1px;\n          width: 80px;\n          top: 36px;\n          transform: rotateZ(-45deg);\n          background: var(--light-500);\n        }\n      }\n\n      .anim-label {\n        align-self: flex-start;\n      }\n    "],["\n      background-color: transparent;\n      width: 100%;\n      height: 72px;\n\n      .img-tip {\n        position: relative;\n        min-width: 90px;\n        height: 72px;\n        cursor: pointer;\n        background: var(--light-200);\n\n        .has-sibling {\n          position: absolute;\n          &.first {\n            left: 5px;\n            top: 5px;\n          }\n          &.second {\n            bottom: 5px;\n            right: 5px;\n          }\n        }\n\n        .diag-sep {\n          position: absolute;\n          height: 1px;\n          width: 80px;\n          top: 36px;\n          transform: rotateZ(-45deg);\n          background: var(--light-500);\n        }\n      }\n\n      .anim-label {\n        align-self: flex-start;\n      }\n    "])))},e.prototype.getSidePopperStyle=function(){return Object(g.css)(_o||(_o=ki(["\n      .header {\n        height: 60px;\n        padding: 0 0.5rem;\n      }\n      .side-popper-title {\n        color: var(--dark-600);\n        font-size: 13px;\n      }\n      .side-content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 60px);\n        overflow: auto;\n      }\n    "],["\n      .header {\n        height: 60px;\n        padding: 0 0.5rem;\n      }\n      .side-popper-title {\n        color: var(--dark-600);\n        font-size: 13px;\n      }\n      .side-content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 60px);\n        overflow: auto;\n      }\n    "])))},e.prototype.render=function(){var t,e,n,o,i=this.props.formatMessage,r=null!==(t=this.props.transitionType)&&void 0!==t?t:g.ScreenTransitionType.Fade,a=null!==(e=this.props.panelTransitionType)&&void 0!==e?e:g.ScreenTransitionType.Push;return Object(g.jsx)(Ce.SettingSection,{title:i("transition")},Object(g.jsx)("div",{className:"anima-box d-flex justify-content-between align-items-center",css:this.getAnimBoxStyle()},Object(g.jsx)("div",{className:"img-tip d-flex justify-content-center align-items-center",onClick:this.toggleSidePanel},Object(g.jsx)("div",{className:"anim-icon first has-sibling"},Object(g.jsx)(f.Icon,{icon:null!==(n=Mi[r])&&void 0!==n?n:Ni,size:32})),Object(g.jsx)("div",{className:"diag-sep"}),Object(g.jsx)("div",{className:"anim-icon second has-sibling"},Object(g.jsx)(f.Icon,{icon:null!==(o=Mi[a])&&void 0!==o?o:Ni,size:32}))),Object(g.jsx)("div",{className:"d-flex flex-column justify-content-between align-items-end h-100"},Object(g.jsx)("div",{className:"anim-label"},Object(g.jsx)("span",null,i(r.toLowerCase())),Object(g.jsx)("span",{className:"mx-1"},"/"),Object(g.jsx)("span",null,i(a.toLowerCase()))),Object(g.jsx)("div",{className:"amin-icons w-100"},Object(g.jsx)(f.Button,{size:"sm",onClick:this.toggleSidePanel,className:"text-truncate",title:i("change")},i("change"))))),this.state.showSidePanel&&Object(g.jsx)(Ce.SidePopper,{isOpen:!0,css:this.getSidePopperStyle(),position:"right"},Object(g.jsx)(Ce.SettingSection,{className:"header d-flex justify-content-between align-items-center"},Object(g.jsx)("div",{className:"side-popper-title m-2"},i("transition")),Object(g.jsx)("div",{className:"clost-btn",title:i("close")},Object(g.jsx)(f.Button,{type:"tertiary",className:"p-0 d-flex justify-content-center align-items-center",onClick:this.toggleSidePanel},Object(g.jsx)(f.Icon,{icon:Li,size:12})))),Object(g.jsx)("div",{className:"side-content"},Object(g.jsx)(Ri,{transitionType:r,panelTransitionType:a,onTransitionTypeChange:this.onTransitionTypeChange,onPanelTransitionTypeChange:this.onPanelTransitionTypeChange,formatMessage:i}))))},e}(g.React.PureComponent),Ei=g.ReactRedux.connect((function(t,e){var n=e.layoutItem.screenGroupId,o=t.appStateInBuilder.appConfig;return{transitionType:o.screenGroups[n].transitionType,panelTransitionType:o.screenGroups[n].panelTransitionType}}))(Bi),Di=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_i=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Vi=function(){return(Vi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Fi={width:110},Hi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateWidth=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.set("width",f.utils.stringOfLinearUnit(t)),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateBBoxWidth=function(t){var n=Object(g.Immutable)(e.props.layoutItem.bbox||{});n=n.set("width",f.utils.stringOfLinearUnit(t)),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateHeight=function(t){var n=Object(g.Immutable)(e.props.layoutItem.bbox||{});n=n.set("height",f.utils.stringOfLinearUnit(t)),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateOffsetX=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetX",t))},e.updateOffsetY=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetY",t))},e.updateHeightMode=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.set("heightMode",t===v.LayoutItemSizeModes.Custom?"fixed":"auto"),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e}return Di(e,t),e.prototype.updateFloatingArea=function(t){var e=this.props.layoutItem.setting||Object(g.Immutable)({});this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},e.set("floatingArea",t))},e.prototype.getStyle=function(){return Object(g.css)(Vo||(Vo=_i(["\n      .floating-position {\n        margin-bottom: 1rem;\n      }\n\n      .floating-area-chooser {\n        position: relative;\n\n        .content {\n          display: grid;\n          grid-template-columns: 1fr 1fr 1fr;\n          grid-row-gap: 0;\n          grid-column-gap: 0;\n          border: 1px solid var(--light-500);\n\n          & > div {\n            cursor: pointer;\n            width: 30px;\n            height: 30px;\n            position: relative;\n          }\n\n          & > div:nth-of-type(3n+1) {\n            border-right: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(3n) {\n            border-left: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(1), & > div:nth-of-type(2), & > div:nth-of-type(3) {\n            border-bottom: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(7), & > div:nth-of-type(8), & > div:nth-of-type(9) {\n            border-top: 1px solid var(--light-500);\n          }\n\n          .selected:after {\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            background-color: var(--primary-100);\n            border: 1px solid var(--primary-600);\n          }\n        }\n      }\n    "],["\n      .floating-position {\n        margin-bottom: 1rem;\n      }\n\n      .floating-area-chooser {\n        position: relative;\n\n        .content {\n          display: grid;\n          grid-template-columns: 1fr 1fr 1fr;\n          grid-row-gap: 0;\n          grid-column-gap: 0;\n          border: 1px solid var(--light-500);\n\n          & > div {\n            cursor: pointer;\n            width: 30px;\n            height: 30px;\n            position: relative;\n          }\n\n          & > div:nth-of-type(3n+1) {\n            border-right: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(3n) {\n            border-left: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(1), & > div:nth-of-type(2), & > div:nth-of-type(3) {\n            border-bottom: 1px solid var(--light-500);\n          }\n          & > div:nth-of-type(7), & > div:nth-of-type(8), & > div:nth-of-type(9) {\n            border-top: 1px solid var(--light-500);\n          }\n\n          .selected:after {\n            content: '';\n            position: absolute;\n            width: 100%;\n            height: 100%;\n            background-color: var(--primary-100);\n            border: 1px solid var(--primary-600);\n          }\n        }\n      }\n    "])))},e.prototype.render=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=t.formatMessage,i=t.isLockLayout;if(!n)return null;if(n.type===g.LayoutItemType.ScreenGroup)return Object(g.jsx)(Ei,Vi({},this.props));this.itemSetting=g.lodash.assign({},Ci.a,n.setting);var r=n.bbox;return Object(g.jsx)("div",{className:"flow-item-setting",css:this.getStyle()},!i&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(Ce.SettingSection,{title:o("position")+" & "+o("size")},Object(g.jsx)("div",{className:"floating-position d-flex"},Object(g.jsx)("div",{className:"floating-area-chooser"},Object(g.jsx)("div",{className:"content"},Object(g.jsx)("div",{className:Object(g.classNames)("top-left",{selected:1===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,1)}),Object(g.jsx)("div",{className:Object(g.classNames)("top-center",{selected:2===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,2)}),Object(g.jsx)("div",{className:Object(g.classNames)("top-right",{selected:3===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,3)}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-left",{selected:4===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,4)}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-center",{selected:5===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,5)}),Object(g.jsx)("div",{className:Object(g.classNames)("middle-right",{selected:6===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,6)}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-left",{selected:7===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,7)}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-center",{selected:8===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,8)}),Object(g.jsx)("div",{className:Object(g.classNames)("bottom-right",{selected:9===this.itemSetting.floatingArea}),onClick:this.updateFloatingArea.bind(this,9)}))),Object(g.jsx)("div",{className:"d-flex flex-grow-1 flex-column justify-content-between align-items-end"},Object(g.jsx)("div",{className:"d-flex align-items-center",css:Object(g.css)(Fo||(Fo=_i(["width: 110px"],["width: 110px"])))},Object(g.jsx)("span",{className:"mr-2"},"W"),Object(g.jsx)(ni.SizeEditor,{label:"W",mode:v.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:null==r?void 0:r.width,onChange:this.updateBBoxWidth})),Object(g.jsx)("div",{className:"d-flex align-items-center",css:Object(g.css)(Ho||(Ho=_i(["width: 110px"],["width: 110px"])))},Object(g.jsx)("span",{className:"mr-2"},"H"),Object(g.jsx)(ni.SizeEditor,{label:"H",mode:v.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:null==r?void 0:r.height,onChange:this.updateHeight})))),Object(g.jsx)(Ce.SettingRow,{label:o("offsetX")},Object(g.jsx)(f.NumericInput,{style:Fi,value:this.itemSetting.offsetX,onChange:this.updateOffsetX,size:"sm"})),Object(g.jsx)(Ce.SettingRow,{label:o("offsetY")},Object(g.jsx)(f.NumericInput,{style:Fi,value:this.itemSetting.offsetY,onChange:this.updateOffsetY,size:"sm"})))),(n.widgetId||n.sectionId)&&Object(g.jsx)(si,{layoutId:e,layoutItemId:n.id,isSection:!1,style:this.props.style,onStyleChange:this.props.onStyleChange,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}))},e}(g.React.PureComponent),Wi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gi=function(){return(Gi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ui={width:110},Yi=[v.LayoutItemSizeModes.Auto,v.LayoutItemSizeModes.Custom],Zi=[f.UnitTypes.PIXEL],Xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateWidth=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.set("width",f.utils.stringOfLinearUnit(t)),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateBBoxWidth=function(t){var n=Object(g.Immutable)(e.props.layoutItem.bbox||{});n=n.set("width",f.utils.stringOfLinearUnit(t)),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateHeight=function(t){var n=Object(g.Immutable)(e.props.layoutItem.bbox||{});n=n.set("height",f.utils.stringOfLinearUnit(t)),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateOffsetX=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetX",t))},e.updateOffsetY=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetY",t))},e.updateHeightMode=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.set("heightMode",t===v.LayoutItemSizeModes.Custom?"fixed":"auto"),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e}return Wi(e,t),e.prototype.updateFloatingArea=function(t){var e=this.props.layoutItem.setting||Object(g.Immutable)({});this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},e.set("floatingArea",t))},e.prototype.render=function(){var t,e,n=this.props,o=n.layoutId,i=n.layoutItem,r=n.formatMessage,a=n.isLockLayout;if(!i)return null;if(i.type===g.LayoutItemType.ScreenGroup)return Object(g.jsx)(Ei,Gi({},this.props));if(this.itemSetting=g.lodash.assign({},Ci.a,i.setting),this.itemSetting.isFloating)return Object(g.jsx)(Hi,Gi({},this.props));var l=i.bbox,s=f.utils.stringOfLinearUnit(Object(Pi.b)(this.itemSetting)),u=f.utils.stringOfLinearUnit(parseFloat(null===(t=i.bbox)||void 0===t?void 0:t.height)>0?null===(e=i.bbox)||void 0===e?void 0:e.height:100),c="auto"===this.itemSetting.heightMode||v.utils.isPercentage(null==l?void 0:l.height);return Object(g.jsx)("div",{className:"flow-item-setting"},!a&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(Ce.SettingSection,{title:r("size")},Object(g.jsx)(Ce.SettingRow,{label:r("width")},Object(g.jsx)("div",{style:Ui},Object(g.jsx)(ni.SizeEditor,{label:"W",mode:v.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:s,onChange:this.updateWidth}))),Object(g.jsx)(Ce.SettingRow,{label:r("height")},Object(g.jsx)("div",{style:Ui},Object(g.jsx)(ni.SizeEditor,{label:"H",mode:c?v.LayoutItemSizeModes.Auto:v.LayoutItemSizeModes.Custom,sizeModes:Yi,availableUnits:Zi,disableModeSelect:!1,value:u,onChange:this.updateHeight,onModeChange:this.updateHeightMode})))),Object(g.jsx)(Ce.SettingSection,{title:r("position")},Object(g.jsx)(Ce.SettingRow,{label:r("offsetX")},Object(g.jsx)(f.NumericInput,{style:Ui,value:this.itemSetting.offsetX,onChange:this.updateOffsetX,size:"sm"})),Object(g.jsx)(Ce.SettingRow,{label:r("offsetY")},Object(g.jsx)(f.NumericInput,{style:Ui,value:this.itemSetting.offsetY,onChange:this.updateOffsetY,size:"sm"})))),(i.widgetId||i.sectionId)&&Object(g.jsx)(si,{layoutId:o,layoutItemId:i.id,isSection:!1,style:this.props.style,onStyleChange:this.props.onStyleChange,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}))},e}(g.React.PureComponent),Ji=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qi=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Qi={width:"7.5rem"},Ki=[v.LayoutItemSizeModes.Stretch,v.LayoutItemSizeModes.Custom],$i=[v.LayoutItemSizeModes.Auto,v.LayoutItemSizeModes.Stretch,v.LayoutItemSizeModes.Custom],tr=[f.UnitTypes.PIXEL,f.UnitTypes.PERCENTAGE],er=[f.UnitTypes.PIXEL],nr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateBBox=function(t,n){var o,i,r=e.props.layoutItem.bbox,a=n.distance,l=n.unit,s=r[t],u=e.getSizeOfContainer(),c=a.toFixed(2);if(v.utils.isPercentage(s)&&l===f.UnitTypes.PIXEL?u&&(i=c="left"===t||"right"===t||"width"===t?Math.round(parseFloat(s)*u.width/100):Math.round(parseFloat(s)*u.height/100)):v.utils.isPercentage(s)||l!==f.UnitTypes.PERCENTAGE||(u&&(c="left"===t||"right"===t||"width"===t?(100*parseFloat(s)/u.width).toFixed(4):(100*parseFloat(s)/u.height).toFixed(4)),i=parseFloat(s)),i||l!==f.UnitTypes.PERCENTAGE)i||l!==f.UnitTypes.PIXEL||(i=a);else{var d="width"===t?u.width:u.height;i=Math.round(a*d/100)}if(r=r.set(t,l===f.UnitTypes.PERCENTAGE?c+"%":c+"px"),"ratio"===(null===(o=e.props.layoutItem.setting)||void 0===o?void 0:o.heightMode)){var p=e.props.layoutItem.setting.aspectRatio;if("width"===t){var g=i*p;if(v.utils.isPercentage(r.height)){var h=(100*g/u.height).toFixed(4);r=r.set("height",h+"%")}else r=r.set("height",Math.round(g)+"px")}else{var y=i/p;if(v.utils.isPercentage(r.width)){var m=(100*y/u.width).toFixed(4);r=r.set("width",m+"%")}else r=r.set("width",Math.round(y)+"px")}}e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},r)},e.updateAspectSetting=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});if(n=n.set("heightMode",t),"ratio"===t){var o=e.getSizeOfItem();o&&(n=n.set("aspectRatio",Number((o.height/o.width).toFixed(2))))}else{var i=e.props.layoutItem.bbox,r=e.getSizeOfItem();if(v.utils.isPercentage(i.width)){var a=e.getSizeOfContainer();i=i.set("width",(100*r.width/a.width).toFixed(4)+"%")}else i=i.set("width",Math.round(r.width)+"px");i=i.set("height",Math.round(r.height)+"px"),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},i)}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateAlignSelf=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.setIn(["style","alignSelf"],t.target.value),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateHeightMode=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.setIn(["autoProps","height"],t))},e.updateWidthMode=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.setIn(["autoProps","width"],t))},e.updateAspectRatio=function(t){var n=e.props.layoutItem.setting||Object(g.Immutable)({});n=n.set("aspectRatio",t),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return Ji(e,t),e.prototype.getSizeOfContainer=function(){var t=this.querySelector('div.column-layout[data-layoutid="'+this.props.layoutId+'"]');return t?t.getBoundingClientRect():null},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,o=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+n.id+'"]');return o?o.getBoundingClientRect():null},e.prototype.querySelector=function(t){var e=document.querySelector('iframe[name="'+g.APP_FRAME_NAME_IN_BUILDER+'"]');return e?(e.contentDocument||e.contentWindow.document).querySelector(t):null},e.prototype.getStyle=function(){return Object(g.css)(Wo||(Wo=qi(["\n      .rotation-setting, .rotation-setting input {\n        height: 26px;\n      }\n\n      .ratio-value {\n        font-size: 12px;\n      }\n\n      .align-select {\n        .dropdown-button, .dropdown-button:hover {\n          height: 26px;\n        }\n      }\n    "],["\n      .rotation-setting, .rotation-setting input {\n        height: 26px;\n      }\n\n      .ratio-value {\n        font-size: 12px;\n      }\n\n      .align-select {\n        .dropdown-button, .dropdown-button:hover {\n          height: 26px;\n        }\n      }\n    "])))},e.prototype.render=function(){var t,e,n,o,i=this,r=this.props,a=r.layoutId,l=r.layoutItem,s=r.isLockLayout;if(!l)return null;var u=l.setting||{},c=u.style||{},d=l.bbox||{},p=(null===(t=u.autoProps)||void 0===t?void 0:t.width)!==v.LayoutItemSizeModes.Custom,h=null!==(n=null===(e=u.autoProps)||void 0===e?void 0:e.height)&&void 0!==n?n:v.LayoutItemSizeModes.Custom,y="ratio"===u.heightMode;return Object(g.jsx)("div",{className:"column-item-setting",css:this.getStyle()},!s&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(Ce.SettingSection,{title:this.formatMessage("size")},Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("width")},Object(g.jsx)("div",{style:Qi},Object(g.jsx)(ni.SizeEditor,{label:"W",mode:p?v.LayoutItemSizeModes.Stretch:v.LayoutItemSizeModes.Custom,sizeModes:Ki,value:null==d?void 0:d.width,availableUnits:tr,onChange:function(t){return i.updateBBox("width",t)},onModeChange:this.updateWidthMode}))),Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("height")},Object(g.jsx)("div",{style:Qi},Object(g.jsx)(ni.SizeEditor,{label:"H",mode:h||v.LayoutItemSizeModes.Custom,sizeModes:$i,value:d.height,availableUnits:er,onChange:function(t){return i.updateBBox("height",t)},onModeChange:this.updateHeightMode,disabled:y}))),h===v.LayoutItemSizeModes.Custom&&Object(g.jsx)(Ce.SettingRow,null,Object(g.jsx)(f.Checkbox,{checked:y,onChange:function(t){return i.updateAspectSetting(t.target.checked?"ratio":"fixed")},className:"mr-2"}),this.formatMessage("keepAspectRatio")),y&&Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("aspectRatio")},Object(g.jsx)(ni.InputRatio,{value:u.aspectRatio,style:Qi,onChange:this.updateAspectRatio})),!p&&Object(g.jsx)(Ce.SettingRow,{label:this.formatMessage("align")},Object(g.jsx)(f.Select,{className:"align-select",value:null!==(o=c.alignSelf)&&void 0!==o?o:"flex-start",onChange:this.updateAlignSelf,style:Qi},Object(g.jsx)("option",{value:"flex-start"},this.formatMessage("start")),Object(g.jsx)("option",{value:"flex-end"},this.formatMessage("end")),Object(g.jsx)("option",{value:"center"},this.formatMessage("center")))),Object(g.jsx)(ci,{layoutId:a,layoutItemId:l.id,setting:u,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}))),(l.widgetId||l.sectionId)&&Object(g.jsx)(si,{layoutId:a,layoutItemId:l.id,isSection:l.type===g.LayoutItemType.Section,style:this.props.style,onStyleChange:this.props.onStyleChange,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}))},e}(g.React.PureComponent),or=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ir=[f.Sides.T,f.Sides.R,f.Sides.B,f.Sides.L],rr={width:110},ar=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateSpace=function(t){var n=e.props,o=n.layoutId,i=n.setting,r=Object(g.Immutable)(i||{});isNaN(t.distance)||Object(h.getAppConfigAction)().editLayoutSetting({layoutId:o},r.set("gutter",t.distance)).exec()},e.updatePadding=function(t){var n=e.props,o=n.layoutId,i=n.setting,r=Object(g.Immutable)(i||{});Object(h.getAppConfigAction)().editLayoutSetting({layoutId:o},r.setIn(["style","padding"],t)).exec()},e}return or(e,t),e.prototype.render=function(){var t=this.props.formatMessage,e=this.props.setting||{},n=e.style||{},o=e.gutter>=0?e.gutter:Ci.b.gutter;return Object(g.jsx)(Ce.SettingSection,{title:t("layout"),className:"flow-layout-setting"},Object(g.jsx)(Ce.SettingRow,{label:t("gap")},Object(g.jsx)(ni.InputUnit,{value:{distance:o,unit:void 0},min:0,onChange:this.updateSpace,style:rr})),Object(g.jsx)(Ce.SettingRow,{label:t("padding"),flow:"wrap"},Object(g.jsx)(ni.FourSides,{showTip:!0,sides:ir,value:n.padding,onChange:this.updatePadding})))},e}(g.React.PureComponent);var lr=g.ReactRedux.connect((function(t,e){var n,o,i,r;return{setting:null===(r=null===(i=null===(o=null===(n=t.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===o?void 0:o.layouts)||void 0===i?void 0:i[e.layoutId])||void 0===r?void 0:r.setting}}))(ar),sr=n(24);var ur=function(){return(ur=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},cr=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},dr=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};function pr(t,e,n){return cr(this,void 0,Promise,(function(){var o,i,r,a,l,s,u,c,d,p;return dr(this,(function(f){switch(f.label){case 0:return o=n.widgetId,[4,h.templateUtils.createWidgetFromTemplate(Object(h.getAppConfigAction)().appConfig,n,o,{},!0)];case 1:return i=f.sent(),r=i.appConfig,a=i.newWidgetId,l=Object(h.getAppConfigAction)(r),s=l.appConfig.layouts[t],u=s.order||[],c=u.indexOf(e),d=Object(g.Immutable)({id:""+(v.utils.getMaximumId(l.appConfig.layouts[t])+1),type:g.LayoutItemType.Widget,widgetId:a}),p=l.addItemIntoLayout(t,d,c>=0?c+1:NaN),Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(l.appConfig,ur(ur({},p),{autoScroll:!0}))),[2,p]}}))}))}function gr(t,e,n){return cr(this,void 0,Promise,(function(){var o,i,r,a,l,s,u,c,d,p;return dr(this,(function(f){switch(f.label){case 0:return o=n.screenGroupId,[4,h.templateUtils.createScreenGroupFromTemplate(Object(h.getAppConfigAction)().appConfig,n,o,{})];case 1:return i=f.sent(),r=i.appConfig,a=i.newScreenGroupId,l=Object(h.getAppConfigAction)(r),s=l.appConfig.layouts[t],u=s.order||[],c=u.indexOf(e),d=Object(g.Immutable)({id:""+(v.utils.getMaximumId(l.appConfig.layouts[t])+1),type:g.LayoutItemType.ScreenGroup,screenGroupId:a}),p=l.addItemIntoLayout(t,d,c>=0?c+1:NaN),Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(l.appConfig,ur(ur({},p),{autoScroll:!0}))),[2,p]}}))}))}function hr(t,e){for(var n,o=e.layoutId,i=e.layoutItemId,r=Object(h.getAppConfigAction)(t),a=r.appConfig.layouts[o],l=a.order,s=[].concat(l),u=l.indexOf(i),c=l.length-1,d=u+1;d<l.length;d++){var p=l[d];if(!(null===(n=a.content[p].setting)||void 0===n?void 0:n.isFloating)){c=d;break}}return s.splice(c+1,0,i),s.splice(u,1),r.editLayoutOrder({layoutId:o},s),r.appConfig}function fr(t,e){for(var n,o=e.layoutId,i=e.layoutItemId,r=Object(h.getAppConfigAction)(t),a=r.appConfig.layouts[o],l=a.order,s=[].concat(l),u=l.indexOf(i),c=0,d=u-1;d>=0;d--){var p=l[d];if(!(null===(n=a.content[p].setting)||void 0===n?void 0:n.isFloating)){c=d;break}}return s.splice(u,1),s.splice(c,0,i),r.editLayoutOrder({layoutId:o},s),r.appConfig}var yr,vr,mr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),br=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},xr=function(){return(xr=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Ir=n(28),wr=n(30),jr=n(31),Or=n(74),Sr=n(35),Cr=n(42),Pr=function(t){function e(e){var n,o,i=t.call(this,e)||this;return i.state={isResizing:!1,dh:0,showBlockTemplatePopup:!1,showScreenTemplatePopup:!1,referenceElem:null},i.onResizeStart=function(t,e,n){var o=i.props.padding;i.minHeight=Uo.h+o,i.initHeight=n,i.setState({dh:0,isResizing:!0})},i.onResizing=function(t,e,n,o,r){var a=r;r<0&&i.initHeight+r<i.minHeight&&(a=i.minHeight-i.initHeight),i.setState({dh:a,isResizing:!0})},i.onResizeEnd=function(t,e,n,o,r,a){var l=i.props,s=l.layoutId,u=l.layoutItem,c=r;r<0&&i.initHeight+r<i.minHeight&&(c=i.minHeight-i.initHeight);var d=Object(g.Immutable)(u.bbox||{}).set("height",Math.round(i.initHeight+c));Object(h.getAppConfigAction)().editLayoutItemBBox({layoutId:s,layoutItemId:u.id},d).exec(),i.setState({isResizing:!1,dh:0})},i.toggleBlockTemplatePopup=function(){i.setState({showBlockTemplatePopup:!i.state.showBlockTemplatePopup})},i.toggleScreenTemplatePopup=function(){i.setState({showScreenTemplatePopup:!i.state.showScreenTemplatePopup})},i.removeLayoutItem=function(){var t=i.props,e=t.layoutId,n=t.layoutItemId;Object(h.getAppConfigAction)().removeLayoutItem({layoutId:e,layoutItemId:n},!0).exec()},i.moveLayoutItemUp=function(){var t=i.props,e=t.layoutId,n=t.layoutItemId,o=fr(Object(h.getAppConfigAction)().appConfig,{layoutId:e,layoutItemId:n});Object(h.getAppConfigAction)(o).exec()},i.moveLayoutItemDown=function(){var t=i.props,e=t.layoutId,n=t.layoutItemId,o=hr(Object(h.getAppConfigAction)().appConfig,{layoutId:e,layoutItemId:n});Object(h.getAppConfigAction)(o).exec()},i.switchSetting=function(){var t=i.props,e=t.layoutId,n=t.layoutItemId;t.selected||Object(g.getAppStore)().dispatch(g.appActions.selectionChanged({layoutId:e,layoutItemId:n}))},i.onTemplateBlockSelected=function(t){pr(i.props.layoutId,i.props.layoutItemId,t),i.setState({showBlockTemplatePopup:!1})},i.onTemplateScreenGroupSelected=function(t){gr(i.props.layoutId,i.props.layoutItemId,t),i.setState({showScreenTemplatePopup:!1})},i.fakeTopLayouts=Object(g.Immutable)(((n={})[g.BrowserSizeMode.Large]=i.props.layoutId+"_"+i.props.layoutItemId+"_tlarge",n[g.BrowserSizeMode.Medium]=i.props.layoutId+"_"+i.props.layoutItemId+"_tmedium",n[g.BrowserSizeMode.Small]=i.props.layoutId+"_"+i.props.layoutItemId+"_tsmall",n)),i.fakeBottomLayouts=Object(g.Immutable)(((o={})[g.BrowserSizeMode.Large]=i.props.layoutId+"_"+i.props.layoutItemId+"_blarge",o[g.BrowserSizeMode.Medium]=i.props.layoutId+"_"+i.props.layoutItemId+"_bmedium",o[g.BrowserSizeMode.Small]=i.props.layoutId+"_"+i.props.layoutItemId+"_bsmall",o)),i.minHeight=0,i.contextMenus=[{icon:Or,title:i.props.formatMessage("insertABlock"),onClick:i.toggleBlockTemplatePopup,visible:function(){return!at()}},{icon:Sr,title:i.props.formatMessage("insertAScreenGroup"),onClick:i.toggleScreenTemplatePopup,visible:function(){return!at()}},pt,{icon:wr,title:i.props.formatMessage("setting"),onClick:i.switchSetting},{icon:jr,title:i.props.formatMessage("dragToMove"),className:"tool-drag-handler",onClick:function(){},visible:function(){return!at()}},{icon:Cr,onClick:i.moveLayoutItemUp,title:i.props.formatMessage("moveup"),visible:function(){return!i.props.isFirst&&!at()}},{icon:Cr,rotate:180,onClick:i.moveLayoutItemDown,title:i.props.formatMessage("movedown"),visible:function(){return!i.props.isLast&&!at()}},{icon:Ir,title:i.props.formatMessage("delete"),onClick:i.removeLayoutItem,visible:function(){return!at()}}],i}return mr(e,t),e.prototype.calHeight=function(t){if(this.state.isResizing)return this.initHeight+this.state.dh+"px";var e=this.props.layoutItem.bbox||{},n=v.utils.getValueOfBBox(e,"height");if(!n||v.utils.isPercentage(n))return"auto";switch(t.heightMode){case"auto":return"auto";case"fixed":return n}},e.prototype.createContextMenu=function(){var t=this,e=this.pageContext.builderTheme;return Object(g.jsx)(Ft,{layoutId:this.props.layoutId,layoutItem:this.props.layoutItem,builderTheme:e,positionType:"center",size:Uo.d,iconSize:Uo.c,className:"widget-context-menu",menuItems:this.contextMenus},Object(g.jsx)("div",{ref:function(e){return t.reference=e},css:Object(g.css)(yr||(yr=br(["position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;"],["position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;"])))}),this.state.showBlockTemplatePopup&&Object(g.jsx)(Ce.BlockTemplatePopper,{referenceElement:this.reference,theme:e,onItemSelect:this.onTemplateBlockSelected,onClose:this.toggleBlockTemplatePopup}),this.state.showScreenTemplatePopup&&Object(g.jsx)(Ce.ScreenGroupTemplatePopper,{referenceElement:this.reference,theme:e,onItemSelect:this.onTemplateScreenGroupSelected,onClose:this.toggleScreenTemplatePopup}))},e.prototype.getStyle=function(t){var e=this.pageContext.builderTheme,n=this.props,o=n.index,i=n.gutter;return Object(g.css)(vr||(vr=br(["\n      margin-top: ",";\n      width: ",";\n      height: ",";\n      flex-shrink: 0;\n      position: relative;\n      cursor: default;\n      transform: ",";\n      & > div.widget-context-menu {\n        display: none;\n      }\n\n      &:hover > div.widget-context-menu {\n        display: flex;\n      }\n\n      .template-popup {\n        background-color: ",";\n      }\n\n      .tool-drag-handler {\n        cursor: move;\n      }\n    "],["\n      margin-top: ",";\n      width: ",";\n      height: ",";\n      flex-shrink: 0;\n      position: relative;\n      cursor: default;\n      transform: ",";\n      & > div.widget-context-menu {\n        display: none;\n      }\n\n      &:hover > div.widget-context-menu {\n        display: flex;\n      }\n\n      .template-popup {\n        background-color: ",";\n      }\n\n      .tool-drag-handler {\n        cursor: move;\n      }\n    "])),o>0?i+"px":"unset",Object(Pi.b)(t),this.calHeight(t),t.offsetX||t.offsetY?"translate("+(t.offsetX||0)+"px, "+(t.offsetY||0)+"px)":null,e.colors.black)},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutId,o=e.layoutItem,i=e.draggable,r=e.selectable,a=e.isEmpty,l=e.selected;if(!o||a)return null;var s=g.lodash.assign({},Ci.a,o.setting),u=Object(g.classNames)("flow-layout-item d-flex",{selected:l}),c=v.utils.handleOnebyOneAnimation(this.props);return Object(g.jsx)(v.PageContext.Consumer,null,(function(e){return t.pageContext=e,Object(g.jsx)(mn,xr({css:t.getStyle(s),layoutId:n,layoutItemId:o.id,onResizeStart:t.onResizeStart,onResizing:t.onResizing,onResizeEnd:t.onResizeEnd,left:!1,right:!1,top:!1,bottom:"fixed"===s.heightMode,restrict:!0,useDragHandler:!0,draggable:i,selectable:r,forbidContextMenu:!0,forbidToolbar:!0,isBlock:!0,className:u},c),!e.viewOnly&&t.createContextMenu())}))},e}(g.React.PureComponent),Tr=g.ReactRedux.connect(Pi.c)(Pr),Ar=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isResizing:!1,dx:0,dy:0,dw:0,dh:0},e.onResizeStart=function(t,n,o){e.setState({isResizing:!0}),e.initHeight=o,e.initWidth=n},e.onResizing=function(t,n,o,i,r){e.setState({dx:n,dy:o,dw:i,dh:r})},e.onResizeEnd=function(t,n,o,i,r,a){var l=e.props,s=l.layoutId,u=l.layoutItem,c=u.bbox;c=c.set("height",Math.round(parseInt(c.height,10)+r)).set("width",Math.round(parseInt(c.width,10)+i)).set("left",Math.round(parseInt(c.left,10)+n)).set("top",Math.round(parseInt(c.top,10)+o)).set("bottom",Math.round(parseInt(c.top,10)-r+o)),Object(h.getAppConfigAction)().editLayoutItemBBox({layoutId:s,layoutItemId:u.id},c).exec(),e.setState({isResizing:!1,dx:0,dy:0,dw:0,dh:0})},e}return Ar(e,t),e.prototype.calculatePosition=function(){var t=this.props.layoutItem,e=this.state,n=e.dh,o=e.dw,i=e.isResizing;return Object(Pi.a)(t,{dh:n,dw:o,isResizing:i,initWidth:this.initWidth,initHeight:this.initHeight})},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutId,o=e.layoutItem,i=e.selectable,r=e.selected;if(!o)return null;var a=Object(g.classNames)("flexbox-layout-item floating d-flex",{selected:r});return Object(g.jsx)(v.PageContext.Consumer,null,(function(e){return t.pageContext=e,Object(g.jsx)(mn,{css:t.calculatePosition(),layoutId:n,layoutItemId:o.id,onResizeStart:t.onResizeStart,onResizing:t.onResizing,onResizeEnd:t.onResizeEnd,restrict:!0,draggable:!1,selectable:i,className:a})}))},e}(g.React.PureComponent),Rr=g.ReactRedux.connect(v.utils.mapStateToLayoutItemProps)(Mr),zr=n(44),kr=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Lr=n(29),Nr=n(28),Br=n(37),Er=n(75);var Dr,_r,Vr,Fr,Hr=g.themeUtils.withBuilderTheme((function(t){var e=t.formatMessage,n=t.activeScreenIndex,o=t.total,i=t.theme,r=t.layoutId,a=t.layoutItemId,l=t.screenGroupId,s=t.browserSizeMode,u=t.hasPanel,c=!g.ReactRedux.useSelector((function(t){var e,n,o,i=null!==(n=null===(e=t.appConfig.forBuilderAttributes)||void 0===e?void 0:e.lockLayout)&&void 0!==n&&n;return(null===(o=t.appRuntimeInfo)||void 0===o?void 0:o.appMode)===g.AppMode.Design&&!i}))||s!==g.BrowserSizeMode.Large,d=g.React.useState(!1),p=d[0],y=d[1],v=g.React.useRef(),m=g.React.useCallback((function(){y(!1)}),[]),b=g.React.useCallback((function(){return Object(g.css)(Dr||(Dr=kr(["\n      border: none;\n\n      .tooltip {\n        color: ",";\n        background-color: ",";\n        border-color: ",";\n      }\n    "],["\n      border: none;\n\n      .tooltip {\n        color: ",";\n        background-color: ",";\n        border-color: ",";\n      }\n    "])),i.colors.black,i.colors.palette.light[600],i.colors.palette.light[300])}),[i]),x=g.React.useCallback((function(t){var e=Object(h.getAppConfigAction)(),n=e.appConfig.layouts[r].content[a].screenGroupId;h.templateUtils.createScreenFromTemplate(e.appConfig,t,t.screenId,{}).then((function(t){var e=t.appConfig,o=t.newScreenId;e=e.setIn(["screenGroups",n,"screens"],[].concat(e.screenGroups[n].screens,o)),Object(g.getAppStore)().dispatch(g.appActions.appConfigChanged(e)),Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(n,e.screenGroups[n].screens.length-1))})),m()}),[m,r,a]),I=g.React.useCallback((function(){u?y(!p):x(Object(zr.getBlankScreenTemplate)())}),[p,u,x]),w=g.React.useCallback((function(){Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(l,n-1))}),[l,n]),j=g.React.useCallback((function(){Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(l,n+1))}),[l,n]),O=g.React.useCallback((function(){Object(h.getAppConfigAction)().removeScreenByIndex(n,l).exec(),n===o-1&&Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(l,n-1))}),[n,o,l]),S=g.React.useCallback((function(){var t=Object(h.getAppConfigAction)();t.duplicateScreenByIndex(n,l),t.exec(),Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(l,n+1))}),[n,l]);return Object(g.jsx)("div",{className:"menu-bar d-flex justify-content-between align-items-center"},Object(g.jsx)("div",{className:"d-flex justify-content-start align-items-center"},Object(g.jsx)("div",{className:"info ml-2"},e("screen"),": ",n+1," / ",o),Object(g.jsx)(f.Tooltip,{title:0===n?"":e("previous"),placement:"bottom",css:b()},Object(g.jsx)(f.Button,{icon:!0,className:"rounded-circle",disabled:0===n,type:"tertiary",onClick:w},Object(g.jsx)(f.Icon,{icon:Er,size:16}))),Object(g.jsx)(f.Tooltip,{title:n===o-1?"":e("next"),placement:"bottom",css:b()},Object(g.jsx)(f.Button,{icon:!0,className:"rounded-circle",disabled:n===o-1,type:"tertiary",onClick:j},Object(g.jsx)(f.Icon,{icon:Er,rotate:180,size:16}))),!c&&Object(g.jsx)("div",{ref:v},Object(g.jsx)(f.Tooltip,{title:e("addScreen"),placement:"bottom",css:b()},Object(g.jsx)(f.Button,{icon:!0,onClick:I,className:"rounded-circle",type:"tertiary","data-testid":"addBtn"},Object(g.jsx)(f.Icon,{icon:Lr,size:16})))),!c&&p&&Object(g.jsx)(Ce.ScreenTemplatePopper,{referenceElement:v.current,theme:i,onItemSelect:x,onClose:m}),!c&&Object(g.jsx)(f.Tooltip,{title:e("duplicateScreen"),placement:"bottom",css:b()},Object(g.jsx)(f.Button,{icon:!0,className:"rounded-circle",type:"tertiary",onClick:S,"data-testid":"duplicateBtn"},Object(g.jsx)(f.Icon,{icon:Br,size:16}))),!c&&o>1&&Object(g.jsx)(f.Tooltip,{title:e("deleteScreen"),placement:"bottom",css:b()},Object(g.jsx)(f.Button,{icon:!0,className:"rounded-circle",type:"tertiary",onClick:O,"data-testid":"removeBtn"},Object(g.jsx)(f.Icon,{icon:Nr,size:16})))))})),Wr=n(21),Gr=n(19),Ur=n(20),Yr=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Zr=n(29),Xr=Object(g.css)(_r||(_r=Yr(["\n  width: 36px;\n  height: 36px;\n  padding: 0.5rem;\n"],["\n  width: 36px;\n  height: 36px;\n  padding: 0.5rem;\n"]))),Jr=Object(g.css)(Vr||(Vr=Yr(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"])));function qr(t){return Object(g.css)(Fr||(Fr=Yr(["\n    display: flex;\n    height: 200px;\n    position: relative;\n    z-index: 1;\n    border: 1px dashed ",";\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      display: none !important;\n    }\n\n    .action-item {\n      z-index: 1;\n    }\n  "],["\n    display: flex;\n    height: 200px;\n    position: relative;\n    z-index: 1;\n    border: 1px dashed ",";\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      display: none !important;\n    }\n\n    .action-item {\n      z-index: 1;\n    }\n  "])),g.polished.rgba(t.colors.palette.dark[600],.6))}function Qr(t){var e=t.layouts,n=t.builderTheme,o=g.ReactRedux.useSelector((function(t){return e[t.browserSizeMode]||e[t.appConfig.mainSizeMode]})),i=g.React.useState(!1),r=i[0],a=i[1],l=g.React.useRef(null),s=g.React.useCallback((function(t){F(Object(h.getAppConfigAction)().appConfig,t,{layoutId:o},{width:100,height:100},{left:0,top:0}).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(n,e))})),a(!1)}),[o]),u=g.React.useCallback((function(t,e,n){F(Object(h.getAppConfigAction)().appConfig,t,{layoutId:o},e,n).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(n,e))}))}),[o]),c=g.React.useCallback((function(t){return!t.layoutInfo||t.layoutInfo.layoutId!==o}),[o]);return Object(g.jsx)(v.LayoutContext.Provider,{value:{isItemAccepted:c}},Object(g.jsx)("div",{className:"placeholder-btn w-100 justify-content-center align-items-center",css:qr(n)},Object(g.jsx)(ke,{css:Jr,layouts:e,onDrop:u}),Object(g.jsx)("div",{className:"action-item",ref:l},Object(g.jsx)(f.Button,{icon:!0,css:Xr,onClick:function(t){t.stopPropagation(),a(!r)}},Object(g.jsx)(f.Icon,{icon:Zr,size:16}))),r&&Object(g.jsx)(Ce.WidgetListPopper,{builderTheme:n,referenceElement:l.current,isItemAccepted:c,onItemSelect:s,onClose:function(){a(!1)}})))}var Kr,$r,ta,ea=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},na=n(76),oa=g.spring.animated;function ia(t,e,n,o,i,r,a,l,s,u,c,d,p){var h=t.panel||{},f=h.side,y=h.size,v=Object(g.css)(Kr||(Kr=ea(["\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n    &:hover {\n      color: ",";\n      background-color: ",";\n    }\n  "],["\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n    &:hover {\n      color: ",";\n      background-color: ",";\n    }\n  "])),c.colors.palette.dark[900],c.colors.palette.light[400],c.colors.palette.light[600],c.colors.black,c.colors.palette.light[600]);return s?Object(g.css)($r||($r=ea(["\n      ",";\n\n      .panel-content {\n        transform: none !important;\n\n        &:not(.visible) {\n          pointer-events: none;\n          > .layout-wrapper > .layout,\n          > .layout-wrapper > .placeholder-btn {\n            pointer-events: none;\n          }\n        }\n      }\n\n      .resize-handle {\n        display: none;\n      }\n\n      .layout-wrapper {\n        transform-origin: right bottom;\n      }\n\n      .toggle-visible-btn {\n        display: flex;\n        justify-content: flex-end;\n        pointer-events: all;\n\n        > button {\n          ",";\n        }\n      }\n      body:not(.design-mode) & .toggle-visible-btn {\n        display: none !important;\n      }\n    "],["\n      ",";\n\n      .panel-content {\n        transform: none !important;\n\n        &:not(.visible) {\n          pointer-events: none;\n          > .layout-wrapper > .layout,\n          > .layout-wrapper > .placeholder-btn {\n            pointer-events: none;\n          }\n        }\n      }\n\n      .resize-handle {\n        display: none;\n      }\n\n      .layout-wrapper {\n        transform-origin: right bottom;\n      }\n\n      .toggle-visible-btn {\n        display: flex;\n        justify-content: flex-end;\n        pointer-events: all;\n\n        > button {\n          ",";\n        }\n      }\n      body:not(.design-mode) & .toggle-visible-btn {\n        display: none !important;\n      }\n    "])),Object(Gr.b)(t,e,n,o,i,r,a,l,s),v):Object(g.css)(ta||(ta=ea(["\n    ",";\n\n    .panel-content {\n      position: relative;\n      touch-action: none;\n      width: ",";\n\n      &:not(.visible) {\n        pointer-events: none;\n        > .layout-wrapper > .layout,\n        > .layout-wrapper > .placeholder-btn {\n          pointer-events: none;\n        }\n      }\n\n      &.simple-mode {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        width: 100% !important;\n      }\n\n      .layout-wrapper {\n        position: relative;\n        transform-origin: right bottom;\n      }\n    }\n\n    .toggle-visible-btn {\n      display: flex;\n      justify-content: flex-end;\n      pointer-events: all;\n      > button {\n        ",";\n        svg {\n          margin-right: 0;\n          margin-left: 0;\n        }\n      }\n    }\n\n    .panel-content:hover {\n      .resize-handle {\n        display: block;\n      }\n    }\n    body:not(.design-mode) & .resize-handle,\n    body:not(.design-mode) & .toggle-visible-btn,\n    body.lock-layout & .resize-handle {\n      display: none !important;\n    }\n    .resize-handle {\n      position: absolute;\n      cursor: ew-resize;\n      top: 0;\n      bottom: 0;\n      display: ",";\n      touch-action: none;\n      outline: 1px solid var(--light-400);\n      width: 5px;\n      pointer-events: all;\n      &:after {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        bottom: 0;\n        left: 50%;\n        border-left: 1px dotted var(--light-400);\n        transform: translate(-50%);\n      }\n\n      &.left {\n        left: -5px;\n        display: ",";\n      }\n      &.right {\n        right: -5px;\n        display: ",";\n      }\n    }\n  "],["\n    ",";\n\n    .panel-content {\n      position: relative;\n      touch-action: none;\n      width: ",";\n\n      &:not(.visible) {\n        pointer-events: none;\n        > .layout-wrapper > .layout,\n        > .layout-wrapper > .placeholder-btn {\n          pointer-events: none;\n        }\n      }\n\n      &.simple-mode {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-end;\n        width: 100% !important;\n      }\n\n      .layout-wrapper {\n        position: relative;\n        transform-origin: right bottom;\n      }\n    }\n\n    .toggle-visible-btn {\n      display: flex;\n      justify-content: flex-end;\n      pointer-events: all;\n      > button {\n        ",";\n        svg {\n          margin-right: 0;\n          margin-left: 0;\n        }\n      }\n    }\n\n    .panel-content:hover {\n      .resize-handle {\n        display: block;\n      }\n    }\n    body:not(.design-mode) & .resize-handle,\n    body:not(.design-mode) & .toggle-visible-btn,\n    body.lock-layout & .resize-handle {\n      display: none !important;\n    }\n    .resize-handle {\n      position: absolute;\n      cursor: ew-resize;\n      top: 0;\n      bottom: 0;\n      display: ",";\n      touch-action: none;\n      outline: 1px solid var(--light-400);\n      width: 5px;\n      pointer-events: all;\n      &:after {\n        content: '';\n        position: absolute;\n        z-index: -1;\n        top: 0;\n        bottom: 0;\n        left: 50%;\n        border-left: 1px dotted var(--light-400);\n        transform: translate(-50%);\n      }\n\n      &.left {\n        left: -5px;\n        display: ",";\n      }\n      &.right {\n        right: -5px;\n        display: ",";\n      }\n    }\n  "])),Object(Gr.b)(t,e,n,o,i,r,a,l,s),d?p+"px":y,v,d?"block":"none","left"!==f?"none":"none !important","right"!==f?"none":"none !important")}function ra(t){var e=t.index,n=t.screenId,o=t.onInterctionChange,i=t.onHeightChange,r=t.builderTheme,a=t.viewHeight,l=t.headerHeight,s=t.layoutEntry,u=t.isActive,c=t.isSmallSize,d=t.isDesignMode,p=t.transitionType,y=t.screenTransitionType,b=t.triggerType,x=t.stretched,I=t.viewOnly,w=t.verticalSpace,j=void 0===w?"0":w,O=t.useAnimation,S=void 0===O||O,C=t.formatMessage,P=g.ReactRedux.useSelector((function(t){return t.appConfig.screens[n]})),T=g.ReactRedux.useSelector((function(t){var e,o,i;return null===(i=null===(o=null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.screenPanelStates)||void 0===o?void 0:o[n])||void 0===i||i})),A=P.panel,M=g.React.useRef(),R=g.React.useRef(),z=g.React.useRef(),k=g.React.useState(!1),L=k[0],N=k[1],B=g.React.useState(0),E=B[0],D=B[1],_=g.React.useRef(T),V=g.React.useRef(d),F=g.React.useRef(),H=g.React.useMemo((function(){if(A&&A.overlay&&Math.abs(parseFloat(A.offset))>0){var t=Object(g.getAppStore)().getState().appContext.isRTL?"left"===A.side?-1:1:"right"===A.side?-1:1;return parseFloat(A.offset)*t}return 0}),[A]),W=g.spring.useSpring((function(){return{opacity:1,x:0,y:0}})),G=W[0],U=W[1],Y=g.React.useCallback((function(t,e){F.current=e,N(!0),D(0)}),[]),Z=g.React.useCallback((function(t,e,n,o,i){D(o)}),[]),X=g.React.useCallback((function(t,e,o,i,r){!function(t,e){var n,o,i=Object(h.getAppConfigAction)(),r=i.appConfig.screens[t];o=v.utils.isPercentage(null===(n=r.panel)||void 0===n?void 0:n.size)?v.utils.toRatio(e,document.body.clientWidth):Math.round(e)+"px",r=r.setIn(["panel","size"],o),i.editScreen(r).exec()}(n,F.current+i),N(!1)}),[n]);g.React.useEffect((function(){V.current!==d&&(V.current=d,d?_.current?U({opacity:1,x:0,y:0,immediate:!0,onRest:null}):U({opacity:0,immediate:!0,onRest:null}):U({opacity:1,x:0,y:0,immediate:!0,onRest:null}))}),[d,U]),g.React.useEffect((function(){if(!z.current&&R.current)return z.current=Object(m.interact)(R.current),jt(z.current,{layoutItemId:n,onResizeStart:Y,onResizing:Z,onResizeEnd:X}),function(){z.current&&(z.current.unset(),z.current=null)}}),[n,Y,Z,X]);var J=g.React.useCallback((function(t){o(e,t)}),[e,o]),q=g.React.useCallback((function(t,n){i(e,n)}),[e,i]),Q=g.React.useCallback((function(t){var e=t.target.getBoundingClientRect(),o=M.current.getBoundingClientRect(),i=Object(g.getAppStore)().getState().appContext.isRTL;U({opacity:0,size:0,x:i?o.left-e.left:o.right-e.right,y:o.bottom-e.bottom,immediate:!S,onRest:function(){_.current=!1,Object(g.getAppStore)().dispatch(g.appActions.screenPanelVisibleChanged(n,!1))}})}),[U,n,S]),K=g.React.useCallback((function(){U({opacity:1,size:1,x:0,y:0,immediate:!S,onRest:null})}),[U,S]);g.React.useEffect((function(){_.current!==T&&T&&(K(),_.current=T)}),[T,K]),Object(Ur.a)(M.current,t.refElement,c?g.ScreenTriggerType.Lower:null!=b?b:g.ScreenTriggerType.Bottom,J);var $={opacity:G.opacity,transform:g.spring.interpolate([G.x,G.y],(function(t,e){return"translate("+(t+H)+"px, "+e+"px)"}))},tt=g.React.useCallback((function(){return!I&&u&&(null==A?void 0:A.overlay)}),[A,u,I]);return Object(g.jsx)("div",{className:Object(g.classNames)("screen-side-panel",{"top-spacing":0===e&&((null==A?void 0:A.overlay)||c)}),"data-screenid":n,"data-index":e,ref:M,css:ia(P,a,l,u,j,x,p,y,c,0,r,L,F.current+E)},A&&Object(g.jsx)(oa.div,{className:Object(g.classNames)("panel-content",{visible:T}),ref:R,style:$},Object(g.jsx)("div",{className:"layout-wrapper"},Object(g.jsx)(s,{layouts:A.layout}),!I&&Object(g.jsx)(Qr,{layouts:A.layout,builderTheme:r}),Object(g.jsx)("span",{className:"resize-handle left rnd-resize-left"}),Object(g.jsx)("span",{className:"resize-handle right rnd-resize-right"})),tt()&&Object(g.jsx)("div",{className:"toggle-visible-btn",onClick:Q,"data-testid":"toggleBtn-"+T},Object(g.jsx)(f.Tooltip,{placement:"auto",title:C("hideInDesignView")},Object(g.jsx)(f.Button,{type:"default",size:"sm",className:"rounded"},Object(g.jsx)(f.Icon,{icon:na,size:16})))),Object(g.jsx)("div",{className:Object(g.classNames)("panel-spacing",{"last-item":t.isLast})})),!A&&T&&Object(g.jsx)("div",{className:"panel-content-placeholder"}),Object(g.jsx)(g.ReactResizeDetector,{handleHeight:!0,onResize:q}))}var aa,la=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},sa=function(){return(sa=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ua=n(29),ca=n(35),da=n(30),pa=n(28),ga=n(42),ha=n(31);function fa(t){var e=t.layoutId,n=t.layoutItemId,o=t.builderTheme,i=t.layoutItem,r=t.formatMessage,a=t.isFirst,l=t.isLast,s=g.React.useState(!1),u=s[0],c=s[1],d=g.React.useState(!1),p=d[0],f=d[1],y=g.React.useRef(),m=g.React.useCallback((function(){c(!u)}),[u]),b=g.React.useCallback((function(){f(!p)}),[p]),x=g.React.useCallback((function(t){pr(e,n,t),c(!1)}),[e,n]),I=g.React.useCallback((function(t){gr(e,n,t),f(!1)}),[e,n]),w=g.React.useCallback((function(){var t=fr(Object(h.getAppConfigAction)().appConfig,{layoutId:e,layoutItemId:n});Object(h.getAppConfigAction)(t).exec()}),[e,n]),j=g.React.useCallback((function(){var t=hr(Object(h.getAppConfigAction)().appConfig,{layoutId:e,layoutItemId:n});Object(h.getAppConfigAction)(t).exec()}),[e,n]),O=g.React.useCallback((function(){Object(h.getAppConfigAction)().removeLayoutItem({layoutId:e,layoutItemId:n},!0).exec()}),[e,n]),S=g.React.useCallback((function(){return Object(g.getAppStore)().getState().browserSizeMode===g.BrowserSizeMode.Large}),[]),C=[{icon:ua,title:r("insertABlock"),onClick:m,visible:function(){return!at()}},{icon:ca,title:r("insertAScreenGroup"),onClick:b,visible:function(){return S()&&!at()}},sa(sa({},pt),{visible:function(){return S()&&!at()}}),{icon:da,title:r("setting"),onClick:function(){Object(g.getAppStore)().dispatch(g.appActions.selectionChanged({layoutId:e,layoutItemId:n}))}},{icon:ha,title:r("dragToMove"),className:"tool-drag-handler",onClick:function(){},visible:function(){return!at()}},{icon:ga,onClick:w,title:r("moveup"),visible:function(){return!a&&!at()}},{icon:ga,rotate:180,onClick:j,title:r("movedown"),visible:function(){return!l&&!at()}},{icon:pa,title:r("delete"),onClick:O,visible:function(){return!at()}}];return Object(g.jsx)(Ft,{layoutId:e,layoutItem:i,builderTheme:o,positionType:"center",size:v.CONTEXT_MENU_ITEM_SIZE,iconSize:v.CONTEXT_MENU_ICON_SIZE,className:"widget-context-menu",menuItems:C},Object(g.jsx)("div",{ref:y,css:Object(g.css)(aa||(aa=la(["position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;"],["position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;"])))}),u&&Object(g.jsx)(Ce.BlockTemplatePopper,{referenceElement:y.current,theme:o,onItemSelect:x,onClose:m}),p&&Object(g.jsx)(Ce.ScreenGroupTemplatePopper,{referenceElement:y.current,theme:o,onItemSelect:I,onClose:b}))}var ya,va=n(11),ma=n(25),ba=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function xa(t,e,n,o,i,r){return Object(g.css)(ya||(ya=ba(["\n    position: relative;\n    width: 100%;\n\n    & > div.widget-context-menu {\n      display: none;\n    }\n\n    &:hover > div.widget-context-menu {\n      display: flex;\n    }\n\n    body.lock-layout & {\n      .screen-menu {\n        bottom: ",";\n        z-index: ",";\n      }\n    }\n\n    .screen-menu {\n      display: ",";\n      position: absolute;\n      opacity: ",";\n      left: 0;\n      top: ",";\n      bottom: ",";\n      height: 32px;\n      width: 100%;\n      background-color: ",";\n      overflow: visible;\n\n      .info {\n        color: ",";\n      }\n\n      .jimu-btn svg {\n        color: ",";\n      }\n    }\n\n    .screen-group {\n      position: relative;\n      height: ","px;\n      overflow-y: auto;\n      overflow-x: hidden;\n    }\n\n    .main-panels {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      pointer-events: none;\n      z-index: 0;\n    }\n\n    &.small-size .main-panels {\n      z-index: ",";\n    }\n\n    &.small-size .side-panels {\n      z-index: ",";\n    }\n\n    .side-panels {\n      position: relative;\n      z-index: 1;\n      pointer-events: none;\n\n      > div:first-of-type > div.panel-content {\n        padding-top: ","px;\n      }\n\n      /* > div:nth-last-of-type(2) {\n        min-height: ","px;\n      } */\n    }\n\n    body:not(.design-mode) & {\n      .screen-group {\n        position: static;\n        height: auto;\n        overflow-y: unset;\n        overflow-x: unset;\n      }\n      .side-panels {\n        > div:first-of-type > div.panel-content {\n          padding-top: ","vh;\n          padding-top: calc(var(--vh) * ",");\n        }\n        /* > div:nth-last-of-type(2) {\n          min-height: 100vh;\n        } */\n      }\n      .screen-menu {\n        display: none !important;\n      }\n    }\n\n    .group-tip {\n      display: none;\n      padding: inherit;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      top: 0;\n      right: 0;\n      pointer-events: none;\n      .tip-content {\n        height: 100%;\n        padding: 2px;\n        &:after {\n          content: '';\n          width: 100%;\n          height: 100%;\n          outline: 2px solid ",";\n          display: block;\n        }\n      }\n    }\n\n    &:hover .group-tip {\n      display: block;\n    }\n  "],["\n    position: relative;\n    width: 100%;\n\n    & > div.widget-context-menu {\n      display: none;\n    }\n\n    &:hover > div.widget-context-menu {\n      display: flex;\n    }\n\n    body.lock-layout & {\n      .screen-menu {\n        bottom: ",";\n        z-index: ",";\n      }\n    }\n\n    .screen-menu {\n      display: ",";\n      position: absolute;\n      opacity: ",";\n      left: 0;\n      top: ",";\n      bottom: ",";\n      height: 32px;\n      width: 100%;\n      background-color: ",";\n      overflow: visible;\n\n      .info {\n        color: ",";\n      }\n\n      .jimu-btn svg {\n        color: ",";\n      }\n    }\n\n    .screen-group {\n      position: relative;\n      height: ","px;\n      overflow-y: auto;\n      overflow-x: hidden;\n    }\n\n    .main-panels {\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      pointer-events: none;\n      z-index: 0;\n    }\n\n    &.small-size .main-panels {\n      z-index: ",";\n    }\n\n    &.small-size .side-panels {\n      z-index: ",";\n    }\n\n    .side-panels {\n      position: relative;\n      z-index: 1;\n      pointer-events: none;\n\n      > div:first-of-type > div.panel-content {\n        padding-top: ","px;\n      }\n\n      /* > div:nth-last-of-type(2) {\n        min-height: ","px;\n      } */\n    }\n\n    body:not(.design-mode) & {\n      .screen-group {\n        position: static;\n        height: auto;\n        overflow-y: unset;\n        overflow-x: unset;\n      }\n      .side-panels {\n        > div:first-of-type > div.panel-content {\n          padding-top: ","vh;\n          padding-top: calc(var(--vh) * ",");\n        }\n        /* > div:nth-last-of-type(2) {\n          min-height: 100vh;\n        } */\n      }\n      .screen-menu {\n        display: none !important;\n      }\n    }\n\n    .group-tip {\n      display: none;\n      padding: inherit;\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      top: 0;\n      right: 0;\n      pointer-events: none;\n      .tip-content {\n        height: 100%;\n        padding: 2px;\n        &:after {\n          content: '';\n          width: 100%;\n          height: 100%;\n          outline: 2px solid ",";\n          display: block;\n        }\n      }\n    }\n\n    &:hover .group-tip {\n      display: block;\n    }\n  "])),n?o?"-10px":"-32px":"auto",n&&o?10:null,i?"block":"none",i?.8:.5,n?"auto":"-32px",n?"-32px":"auto",e.colors.palette.light[200],e.colors.black,e.colors.palette.dark[600],t,r?0:1,r?1:0,Math.round(t*va.b),t,100*va.b,100*va.b,e.colors.palette.primary[700])}function Ia(t){var e,n=t.layoutId,o=t.layoutItemId,i=t.layoutItem,r=t.formatMessage,a=t.itemIndex,l=t.isFirst,s=t.isLast,u=i.screenGroupId,c=g.ReactRedux.useSelector((function(t){var e,i=null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.selection;return!!i&&(i.layoutId===n&&i.layoutItemId===o)})),d=g.ReactRedux.useSelector((function(t){return t.appConfig.screenGroups[i.screenGroupId]})),p=g.ReactRedux.useSelector((function(t){var e=t.appConfig.screenGroups[i.screenGroupId].screens[0];return null!=t.appConfig.screens[e].panel})),f=g.ReactRedux.useSelector((function(t){return t.browserSizeMode})),y=d.screens,b=d.stretchPanel,x=void 0===b||b,I=d.triggerType,w=void 0===I?g.ScreenTriggerType.Bottom:I,j=d.verticalSpace,O=void 0===j?"0":j,S=d.panelTransitionType,C=void 0===S?g.ScreenTransitionType.Push:S,P=null!==(e=d.transitionType)&&void 0!==e?e:g.ScreenTransitionType.Fade;f!==g.BrowserSizeMode.Small||p||(P=g.ScreenTransitionType.Cover);var T=g.ReactRedux.useSelector((function(t){var e;return null===(e=t.appRuntimeInfo.screenGroupNavInfos)||void 0===e?void 0:e[u]})),A=g.ReactRedux.useSelector((function(t){return g.utils.findViewportSize(t.appConfig,t.browserSizeMode||g.BrowserSizeMode.Large)})),M=g.ReactRedux.useSelector((function(t){var e;return(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===g.AppMode.Design})),R=g.React.useContext(v.PageContext),z=R.viewOnly,k=R.builderTheme,L=R.pageId,N=g.ReactRedux.useSelector((function(t){var e=t.appConfig.pages[L];if(null==e?void 0:e.header){var n=t.appConfig.header;if(null==n?void 0:n.sticky){var o=t.browserSizeMode,i=t.appConfig.mainSizeMode,r=n.height[o]||n.height[i]||va.a;return parseInt(r,10)}}return 0})),B=g.React.useRef(),E=g.React.useRef(),D=g.React.useRef(),_=g.React.useRef(!0),V=g.React.useRef(),F=g.React.useRef(),H=g.React.useState(0),W=H[0],G=H[1];g.React.useEffect((function(){if(c){var t=document.querySelector('div.exb-rnd[data-layoutid="'+n+'"][data-layoutitemid="'+o+'"]');null!=t&&t.scrollIntoView({behavior:"auto",block:"center"})}}),[c,n,o]);var U=g.React.useMemo((function(){var t,e,n;if(f!==g.BrowserSizeMode.Small)return!1;var o=Object(g.getAppStore)().getState().appConfig,i=null===(e=null===(t=o.screenGroups)||void 0===t?void 0:t[u])||void 0===e?void 0:e.screens;return!!(null==i?void 0:i[W])&&(null===(n=o.screens[i[W]].panel)||void 0===n?void 0:n.overlay)}),[u,W,f]),Y=g.React.useCallback((function(t){var e,n=E.current.querySelectorAll("div.screen-side-panel"),o=0;if(n.forEach((function(e){+e.getAttribute("data-index")<t&&(o+=e.clientHeight)})),E.current.scrollTop=o,P!==g.ScreenTransitionType.Fade){var i=null===(e=D.current)||void 0===e?void 0:e.children[0];i&&(i.scrollTop=E.current.scrollTop)}}),[P]),Z=g.React.useCallback((function(){bt(!0)}),[]),X=g.React.useCallback((function(){bt(!1)}),[]);g.React.useEffect((function(){if(B.current&&!F.current){var e=t.layoutId,n=t.layoutItemId,o=t.layoutItem;F.current=Object(m.interact)(B.current).origin("parent"),F.current=mt(F.current,{layoutId:e,layoutItemId:n,onDragStart:Z,onDragEnd:X,useDragHandler:!0,itemType:o.type,rootLayoutId:function(){return e},restrict:function(){return!0}}),F.current.draggable({modifiers:[m.interact.modifiers.restrictRect({restriction:"parent"})]})}return function(){F.current&&(F.current.unset(),F.current=null)}}),[]),g.React.useEffect((function(){null!=(null==T?void 0:T.activeIndex)&&T.activeIndex!==W&&(!function(t,e){var n,o=Object(g.getAppStore)().getState().appConfig,i=Object(g.getAppStore)().getState().browserSizeMode,r=null===(n=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===n?void 0:n.selection;if(null!=r){var a=o.screenGroups[t].screens[e],l=o.screens[a];if(l){var s=l.main.layout[i];r.layoutId===s&&Object(g.getAppStore)().dispatch(g.appActions.selectionChanged(null)),null!=document.querySelector('div[data-layoutid="'+s+'"] div[data-layoutid="'+r.layoutId+'"][data-layoutitemid="'+r.layoutItemId+'"]')&&Object(g.getAppStore)().dispatch(g.appActions.selectionChanged(null))}}}(u,W),G(T.activeIndex),T.scrollIntoView&&(_.current=!1,Y(T.activeIndex),setTimeout((function(){_.current=!0}),200)))}),[T,W,Y,u]),g.React.useEffect((function(){V.current&&(E.current.removeEventListener("scroll",V.current),V.current=null),V.current=function(){var t,e=null===(t=D.current)||void 0===t?void 0:t.children[0];e&&P!==g.ScreenTransitionType.Fade&&(e.scrollTop=E.current.scrollTop)},E.current.addEventListener("scroll",V.current)}),[P]),g.React.useEffect((function(){Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(u,0))}),[M,u]);var J=g.React.useCallback((function(t,e){_.current&&(e&&t!==W?Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(u,t,!1)):!e&&t>0&&Object(g.getAppStore)().dispatch(g.appActions.screenGroupNavInfoChanged(u,t-1,!1)))}),[W,u]),q=g.React.useCallback((function(t){t.stopPropagation(),at()||z||f===g.BrowserSizeMode.Small||Object(g.getAppStore)().dispatch(g.appActions.selectionChanged({layoutId:n,layoutItemId:o}))}),[z,f,n,o]),Q=g.React.useCallback((function(){if(E.current){var t=E.current.children[0],e=E.current.children[1];t.style.height=e.clientHeight+"px"}}),[]),K=g.React.useMemo((function(){return g.lodash.debounce(Q,200)}),[Q]),$=g.React.useCallback((function(t,e){if(E.current){var n=E.current.children[0],o=E.current.children[1];if(P!==g.ScreenTransitionType.Fade)if(P!==g.ScreenTransitionType.Cover){if(P===g.ScreenTransitionType.Push){var i=n.querySelector('div.screen-main-panel[data-index="'+t+'"]'),r=o.querySelector('div.screen-side-panel[data-index="'+t+'"]');i.style.height=r.clientHeight+"px",n.style.height=o.clientHeight+"px"}}else Object(ma.a)(n,o,f);else n.style.height=o.clientHeight+"px"}}),[f,P]),tt=g.React.useCallback((function(){Object(g.getAppStore)().dispatch(h.builderActions.confirmDeleteContentChanged({layoutId:n,layoutItemId:o}))}),[n,o]),et=g.React.useMemo((function(){return{delete:tt,backspace:tt}}),[tt]);return y.length>0?Object(g.jsx)(Ht.c.Provider,{value:n+":"+o},Object(g.jsx)("div",{className:Object(g.classNames)("builder-layout-item exb-rnd",{selected:c,"small-size":f===g.BrowserSizeMode.Small}),css:xa(A.height,k,l,s,c,U),"data-layoutitemid":o,"data-layoutid":n,onClick:q,ref:B},Object(g.jsx)("div",{className:"screen-menu"},Object(g.jsx)(Hr,{activeScreenIndex:W,itemIndex:a,total:y.length,screenGroupId:u,layoutId:n,layoutItemId:o,theme:k,browserSizeMode:f,hasPanel:p,formatMessage:r})),Object(g.jsx)("div",{className:"screen-group",ref:E},Object(g.jsx)("div",{className:"main-panels",ref:D},Object(g.jsx)(Wr.a,{pageId:L,activeIndex:W,viewHeight:A.height,headerHeight:N,screens:y,transitionType:P,layoutEntry:nn,isSmallSize:f===g.BrowserSizeMode.Small,isDesignMode:M,builderTheme:k,formatMessage:r})),Object(g.jsx)("div",{className:"side-panels"},y.map((function(t,e){return Object(g.jsx)(ra,{key:t,index:e,isLast:e===y.length-1,screenId:t,viewHeight:A.height,headerHeight:N,refElement:M?B.current:null,layoutEntry:nn,viewOnly:z,builderTheme:k,isActive:e===W,isSmallSize:f===g.BrowserSizeMode.Small,isDesignMode:M,stretched:x,triggerType:w,verticalSpace:O,transitionType:C,screenTransitionType:P,onHeightChange:$,onInterctionChange:J,formatMessage:r})})),Object(g.jsx)(g.ReactResizeDetector,{handleHeight:!0,onResize:K}))),!z&&Object(g.jsx)(fa,{layoutId:n,layoutItemId:o,layoutItem:i,isFirst:l,isLast:s,builderTheme:k,formatMessage:r}),M&&Object(g.jsx)("div",{className:"group-tip"},Object(g.jsx)("div",{className:"tip-content"})),M&&c&&Object(g.jsx)(g.Keyboard,{bindings:et}))):null}var wa,ja,Oa=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Sa=n(77),Ca=n(35),Pa=n(40),Ta=Object(g.css)(wa||(wa=Oa(["\n  pointer-events: all;\n"],["\n  pointer-events: all;\n"])));function Aa(t){return Object(g.css)(ja||(ja=Oa(["\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      display: none !important;\n    }\n\n    display: flex;\n    height: 200px;\n    padding: 1rem;\n    pointer-events: none;\n    position: relative;\n    z-index: 1;\n    .btn-text {\n      line-height: 32px;\n    }\n    .btn {\n      margin-right: 2rem;\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    }\n    .action-item {\n      width: 32px;\n    }\n\n    .action-seprator {\n      width: 300px;\n      height: 1px;\n      background-color: ",";\n    }\n  "],["\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      display: none !important;\n    }\n\n    display: flex;\n    height: 200px;\n    padding: 1rem;\n    pointer-events: none;\n    position: relative;\n    z-index: 1;\n    .btn-text {\n      line-height: 32px;\n    }\n    .btn {\n      margin-right: 2rem;\n      background: ",";\n      &:hover {\n        background: ",";\n      }\n    }\n    .action-item {\n      width: 32px;\n    }\n\n    .action-seprator {\n      width: 300px;\n      height: 1px;\n      background-color: ",";\n    }\n  "])),t.colors.palette.light[600],t.colors.palette.light[800],t.colors.palette.dark[800])}function Ma(t){return t===g.BrowserSizeMode.Large}function Ra(t){var e,n=t.pageContext,o=t.onPageTemplateSelected,i=t.onBlockTemplateSelected,r=t.onScreenTemplateSelected,a=t.blockOnly,l=n.builderTheme,s=n.formatMessage,u=n.isHeader,c=n.isFooter,d=g.React.useState(!1),p=d[0],h=d[1],y=g.React.useState(!1),v=y[0],m=y[1],b=g.React.useState(!1),x=b[0],I=b[1],w=g.React.useRef(null),j=g.React.useRef(null),O=g.React.useRef(null),S=!u&&!c;e=u?s("chooseHeaderTemplate"):c?s("chooseFooterTemplate"):s("chooseTemplate",{type:n.isDialog?s("dialog").toLocaleLowerCase():s("page").toLocaleLowerCase()});return Object(g.jsx)("div",{className:"w-100 flex-column justify-content-center align-items-center",css:Aa(l)},Object(g.jsx)("div",{className:"d-flex"},S&&Object(g.jsx)(g.React.Fragment,null,Object(g.jsx)(f.Tooltip,{placement:"bottom",title:s("insertABlock")},Object(g.jsx)("div",{className:"action-item",ref:w},Object(g.jsx)(f.Button,{icon:!0,onClick:function(t){t.stopPropagation(),m(!v)},css:Ta,className:"rounded-circle"},Object(g.jsx)(f.Icon,{icon:Sa,size:16,color:l.colors.palette.dark[800]})))),Ma(n.browserSizeMode)&&Object(g.jsx)(f.Tooltip,{placement:"bottom",title:s("insertAScreenGroup")},Object(g.jsx)("div",{className:"action-item ml-4",ref:j},Object(g.jsx)(f.Button,{icon:!0,onClick:function(t){t.stopPropagation(),I(!v)},css:Ta,className:"rounded-circle"},Object(g.jsx)(f.Icon,{icon:Ca,size:16,color:l.colors.palette.dark[800]}))))),!a&&Object(g.jsx)(f.Tooltip,{placement:"bottom",title:e},Object(g.jsx)("div",{className:Object(g.classNames)("action-item",{"ml-4":S}),ref:O},Object(g.jsx)(f.Button,{icon:!0,onClick:function(t){t.stopPropagation(),h(!p)},css:Ta,className:"rounded-circle"},Object(g.jsx)(f.Icon,{icon:Pa,size:16,color:l.colors.palette.dark[800]}))))),Object(g.jsx)("div",{className:"action-seprator mt-3"}),Object(g.jsx)("div",null,Object(g.jsx)("h5",{className:"btn-text mt-2"},s("dropWidgetToAdd"))),S&&v&&Object(g.jsx)(Ce.BlockTemplatePopper,{referenceElement:w.current,theme:l,onItemSelect:function(t){m(!1),i(t)},onClose:function(){m(!1)}}),S&&x&&Ma(n.browserSizeMode)&&Object(g.jsx)(Ce.ScreenGroupTemplatePopper,{referenceElement:j.current,theme:l,onItemSelect:function(t){I(!1),r(t)},onClose:function(){I(!1)}}),!a&&p&&Object(g.jsx)(Ce.PageTemplatePopper,{isHeader:u,isFooter:c,theme:l,pageMode:g.PageMode.AutoScroll,referenceElement:O.current,formatMessage:s,onItemSelect:function(t){h(!1),o(t)},onClose:function(){h(!1)}}))}var za,ka,La,Na,Ba,Ea=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_a=function(){return(_a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Va=Object(g.css)(za||(za=Ea(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n"]))),Fa=Object(g.css)(ka||(ka=Ea(["\n  ",";\n  z-index: ",";\n  pointer-events: none;\n"],["\n  ",";\n  z-index: ",";\n  pointer-events: none;\n"])),Va,v.LayoutZIndex.DragMoveTip),Ha=function(t){function e(e){var n,o=t.call(this,e)||this;o.state={isDragover:!1,isLoadingTemplate:!1},o.handleActivate=function(t){if(lt())if(Math.abs(t.screenX-o.mousedownX)>v.CLICK_TOLRERANCE||Math.abs(t.screenY-o.mousedownY)>v.CLICK_TOLRERANCE)t.stopPropagation();else{var e=o.props,n=e.isInSection,i=e.isInWidget;o.pageContext.viewOnly||n||i||St()||xt()||(t.stopPropagation(),Object(g.getAppStore)().dispatch(g.appActions.selectionChanged(null)))}},o.handleMouseDown=function(t){o.mousedownX=t.screenX,o.mousedownY=t.screenY},o.handleDropAtBoundary=function(t,e,n){n<o.props.layout.order.length?o.referenceId=o.props.layout.order[n]:o.referenceId=null,null==o.domRect&&(o.domRect=o.ref.getBoundingClientRect()),o.handleDrop(t,o.domRect,e)},o.onWidgetItemSelected=function(t){var e,n,i,r=o.ref.getBoundingClientRect(),a={height:null!==(i=null===(n=null===(e=t.manifest)||void 0===e?void 0:e.defaultSize)||void 0===n?void 0:n.height)&&void 0!==i?i:300};o.addWidgetToLayout(t,r,a,4,0)},o.handleBlockTemplateSelected=function(t){o.setState({isLoadingTemplate:!0}),pr(o.props.layout.id,"",t).finally((function(){o.setState({isLoadingTemplate:!1})}))},o.handleScreenTemplateSelected=function(t){o.setState({isLoadingTemplate:!0}),gr(o.props.layout.id,"",t).finally((function(){o.setState({isLoadingTemplate:!1})}))},o.handlePageTemplateSelected=function(t){var e=Object(h.getAppConfigAction)().appConfig;o.setState({isLoadingTemplate:!0}),o.pageContext.isHeader?h.templateUtils.applyPageTemplateToHeader(e,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).finally(null):o.pageContext.isFooter?h.templateUtils.applyPageTemplateToFooter(e,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).finally(null):h.templateUtils.applyPageTemplateToBody(e,o.pageContext.pageId,t).then((function(t){var e=t.appConfig;Object(h.getAppConfigAction)(e).exec(),g.lodash.defer((function(){o.setState({isLoadingTemplate:!1})}))})).finally(null)},v.utils.autoBindHandlers(o,["handleDrop","handleDragOver","handleDragEnter","handleDragLeave","handleToggleDragoverEffect"]);var i=g.ExtensionManager.getInstance().getExtensions(""+g.extensionSpec.ExtensionPoints.LayoutTransformer);if((null==i?void 0:i.length)>0){var r=i.find((function(t){return t.layoutType===o.props.layout.type}));o.layoutTransform=null===(n=r)||void 0===n?void 0:n.transformLayout}return o}return Da(e,t),e.prototype.componentDidMount=function(){this.canvasPane=new vo(this.canvasRef),this.canvasPane.setSize(this.ref.clientWidth,this.ref.clientHeight)},e.prototype.componentDidUpdate=function(){this.canvasPane.setSize(this.ref.clientWidth,this.ref.clientHeight)},e.prototype.handleDragOver=function(t,e,n,o,i,r){var a,l,s,u=this.props.layout,c=null!==(a=t.layoutInfo)&&void 0!==a?a:{layoutId:null},d=o;if(this.canvasPane.clear(),(null===(l=this.childRects)||void 0===l?void 0:l.length)>0){var p=function(t,e,n,o){var i,r,a=!1;if(n.some((function(t,o){if(t.top+t.height/2>e){if(0===o)i=Math.max(t.top/2,t.top-5);else{var l=n[o-1];i=(t.top+l.top+l.height)/2}a=!0,r=t.id}return a})),!a){var l=n[n.length-1];i=Math.min(l.top+l.height+5,(l.top+l.height+t.height)/2)}return{refId:r,insertY:i}}(n,r,this.childRects),h=p.insertY,f=p.refId;if(this.referenceId=f,c.layoutId===this.props.layout.id){var y=u.order,v=y.indexOf(c.layoutItemId),m=y.indexOf(f);if((null===(s=u.content[c.layoutItemId].setting)||void 0===s?void 0:s.isFloating)||v===m-1||null==f&&v===y.length-1)return}d={top:h-5+this.ref.scrollTop,width:n.width-10,left:5,height:10}}else this.referenceId=null,d={top:n.height/2-5,width:n.width-10,left:5,height:10};this.canvasPane.setColor(g.polished.rgba(this.builderTheme.colors.palette.primary[700],.4)),this.canvasPane.drawRect(d)},e.prototype.handleToggleDragoverEffect=function(t,e){var n;t&&(this.referenceId=null,this.collectBounds(null!==(n=e.layoutInfo)&&void 0!==n?n:{layoutId:null})),this.canvasPane.clear(),this.setState({isDragover:t})},e.prototype.handleDragEnter=function(t){},e.prototype.handleDragLeave=function(){},e.prototype.handleDrop=function(t,e,n){var o,i;this.canvasPane.clear();var r=this.props.layout,a=null!==(o=t.layoutInfo)&&void 0!==o?o:{layoutId:null},l=Object(h.getAppConfigAction)(),s=0;if(null!=this.referenceId?s=r.order.indexOf(this.referenceId):null!=r.order&&(s=r.order.length),this.referenceId=null,this.childRects=[],a.layoutId!==r.id){var u=(this.maxPageWidth>0?Math.min(this.maxPageWidth,e.width):e.width)/12,c=Math.min(Math.round(n.width/u),12);this.addWidgetToLayout(t,e,n,c,s)}else{if(null===(i=r.content[a.layoutItemId].setting)||void 0===i?void 0:i.isFloating){var d=Object(h.getAppConfigAction)();return d.setLayoutItemToPending(a,!1),void Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(d.appConfig,_a(_a({},a),{autoScroll:!1})))}F(l.appConfig,t,{layoutId:r.id},e,n,s).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(n,_a(_a({},e),{autoScroll:!0})))})).finally(null)}},e.prototype.addWidgetToLayout=function(t,e,n,o,i,r){$(t,{layoutId:this.props.layout.id},e,n,o,i,r).finally(null)},e.prototype.collectBounds=function(t){var e=this,n=this.props.layout;this.childRects=[],this.domRect=this.ref.getBoundingClientRect();var o=this.ref.parentNode.querySelectorAll('div[data-layoutid="'+n.id+'"] > div.exb-rnd');return(null==o?void 0:o.length)>0&&o.forEach((function(o){var i,r=o.getAttribute("data-layoutitemid");if((t.layoutId!==n.id||t.layoutItemId!==r)&&(null===(i=n.order)||void 0===i?void 0:i.includes(r))){var a=v.utils.relativeClientRect(o.getBoundingClientRect(),e.domRect);a.id=r,e.childRects.push(a)}})),this.childRects.sort((function(t,e){return t.top-e.top}))},e.prototype.createItem=function(t,e,n,o){var i=this.props,r=i.layouts,a=i.layout,l=i.itemDraggable,s=i.itemSelectable,u=function(t){var e=t.layoutId,n=t.layoutItemId,o=Object(h.getAppConfigAction)().appConfig.layouts[e],i=!1;return o.order.some((function(t){var e;if(!(null===(e=o.content[t].setting)||void 0===e?void 0:e.isFloating))return i=t===n,!0})),i}({layoutId:a.id,layoutItemId:t.id}),c=function(t){for(var e,n=t.layoutId,o=t.layoutItemId,i=Object(h.getAppConfigAction)().appConfig.layouts[n],r=!1,a=i.order.length-1;a>=0;a--){var l=i.order[a];if(!(null===(e=i.content[l].setting)||void 0===e?void 0:e.isFloating)){r=l===o;break}}return r}({layoutId:a.id,layoutItemId:t.id}),d=t.setting;return t.type===g.LayoutItemType.ScreenGroup?Object(g.jsx)(Ia,{key:a.id+"_"+t.id,itemIndex:n,isFirst:u,isLast:c,layoutId:a.id,layoutItemId:t.id,layoutItem:t,theme:this.pageContext.builderTheme,formatMessage:this.pageContext.formatMessage}):(null==d?void 0:d.isFloating)?Object(g.jsx)(Rr,{key:a.id+"_"+t.id,index:n,total:e,builderTheme:this.builderTheme,layouts:r,layoutId:a.id,layoutItemId:t.id,layoutItem:t,gutter:o.gutter,draggable:l,selectable:s,onDropAtBoundary:this.handleDropAtBoundary,formatMessage:this.pageContext.formatMessage}):Object(g.jsx)(Tr,{key:a.id+"_"+t.id,index:n,isFirst:u,isLast:c,builderTheme:this.builderTheme,layouts:r,layoutId:a.id,layoutItemId:t.id,layoutItem:t,gutter:o.gutter,draggable:l,selectable:s,onDropAtBoundary:this.handleDropAtBoundary,formatMessage:this.pageContext.formatMessage})},e.prototype.getActionStyle=function(){return Object(g.css)(La||(La=Ea(["\n      height: 200px;\n      padding: 1rem;\n      pointer-events: none;\n      z-index: 1;\n      .btn-text {\n        line-height: 32px;\n      }\n      .btn {\n        margin-right: 2rem;\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      .action-item {\n        width: 32px;\n      }\n\n      .action-seprator {\n        .sep {\n          width: 65px;\n          height: 1px;\n          background-color: ",";\n        }\n        .btn-text {\n          margin: 0 13px;\n        }\n      }\n    "],["\n      height: 200px;\n      padding: 1rem;\n      pointer-events: none;\n      z-index: 1;\n      .btn-text {\n        line-height: 32px;\n      }\n      .btn {\n        margin-right: 2rem;\n        background: ",";\n        &:hover {\n          background: ",";\n        }\n      }\n      .action-item {\n        width: 32px;\n      }\n\n      .action-seprator {\n        .sep {\n          width: 65px;\n          height: 1px;\n          background-color: ",";\n        }\n        .btn-text {\n          margin: 0 13px;\n        }\n      }\n    "])),this.builderTheme.colors.palette.light[600],this.builderTheme.colors.palette.light[800],this.builderTheme.colors.palette.dark[800])},e.prototype.getStyle=function(){var t=this.pageContext.builderTheme;return Object(g.css)(Na||(Na=Ea(["\n      & > .trail-container > .builder-layout-item {\n        margin-bottom: 10px;\n        border-top: 1px dashed ",";\n        border-bottom: 1px dashed ",";\n        z-index: 0;\n\n        .widget-context-menu {\n          width: 100%;\n          height: auto;\n          top: 0;\n        }\n\n        &.selected, &.floating {\n          z-index: 1;\n        }\n      }\n\n      body:not(.design-mode) & {\n        & > .trail-container > .builder-layout-item {\n          margin-bottom: 0;\n          border-top: none;\n          border-bottom: none;\n        }\n      }\n    "],["\n      & > .trail-container > .builder-layout-item {\n        margin-bottom: 10px;\n        border-top: 1px dashed ",";\n        border-bottom: 1px dashed ",";\n        z-index: 0;\n\n        .widget-context-menu {\n          width: 100%;\n          height: auto;\n          top: 0;\n        }\n\n        &.selected, &.floating {\n          z-index: 1;\n        }\n      }\n\n      body:not(.design-mode) & {\n        & > .trail-container > .builder-layout-item {\n          margin-bottom: 0;\n          border-top: none;\n          border-bottom: none;\n        }\n      }\n    "])),g.polished.rgba(t.colors.palette.dark[600],.6),g.polished.rgba(t.colors.palette.dark[600],.6))},e.prototype.createActions=function(t){var e=this.pageContext,n=e.viewOnly,o=e.rootLayoutId,i=this.props.layout,r=!this.pageContext.isHeader&&!this.pageContext.isFooter;return this.state.isLoadingTemplate||!r||n||i.id!==o?null:Object(g.jsx)(Ra,{pageContext:this.pageContext,blockOnly:t,onPageTemplateSelected:this.handlePageTemplateSelected,onBlockTemplateSelected:this.handleBlockTemplateSelected,onScreenTemplateSelected:this.handleScreenTemplateSelected})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,o=e.className,i=e.isPageItem,r=e.layouts;if(null==n)return null;var a=Object(g.classNames)("layout flow-layout w-100",o),l={display:this.state.isDragover?"block":"none"};return Object(g.jsx)(v.PageContext.Consumer,null,(function(e){var o;t.builderTheme=e.builderTheme,t.maxPageWidth=e.maxWidth,t.pageContext=e;var s=n;r[e.browserSizeMode]!==n.id&&null!=t.layoutTransform&&(s=t.layoutTransform(n,e.mainSizeMode,e.browserSizeMode));var u=null!==(o=s.order)&&void 0!==o?o:[],c=g.lodash.assign({},Ci.b,s.setting),d=_a({position:"relative"},f.styleUtils.toCSSStyle(c.style));return Object(g.jsx)("div",{className:a,ref:function(e){return t.ref=e},css:t.getStyle(),style:d,"data-layoutid":n.id,onClick:t.handleActivate,onMouseDown:t.handleMouseDown},Object(g.jsx)(g.OneByOneAnimation,{"data-layoutid":s.id,enableScroll:!0,className:"trail-container d-flex flex-column align-items-center",css:Object(g.css)(Ba||(Ba=Ea(["\n                  width: 100%;\n                "],["\n                  width: 100%;\n                "])))},!e.viewOnly&&Object(g.jsx)(ke,{css:Va,layouts:t.props.layouts,isRepeat:t.props.isRepeat,highlightDragover:!i,onDragEnter:t.handleDragEnter,onDragLeave:t.handleDragLeave,onDragOver:t.handleDragOver,onDrop:t.handleDrop,onToggleDragoverEffect:t.handleToggleDragoverEffect}),u.length>0&&u.map((function(e,n){return t.createItem(s.content[e],u.length,n,c)}))),!t.state.isLoadingTemplate&&!e.viewOnly&&0===u.length&&n.id===e.rootLayoutId&&t.createActions(!1),u.length>0&&t.createActions(!0),t.state.isLoadingTemplate&&Object(g.jsx)(f.Loading,{type:f.LoadingType.Primary}),Object(g.jsx)("canvas",{css:Fa,style:l,ref:function(e){return t.canvasRef=e}}))}))},e}(g.React.PureComponent),Wa=g.ReactRedux.connect(v.utils.mapStateToLayoutProps)(Ha),Ga=n(9),Ua=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(t){r(t)}}function l(t){try{s(o.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}s((o=o.apply(t,e||[])).next())}))},Ya=function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};function Za(t,e,n){return Ua(this,void 0,Promise,(function(){var o,i,r,a,l,s,u=this;return Ya(this,(function(c){switch(c.label){case 0:return o=e.layoutInfo,i=Object(h.getAppConfigAction)(t),o&&o.layoutId&&o.layoutItemId?(a=t.layouts[o.layoutId].content[o.layoutItemId],r=a.set("id",""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1)).without("bbox"),[4,Promise.resolve({newLayoutItem:r,updatedAppConfig:t})]):[3,2];case 1:return[2,c.sent()];case 2:return e.itemType!==g.LayoutItemType.Section?[3,4]:(l=e.id?e.id:i.createSection().id,r=Object(g.Immutable)({sectionId:l,id:""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),type:g.LayoutItemType.Section}),[4,Promise.resolve({newLayoutItem:r,updatedAppConfig:i.appConfig})]);case 3:return[2,c.sent()];case 4:return e.id?(r=Object(g.Immutable)({id:""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),type:g.LayoutItemType.Widget,widgetId:e.id}),[4,Promise.resolve({newLayoutItem:r,updatedAppConfig:t})]):[3,6];case 5:return[2,c.sent()];case 6:return s={uri:e.uri},[4,g.WidgetManager.getInstance().handleNewWidgetJson(s).then((function(e){return Ua(u,void 0,void 0,(function(){var o;return Ya(this,(function(a){switch(a.label){case 0:return o=g.appConfigUtils.getUniqueId(i.appConfig,"widget"),e.id=o,i.createWidget(Object(g.Immutable)(e)),r=Object(g.Immutable)({id:""+(v.utils.getMaximumId(t.layouts[n.layoutId])+1),type:g.LayoutItemType.Widget,widgetId:e.id}),[4,Promise.resolve({newLayoutItem:r,updatedAppConfig:i.appConfig})];case 1:return[2,a.sent()]}}))}))}))];case 7:return[2,c.sent()]}}))}))}function Xa(t){var e=parseFloat(t);return v.utils.isPercentage(t)?e/2+"%":e/2+"px"}function Ja(t,e,n,o,i){return Ua(this,void 0,Promise,(function(){var r,a=this;return Ya(this,(function(l){switch(l.label){case 0:return r=e.layoutInfo,[4,Za(t,e,n).then((function(t){var e=t.newLayoutItem,l=t.updatedAppConfig;return Ua(a,void 0,void 0,(function(){var t,a,s,u,c,d;return Ya(this,(function(p){switch(p.label){case 0:return t=n.layoutId,a=Object(h.getAppConfigAction)(l),s=e,o?(u=a.addItemIntoLayout(t,s,0),(c=l.layouts[t].content[o]).parentId?(d=l.layouts[t].content[c.parentId]).direction===Ga.b.Horizontal?a="left"===i||"right"===i?qa(a,t,u.layoutItemId,o,i):Qa(a,t,u.layoutItemId,o,i):d.direction===Ga.b.Vertical&&(a="top"===i||"bottom"===i?qa(a,t,u.layoutItemId,o,i):Qa(a,t,u.layoutItemId,o,i)):(a=Qa(a,t,u.layoutItemId,o,i)).editLayoutSetting({layoutId:t},{rootItemId:a.appConfig.layouts[t].content[o].parentId})):(s=s.set("bbox",{width:"100%",height:"100%"}),u=a.addItemIntoLayout(t,s,0),a.editLayoutSetting(n,{rootItemId:s.id})),r&&r.layoutId&&r.layoutItemId&&(a.setLayoutItemToPending(u,!1),a.clearRedundantLayout(r)),[4,Promise.resolve({layoutInfo:u,updatedAppConfig:a.appConfig})];case 1:return[2,p.sent()]}}))}))}))];case 1:return[2,l.sent()]}}))}))}function qa(t,e,n,o,i){var r=t.appConfig,a=r.layouts[e].content[o],l=r.layouts[e].content[a.parentId],s=[].concat(l.items);t.updateLayoutItem({layoutId:e,layoutItemId:n},"parentId",a.parentId);var u=l.items.indexOf(o);return"left"===i||"top"===i?(0===u?s.unshift(n):s.splice(u,0,n),t.updateLayoutItem({layoutId:e,layoutItemId:a.parentId},"items",s)):(s.splice(u+1,0,n),t.updateLayoutItem({layoutId:e,layoutItemId:a.parentId},"items",s)),"left"===i||"right"===i?t.editLayoutItemBBox({layoutId:e,layoutItemId:o},{height:a.bbox.height,width:Xa(a.bbox.width)}).editLayoutItemBBox({layoutId:e,layoutItemId:n},{height:a.bbox.height,width:Xa(a.bbox.width)}):t.editLayoutItemBBox({layoutId:e,layoutItemId:o},{height:Xa(a.bbox.height),width:a.bbox.width}).editLayoutItemBBox({layoutId:e,layoutItemId:n},{height:Xa(a.bbox.height),width:a.bbox.width}),t}function Qa(t,e,n,o,i){var r=t.appConfig,a=r.layouts[e].content[o],l=Object(g.Immutable)({id:""+(v.utils.getMaximumId(r.layouts[e])+1),items:"left"===i||"top"===i?[n,o]:[o,n],direction:"left"===i||"right"===i?Ga.b.Horizontal:Ga.b.Vertical,bbox:a.bbox});if(a.parentId){l=l.set("parentId",a.parentId);var s=r.layouts[e].content[a.parentId],u=[].concat(s.items),c=s.items.indexOf(o);u.splice(c,1,l.id),t.updateLayoutItem({layoutId:e,layoutItemId:a.parentId},"items",u)}var d=t.addItemIntoLayout(e,l,0);return t.updateLayoutItem({layoutId:e,layoutItemId:o},"parentId",d.layoutItemId).updateLayoutItem({layoutId:e,layoutItemId:n},"parentId",d.layoutItemId),"left"===i||"right"===i?t.editLayoutItemBBox({layoutId:e,layoutItemId:o},{height:"100%",width:"50%"}).editLayoutItemBBox({layoutId:e,layoutItemId:n},{height:"100%",width:"50%"}):t.editLayoutItemBBox({layoutId:e,layoutItemId:o},{height:"50%",width:"100%"}).editLayoutItemBBox({layoutId:e,layoutItemId:n},{height:"50%",width:"100%"}),t}function Ka(t,e,n,o,i,r,a){var l=Object(h.getAppConfigAction)(),s=l.appConfig.layouts[o],u=s.content[i],c=s.content[r];if(a===Ga.b.Horizontal){var d=$a(u.bbox.width,t,n.width),p=$a(c.bbox.width,-t,n.width);l.editLayoutItemBBox({layoutId:o,layoutItemId:i},{width:d,height:u.bbox.height}).editLayoutItemBBox({layoutId:o,layoutItemId:r},{width:p,height:c.bbox.height})}else{var g=$a(u.bbox.height,e,n.height),f=$a(c.bbox.height,-e,n.height);l.editLayoutItemBBox({layoutId:o,layoutItemId:i},{width:u.bbox.width,height:g}).editLayoutItemBBox({layoutId:o,layoutItemId:r},{width:c.bbox.width,height:f})}l.exec()}function $a(t,e,n){return v.utils.isPercentage(t)?(parseFloat(t)+100*e/n).toFixed(1)+"%":parseFloat(t)+e+"px"}var tl,el,nl,ol,il=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},rl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),al=Object(g.css)(tl||(tl=il(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: ",";\n  display: flex;\n"],["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: ",";\n  display: flex;\n"])),v.LayoutZIndex.BoundaryDropArea),ll=function(t){function e(e){var n,o=t.call(this,e)||this;return o.onItemDragStart=function(){var t=o.props,e=t.layoutId,n=t.layoutItemId,i=t.onItemDragStart,r=document.querySelector('div.grid-layout[data-layoutid="'+e+'"] div[data-layoutitemid="'+n+'"]'),a=r.getBoundingClientRect();r.style.position="fixed",r.style.left=a.left+"px",r.style.top=a.top+"px",r.style.width=a.width+"px",r.style.height=a.height+"px",i&&i(n)},o.onItemDragEnd=function(){var t=o.props,e=t.layoutId,n=t.layoutItemId,i=t.onItemDragEnd,r=document.querySelector('div.grid-layout[data-layoutid="'+e+'"] div[data-layoutitemid="'+n+'"]');r&&(r.style.position="static",r.style.left="auto",r.style.top="auto"),i&&i(n)},o.onDragOver=function(t,e,n,i,r,a){r<.3*n.width?o.setState({dragoverSide:"left"}):r>.7*n.width?o.setState({dragoverSide:"right"}):a<.5*n.height?o.setState({dragoverSide:"top"}):o.setState({dragoverSide:"bottom"})},o.onDrop=function(t,e,n,i,r){var a=o.props,l=a.layoutId,s=a.layoutItemId,u={layoutId:l};Ja(Object(h.getAppConfigAction)().appConfig,t,u,s,o.state.dragoverSide).then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(n,e))})),o.setState({dragoverSide:null})},o.fakeLayouts=Object(g.Immutable)(((n={})[g.BrowserSizeMode.Large]=o.props.layoutId+"_"+o.props.layoutItemId+"_tlarge",n[g.BrowserSizeMode.Medium]=o.props.layoutId+"_"+o.props.layoutItemId+"_tmedium",n[g.BrowserSizeMode.Small]=o.props.layoutId+"_"+o.props.layoutItemId+"_tsmall",n)),o.state={dragoverSide:null},v.utils.autoBindHandlers(o,["onDragStart","onDragOver","onDrop"]),o}return rl(e,t),e.prototype.hasEmbedLayout=function(){var t=this.props.layoutItem;return t.type!==g.LayoutItemType.Widget||!t.widgetId||(v.utils.isWidgetHasEmbeddedLayout(t.widgetId,v.utils.getAppConfig())||!v.utils.isFunctionalWidget(t.widgetId,v.utils.getAppConfig()))},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutId,o=e.layoutItem;if(!o)return null;var i=Object(g.css)(el||(el=il(["\n      position: relative;\n      width: ",";\n      height: ",";\n      flex-shrink: 1;\n      flex-grow: 1;\n    "],["\n      position: relative;\n      width: ",";\n      height: ",";\n      flex-shrink: 1;\n      flex-grow: 1;\n    "])),v.utils.getValueOfBBox(o.bbox,"width"),v.utils.getValueOfBBox(o.bbox,"height"));return Object(g.jsx)(v.PageContext.Consumer,null,(function(e){var r=t.state.dragoverSide,a=Object(g.css)(nl||(nl=il(["\n          position: absolute;\n          transition: 200ms;\n          left: ",";\n          right: ",";\n          top: ",";\n          bottom: ",";\n          width: ",";\n          height: ",";\n          background: ",";\n        "],["\n          position: absolute;\n          transition: 200ms;\n          left: ",";\n          right: ",";\n          top: ",";\n          bottom: ",";\n          width: ",";\n          height: ",";\n          background: ",";\n        "])),"right"===r?"50%":0,"left"===r?"50%":0,"bottom"===r?"50%":0,"top"===r?"50%":0,"top"===r||"bottom"===r?"100%":r?"50%":0,"left"===r||"right"===r?"100%":r?"50%":0,g.polished.rgba(e.builderTheme.colors.palette.primary[700],.6));return Object(g.jsx)(mn,{css:i,layoutId:n,layoutItemId:o.id,resizable:!1,onDragStart:t.onItemDragStart,onDragEnd:t.onItemDragEnd,onClick:t.props.onClick},!t.hasEmbedLayout()&&Object(g.jsx)(ke,{css:al,layouts:t.fakeLayouts,highlightDragover:!0,onDragOver:t.onDragOver,onDrop:t.onDrop},Object(g.jsx)("div",{css:a})))}))},e}(g.React.PureComponent),sl=g.ReactRedux.connect(v.utils.mapStateToLayoutItemProps)(ll),ul=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cl=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},dl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bindSplitHandler=function(){var t,n,o,i,r,a,l,s,u,c;e.ref&&!e.interactable&&(e.interactable=Object(m.interact)(e.ref).origin("parent").draggable({inertia:!1,autoScroll:!1,modifiers:[m.interact.modifiers.restrict({restriction:"parent"})],lockAxis:e.props.direction===Ga.b.Horizontal?"x":"y",onstart:function(d){d.stopPropagation(),t=0,n=0;var p=e.props,g=p.layoutId,h=p.prevItemId,f=p.nextItemId;o=document.querySelector('div.grid-layout[data-layoutid="'+g+'"] div[data-layoutitemid="'+h+'"]'),r=o.style.width,a=o.style.height,i=o.getBoundingClientRect(),l=document.querySelector('div.grid-layout[data-layoutid="'+g+'"] div[data-layoutitemid="'+f+'"]'),u=l.style.width,c=l.style.height,s=l.getBoundingClientRect()},onmove:function(r){r.stopPropagation(),t+=r.dx,n+=r.dy;var a=e.restrictResizing(i,s,t,n),u=a.x,c=a.y;e.props.direction===Ga.b.Horizontal?(o.style.width=i.width+u+"px",l.style.width=s.width-u+"px"):(o.style.height=i.height+c+"px",l.style.height=s.height-c+"px")},onend:function(d){d.stopPropagation(),t+=d.dx,n+=d.dy;var p=e.restrictResizing(i,s,t,n),g=p.x,h=p.y;o.style.width=r,l.style.width=u,o.style.height=a,l.style.height=c,e.props.onResizeEnd(g,h,e.props.prevItemId,e.props.nextItemId)}}))},e}return ul(e,t),e.prototype.componentDidMount=function(){this.bindSplitHandler()},e.prototype.restrictResizing=function(t,e,n,o){var i=n,r=o;return this.props.direction===Ga.b.Horizontal?(n<0&&(i=t.width>32?-Math.min(Math.abs(n),t.width-32):0),n>0&&(i=e.width>32?Math.min(n,e.width-32):0)):(o<0&&(r=t.height>32?-Math.min(Math.abs(o),t.height-32):0),o>0&&(r=e.height>32?Math.min(o,e.height-32):0)),{x:i,y:r}},e.prototype.getStyle=function(t){var e=this.props,n=e.direction,o=e.size,i=e.color,r=o+"px";return Object(g.css)(ol||(ol=cl(["\n      width: ",";\n      height: ",";\n      background: ",";\n      position: relative;\n      z-index: ",";\n\n      &:hover {\n        background: ",";\n      }\n\n      .horizontal-splitter {\n        width: 15px;\n        height: 100%;\n        position: absolute;\n        left: -5px;\n        cursor: ew-resize;\n      }\n\n      .vertical-splitter {\n        width: 100%;\n        height: 15px;\n        position: absolute;\n        top: -5px;\n        cursor: row-resize;\n      }\n    "],["\n      width: ",";\n      height: ",";\n      background: ",";\n      position: relative;\n      z-index: ",";\n\n      &:hover {\n        background: ",";\n      }\n\n      .horizontal-splitter {\n        width: 15px;\n        height: 100%;\n        position: absolute;\n        left: -5px;\n        cursor: ew-resize;\n      }\n\n      .vertical-splitter {\n        width: 100%;\n        height: 15px;\n        position: absolute;\n        top: -5px;\n        cursor: row-resize;\n      }\n    "])),n===Ga.b.Vertical?"100%":r,n===Ga.b.Vertical?r:"100%",i,v.LayoutZIndex.HandlerTools,t.colors.palette.dark[300])},e.prototype.render=function(){var t=this,e=this.props.direction;return Object(g.jsx)(v.PageContext.Consumer,null,(function(n){return Object(g.jsx)("div",{ref:function(e){return t.ref=e},css:t.getStyle(n.builderTheme)},Object(g.jsx)("div",{className:Object(g.classNames)({"horizontal-splitter":e===Ga.b.Horizontal,"vertical-splitter":e===Ga.b.Vertical})}))}))},e}(g.React.PureComponent),pl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={draggingItemId:null},e.onResizeEnd=function(t,n,o,i){Ka(t,n,e.ref.getBoundingClientRect(),e.props.layoutId,o,i,e.props.layoutItem.direction)},e.onItemDragStart=function(t){e.setState({draggingItemId:t})},e.onItemDragEnd=function(){e.setState({draggingItemId:null})},e}return pl(e,t),e.prototype.createItems=function(t,e){var n=this,o=this.props,i=o.layoutId,r=o.layoutItem,a=o.splitterColor,l=o.splitterSize,s=[];return t.forEach((function(o,u){var c=e.includes(o)?bl:sl;s.push(g.React.createElement(c,{key:o,layoutId:i,layoutItemId:o,onItemDragStart:n.onItemDragStart,onItemDragEnd:n.onItemDragEnd})),u!==t.length-1&&o!==n.state.draggingItemId&&t[u+1]!==n.state.draggingItemId&&s.push(g.React.createElement(dl,{key:o+"_splitter",layoutId:i,direction:r.direction,prevItemId:t[u],nextItemId:t[u+1],onResizeEnd:n.onResizeEnd,size:l,color:a}))})),s},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutItem,o=e.subContainerIds;if(!n)return null;var i=n.items&&n.items.length>0?n.items:[n.id],r=o.split(","),a=Object(g.classNames)("grid-container d-flex justify-content-start",{"flex-column":n.direction===Ga.b.Vertical}),l={width:n.bbox.width,height:n.bbox.height,flexShrink:1,flexGrow:1};return g.React.createElement("div",{className:a,"data-layoutitemid":n.id,"data-layoutid":this.props.layoutId,style:l,ref:function(e){return t.ref=e}},this.createItems(i,r))},e}(g.React.PureComponent);var hl,fl,yl,vl,ml,bl=g.ReactRedux.connect((function(t,e){var n=e.layoutId,o=e.layoutItemId,i=t.appConfig.layouts[n],r=i.content[o],a=[];return r&&r.items&&r.items.forEach((function(t){var e=i.content[t];e&&e.items&&a.push(t)})),{layoutItem:r,subContainerIds:a.join(",")}}))(gl),xl=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Il=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wl=function(){return(wl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},jl=Object(g.css)(hl||(hl=xl(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n  display: flex;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n  display: flex;\n"]))),Ol=function(t){function e(e){var n=t.call(this,e)||this;return v.utils.autoBindHandlers(n,["handleDrop","handleDragOver","handleDragEnter","handleDragLeave"]),n}return Il(e,t),e.prototype.handleDragOver=function(){},e.prototype.handleDragEnter=function(){},e.prototype.handleDragLeave=function(){},e.prototype.handleDrop=function(t,e,n){var o={layoutId:this.props.layout.id},i=Object(h.getAppConfigAction)();Ja(i.appConfig,t,o,null,"top").then((function(t){var e=t.layoutInfo,n=t.updatedAppConfig;(i=Object(h.getAppConfigAction)(n)).editLayoutItemBBox(e,{width:"100%",height:"100%"}),Object(g.getAppStore)().dispatch(g.appActions.layoutChanged(i.appConfig,e))})).finally(null)},e.prototype.render=function(){var t,e,n,o,i=this,r=this.props,a=r.layout,l=r.className,s=null===(t=a.setting)||void 0===t?void 0:t.style,u=null===(e=a.setting)||void 0===e?void 0:e.rootItemId,c=Object.keys(null!==(n=a.content)&&void 0!==n?n:{}).length,d=g.lodash.assign({},Ga.a,null===(o=a.setting)||void 0===o?void 0:o.splitter);return Object(g.jsx)(v.PageContext.Consumer,null,(function(t){var e=wl(wl({position:"relative"},f.styleUtils.toCSSStyle(s)),{overflow:"hidden"}),n=Object(g.classNames)("layout grid-layout d-flex w-100",l);return Object(g.jsx)("div",{className:n,style:e,"data-layoutid":a.id},0===c&&Object(g.jsx)(ke,{css:jl,layouts:i.props.layouts,highlightDragover:!0,onDragEnter:i.handleDragEnter,onDragLeave:i.handleDragLeave,onDragOver:i.handleDragOver,onDrop:i.handleDrop},Object(g.jsx)("div",{css:Object(g.css)(fl||(fl=xl(["\n                    width: 100%;\n                    background: ","\n                  "],["\n                    width: 100%;\n                    background: ","\n                  "])),t.builderTheme.colors.palette.primary[700])})),null!=u&&Object(g.jsx)(bl,{layoutId:a.id,layoutItemId:u,splitterSize:d.size,splitterColor:d.color}),null==u&&i.props.children)}))},e}(g.React.PureComponent),Sl=g.ReactRedux.connect(v.utils.mapStateToLayoutProps)(Ol),Cl=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Pl=Object(g.css)(yl||(yl=Cl(["\n  .resize-handler {\n    height: ","px;\n    width: 100%;\n    cursor: ns-resize;\n    position: absolute;\n  }\n"],["\n  .resize-handler {\n    height: ","px;\n    width: 100%;\n    cursor: ns-resize;\n    position: absolute;\n  }\n"])),16),Tl=Object(g.css)(vl||(vl=Cl(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  bottom: 0;\n"],["\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  bottom: 0;\n"])));function Al(t){return Object(g.css)(ml||(ml=Cl(["\n    .edit-btn {\n      background: ",";\n      color: ",";\n      border-radius: 2px;\n      &:hover {\n        background: ",";\n        color: ",";\n      }\n    }\n  "],["\n    .edit-btn {\n      background: ",";\n      color: ",";\n      border-radius: 2px;\n      &:hover {\n        background: ",";\n        color: ",";\n      }\n    }\n  "])),t.colors.primary,t.colors.palette.dark[800],t.colors.palette.primary[600],t.colors.black)}function Ml(){Object(g.getAppStore)().dispatch(g.appActions.activePagePartChanged(g.PagePart.Header))}function Rl(){Object(g.getAppStore)().dispatch(g.appActions.activePagePartChanged(g.PagePart.Footer))}function zl(){Object(g.getAppStore)().dispatch(g.appActions.activePagePartChanged(g.PagePart.Body))}function kl(){var t=Object(g.getAppStore)().getState(),e=t.appConfig.header.layout;return v.searchUtils.findLayoutId(e,t.browserSizeMode,t.appConfig.mainSizeMode)}function Ll(){var t=Object(g.getAppStore)().getState(),e=t.appConfig.footer.layout;return v.searchUtils.findLayoutId(e,t.browserSizeMode,t.appConfig.mainSizeMode)}function Nl(t){var e,n=Object(g.getAppStore)().getState(),o=null===(e=n.appConfig.dialogs[t])||void 0===e?void 0:e.layout;return v.searchUtils.findLayoutId(o,n.browserSizeMode,n.appConfig.mainSizeMode)}function Bl(t){return Object.keys(t).find((function(e){return t[e]}))}var El,Dl,_l,Vl,Fl,Hl=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Wl=function(){return(Wl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Gl=n(43);function Ul(t,e,n,o,i){return Object(g.css)(El||(El=Hl(["\n    ",";\n    ",";\n    position: relative;\n    z-index: auto;\n    top: 0;\n    display: ",";\n    width: 100%;\n    height: auto;\n    min-height: ","px;\n    overflow: hidden;\n    background-color: ",";\n    background-image: ",";\n    background-position: ",";\n    color: ",";\n    border-bottom: 1px dashed ",";\n    flex: 0 0 auto;\n\n    &:hover {\n      .edit-mask {\n        display: flex;\n      }\n    }\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      > .resize-handler {\n        display: none !important;\n      }\n    }\n    body:not(.design-mode) & {\n      position: ",";\n      z-index: ",";\n\n      .edit-mask, .edit-mask-all {\n        display: none !important;\n      }\n    }\n  "],["\n    ",";\n    ",";\n    position: relative;\n    z-index: auto;\n    top: 0;\n    display: ",";\n    width: 100%;\n    height: auto;\n    min-height: ","px;\n    overflow: hidden;\n    background-color: ",";\n    background-image: ",";\n    background-position: ",";\n    color: ",";\n    border-bottom: 1px dashed ",";\n    flex: 0 0 auto;\n\n    &:hover {\n      .edit-mask {\n        display: flex;\n      }\n    }\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      > .resize-handler {\n        display: none !important;\n      }\n    }\n    body:not(.design-mode) & {\n      position: ",";\n      z-index: ",";\n\n      .edit-mask, .edit-mask-all {\n        display: none !important;\n      }\n    }\n  "])),Pl,Al(o),n?"flex":"none",parseFloat(e),t.backgroundColor||i.header.bg||"transparent",t.backgroundIMage,t.backgroundPosition,i.header.color,g.polished.rgba(o.colors.white,.12),t.sticky?"sticky":"relative",t.sticky?2:"auto")}function Yl(t){var e=t.header,n=t.headerVisible,o=t.browserSizeMode,i=t.mainSizeMode,r=t.activePagePart,a=t.pageContext,l=g.React.useRef(null),s=e.height[o]||e.height[i]||75,u=e.layout,c=!u[o],d=a.builderTheme;g.React.useEffect((function(){var t;return l.current&&(t=function(t,e){var n,o;return Object(m.interact)(t).origin("parent").resizable({inertia:!1,edges:{bottom:".resize-handler"},onstart:function(e){e.stopPropagation(),n=0,o=t.getBoundingClientRect().height,t.style.minHeight="0px"},onmove:function(e){e.stopPropagation();var i=e.deltaRect;n+=i.height,t.style.height=o+n+"px"},onend:function(i){i.stopPropagation();var r=Object(h.getAppConfigAction)().appConfig.header;t.style.height=null,t.style.minHeight=null,Object(h.getAppConfigAction)().editHeader(r.setIn(["height",e],Math.round(o+n))).exec()}})}(l.current,o)),function(){t&&t.unset()}}),[]);var p=kl(),y=g.React.useMemo((function(){return Wl(Wl({},a),{isHeader:!0,rootLayoutId:p,viewOnly:c||r!==g.PagePart.Header})}),[a,p,c,r]);return Object(g.jsx)(v.PageContext.Provider,{value:y},Object(g.jsx)("div",{className:"header",css:Ul(e,s,n,a.builderTheme,a.theme),ref:function(t){return l.current=t}},Object(g.jsx)("div",{className:"w-100 h-100",css:Object(g.css)(Dl||(Dl=Hl(["\n            overflow: auto;\n            display: flex;\n            position: relative;\n            z-index: 0;\n            min-height: ","px;\n          "],["\n            overflow: auto;\n            display: flex;\n            position: relative;\n            z-index: 0;\n            min-height: ","px;\n          "])),parseFloat(s))},Object(g.jsx)(nn,{layouts:u,isPageItem:!0,visible:n})),!c&&Object(g.jsx)("span",{className:"resize-handler",css:Object(g.css)(_l||(_l=Hl(["\n              bottom: ","px;\n              z-index: 1;\n            "],["\n              bottom: ","px;\n              z-index: 1;\n            "])),-8)}),r!==g.PagePart.Header&&!c&&Object(g.jsx)("div",{className:"edit-mask-all",css:Object(g.css)(Vl||(Vl=Hl(["\n              ",";\n              background: ",";\n              z-index: 1;\n            "],["\n              ",";\n              background: ",";\n              z-index: 1;\n            "])),Tl,r===g.PagePart.Body?"transparent":g.polished.rgba(d.colors.palette.light[400],.6)),onClick:zl}),r===g.PagePart.Body&&(!c||o===i)&&Object(g.jsx)("div",{className:"edit-mask justify-content-center align-items-center",css:Object(g.css)(Fl||(Fl=Hl(["\n              ",";\n              background: ",";\n              z-index: 1;\n              display: none;\n            "],["\n              ",";\n              background: ",";\n              z-index: 1;\n              display: none;\n            "])),Tl,g.polished.rgba(d.colors.palette.light[400],.6))},Object(g.jsx)(f.Button,{className:"edit-btn btn-large border-0",onClick:Ml},Object(g.jsx)(f.Icon,{icon:Gl,width:16,height:16}),a.formatMessage("editHeader")))))}var Zl,Xl,Jl,ql,Ql,Kl=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},$l=function(){return($l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ts=n(43);function es(t,e,n,o,i){return Object(g.css)(Zl||(Zl=Kl(["\n    ",";\n    ",";\n    display: ",";\n    position: relative;\n    width: 100%;\n    height: auto;\n    min-height: ","px;\n    overflow: hidden;\n    background-color: ",";\n    background-image: ",";\n    background-position: ",";\n    color: ",";\n    border-top: 1px dashed ",";\n    z-index: 0;\n\n    &:hover {\n      .edit-mask {\n        display: flex;\n      }\n    }\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      > .resize-handler {\n        display: none !important;\n      }\n    }\n    body:not(.design-mode) & {\n      .edit-mask, .edit-mask-all {\n        display: none !important;\n      }\n    }\n  "],["\n    ",";\n    ",";\n    display: ",";\n    position: relative;\n    width: 100%;\n    height: auto;\n    min-height: ","px;\n    overflow: hidden;\n    background-color: ",";\n    background-image: ",";\n    background-position: ",";\n    color: ",";\n    border-top: 1px dashed ",";\n    z-index: 0;\n\n    &:hover {\n      .edit-mask {\n        display: flex;\n      }\n    }\n\n    body.lock-layout &,\n    body:not(.design-mode) & {\n      > .resize-handler {\n        display: none !important;\n      }\n    }\n    body:not(.design-mode) & {\n      .edit-mask, .edit-mask-all {\n        display: none !important;\n      }\n    }\n  "])),Pl,Al(o),n?"flex":"none",parseFloat(e),t.backgroundColor||i.footer.bg||"transparent",t.backgroundIMage,t.backgroundPosition,i.footer.color,g.polished.rgba(o.colors.white,.12))}function ns(t){var e=t.footer,n=t.footerVisible,o=t.browserSizeMode,i=t.mainSizeMode,r=t.activePagePart,a=t.pageContext,l=g.React.useRef(null),s=e.height[o]||e.height[i]||75,u=e.layout,c=!u[o],d=a.builderTheme;g.React.useEffect((function(){var t;return l.current&&(t=function(t,e){var n,o;return Object(m.interact)(t).origin("parent").resizable({inertia:!1,edges:{top:".resize-handler"},onstart:function(e){e.stopPropagation(),n=0,o=t.getBoundingClientRect().height},onmove:function(e){e.stopPropagation();var i=e.deltaRect;n+=i.height,t.style.height=o+n+"px"},onend:function(i){i.stopPropagation();var r=Object(h.getAppConfigAction)().appConfig.footer;t.style.height=null,Object(h.getAppConfigAction)().editFooter(r.setIn(["height",e],Math.round(o+n))).exec()}})}(l.current,o)),function(){t&&t.unset()}}),[]);var p=Ll(),y=g.React.useMemo((function(){return $l($l({},a),{isFooter:!0,rootLayoutId:p,viewOnly:c||r!==g.PagePart.Footer})}),[a,p,c,r]);return Object(g.jsx)(v.PageContext.Provider,{value:y},Object(g.jsx)("div",{className:"footer",css:es(e,s,n,a.builderTheme,a.theme),ref:function(t){return l.current=t}},!c&&Object(g.jsx)("span",{className:"resize-handler",css:Object(g.css)(Xl||(Xl=Kl(["\n              top: ","px;\n              z-index: 1;\n            "],["\n              top: ","px;\n              z-index: 1;\n            "])),-8)}),Object(g.jsx)("div",{className:"w-100 h-100",css:Object(g.css)(Jl||(Jl=Kl(["\n            overflow: auto;\n            display: flex;\n            position: relative;\n            z-index: 0;\n            min-height: ","px;\n          "],["\n            overflow: auto;\n            display: flex;\n            position: relative;\n            z-index: 0;\n            min-height: ","px;\n          "])),parseFloat(s))},Object(g.jsx)(nn,{layouts:u,isPageItem:!0,visible:n})),r!==g.PagePart.Footer&&!c&&Object(g.jsx)("div",{className:"edit-mask-all",css:Object(g.css)(ql||(ql=Kl(["\n              ",";\n              background: ",";\n              z-index: 1;\n            "],["\n              ",";\n              background: ",";\n              z-index: 1;\n            "])),Tl,r===g.PagePart.Body?"transparent":g.polished.rgba(d.colors.palette.light[400],.6)),onClick:zl}),r===g.PagePart.Body&&(!c||o===i)&&Object(g.jsx)("div",{className:"edit-mask justify-content-center align-items-center",css:Object(g.css)(Ql||(Ql=Kl(["\n              ",";\n              background: ",";\n              z-index: 1;\n              display: none;\n            "],["\n              ",";\n              background: ",";\n              z-index: 1;\n              display: none;\n            "])),Tl,g.polished.rgba(d.colors.palette.light[400],.6))},Object(g.jsx)(f.Button,{className:"edit-btn btn-large border-0",onClick:Rl},Object(g.jsx)(f.Icon,{icon:ts,width:16,height:16}),a.formatMessage("editFooter")))))}var os,is,rs,as=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ls=function(){return(ls=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ss(t){var e=t.pageJson,n=t.visible,o=t.renderedPageId,i=t.browserSizeMode,r=t.activePagePart,a=t.pageContext,l=g.React.useRef(!1),s=g.React.useState(Symbol("init")),u=s[0],c=s[1],d=g.ReactRedux.useSelector((function(t){return function(t,e){var n=t.appRuntimeInfo.animationPreview;return(null==n?void 0:n.pageId)===e?n.id:null}(t,e.id)})),p=g.React.useRef(),h=d&&d!==p.current,f=e.layout,y=function(){if(!l.current)return l.current=!0,u;return d}(),m=e.oneByOneEffect&&e.oneByOneEffect.type!==g.AnimationType.None?e.oneByOneEffect:null,b=g.ReactRedux.useSelector((function(t){var e;return null===m||(null===(e=t.appRuntimeInfo)||void 0===e?void 0:e.appMode)===g.AppMode.Design})),x=g.ReactRedux.useSelector((function(t){return null===m?null:t.browserSizeMode})),I=g.React.useRef(m),w=g.React.useRef(x),j=m?!n:null;g.React.useEffect((function(){p.current=d,I.current=m})),g.React.useEffect((function(){b||(c(Symbol("play page")),l.current=!1)}),[b]),g.React.useEffect((function(){b||w.current===x||(c(Symbol("autoplay when size mode changed")),l.current=!1),w.current=x}),[x,b]),g.React.useEffect((function(){I.current&&(c(Symbol("autoplay when switching to visible")),l.current=!1)}),[n]);var O,S=!f[i];e.mode!==g.PageMode.FitWindow&&e.maxWidth>0&&(O=e.maxWidth);var C=g.React.useMemo((function(){var t,n=Object(g.getAppStore)().getState();return e.layout&&(t=v.searchUtils.findLayoutId(e.layout,n.browserSizeMode,n.appConfig.mainSizeMode)),ls(ls({},a),{maxWidth:O,viewOnly:S,rootLayoutId:t,pageId:o})}),[a,S,O,o,e.layout]),P=g.React.useMemo((function(){var t=!b||h?m:null;return{trigger:g.AnimationTriggerType.Manual,setting:t,inheritedOneByOneSetting:null,playId:null===t?null:y,depth:0,revert:j}}),[b,j,y,h,m]),T=g.React.useCallback((function(){return Object(g.css)(os||(os=as(["\n      display: ",";\n      position: relative;\n      background-color: ",";\n      z-index: 1;\n      flex: 1 0 auto;\n\n      body:not(.design-mode) & {\n        .edit-mask {\n          display: none !important;\n        }\n      }\n    "],["\n      display: ",";\n      position: relative;\n      background-color: ",";\n      z-index: 1;\n      flex: 1 0 auto;\n\n      body:not(.design-mode) & {\n        .edit-mask {\n          display: none !important;\n        }\n      }\n    "])),n?"flex":"none",e.bodyBackgroundColor||"transparent")}),[n,e.bodyBackgroundColor]);if(f)return Object(g.jsx)(v.PageContext.Provider,{key:e.id,value:C},Object(g.jsx)(v.PageVisibilityContext.Provider,{value:n},Object(g.jsx)("div",{id:e.id,"data-pageid":e.id,className:"page",css:T()},Object(g.jsx)(g.AnimationContext.Provider,{value:P},Object(g.jsx)(nn,{layouts:f,isPageItem:!0,visible:n,className:"w-100",css:Object(g.css)(is||(is=as(["\n                margin: 0 auto;\n                background-color: transparent;\n                z-index: 0;\n              "],["\n                margin: 0 auto;\n                background-color: transparent;\n                z-index: 0;\n              "])))})),r!==g.PagePart.Body&&Object(g.jsx)("div",{className:"edit-mask",css:Object(g.css)(rs||(rs=as(["\n                ",";\n                background: ",";\n                z-index: 1;\n              "],["\n                ",";\n                background: ",";\n                z-index: 1;\n              "])),Tl,g.polished.rgba(a.theme.colors.palette.dark[800],.6)),onClick:zl}))))}var us=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cs=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ds=function(){return(ds=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object(v.registerLayoutBuilder)(g.LayoutType.FixedLayout,Co),Object(v.registerLayoutBuilder)(g.LayoutType.FlowLayout,Wa),Object(v.registerLayoutBuilder)(g.LayoutType.GridLayout,Sl),Object(v.registerLayoutBuilder)(g.LayoutType.ColumnLayout,ei);var ps,gs=function(t){function e(e){var n=t.call(this,e)||this;return n.startPaste=function(){var t,e=null===(t=Object(g.getAppStore)().getState().appRuntimeInfo)||void 0===t?void 0:t.clipboard,o=n.props,i=o.activePagePart,r=o.pageStatus,a=o.currentDialogId,l=o.dialogs;if(e){var s=void 0;if(a&&l[a])s=Nl(a);else if(i===g.PagePart.Header)s=kl();else if(i===g.PagePart.Footer)s=Ll();else{s=function(t){var e,n=Object(g.getAppStore)().getState(),o=null===(e=n.appConfig.pages[t])||void 0===e?void 0:e.layout;return o?v.searchUtils.findLayoutId(o,n.browserSizeMode,n.appConfig.mainSizeMode):null}(Bl(r))}D(e,s)}},n.isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},n.clearSelection=function(t){!lt()||St()||xt()||(t.stopPropagation(),Object(g.getAppStore)().dispatch(g.appActions.selectionChanged(null)))},n.formatMessage=function(t,e){return n.props.intl?n.props.intl.formatMessage({id:t,defaultMessage:Bt.a[t]},e):Bt.a[t]},g.ExtensionManager.getInstance().registerExtension({epName:g.extensionSpec.ExtensionPoints.LayoutTransformer,extension:new sr.a}),n.isMac()?n.keyBindings={"command+keyv":n.startPaste}:n.keyBindings={"ctrl+keyv":n.startPaste},n.updatePageContext(),n}return us(e,t),e.prototype.componentDidMount=function(){lt()&&!document.body.classList.contains("design-mode")&&document.body.classList.add("design-mode"),at()&&!document.body.classList.contains("lock-layout")&&document.body.classList.add("lock-layout")},e.prototype.componentDidUpdate=function(t){var e,n=null===(e=window.document)||void 0===e?void 0:e.documentElement;n&&(window.jimuConfig.isInBuilder&&lt()?n.classList.add("is-in-builder"):n.classList.remove("is-in-builder")),Bl(t.pageStatus)!==Bl(this.props.pageStatus)&&(this.pageRef.scrollTop=0)},e.prototype.getPageStyle=function(){var t=this.props,e=t.pageStatus,n=t.pages,o=t.minHeight,i=n[Object.keys(e).find((function(t){return e[t]}))];return Object(g.css)(ps||(ps=cs(["\n      position: relative;\n      margin: 0 auto;\n      overflow: hidden;\n      height: ",";\n      min-height: ","px;\n      .page {\n        height: auto;\n      }\n      .is-dragging {\n        z-index: ",";\n        opacity: 0.8;\n      }\n\n      body:not(.design-mode) & {\n        overflow: auto;\n        height: 100%;\n      }\n    "],["\n      position: relative;\n      margin: 0 auto;\n      overflow: hidden;\n      height: ",";\n      min-height: ","px;\n      .page {\n        height: auto;\n      }\n      .is-dragging {\n        z-index: ",";\n        opacity: 0.8;\n      }\n\n      body:not(.design-mode) & {\n        overflow: auto;\n        height: 100%;\n      }\n    "])),i.mode===g.PageMode.FitWindow?"100%":"auto",o,v.LayoutZIndex.DraggingItem)},e.prototype.updatePageContext=function(){var t=this.props,e={theme:t.theme,mainSizeMode:t.mainSizeMode,browserSizeMode:t.browserSizeMode,builderTheme:v.utils.getBuilderThemeVariables(),formatMessage:this.formatMessage};if(this.pageContext)for(var n in e)this.pageContext[n]!==e[n]&&(this.pageContext=this.pageContext.set(n,e[n]));else this.pageContext=Object(g.Immutable)(e)},e.prototype.render=function(){var t=this,e=this.props.pageStatus;return Bl(e)?(this.updatePageContext(),Object(g.jsx)("div",{className:"page-renderer d-flex flex-column align-items-center w-100",ref:function(e){return t.pageRef=e},css:this.getPageStyle(),"data-testid":"pageRenderer",onClick:this.clearSelection},this.renderDialog(),this.renderHeader(),Object.keys(e).map((function(e){return t.renderPageBody(e)})),this.renderFooter(),Object(g.jsx)(g.Keyboard,{bindings:this.keyBindings}))):null},e.prototype.renderHeader=function(){if(!this.props.header)return null;var t=this.props,e=t.header,n=t.headerVisible,o=t.browserSizeMode,i=t.mainSizeMode,r=t.activePagePart;return Object(g.jsx)(Yl,{header:e,activePagePart:r,headerVisible:n,browserSizeMode:o,mainSizeMode:i,pageContext:this.pageContext})},e.prototype.renderFooter=function(){if(!this.props.footer)return null;var t=this.props,e=t.footer,n=t.footerVisible,o=t.browserSizeMode,i=t.mainSizeMode,r=t.activePagePart;return Object(g.jsx)(ns,{footer:e,activePagePart:r,footerVisible:n,browserSizeMode:o,mainSizeMode:i,pageContext:this.pageContext})},e.prototype.renderPageBody=function(t){var e=this.props,n=e.pages,o=e.pageStatus,i=e.browserSizeMode,r=e.activePagePart,a=n[t];if(a&&a.type===g.PageType.Normal)return Object(g.jsx)(ss,{key:a.id,pageJson:a,renderedPageId:t,activePagePart:r,browserSizeMode:i,pageContext:this.pageContext,visible:!!o[a.id]})},e.prototype.isDialogViewOnly=function(t){var e=this.props.browserSizeMode;return!!(e!==g.BrowserSizeMode.Large&&!t.layout[e])},e.prototype.renderDialog=function(){var t=this.props,e=t.currentDialogId,n=t.urlDialogJson,o=t.splashDialogJson,i=t.isSplashClosed,r=t.isPageDlgClosed,a=t.pageDialogJson,l=t.pageDialogId,s=!i&&o,u=!r&&a,c=n?(null==o?void 0:o.id)===n.id||(null==a?void 0:a.id)===n.id?null:n:null;return Object(g.jsx)(g.React.Fragment,null,c&&Object(g.jsx)(v.PageContext.Provider,{value:ds(ds({},this.pageContext),{dialogId:e,isDialog:!0,viewOnly:this.isDialogViewOnly(n),rootLayoutId:Nl(e)})},Object(g.jsx)(g.AppDialog,{dialogJson:n})),u&&Object(g.jsx)(v.PageContext.Provider,{value:ds(ds({},this.pageContext),{dialogId:l,isDialog:!0,viewOnly:this.isDialogViewOnly(a),rootLayoutId:Nl(a.id)})},Object(g.jsx)(g.AppDialog,{dialogJson:a,isOpenByPage:!0})),s&&Object(g.jsx)(v.PageContext.Provider,{value:ds(ds({},this.pageContext),{dialogId:o.id,isDialog:!0,viewOnly:this.isDialogViewOnly(o),rootLayoutId:Nl(o.id)})},Object(g.jsx)(g.AppDialog,{dialogJson:o})))},e.displayName="BuilderPageRenderer",e}(g.React.PureComponent),hs=Object(g.injectIntl)(g.ReactRedux.connect((function(t,e){var n,o,i,r,a,l,s,u=g.utils.findViewportSize(t.appConfig,t.browserSizeMode),c=Bl(e.pageStatus);if(!c)return{};var d=t.appConfig.pages[t.appRuntimeInfo.currentPageId].autoOpenDialogId,p=t.appConfig.dialogs,h=p[Object.keys(p).find((function(t){return p[t].isSplash}))];return{pages:t.appConfig.pages,header:t.appConfig.header,headerVisible:!!t.appConfig.pages[c].header,footer:t.appConfig.footer,footerVisible:!!t.appConfig.pages[c].footer,mainSizeMode:t.appConfig.mainSizeMode,browserSizeMode:t.browserSizeMode,theme:t.theme,minHeight:u.height,activePagePart:null!==(n=t.appRuntimeInfo.activePagePart)&&void 0!==n?n:g.PagePart.Body,clipboardItem:t.appRuntimeInfo.clipboard,dialogs:t.appConfig.dialogs,currentDialogId:t.appRuntimeInfo.currentDialogId,splashDialogJson:h,isSplashClosed:null===(r=null===(i=null===(o=t.appRuntimeInfo)||void 0===o?void 0:o.dialogInfos)||void 0===i?void 0:i[null==h?void 0:h.id])||void 0===r?void 0:r.isClosed,pageDialogId:d,pageDialogJson:p[d],isPageDlgClosed:null===(s=null===(l=null===(a=t.appRuntimeInfo)||void 0===a?void 0:a.dialogInfos)||void 0===l?void 0:l[t.appRuntimeInfo.currentPageId+"-"+d])||void 0===s?void 0:s.isClosed,urlDialogJson:p[e.dialogId]}}))(gs)),fs=n(45),ys=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vs=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ms=function(){return(ms=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},bs=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};function xs(t,e){var n,o,i,r,a=e.layoutId,l=t.appRuntimeInfo.selection,s=e.layoutItem,u=!1,c=!1,d=!1,p=!1;if(s&&(u=Boolean(l&&a===l.layoutId&&s.id===l.layoutItemId),s.type===g.LayoutItemType.Widget)){var h=t.appConfig.widgets[s.widgetId],f=null===(o=null===(n=null==h?void 0:h.manifest)||void 0===n?void 0:n.properties)||void 0===o?void 0:o.supportInlineEditing;if(d=null===(r=null===(i=null==h?void 0:h.manifest)||void 0===i?void 0:i.properties)||void 0===r?void 0:r.supportRepeat,f){var y=t.widgetsRuntimeInfo[s.widgetId];c=y&&y.isInlineEditing}p=v.utils.isWidgetHasEmbeddedLayout(s.widgetId,t.appConfig)}return{selected:u,supportRepeat:d,isInlineEditing:c,isLayoutWidget:p}}var Is,ws,js,Os=function(){};function Ss(t){return function(t){var e=function(e){function n(t){var n=e.call(this,t)||this;return n.ref=g.React.createRef(),n}return ys(n,e),n.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.layoutId,o=e.layoutItemId,i=e.layoutItem,r=e.onResizeStart,a=e.onResizing,l=e.onResizeEnd,s=e.onDragStart,u=e.onDragging,c=e.onDragEnd,d=e.useDragHandler;this.ref.current&&(this.interactable=Object(m.interact)(this.ref.current).origin("parent"),this.interactable=mt(this.interactable,{layoutId:n,layoutItemId:o,useDragHandler:d,onDragging:u,onDragStart:s,onDragEnd:c,itemType:i.type,rootLayoutId:function(){return t.rootLayoutId},restrict:function(){return t.props.restrict}}),this.interactable=jt(this.interactable,{layoutItemId:o,onResizing:a,onResizeStart:r,onResizeEnd:l}))},n.prototype.componentWillUnMount=function(){this.interactable&&(this.interactable.unset(),this.interactable=null)},n.prototype.getStyle=function(t){return Object(g.css)(Is||(Is=vs(["\n          ",";\n\n          &.dragging {\n            opacity: 0.9;\n          }\n\n          display: flex;\n          position: relative;\n          touch-action: ",";\n          user-select: ",";\n        "],["\n          ",";\n\n          &.dragging {\n            opacity: 0.9;\n          }\n\n          display: flex;\n          position: relative;\n          touch-action: ",";\n          user-select: ",";\n        "])),this.aspectRatioStyle(),t?"auto":"none",t?"auto":"none")},n.prototype.aspectRatioStyle=function(){var t=this.props,e=t.aspectRatio;return t.forceAspectRatio?Object(g.css)(ws||(ws=vs(["\n            & > div.rnd-aspect-ratio-wrapper {\n              width: 100%;\n              position: relative;\n              padding-top: ","%;\n\n              & > div {\n                position: absolute !important;\n                top: 0;\n                left: 0;\n                bottom: 0;\n                right: 0;\n              }\n            }\n          "],["\n            & > div.rnd-aspect-ratio-wrapper {\n              width: 100%;\n              position: relative;\n              padding-top: ","%;\n\n              & > div {\n                position: absolute !important;\n                top: 0;\n                left: 0;\n                bottom: 0;\n                right: 0;\n              }\n            }\n          "])),100*e):Object(g.css)(js||(js=vs(["\n          & > .rnd-aspect-ratio-wrapper {\n            width: 100%;\n            height: 100%;\n            display: flex;\n          }\n        "],["\n          & > .rnd-aspect-ratio-wrapper {\n            width: 100%;\n            height: 100%;\n            display: flex;\n          }\n        "])))},n.prototype.render=function(){var e=this;return Object(g.jsx)(v.PageContext.Consumer,null,(function(n){e.rootLayoutId=n.rootLayoutId;var o=e.props,i=(o.gridSize,o.draggable,o.onResizeStart,o.onResizing,o.onResizeEnd,o.style),r=o.className,a=(o.useDragHandler,o.children),l=bs(o,["gridSize","draggable","onResizeStart","onResizing","onResizeEnd","style","className","useDragHandler","children"]),s=e.props.isInlineEditing,u=Object(g.classNames)("exb-rnd",r,{"functional-widget":!e.props.isLayoutWidget}),c="string"==typeof i?JSON.parse(i):ms({},i);return e.props.forceAspectRatio&&(c.height="auto"),Object(g.jsx)("div",{className:u,ref:e.ref,css:e.getStyle(s),"data-layoutid":e.props.layoutId,"data-layoutitemid":e.props.layoutItemId,"data-repeatable":e.props.supportRepeat,style:c},Object(g.jsx)("div",{className:"rnd-aspect-ratio-wrapper"},Object(g.jsx)(t,ms({layoutId:e.props.layoutId,className:"w-100",layoutItemId:e.props.layoutItemId},l))),a)}))},n.defaultProps={left:!0,top:!0,right:!0,bottom:!0,restrict:!1,onResizeStart:Os,onResizing:Os,onResizeEnd:Os,onDragStart:Os,onDragging:Os,onDragEnd:Os},n}(g.React.PureComponent),n=fs(e,t);return g.ReactRedux.connect(xs)(n)}}var Cs=h.templateUtils.createPageFromTemplate,Ps=h.templateUtils.createDialogFromTemplate,Ts=h.templateUtils.createSectionFromTemplate,As=h.templateUtils.createWidgetFromTemplate}]))}}}));