System.register(["jimu-core","jimu-arcgis"],(function(e){var t,n;return{setters:[function(e){t=e},function(e){n=e}],execute:function(){e(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=183)}({0:function(e,n){e.exports=t},183:function(e,t,n){"use strict";n.r(t);var r,i=n(0),o=n(3),u=n(32),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isSupported=function(e,t){return s(this,void 0,Promise,(function(){return c(this,(function(e){return[2,t.length>0&&t.some((function(e){var t;return null===(t=e.feature)||void 0===t?void 0:t.geometry}))]}))}))},t.prototype.onExecute=function(e,t){return s(this,void 0,Promise,(function(){var e=this;return c(this,(function(n){return[2,Object(o.loadArcGISJSAPIModules)(["esri/Graphic"]).then((function(n){var r;r=n[0];var o={features:t.map((function(e){var t;return null===(t=Object(u.f)(e.feature,r))||void 0===t?void 0:t.geometry}))};return i.MutableStoreManager.getInstance().updateStateValue(e.widgetId,"panToActionValue.value",o),!0}))]}))}))},t}(i.AbstractDataAction);t.default=l},3:function(e,t){e.exports=n},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"a",(function(){return x})),n.d(t,"e",(function(){return P})),n.d(t,"j",(function(){return S}));var r=n(0),i=n(3),o=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function a(e,t){return o(this,void 0,Promise,(function(){var n;return u(this,(function(r){return n=[],t&&Object.keys(t).forEach((function(r){e.map.layers.find((function(e){return e.id===r}))?console.warn("the feature layer is already created"):n.push(c(e,t[r],r))})),0===n.length?[2,null]:[2,Promise.all(n)]}))}))}function s(e,t){return o(this,void 0,Promise,(function(){var n;return u(this,(function(r){return n=[],t&&Object.keys(t).forEach((function(r){var i=e.map.layers.find((function(e){return e.id===r}));i&&(e.map.remove(i),n.push(c(e,t[r],r)))})),0===n.length?[2,null]:[2,Promise.all(n)]}))}))}function c(e,t,n){return o(this,void 0,Promise,(function(){return u(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(r,o){return Object(i.loadArcGISJSAPIModules)(["esri/layers/FeatureLayer"]).then((function(i){if(t.features.length<1)return r(null);var o=void 0;o=i[0];for(var u=t.features[0].layer,a=[],s={},c=0;c<u.fields.length;c++){var l=(h=u.fields[c],void 0,{name:h.name.replace(/\./g,"_").replace(/\(/g,"_").replace(/\)/g,"_"),alias:h.alias,type:h.type});s[u.fields[c].name]=l.name,a.push(l)}var f=[];for(var p in t.features[0].attributes)if(s[p]){l={fieldName:s[p],label:p};f.push(l)}var d=[];t.features.forEach((function(e,t){var n=e;if(n.attributes){for(var r in n.attributes)n.attributes[s[r]]=n.attributes[r];n.attributes.exbfid=t}else n.attributes={exbfid:t};d.push(n)}));var h,y=new o({id:n,title:u.title,source:d,fields:a,outFields:["*"],objectIdField:"exbfid",renderer:u.renderer,popupEnabled:!0,popupTemplate:{title:"information",content:[{type:"fields",fieldInfos:f}]}});e.map.add(y),y.on("layerview-create",(function(e){return r(null)}))}))}))];case 1:return[2,r.sent()]}}))}))}function l(e,t,n){var r=n,i=null,o=null;if(r||(o=t instanceof Array?t[0]:t)&&(r=o.layer&&o.layer.id),r){for(var u=e.allLayerViews,a=0;a<u.length;a++)u.getItemAt(a).layer.id===r&&(i=u.getItemAt(a));return i?{layerId:r,handle:i.highlight(t)}:null}}function f(e,t){return o(this,void 0,Promise,(function(){var n,r,i,o,a;return u(this,(function(u){switch(u.label){case 0:return r=e,(n=t)instanceof Array?0!==n.length?[3,2]:[4,Promise.resolve()]:[3,6];case 1:return[2,u.sent()];case 2:if(!n[0].geometry)return[3,4];for(i=[],o=0;o<n.length;o++)i.push(n[o].geometry);return[4,p(i).then((function(e){return r.goTo(e.center)}))];case 3:return[2,u.sent()];case 4:return[2,p(n).then((function(e){return r.goTo(e.center)}))];case 5:return[3,7];case 6:return n.geometry?(a=n.geometry,[2,r.goTo(m(a))]):[2,r.goTo(m(n))];case 7:return[2]}}))}))}function p(e){return o(this,void 0,Promise,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,Object(i.loadArcGISJSAPIModules)(["esri/geometry/Extent"]).then((function(n){return o(t,void 0,void 0,(function(){var t,r,i,o,a,s,c;return u(this,(function(u){switch(u.label){case 0:return t=n[0],e&&e.length?[3,2]:[4,Promise.resolve(null)];case 1:return[2,u.sent()];case 2:for(r=null,o=e.length,i=0;i<o;i++)(a=e[i])&&((s=a.extent)||"point"!==a.type||(c=a).x&&c.y&&(s=new t({xmax:c.x,xmin:c.x,ymax:c.y,ymin:c.y,zmax:c.z,zmin:c.z,spatialReference:c.spatialReference})),s&&(r=r?r.union(s):s));return r.width<0&&r.height<0?[4,Promise.resolve(null)]:[3,4];case 3:return[2,u.sent()];case 4:return[4,Promise.resolve(r)];case 5:return[2,u.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}function d(e,t,n){if(t)for(var r=e.jimuLayerViews,o=Object.keys(r),u=0;u<o.length;u++){var a=r[o[u]];a&&a.layer&&a.layerDataSourceId===t&&a.type===i.LayerTypes.FeatureLayer&&a.setLocalDefinitionExpression(n)}}function h(e,t,n){if(t)for(var o=e.jimuLayerViews,u=Object.keys(o),a=function(a){var s=o[u[a]];if(s&&s.layer&&s.layerDataSourceId===t&&s.type===i.LayerTypes.FeatureLayer)if(s.view){var c=s.view;if(!c)return{value:null};Object(i.loadArcGISJSAPIModules)(["esri/tasks/support/Query","esri/Graphic"]).then((function(t){var r,i;r=t[0],i=t[1];var o=new r;o.where=n,o.outFields=["*"],o.returnGeometry=!0,c.layer.queryFeatures(o).then((function(t){if(t&&t.features&&t.features.length>0){var n=v(c.layer.geometryType);y(e.view,t.features,n,i)}}))}))}else Object(i.loadArcGISJSAPIModules)(["esri/tasks/support/Query","esri/layers/FeatureLayer","esri/Graphic"]).then((function(t){var i,o,u;i=t[0],o=t[1],u=t[2];var a=new i;a.where=n,a.outFields=["*"],a.returnGeometry=!0;var c=new o({url:r.dataSourceUtils.getUrlByLayer(s.layer)});c.load().then((function(){c.queryFeatures(a).then((function(t){if(t&&t.features&&t.features.length>0){var n=v(t.features[0].geometry.type);y(e.view,t.features,n,u)}}))}))}))},s=0;s<u.length;s++){var c=a(s);if("object"==typeof c)return c.value}}function y(e,t,n,r){!function(t,i){for(var o=[],u=0,a=0;a<t.length;a++){var s=new r({geometry:t[a].geometry,symbol:n,attributes:t[a].attributes});o.push(s)}var c=function(){e.graphics.addMany(o),setTimeout((function(){e.graphics.removeMany(o),(u+=1)<i&&setTimeout((function(){c()}),500)}),500)};c()}(t,3)}function v(e){return["point","multipoint"].includes(e)?{type:"simple-marker",style:"circle",color:[255,255,0,.8],size:"16px",outline:{color:[255,255,0,.8],width:3}}:["polyline"].includes(e)?{type:"simple-line",color:[255,255,0,.8],width:3,style:"solid"}:["polygon","extent"].includes(e)?{type:"simple-fill",color:[255,255,0,.5],style:"solid",outline:{color:[255,255,0,.8],width:3}}:["mesh"].includes(e)?{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:[255,255,0,.8]}}]}:null}function m(e){switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"polyline":return e.extent.center;default:return e&&e.extent?e.extent.center:void 0}}function b(e,t){var n=null;return e.clone?n=e.clone():(n=t.fromJSON(Object.assign({},e))).attributes=Object.assign({},e.attributes),n}function g(e,t){return o(this,void 0,Promise,(function(){return u(this,(function(n){switch(n.label){case 0:return e&&0!==e.length&&e[0]&&t.wkid!==e[0].spatialReference.wkid&&!t.equals(e[0].spatialReference)?[3,2]:[4,Promise.resolve(e)];case 1:return[2,n.sent()];case 2:return t.isWebMercator&&e[0].spatialReference.isWGS84?[4,Promise.resolve(e)]:[3,4];case 3:return[2,n.sent()];case 4:return t.isWGS84&&e[0].spatialReference.isWebMercator?[4,Promise.resolve(e)]:[3,6];case 5:return[2,n.sent()];case 6:return[4,i.geometryUtils.projectToSpatialReference(e,t)];case 7:return[2,n.sent()]}}))}))}function w(e,t,n){return o(this,void 0,Promise,(function(){var r=this;return u(this,(function(a){switch(a.label){case 0:return e&&"3d"===e.type&&t&&t.queryFeatures&&n?[4,Object(i.loadArcGISJSAPIModules)(["esri/tasks/support/Query"]).then((function(e){var i=new(0,e[0]);return i.returnGeometry=!0,i.outFields=["*"],i.objectIds=n.map((function(e){return e.attributes[t.objectIdField]})),t.queryFeatures(i).then((function(e){return o(r,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return e&&e.features&&e.features.length===n.length?[4,Promise.resolve(e.features)]:[3,2];case 1:return[2,t.sent()];case 2:return[4,Promise.resolve(n)];case 3:return[2,t.sent()]}}))}))}),(function(){return o(r,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve(n)];case 1:return[2,e.sent()]}}))}))}))}))]:[3,2];case 1:return[2,a.sent()];case 2:return[4,Promise.resolve(n)];case 3:return[2,a.sent()]}}))}))}function x(e){return!window.jimuConfig.isInBuilder||e!==r.AppMode.Design}function P(e){return{mapContainer:e.mapContainer,state:e.state,MapView:e.MapView,SceneView:e.SceneView,Extent:e.Extent,Viewpoint:e.Viewpoint,mapView:e.mapView,sceneView:e.sceneView,extentWatch:e.extentWatch,fatalErrorWatch:e.fatalErrorWatch,dsManager:e.dsManager,highLightHandles:e.highLightHandles,mapBaseViewEventHandles:e.mapBaseViewEventHandles,Color:e.Color,isRequestingMap:e.isRequestingMap}}function S(e,t){e.mapContainer=t.mapContainer,e.state=t.state,e.MapView=t.MapView,e.SceneView=t.SceneView,e.Extent=t.Extent,e.Viewpoint=t.Viewpoint,e.mapView=t.mapView,e.sceneView=t.sceneView,e.extentWatch=t.extentWatch,e.fatalErrorWatch=t.fatalErrorWatch,e.dsManager=t.dsManager,e.highLightHandles=t.highLightHandles,e.mapBaseViewEventHandles=t.mapBaseViewEventHandles,e.Color=t.Color,e.isRequestingMap=t.isRequestingMap}}}))}}}));