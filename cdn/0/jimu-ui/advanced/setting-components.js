System.register(["jimu-core","jimu-ui","jimu-for-builder","jimu-layouts/layout-runtime","jimu-for-builder/templates","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/expression-builder"],(function(e){var t,n,o,r,i,a,s;return{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e}],execute:function(){e(function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=961)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},105:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 5.5v-5a.5.5 0 011 0v5h5a.5.5 0 010 1h-5v5a.5.5 0 01-1 0v-5h-5a.5.5 0 010-1h5z" fill="#000" fill-rule="nonzero"></path></svg>'},12:function(e,t,n){var o;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)&&o.length){var a=r.apply(null,o);a&&e.push(a)}else if("object"===i)for(var s in o)n.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(o=function(){return r}.apply(t,[]))||(e.exports=o)}()},19:function(e,t){e.exports=o},279:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 32"><path d="M2.333 4a3 3 0 116 0 3 3 0 01-6 0zm0 12a3 3 0 116 0 3 3 0 01-6 0zm0 12a3 3 0 116 0 3 3 0 01-6 0z"></path></svg>'},280:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.646 8.854a.5.5 0 10.708-.708L1.707 6.5h8.586L8.646 8.146a.5.5 0 10.708.708l2.5-2.5a.5.5 0 000-.708l-2.5-2.5a.5.5 0 10-.708.708L10.293 5.5H1.707l1.647-1.646a.5.5 0 10-.708-.708l-2.5 2.5a.5.5 0 000 .708l2.5 2.5z" fill="#000"></path></svg>'},281:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M8.854 9.354a.5.5 0 10-.708-.708L6.5 10.293V1.707l1.646 1.647a.5.5 0 10.708-.708l-2.5-2.5a.5.5 0 00-.708 0l-2.5 2.5a.5.5 0 10.708.708L5.5 1.707v8.586L3.854 8.646a.5.5 0 10-.708.708l2.5 2.5a.5.5 0 00.708 0l2.5-2.5z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},31:function(e,t){e.exports=r},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var o,r,i=n(0);n.d(t,"a",(function(){return i.LoadingType})),function(e){e.IMAGE="image",e.ICON="icon"}(o||(o={})),function(e){e.Info="INFO",e.Error="ERROR"}(r||(r={}))},36:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},37:function(e,t){e.exports=i},44:function(e,t){e.exports=a},48:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M4.586 8.657l6.01-6.01a.5.5 0 01.707.707l-6.01 6.01a1 1 0 01-1.414 0L.697 6.182a.5.5 0 01.707-.707l3.182 3.182z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},59:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 3.146a.5.5 0 01.708 0L6 8.5l5.146-5.354a.5.5 0 01.708.708l-5.5 5.707a.5.5 0 01-.708 0l-5.5-5.707a.5.5 0 010-.708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},64:function(e,t){e.exports=s},65:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 32"><path d="M16.492 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 21.333a2 2 0 11.001 3.999 2 2 0 01-.001-3.999zm0-2.666a2 2 0 01-2-2v-8a2 2 0 114 0v8a2 2 0 01-2 2z"></path></svg>'},72:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M4.103 7.873L16 19.25 27.897 7.873c.939-.898 2.46-.898 3.399 0s.939 2.353 0 3.251L17.7 24.127a2.481 2.481 0 01-3.399 0L.705 11.124c-.939-.898-.939-2.353 0-3.251s2.46-.898 3.399 0z"></path></svg>'},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o,r,i=n(0),a=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s={left:"right",right:"left",top:"bottom",bottom:"top"};function l(e,t){return t&&("left"===e||"right"===e)?e:s[e]}function c(e,t){return t?"left"===e?"right":"right"===e?"left":e:e}function p(e){var t=Object(i.getAppStore)().getState().appContext.isRTL,n=e.border,s=e.background,p=e.arrowSize,u=void 0===p?".75rem":p;return Object(i.css)(r||(r=a(['\n    .jimu-popper--arrow {\n      position: absolute;\n      &::before,\n      &::after {\n        content: " ";\n        display: block;\n        width: 0;\n        height: 0;\n        border: ',' solid transparent;\n        position: absolute;\n      }\n    }\n    &[data-popper-placement^="top"],\n    &[data-popper-placement^="bottom"] {\n      .jimu-popper--arrow {\n        ',';\n        &::before,\n        &::after {\n          transform: translateX(-50%);\n        }\n      }\n    }\n    &[data-popper-placement^="left"],\n    &[data-popper-placement^="right"] {\n      .jimu-popper--arrow {\n        top: 50%;\n        &::before,\n        &::after {\n          transform: translateY(-50%);\n        }\n      }\n    }\n    ',"\n  "],['\n    .jimu-popper--arrow {\n      position: absolute;\n      &::before,\n      &::after {\n        content: " ";\n        display: block;\n        width: 0;\n        height: 0;\n        border: ',' solid transparent;\n        position: absolute;\n      }\n    }\n    &[data-popper-placement^="top"],\n    &[data-popper-placement^="bottom"] {\n      .jimu-popper--arrow {\n        ',';\n        &::before,\n        &::after {\n          transform: translateX(-50%);\n        }\n      }\n    }\n    &[data-popper-placement^="left"],\n    &[data-popper-placement^="right"] {\n      .jimu-popper--arrow {\n        top: 50%;\n        &::before,\n        &::after {\n          transform: translateY(-50%);\n        }\n      }\n    }\n    ',"\n  "])),u,t?"right: 50%":"left: 50%",["left","right","top","bottom"].map((function(e){var r,p;return Object(i.css)(o||(o=a(['\n      &[data-popper-placement^="','"] {\n        .jimu-popper--arrow {\n          ',": -",";\n          &::before,\n          &::after {\n            border-","-width: 0;\n            border-","-color: ",";\n            ",": 0;\n          }\n          &::after {\n            border-","-color: ",";\n            ",": ",";\n          }\n        }\n      }\n    "],['\n      &[data-popper-placement^="','"] {\n        .jimu-popper--arrow {\n          ',": -",";\n          &::before,\n          &::after {\n            border-","-width: 0;\n            border-","-color: ",";\n            ",": 0;\n          }\n          &::after {\n            border-","-color: ",";\n            ",": ",";\n          }\n        }\n      }\n    "])),e,l(e,t),u,l(e,t),c(e,t),null!==(r=null==n?void 0:n.color)&&void 0!==r?r:"inherit",l(e,t),c(e,t),null!=s?s:"inherit",l(e,t),null!==(p=null==n?void 0:n.width)&&void 0!==p?p:"1px")})))}},78:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M.304 6.016a1.028 1.028 0 011.466 0l4.398 4.451 8.062-8.16a1.028 1.028 0 011.466 0c.405.41.405 1.074 0 1.484l-8.795 8.902c-.405.41-1.062.41-1.466 0L.304 7.5a1.058 1.058 0 010-1.484z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},81:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M9.521 5.47L3.981.162a.592.592 0 00-.813 0 .534.534 0 000 .779L8.448 6l-5.28 5.06a.534.534 0 000 .779.592.592 0 00.813 0l5.54-5.31a.726.726 0 000-1.058z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},86:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 5.693a.517.517 0 01-.708 0 .464.464 0 010-.677l2.833-2.71a.517.517 0 01.708 0l2.833 2.71a.464.464 0 010 .677.517.517 0 01-.708 0L4 3.323l-2.479 2.37z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},91:function(e,t){e.exports='<svg viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.5 13a.5.5 0 010-1h4a.5.5 0 010 1h-4zM0 8.5a.5.5 0 00.5.5h7a.5.5 0 000-1h-7a.5.5 0 00-.5.5zM.5 5a.5.5 0 010-1h11a.5.5 0 010 1H.5zM.5 1a.5.5 0 110-1h15a.5.5 0 010 1H.5z" fill="#000"></path></svg>'},92:function(e,t){e.exports='<svg viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.5 0a.5.5 0 000 1h4a.5.5 0 000-1h-4zM0 4.5A.5.5 0 01.5 4h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zM.5 8a.5.5 0 000 1h11a.5.5 0 000-1H.5zM.5 12a.5.5 0 000 1h15a.5.5 0 000-1H.5z" fill="#000"></path></svg>'},93:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 9.56a.5.5 0 00.708 0L6 4.208l5.146 5.354a.5.5 0 00.708-.708l-5.5-5.707a.5.5 0 00-.708 0l-5.5 5.707a.5.5 0 000 .708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},94:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 011.415 0l2.12 2.121a1 1 0 010 1.414l-8.935 8.937a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.087l.212-2.333a1 1 0 01.289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 010 1H.5a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},961:function(e,t,n){"use strict";n.r(t),n.d(t,"handelDialogInfos",(function(){return er})),n.d(t,"changeCurrentPage",(function(){return nr})),n.d(t,"changeCurrentDialog",(function(){return or})),n.d(t,"WidgetSelector",(function(){return be})),n.d(t,"JimuMapViewSelector",(function(){return xe})),n.d(t,"JimuLayerViewSelector",(function(){return Ce})),n.d(t,"StylePicker",(function(){return Me})),n.d(t,"RadioGroup",(function(){return Le})),n.d(t,"ItemCardSelector",(function(){return We})),n.d(t,"SettingSection",(function(){return ne})),n.d(t,"SettingRow",(function(){return ae})),n.d(t,"SettingCollapse",(function(){return ue})),n.d(t,"UnControlledSettingCollapse",(function(){return de})),n.d(t,"SettingLayout",(function(){return r})),n.d(t,"LinkSetting",(function(){return gt})),n.d(t,"LinkSettingPopup",(function(){return Ot})),n.d(t,"OpenTypes",(function(){return Q})),n.d(t,"proxySettingUtils",(function(){return i})),n.d(t,"ProxySetting",(function(){return Yt})),n.d(t,"ProxySettingPopup",(function(){return rn})),n.d(t,"SidePopper",(function(){return wt})),n.d(t,"WidgetListPopper",(function(){return Rn})),n.d(t,"PageTemplatePopper",(function(){return Yn})),n.d(t,"DialogTemplatePopper",(function(){return ro})),n.d(t,"BlockTemplatePopper",(function(){return uo})),n.d(t,"ScreenTemplatePopper",(function(){return yo})),n.d(t,"ScreenGroupTemplatePopper",(function(){return Po})),n.d(t,"SortSetting",(function(){return Mo})),n.d(t,"DirectionSelector",(function(){return Lo})),n.d(t,"SizeMode",(function(){return Cn})),n.d(t,"SizeModeSelector",(function(){return qo})),n.d(t,"NavQuickStyleItem",(function(){return Yo})),n.d(t,"QuickStylePopper",(function(){return $o}));var o={};n.r(o),n.d(o,"WidgetSelector",(function(){return b})),n.d(o,"SortSetting",(function(){return y})),n.d(o,"StylePicker",(function(){return x})),n.d(o,"SettingSection",(function(){return O})),n.d(o,"SettingRow",(function(){return S})),n.d(o,"SettingCollapse",(function(){return C})),n.d(o,"LinkSetting",(function(){return _})),n.d(o,"ProxySetting",(function(){return A})),n.d(o,"ProxySettingPopup",(function(){return L})),n.d(o,"RadioGroup",(function(){return W})),n.d(o,"ItemCardSelector",(function(){return F})),n.d(o,"SidePopper",(function(){return J})),n.d(o,"JimuLayerViewSelector",(function(){return K}));var r={};n.r(r),n.d(r,"SettingSection",(function(){return ne})),n.d(r,"SettingRow",(function(){return ae})),n.d(r,"SettingCollapse",(function(){return ue})),n.d(r,"UnControlledSettingCollapse",(function(){return de}));var i={};n.r(i),n.d(i,"getNeedProxyDataSources",(function(){return It})),n.d(i,"traverseToGetNeedProxyDataSources",(function(){return _t})),n.d(i,"getProxyJsonFromSourceUrl",(function(){return Mt})),n.d(i,"isSameProxy",(function(){return Nt})),n.d(i,"isRegisteredApp",(function(){return At})),n.d(i,"needToConfigProxy",(function(){return Rt})),n.d(i,"deleteProxies",(function(){return Et})),n.d(i,"getProxyRootUrl",(function(){return Dt})),n.d(i,"getCreateProxyUrl",(function(){return Tt})),n.d(i,"getDeleteProxyUrl",(function(){return zt}));var a,s,l,c,p,u,d,f,g,m=n(0),h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=function(e){var t=e.theme;return Object(m.css)(a||(a=h(["\n    .component-choose-widget-popup{\n      .widget-card-active-btn{\n        outline: none;\n      }\n    }\n    div.component-choose-widget-popup-modal{\n      width: 850px;\n      max-width: 850px;\n      height: 600px;\n      background: ",";\n      border-radius: 4px;\n      position: absolute;\n      margin: auto;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      .component-choose-widget-clear-border{\n        border: 0;\n        padding: 0;\n      }\n      .modal-content{\n        border: 0;\n        padding: 20px 10px 20px 40px;\n        position: static;\n      }\n      .component-choose-widget-modal-header{\n        .choose-widget-popup-close{\n          width: 50px;\n          height: 50px;\n          display: inline-block;\n          right: 28px;\n          position: absolute;\n          top: 10px;\n          &:hover{\n            cursor: pointer;\n          }\n        }\n        .choose-widget-popup-close:after{\n          content: '';\n          display: inline-block;\n          width: 16px;\n          height: 16px;\n          background-image: url(",");\n          position: relative;\n          left: 18px;\n          top: 12px;\n        }\n      }\n      .component-choose-widget-modal-body{\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n        -webkit-box-pack: start;\n        -ms-flex-pack: start;\n        justify-content: flex-start;\n        margin: 40px 0 10px 0;\n        .widget-card-item{\n          width: 70px;\n          height: 120px;\n          border: 0;\n          margin: 0 30px 0 0;\n          &:hover{\n            cursor: pointer;\n          }\n          .widget-card-image{\n            width: 70px;\n            height: 70px;\n            border: 1px solid #ccc;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-align: center;\n            -ms-flex-align: center;\n            align-items: center;\n            -webkit-box-pack: center;\n            -ms-flex-pack: center;\n            justify-content: center;\n            >div{\n              width: 30px;\n              height: 30px;\n              position: relative;\n              &:after{\n                display: none;\n              }\n            }\n          }\n          .widget-card-content{\n            font-size: 12px;\n            color: #000;\n            letter-spacing: 0.33px;\n            padding: 2px;\n            text-align: center;\n            line-height: 14px;\n          }\n        }\n        .widget-card-selected{\n          .widget-card-image{\n            border: 2px solid #0C5CB6;\n            >div:after{\n              content: '';\n              display: block;\n              width: 16px;\n              height: 16px;\n              position: absolute;\n              top: -20px;\n              right: -20px;\n              background-image: url(",");\n            }\n          }\n        }\n      }\n      .component-choose-widget-modal-footer{\n        position: absolute;\n        bottom: 20px;\n        right: 40px;\n        >button{\n          font-size: 14px;\n          letter-spacing: 0.39px;\n          text-align: center;\n          vertical-align: middle;\n        }\n        button:first-of-type {\n          background-color: #0075D0;\n          border: 1px solid  #0075D0;\n          border-radius: 3px;\n          color: #ffffff;\n        }\n        button:last-of-type{\n          background-color: #ffffff;\n          border: 1px solid #CCCCCC;\n          border-radius: 3px;\n          color: #000000;\n        }\n      }\n    }\n  "],["\n    .component-choose-widget-popup{\n      .widget-card-active-btn{\n        outline: none;\n      }\n    }\n    div.component-choose-widget-popup-modal{\n      width: 850px;\n      max-width: 850px;\n      height: 600px;\n      background: ",";\n      border-radius: 4px;\n      position: absolute;\n      margin: auto;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      .component-choose-widget-clear-border{\n        border: 0;\n        padding: 0;\n      }\n      .modal-content{\n        border: 0;\n        padding: 20px 10px 20px 40px;\n        position: static;\n      }\n      .component-choose-widget-modal-header{\n        .choose-widget-popup-close{\n          width: 50px;\n          height: 50px;\n          display: inline-block;\n          right: 28px;\n          position: absolute;\n          top: 10px;\n          &:hover{\n            cursor: pointer;\n          }\n        }\n        .choose-widget-popup-close:after{\n          content: '';\n          display: inline-block;\n          width: 16px;\n          height: 16px;\n          background-image: url(",");\n          position: relative;\n          left: 18px;\n          top: 12px;\n        }\n      }\n      .component-choose-widget-modal-body{\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n        -webkit-box-pack: start;\n        -ms-flex-pack: start;\n        justify-content: flex-start;\n        margin: 40px 0 10px 0;\n        .widget-card-item{\n          width: 70px;\n          height: 120px;\n          border: 0;\n          margin: 0 30px 0 0;\n          &:hover{\n            cursor: pointer;\n          }\n          .widget-card-image{\n            width: 70px;\n            height: 70px;\n            border: 1px solid #ccc;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-align: center;\n            -ms-flex-align: center;\n            align-items: center;\n            -webkit-box-pack: center;\n            -ms-flex-pack: center;\n            justify-content: center;\n            >div{\n              width: 30px;\n              height: 30px;\n              position: relative;\n              &:after{\n                display: none;\n              }\n            }\n          }\n          .widget-card-content{\n            font-size: 12px;\n            color: #000;\n            letter-spacing: 0.33px;\n            padding: 2px;\n            text-align: center;\n            line-height: 14px;\n          }\n        }\n        .widget-card-selected{\n          .widget-card-image{\n            border: 2px solid #0C5CB6;\n            >div:after{\n              content: '';\n              display: block;\n              width: 16px;\n              height: 16px;\n              position: absolute;\n              top: -20px;\n              right: -20px;\n              background-image: url(",");\n            }\n          }\n        }\n      }\n      .component-choose-widget-modal-footer{\n        position: absolute;\n        bottom: 20px;\n        right: 40px;\n        >button{\n          font-size: 14px;\n          letter-spacing: 0.39px;\n          text-align: center;\n          vertical-align: middle;\n        }\n        button:first-of-type {\n          background-color: #0075D0;\n          border: 1px solid  #0075D0;\n          border-radius: 3px;\n          color: #ffffff;\n        }\n        button:last-of-type{\n          background-color: #ffffff;\n          border: 1px solid #CCCCCC;\n          border-radius: 3px;\n          color: #000000;\n        }\n      }\n    }\n  "])),t.colors.white,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAsElEQVQ4jaWSLQ7EIBhEv2LxnAzP1cBzAU6DhKCpZneaQHYpP2k6omreCzA9yjf0IgyfGCMZY+g8zy2ADrpgmsA5R977raTC6IJpAiklCSEopTSVVBgddME0AeeclFJTSQ+jCwY5fh9xVERm8E0wkiAzeCjoJcgMbm/wJjdBf4XdOmwF49irdf4Es6l2E7MVXLOSXAJr7XKqkQTMFcwYQiha65JzLruggy4YZPgfPMkHXzQME+F7oHYAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA20lEQVQ4jWPkidn2n4ECwESJ5iFgABsLI8PBRiuGS732DKJ8bKQbwMHKzKAqyc0gK8zBIMDNilUNI6FYkBBgBxrExPDg9Xes8iy4NIZYSDJ4GYkx/Pj1j6F25Q2cFuD0wo2nXxi42ZkZYu1lGMItpUg34Mrjzwx//0HYT9//IN0AFiZGBjstIaAh/xkOXntLugHGyvwM/FysDBcefGT48PUP6QaI8ELinZ2FicFGQ4iBnRW7UmY2vegGbBIPXn1j+P//P8OXn38ZPn77zXDxwSesBhBMB4QAxXkBAMaDOywJrob4AAAAAElFTkSuQmCC")},v=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},y=function(e){var t=e.theme.colors;return Object(m.css)(s||(s=v(["\n    width:100%;\n    &.single-row-item {\n        .select-con {\n            padding: "," ",";\n            .option-name-con {\n                margin-bottom: 0;\n                .close-con>span {\n                    margin-left: ",";\n                }\n            }\n        }\n    }\n    .add-option-btn {\n        & {\n            color:",";\n            margin-top:10px;\n            cursor: pointer;\n            font-size:13px;\n            overflow: hidden;\n        }\n        .add-option-icon{\n            margin-right: 4px;\n        }\n    }\n    .no-sort-remind {\n        margin: 70px auto 0;\n        color: ",";\n        font-size: 13px;\n        text-align: center;\n    }\n    .select-con {\n        & {\n            margin-top:17px;\n            box-sizing:border-box;\n            padding:",";\n            padding-top:",";\n            margin-bottom:10px;\n            background:",";\n            box-shadow: 0 0 0 2px ",";\n        }\n        .option-name-con {\n            & {\n              display: flex;\n              align-items: center;\n              margin-bottom:",";\n              width: 100%;\n            }\n            .option-name {\n              font-size: 13px;\n              line-height: 13px;\n              color: ",";\n              max-width: 87%;\n              height: ",";\n              line-height: ",";\n              cursor: pointer;\n            }\n            .option-name input {\n                display:inline-block;\n                width: auto;\n                max-width: 88%;\n                height: 100%;\n            }\n            .option-name-icon {\n                margin-left:5px;\n                color: ",";\n                cursor: pointer;\n            }\n            .option-name span {\n                max-width: 88%;\n                display: inline-block;\n                text-overflow: ellipsis;\n                overflow:hidden;\n            }\n            .close-con {\n                flex-grow: 1;\n            }\n            .close-con>span {\n                margin-right: ",";\n                color: ",";\n                cursor: pointer;\n            }\n        }\n\n        .select-down-con {\n            & {\n                display: flex;\n                align-items: center;\n                height: ",";\n            }\n            .sort-arrow-down-icon {\n                margin-right: 0;\n            }\n            .select-input {\n                flex-grow:1;\n                color: ",";\n            }\n            .sort-button {\n                margin-left: 5px;\n                width:30px;\n                cursor: pointer;\n                border:none;\n            }\n            .sort-field-selector {\n                & {\n                    background:",";\n                    border-radius: 2px;\n                    width: ",";\n                    overflow: hidden;\n                }\n\n\n            }\n        }\n    }\n\n\n  "],["\n    width:100%;\n    &.single-row-item {\n        .select-con {\n            padding: "," ",";\n            .option-name-con {\n                margin-bottom: 0;\n                .close-con>span {\n                    margin-left: ",";\n                }\n            }\n        }\n    }\n    .add-option-btn {\n        & {\n            color:",";\n            margin-top:10px;\n            cursor: pointer;\n            font-size:13px;\n            overflow: hidden;\n        }\n        .add-option-icon{\n            margin-right: 4px;\n        }\n    }\n    .no-sort-remind {\n        margin: 70px auto 0;\n        color: ",";\n        font-size: 13px;\n        text-align: center;\n    }\n    .select-con {\n        & {\n            margin-top:17px;\n            box-sizing:border-box;\n            padding:",";\n            padding-top:",";\n            margin-bottom:10px;\n            background:",";\n            box-shadow: 0 0 0 2px ",";\n        }\n        .option-name-con {\n            & {\n              display: flex;\n              align-items: center;\n              margin-bottom:",";\n              width: 100%;\n            }\n            .option-name {\n              font-size: 13px;\n              line-height: 13px;\n              color: ",";\n              max-width: 87%;\n              height: ",";\n              line-height: ",";\n              cursor: pointer;\n            }\n            .option-name input {\n                display:inline-block;\n                width: auto;\n                max-width: 88%;\n                height: 100%;\n            }\n            .option-name-icon {\n                margin-left:5px;\n                color: ",";\n                cursor: pointer;\n            }\n            .option-name span {\n                max-width: 88%;\n                display: inline-block;\n                text-overflow: ellipsis;\n                overflow:hidden;\n            }\n            .close-con {\n                flex-grow: 1;\n            }\n            .close-con>span {\n                margin-right: ",";\n                color: ",";\n                cursor: pointer;\n            }\n        }\n\n        .select-down-con {\n            & {\n                display: flex;\n                align-items: center;\n                height: ",";\n            }\n            .sort-arrow-down-icon {\n                margin-right: 0;\n            }\n            .select-input {\n                flex-grow:1;\n                color: ",";\n            }\n            .sort-button {\n                margin-left: 5px;\n                width:30px;\n                cursor: pointer;\n                border:none;\n            }\n            .sort-field-selector {\n                & {\n                    background:",";\n                    border-radius: 2px;\n                    width: ",";\n                    overflow: hidden;\n                }\n\n\n            }\n        }\n    }\n\n\n  "])),m.polished.rem(10),m.polished.rem(0),m.polished.rem(10),t.palette.primary[600],t.palette.light[800],m.polished.rem(10),m.polished.rem(8),t.palette.light[500],m.polished.rgba(t.white,.3),m.polished.rem(7),t.palette.dark[800],m.polished.rem(25),m.polished.rem(25),t.palette.dark[400],m.polished.rem(10),t.black,m.polished.rem(34),t.dark,t.palette.secondary[200],m.polished.rem(140))},w=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},x=function(e){var t=e.theme;return Object(m.css)(l||(l=w(["\n    .widget-setting--stylepicker {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-gap: 10px;\n    }\n\n    .widget-setting--stylepicker-item {\n      height: 93px;\n      border: 1px solid ",";\n      background-color: ",";\n      background-repeat: no-repeat;\n      background-position: center;\n      &:hover {\n        border-color: ",";\n      }\n      &.active {\n        border: 2px solid ",";\n      }\n      &.full-width {\n        grid-column-start: 1;\n        grid-column-end: 3;\n      }\n    }\n  "],["\n    .widget-setting--stylepicker {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      grid-gap: 10px;\n    }\n\n    .widget-setting--stylepicker-item {\n      height: 93px;\n      border: 1px solid ",";\n      background-color: ",";\n      background-repeat: no-repeat;\n      background-position: center;\n      &:hover {\n        border-color: ",";\n      }\n      &.active {\n        border: 2px solid ",";\n      }\n      &.full-width {\n        grid-column-start: 1;\n        grid-column-end: 3;\n      }\n    }\n  "])),t.colors.palette.light[500],t.colors.white,t.colors.primary,t.colors.primary)},j=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},O=function(e){var t=e.theme;return Object(m.css)(c||(c=j(["\n    padding: ",";\n    border-bottom: 1px solid ",";\n\n    &:last-child {\n      border-bottom: 0 none;\n    }\n\n    .jimu-widget-setting--section-header {\n      > h6 {\n        color: ",";\n        font-weight: ",";\n        margin-bottom: 0;\n      }\n      + * {\n        margin-top: ",";\n      }\n    }\n\n    .jimu-widget-setting--section-header {\n      &.row {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    }\n  "],["\n    padding: ",";\n    border-bottom: 1px solid ",";\n\n    &:last-child {\n      border-bottom: 0 none;\n    }\n\n    .jimu-widget-setting--section-header {\n      > h6 {\n        color: ",";\n        font-weight: ",";\n        margin-bottom: 0;\n      }\n      + * {\n        margin-top: ",";\n      }\n    }\n\n    .jimu-widget-setting--section-header {\n      &.row {\n        margin-left: 0;\n        margin-right: 0;\n      }\n    }\n  "])),t.sizes[3],t.colors.palette.light[800],t.colors.palette.dark[600],t.typography.weights.bold,t.sizes[3])},k=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},S=function(e){var t=e.theme,n=e.flow,o=e.action;return Object(m.css)(p||(p=k(["\n    &.jimu-widget-setting--row {\n      margin-bottom: 0;\n      margin-left: 0;\n      margin-right: 0;\n      &:first-child  /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */{\n        margin-top: 0;\n      }\n      + .jimu-widget-setting--row {\n        margin-top: ",";\n      }\n    }\n    &,\n    .jimu-widget-setting--row-header {\n      > .jimu-widget-setting--row-label {\n        font-size: 0.8125rem;\n        font-weight: 500;\n        color: ",";\n      }\n    }\n    > .jimu-widget-setting--row-label {\n      display: inline-block;\n      margin-bottom: ",";\n      margin-right: 20px;\n    }\n    > input {\n      &[type='number'] {\n        width: 50px;\n        flex-shrink: 0;\n      }\n    }\n    input {\n      &[type='number'] {\n        &::-webkit-inner-spin-button,\n        &::-webkit-outer-spin-button {\n          -webkit-appearance: none;\n          margin: 0;\n        }\n      }\n    }\n    .jimu-widget-setting--row-header {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      margin-bottom: 0.75rem;\n      > .btn {\n        width: 100%;\n        padding-left: 0;\n        padding-right: 0;\n      }\n      .jimu-widget-setting--row-label {\n        text-align: left;\n        flex: 1;\n        margin-bottom: 0;\n      }\n    }\n    &.form-inline {\n      flex-wrap: nowrap;\n      .jimu-widget-setting--row-label {\n        max-width: 80%;\n        + * {\n          flex-shrink: 0;\n        }\n      }\n    }\n  "],["\n    &.jimu-widget-setting--row {\n      margin-bottom: 0;\n      margin-left: 0;\n      margin-right: 0;\n      &:first-child  /* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */{\n        margin-top: 0;\n      }\n      + .jimu-widget-setting--row {\n        margin-top: ",";\n      }\n    }\n    &,\n    .jimu-widget-setting--row-header {\n      > .jimu-widget-setting--row-label {\n        font-size: 0.8125rem;\n        font-weight: 500;\n        color: ",";\n      }\n    }\n    > .jimu-widget-setting--row-label {\n      display: inline-block;\n      margin-bottom: ",";\n      margin-right: 20px;\n    }\n    > input {\n      &[type='number'] {\n        width: 50px;\n        flex-shrink: 0;\n      }\n    }\n    input {\n      &[type='number'] {\n        &::-webkit-inner-spin-button,\n        &::-webkit-outer-spin-button {\n          -webkit-appearance: none;\n          margin: 0;\n        }\n      }\n    }\n    .jimu-widget-setting--row-header {\n      display: flex;\n      width: 100%;\n      align-items: center;\n      margin-bottom: 0.75rem;\n      > .btn {\n        width: 100%;\n        padding-left: 0;\n        padding-right: 0;\n      }\n      .jimu-widget-setting--row-label {\n        text-align: left;\n        flex: 1;\n        margin-bottom: 0;\n      }\n    }\n    &.form-inline {\n      flex-wrap: nowrap;\n      .jimu-widget-setting--row-label {\n        max-width: 80%;\n        + * {\n          flex-shrink: 0;\n        }\n      }\n    }\n  "])),t.sizes[3],t.colors.palette.dark[400],"wrap"===n?o?"0":t.sizes[2]:"0")},P=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},C=function(e){var t,n,o,r,i,a,s,l,c=null==e?void 0:e.isOpen,p=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"default",f=e.theme,g=null===(r=null===(o=null===(n=null==f?void 0:f.colors)||void 0===n?void 0:n.palette)||void 0===o?void 0:o.light)||void 0===r?void 0:r[500],h=null===(s=null===(a=null===(i=null==f?void 0:f.colors)||void 0===i?void 0:i.palette)||void 0===a?void 0:a.light)||void 0===s?void 0:s[800],b=null===(l=null==f?void 0:f.colors)||void 0===l?void 0:l.primary;return"primary"!==p?Object(m.css)(u||(u=P(["\n    .dividing-line {\n      background-color: ",";\n    }\n    "],["\n    .dividing-line {\n      background-color: ",";\n    }\n    "])),h):Object(m.css)(d||(d=P(["\n    .handle {\n      border-top: 2px solid ",";\n      background-color: ",";\n      .title {\n        padding-left: 8px;\n        padding-right: 8px;\n      }\n    }\n    .dividing-line {\n      background-color: ",";\n    }\n    "],["\n    .handle {\n      border-top: 2px solid ",";\n      background-color: ",";\n      .title {\n        padding-left: 8px;\n        padding-right: 8px;\n      }\n    }\n    .dividing-line {\n      background-color: ",";\n    }\n    "])),c?b:g,g,h)},I=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function _(e){var t=e.theme,n=t&&t.colors&&t.colors.palette&&t.colors.palette.light[500]||"#ccc",o=t&&t.colors&&t.colors.primary||"blue",r=m.polished.rgba(n,.5);return window.jimuConfig.isInBuilder?Object(m.css)(f||(f=I(["\n    .widget-builder-linksetting {\n      .option-name{\n        font-size: ",";\n        color: ",";\n        font-weight:\n      }\n      .linksetting-list {\n        .view-border{\n          border-width: 1px;\n          border-style: solid;\n        }\n        .linksetting-list-item {\n          height: ",";\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .linksetting-list-select {\n          background-color: ",";\n        }\n      }\n\n      select {\n        padding-top: "," !important;\n      }\n\n      .itemselected {\n        background-color: "," !important;\n      }\n\n      .btn-primary {\n        background-color: #00A6B6 !important;\n        border-color: #00A6B6 !important;\n        color: #ffffff !important;\n      }\n\n      .form-check-input {\n        span {\n          background: #00A6B6 !important;\n        }\n      }\n\n      .form-check-input:hover {\n        border-color: gray;\n      }\n\n      input[type='radio'].form-check-input {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        background: transparent;\n        border: 1px solid #000;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        transition: all 0.2s ease;\n        &:before {\n        content: '';\n        display: block;\n        position: absolute;\n        width: 0;\n        height: 0;\n        border-radius: 50%;\n        background: #00A6B6 !important;\n        margin: 8px;\n        transition: all 0.2s ease-out;\n        }\n        &:hover {\n        border-color: #00A6B6 !important;\n        }\n        &:checked {\n        &:before {\n            width: 8px;\n            height: 8px;\n            margin: 3px;\n        }\n        }\n      }\n      .link-setting-cursor-pointer{\n        cursor: pointer;\n      }\n      .open-type-label{\n        max-width: calc(100% - ",");\n        display: inline-block;\n      }\n    }\n    .url-error-container{\n      *{\n        color: ",";\n      }\n      div{\n        width: calc(100% - 20px);\n        margin-left: 4px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  "],["\n    .widget-builder-linksetting {\n      .option-name{\n        font-size: ",";\n        color: ",";\n        font-weight:\n      }\n      .linksetting-list {\n        .view-border{\n          border-width: 1px;\n          border-style: solid;\n        }\n        .linksetting-list-item {\n          height: ",";\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .linksetting-list-select {\n          background-color: ",";\n        }\n      }\n\n      select {\n        padding-top: "," !important;\n      }\n\n      .itemselected {\n        background-color: "," !important;\n      }\n\n      .btn-primary {\n        background-color: #00A6B6 !important;\n        border-color: #00A6B6 !important;\n        color: #ffffff !important;\n      }\n\n      .form-check-input {\n        span {\n          background: #00A6B6 !important;\n        }\n      }\n\n      .form-check-input:hover {\n        border-color: gray;\n      }\n\n      input[type='radio'].form-check-input {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        background: transparent;\n        border: 1px solid #000;\n        width: 16px;\n        height: 16px;\n        border-radius: 50%;\n        transition: all 0.2s ease;\n        &:before {\n        content: '';\n        display: block;\n        position: absolute;\n        width: 0;\n        height: 0;\n        border-radius: 50%;\n        background: #00A6B6 !important;\n        margin: 8px;\n        transition: all 0.2s ease-out;\n        }\n        &:hover {\n        border-color: #00A6B6 !important;\n        }\n        &:checked {\n        &:before {\n            width: 8px;\n            height: 8px;\n            margin: 3px;\n        }\n        }\n      }\n      .link-setting-cursor-pointer{\n        cursor: pointer;\n      }\n      .open-type-label{\n        max-width: calc(100% - ",");\n        display: inline-block;\n      }\n    }\n    .url-error-container{\n      *{\n        color: ",";\n      }\n      div{\n        width: calc(100% - 20px);\n        margin-left: 4px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n  "])),m.polished.rem(13),t.colors.palette.dark[400],m.polished.rem(30),r,r,m.polished.rem(2),o,m.polished.rem(25),t.colors.danger):Object(m.css)(g||(g=I(["\n    .widget-builder-linksetting {\n      .option-name{\n        font-size: ",";\n        color: ",";\n        font-weight: 500;\n      }\n      .mb-12{\n        margin-bottom: ",";\n      }\n      .item-common{\n        background: ",";\n      }\n      .view-border{\n        border: 1px solid ",";\n      }\n      .linksetting-list {\n\n        .linksetting-list-item {\n          height: ",";\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .linksetting-list-select {\n          background-color: ",";\n        }\n      }\n\n      select {\n        padding-top: "," !important;\n      }\n\n      .itemselected {\n        background-color: "," !important;\n      }\n      .link-setting-cursor-pointer{\n        cursor: pointer;\n      }\n      .open-type-label{\n        max-width: calc(100% - ",");\n        display: inline-block;\n      }\n      .url-error-container{\n        *{\n          color: ",";\n        }\n        div{\n          width: calc(100% - 20px);\n          margin-left: 4px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n  "],["\n    .widget-builder-linksetting {\n      .option-name{\n        font-size: ",";\n        color: ",";\n        font-weight: 500;\n      }\n      .mb-12{\n        margin-bottom: ",";\n      }\n      .item-common{\n        background: ",";\n      }\n      .view-border{\n        border: 1px solid ",";\n      }\n      .linksetting-list {\n\n        .linksetting-list-item {\n          height: ",";\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .linksetting-list-select {\n          background-color: ",";\n        }\n      }\n\n      select {\n        padding-top: "," !important;\n      }\n\n      .itemselected {\n        background-color: "," !important;\n      }\n      .link-setting-cursor-pointer{\n        cursor: pointer;\n      }\n      .open-type-label{\n        max-width: calc(100% - ",");\n        display: inline-block;\n      }\n      .url-error-container{\n        *{\n          color: ",";\n        }\n        div{\n          width: calc(100% - 20px);\n          margin-left: 4px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n  "])),m.polished.rem(13),t.colors.palette.dark[400],m.polished.rem(12),t.colors.white,t.colors.palette.light[400],m.polished.rem(30),r,r,m.polished.rem(2),o,m.polished.rem(25),t.colors.danger)}var M,N=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function A(e){var t=e.theme;return Object(m.css)(M||(M=N(["\n    color: ",";\n    .font-size-13{\n      font-size: "," !important;\n    }\n    .subscriber-warning{\n      font-size: ",";\n    }\n    .secondary-title{\n      font-size: ",";\n    }\n    .content-table{\n      font-size: ",";\n      color: ",";\n    }\n    .content-table-header{\n      height: ",";\n      background-color: ",";\n      display: block;\n      line-height: ",";\n    }\n    .content-table-tr{\n      height: ",";\n      line-height: ",";\n      border-bottom: 1px solid ",";\n    }\n    .col-4, .col-2{\n      height: 100%;\n    }\n    .request-limit{\n      margin-top: ",";\n    }\n    .request-interval{\n      display: block;\n      margin-top: ",";\n    }\n  "],["\n    color: ",";\n    .font-size-13{\n      font-size: "," !important;\n    }\n    .subscriber-warning{\n      font-size: ",";\n    }\n    .secondary-title{\n      font-size: ",";\n    }\n    .content-table{\n      font-size: ",";\n      color: ",";\n    }\n    .content-table-header{\n      height: ",";\n      background-color: ",";\n      display: block;\n      line-height: ",";\n    }\n    .content-table-tr{\n      height: ",";\n      line-height: ",";\n      border-bottom: 1px solid ",";\n    }\n    .col-4, .col-2{\n      height: 100%;\n    }\n    .request-limit{\n      margin-top: ",";\n    }\n    .request-interval{\n      display: block;\n      margin-top: ",";\n    }\n  "])),t.colors.palette.dark[600],m.polished.rem(13),m.polished.rem(13),m.polished.rem(14),m.polished.rem(13),t.colors.palette.dark[800],m.polished.rem(32),t.colors.palette.light[400],m.polished.rem(30),m.polished.rem(39),m.polished.rem(39),t.colors.palette.light[400],m.polished.rem(6),m.polished.rem(-3))}var R,E=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function L(e){var t=e.theme;return Object(m.css)(R||(R=E(["\n    max-width: "," !important;\n    .header{\n      font-size: ",";\n      color: ",";\n    }\n    .proxy-setting-container{\n      width: ",";\n      height: ",";\n      border: 0;\n      color: ",";\n    }\n    .px-30{\n      padding-right: ",";\n      padding-left: ",";\n    }\n  "],["\n    max-width: "," !important;\n    .header{\n      font-size: ",";\n      color: ",";\n    }\n    .proxy-setting-container{\n      width: ",";\n      height: ",";\n      border: 0;\n      color: ",";\n    }\n    .px-30{\n      padding-right: ",";\n      padding-left: ",";\n    }\n  "])),m.polished.rem(960),m.polished.rem(16),t.colors.palette.dark[600],m.polished.rem(960),m.polished.rem(640),t.colors.palette.dark[600],m.polished.rem(30),m.polished.rem(30))}var D,T,z,U,B=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},W=function(e){var t=e.theme,n=e.gutter;return Object(m.css)(D||(D=B(["\n    margin-bottom: 0;\n    label {\n      display: inline-flex;\n      align-items: center;\n      margin-right: ",";\n      .jimu-radio {\n        margin-right: ",";\n      }\n    }\n  "],["\n    margin-bottom: 0;\n    label {\n      display: inline-flex;\n      align-items: center;\n      margin-right: ",";\n      .jimu-radio {\n        margin-right: ",";\n      }\n    }\n  "])),n||t.sizes[3],t.gutters[4])},H=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},F=function(e){var t=e.theme,n=e.gutter,o=e.size,r=e.vertical;return Object(m.css)(z||(z=H(["\n    display: flex;\n    > .setting--item-selector-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      > .btn {\n        width: ",";\n        height: ",";\n        background: ",";\n        border: 0;\n        &:hover {\n          border: 0;\n        }\n        &:not(:disabled):not(.disabled):active, \n        &:not(:disabled):not(.disabled).active {\n          background: ",";\n          border: 0;\n          outline: 2px solid ",";\n        }\n      }\n      > label {\n        margin-bottom: 0;\n        margin-top: ",";\n      }\n      + .setting--item-selector-item {\n        margin-left: ",";\n      }\n    }\n    ","\n  "],["\n    display: flex;\n    > .setting--item-selector-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      > .btn {\n        width: ",";\n        height: ",";\n        background: ",";\n        border: 0;\n        &:hover {\n          border: 0;\n        }\n        &:not(:disabled):not(.disabled):active, \n        &:not(:disabled):not(.disabled).active {\n          background: ",";\n          border: 0;\n          outline: 2px solid ",";\n        }\n      }\n      > label {\n        margin-bottom: 0;\n        margin-top: ",";\n      }\n      + .setting--item-selector-item {\n        margin-left: ",";\n      }\n    }\n    ","\n  "])),o&&o.width,o&&o.height,t.colors.palette.light[200],t.colors.palette.light[200],t.colors.palette.primary[700],t.gutters[3],n||t.sizes[3],r&&Object(m.css)(T||(T=H(["\n      flex-direction: column;\n      > .setting--item-selector-item + .setting--item-selector-item {\n        margin-left: 0;\n        margin-top: ",";\n      }\n    "],["\n      flex-direction: column;\n      > .setting--item-selector-item + .setting--item-selector-item {\n        margin-left: 0;\n        margin-top: ",";\n      }\n    "])),n||t.sizes[3]))},V=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function J(e){var t=e.theme;return Object(m.css)(U||(U=V(["\n    width: ",";\n    height: calc(100% - 70px);\n    padding: 0;\n    overflow: hidden;\n    border-radius: 0;\n    box-shadow: 0 0 0;\n    border-left: 1px solid ",";\n    border-right: 1px solid ",";\n    border-top: 0;\n    border-bottom: 0;\n    margin: 0 !important;\n  "],["\n    width: ",";\n    height: calc(100% - 70px);\n    padding: 0;\n    overflow: hidden;\n    border-radius: 0;\n    box-shadow: 0 0 0;\n    border-left: 1px solid ",";\n    border-right: 1px solid ",";\n    border-top: 0;\n    border-bottom: 0;\n    margin: 0 !important;\n  "])),m.polished.rem(260),t.colors.palette.light[800],t.colors.palette.light[800])}var q,G,Y,Q,X=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},K=function(e){var t=e.theme;return Object(m.css)(q||(q=X(["\n    .dropdown-menu--inner {\n      background-color: ",";\n      padding: 0;\n    }\n\n    .dropdown-toggle-content {\n      width: 100%;\n    }\n\n    .layerviewselector-input {\n      width: 100%;\n      height: 30px !important;\n      background-color: ",";\n      flex-direction: unset !important;\n    }\n\n    .layerviewselector-input-text {\n      max-width: calc(100% - 13px);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .layerviewselector-bg {\n      max-height: 270px;\n      overflow-y: auto;\n      background-color: ",";\n    }\n\n    .layerviewselector-item-bg {\n      cursor: pointer;\n    }\n\n    .layerviewselector-item-bg:hover {\n      background-color: ",";\n    }\n\n    .layerviewselector-ds-item {\n      cursor: pointer;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 100%;\n    }\n\n    .layerviewselector-ds-item:hover {\n      background-color: ",";\n    }\n\n    .layerviewselector-ds-item-selected {\n      background-color: ",";\n    }\n  "],["\n    .dropdown-menu--inner {\n      background-color: ",";\n      padding: 0;\n    }\n\n    .dropdown-toggle-content {\n      width: 100%;\n    }\n\n    .layerviewselector-input {\n      width: 100%;\n      height: 30px !important;\n      background-color: ",";\n      flex-direction: unset !important;\n    }\n\n    .layerviewselector-input-text {\n      max-width: calc(100% - 13px);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .layerviewselector-bg {\n      max-height: 270px;\n      overflow-y: auto;\n      background-color: ",";\n    }\n\n    .layerviewselector-item-bg {\n      cursor: pointer;\n    }\n\n    .layerviewselector-item-bg:hover {\n      background-color: ",";\n    }\n\n    .layerviewselector-ds-item {\n      cursor: pointer;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      width: 100%;\n    }\n\n    .layerviewselector-ds-item:hover {\n      background-color: ",";\n    }\n\n    .layerviewselector-ds-item-selected {\n      background-color: ",";\n    }\n  "])),t.colors.palette.secondary[200],t.colors.palette.secondary[200],t.colors.palette.secondary[200],t.colors.primary,t.colors.primary,t.colors.primary)},Z=n(19),$=n(1),ee=(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.render=function(){return m.React.createElement($.Container,{className:Object(m.classNames)(this.props.className,"jimu-widget-setting--section"),style:this.props.style},this.props.title&&m.React.createElement($.Row,{className:"jimu-widget-setting--section-header"},m.React.createElement("h6",{className:"w-100 text-truncate setting-text-level-1"},this.props.title)),this.props.children)},t}(m.React.PureComponent),ne=m.themeUtils.withStyles(te,"SettingSection"),oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),re=function(e){return m.React.createElement("div",{className:"jimu-widget-setting--row-header mb-3"},e.children)},ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onActionClick=function(e){"drilldown"===e&&t.props&&t.props.onDrillDown&&t.props.onDrillDown()},t}return oe(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.action,r=t.flow,i=t.truncateLabel,a=t.label,s=t.indented,l=t.className,c=t.level,p=void 0===c?3:c,u=Object(m.classNames)(l,"jimu-widget-setting--row","form-group","align-items-center",{"form-inline":"wrap"!==r,"pl-4":s}),d=o?"span":"label",f=a&&m.React.createElement(d,{className:Object(m.classNames)("jimu-widget-setting--row-label justify-content-start flex-grow-1 text-break setting-text-level-"+p,{"w-100 mr-0":"wrap"===r,"text-truncate":i})},a);return m.React.createElement($.Row,{className:u},"wrap"===r&&o?m.React.createElement(re,null,"drilldown"===o?m.React.createElement($.Button,{size:"sm",type:"tertiary",onClick:function(){return e.onActionClick("drilldown")}},f,m.React.createElement($.Icon,{className:"right-icon",icon:n(81)})):void 0):f,this.props.children)},t}(m.React.PureComponent),ae=m.themeUtils.withStyles(ie,"SettingRow"),se=function(){return(se=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},le=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},ce=n(93),pe=n(59),ue=m.themeUtils.withStyles((function(e){e.type;var t=e.className,n=e.leftIcon,o=e.label,r=e.bottomLine,i=void 0!==r&&r,a=e.isOpen,s=e.onRequestOpen,l=e.onRequestClose,c=e.children,p=e.rightIcon,u=void 0===p?pe:p,d=e.rightActiveIcon,f=void 0===d?ce:d,g=e.level,h=void 0===g?0:g,b=le(e,["type","className","leftIcon","label","bottomLine","isOpen","onRequestOpen","onRequestClose","children","rightIcon","rightActiveIcon","level"]),v=a?f:u;return m.React.createElement("div",{className:Object(m.classNames)("setting-collapse w-100",t)},m.React.createElement("div",{className:"handle w-100 d-flex justify-content-between"},m.React.createElement("div",{title:o,className:"title py-1 d-flex align-items-center flex-grow-1",style:{maxWidth:"85%"}},n&&m.React.createElement($.Icon,{className:"mr-2",size:12,icon:n}),m.React.createElement("div",{className:"text-truncate setting-text-level-"+h,style:{maxWidth:"80%"}}," ",o)),m.React.createElement($.Button,{size:"sm",type:"tertiary",icon:!0,onClick:function(){a?null==l||l():null==s||s()}},m.React.createElement($.Icon,{size:12,icon:v}))),m.React.createElement($.Collapse,se({},b,{isOpen:a}),m.React.createElement(m.React.Fragment,null,c,i&&m.React.createElement("div",{className:"dividing-line mt-3",style:{width:"100%",height:"1px"}}))))}),"SettingCollapse"),de=function(e){var t=e.defaultIsOpen,n=void 0!==t&&t,o=e.label,r=le(e,["defaultIsOpen","label"]),i=m.React.useState(n),a=i[0],s=i[1];return m.React.createElement(ue,se({label:o,isOpen:a},r,{onRequestOpen:function(){return s(!0)},onRequestClose:function(){return s(!1)}}))},fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ge=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},me=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},he=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelectWidget=function(e){n.setState({currentWidget:e})},n.getListItemJSX=function(e){return Object(m.jsx)($.Card,{className:Object(m.classNames)("widget-card-item",{"widget-card-selected":n.state.currentWidget&&0===n.state.currentWidget.indexOf(e.uri)}),key:e.title,onClick:function(){return n.onSelectWidget(e.uri)}},Object(m.jsx)("div",{className:"widget-card-image bg-light-300"},Object(m.jsx)("div",null,Object(m.jsx)($.CardImg,{top:!0,width:"100%",src:e.image.src,alt:e.image.alt}))),Object(m.jsx)($.CardBody,{className:"widget-card-content"},Object(m.jsx)("span",{className:"text-capitalize",title:e.title},e.title)))},n.state={currentWidget:null,listInfo:[]},n}return fe(t,e),t.prototype.componentDidMount=function(){var e=this;this.getListInfo().then((function(t){e.setState({listInfo:t.listInfo})}))},t.prototype.getListInfo=function(){return ge(this,void 0,void 0,(function(){var e=this;return me(this,(function(t){switch(t.label){case 0:return[4,fetch(m.urlUtils.getAbsoluteRootUrl()+"widgets/widgets-info.json").then((function(t){return ge(e,void 0,void 0,(function(){return me(this,(function(e){switch(e.label){case 0:return[4,t.json()];case 1:return[2,e.sent()]}}))}))})).then((function(e){return{listInfo:e.map((function(e){var t={title:"",uri:"",image:{src:""}};return t.title=e.label,t.uri=e.path,t.image.src="../"+e.icon,t}))}}))];case 1:return[2,t.sent()]}}))}))},t.prototype.render=function(){var e,t=this;return Object(m.jsx)("div",{className:Object(m.classNames)("w-100 h-100",(e={},e[this.props.className]=!!this.props.className,e))},Object(m.jsx)("div",{className:"component-choose-widget-popup"},Object(m.jsx)($.Modal,{isOpen:!0,className:"component-choose-widget-popup-modal"},Object(m.jsx)($.ModalHeader,{className:"component-choose-widget-clear-border component-choose-widget-modal-header"},this.props.title,Object(m.jsx)("span",{className:"choose-widget-popup-close",onClick:this.props.onCancel})),Object(m.jsx)($.ModalBody,{className:"component-choose-widget-clear-border component-choose-widget-modal-body"},this.state.listInfo.length>0?this.state.listInfo.map((function(e){return t.getListItemJSX(e)})):"Loading..."),Object(m.jsx)($.ModalFooter,{className:"component-choose-widget-clear-border component-choose-widget-modal-footer"},Object(m.jsx)($.Button,{onClick:function(){return t.props.onOK(t.state.currentWidget)}},"OK"),Object(m.jsx)($.Button,{onClick:this.props.onCancel},"Cancel")))))},t}(m.React.PureComponent),be=m.themeUtils.withStyles(he,"WidgetSelector"),ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},we=function(e){function t(t){var n=e.call(this,t)||this;return n.noneMapWidget=Object(m.Immutable)({id:"none",label:n.props.intl.formatMessage({id:"none",defaultMessage:$.defaultMessages.none})}),n.getStyle=function(e){return Object(m.css)(Y||(Y=ye(["\n      .component-map-selector{\n        width: 100%;\n      }\n\n    "],["\n      .component-map-selector{\n        width: 100%;\n      }\n\n    "])))},n.onSelect=function(e){var t=e.target.value,o=t===n.noneMapWidget.id?[]:[t];n.props.onSelect&&n.props.onSelect(o)},n.getSelectedMapWidget=function(){if(!n.props.useMapWidgetIds)return null;var e=n.props.useMapWidgetIds[0];return n.props.mapWidgetJsons.find((function(t){return t.id===e}))||null},n}return ve(t,e),t.prototype.render=function(){var e=this.props.mapWidgetJsons,t=this.getSelectedMapWidget();return Object(m.jsx)("div",{css:this.getStyle(this.props.theme),className:"w-100"},Object(m.jsx)("div",{className:"component-map-selector"},Object(m.jsx)($.Select,{size:"sm",value:t?t.id:this.noneMapWidget.id,onChange:this.onSelect,className:""},e.concat(this.noneMapWidget).map((function(e,t){return Object(m.jsx)("option",{key:t,value:e.id},e.label)})))))},t}(m.React.PureComponent),xe=m.ReactRedux.connect((function(e,t){var n=window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder&&e.appStateInBuilder.appConfig:e.appConfig,o=n&&n.widgets;return{mapWidgetJsons:o?Object.keys(o).filter((function(e){return o[e]&&o[e].manifest&&o[e].manifest.properties&&o[e].manifest.properties.canCreateMapView})).map((function(e){return o[e]})):[]}}))(Object(m.injectIntl)(m.themeUtils.withTheme(we))),je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oe=function(e){function t(t){return e.call(this,t)||this}return je(t,e),t.prototype.getContent=function(){for(var e=this,t=[],n=0;n<this.props.fromRootDsIds.length;n++)t.push(this.props.fromRootDsIds[n]);return m.React.createElement("div",{className:"w-100"},t.map((function(t,n){var o=m.DataSourceManager.getInstance().getDataSource(t),r=o.getLabel(),i=o.getChildDataSources();return m.React.createElement("div",{key:n},m.React.createElement("div",{className:"text-dark-600 pl-2 pr-2",style:{fontSize:"14px"}},r),i.map((function(n,o){return m.React.createElement("div",{key:o,className:"mt-1 mb-1"},m.React.createElement("div",{className:Object(m.classNames)("layerviewselector-ds-item pl-2 pr-2",{"layerviewselector-ds-item-selected":e.props.selectedDsIds&&e.props.selectedDsIds.includes(n.id)}),title:n.getLabel(),onClick:function(){e.props.onSelect&&e.props.onSelect({rootDataSourceId:t,dataSourceId:n.id})}},n.getLabel()))})))})))},t.prototype.render=function(){return this.props.fromRootDsIds&&0!=this.props.fromRootDsIds.length?m.React.createElement("div",{className:"w-100"},this.getContent()):null},t}(m.React.PureComponent),ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Se=n(72),Pe=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleList=function(e){n.setState({listOpen:!n.state.listOpen})},n.onResize=function(e){n.setState({width:e})},n.handleChooseLayer=function(e){if(n.props.onSelect)if(e){var t=m.DataSourceManager.getInstance().getDataSource(e.rootDataSourceId),o=m.DataSourceManager.getInstance().getDataSource(e.dataSourceId).id,r=t.getJimuChildId(o)[0];n.props.onSelect(Object(m.Immutable)({jimuMapViewId:n.props.useMapWidgetIds[0]+"-"+e.rootDataSourceId,jimuLayerId:r,datasourceId:e&&e.dataSourceId,rootDatasourceId:e&&e.rootDataSourceId}))}else n.props.onSelect(Object(m.Immutable)({}));n.setState({listOpen:!1})},n.handleClickNone=function(){n.props.onSelect&&n.props.onSelect(Object(m.Immutable)({})),n.setState({listOpen:!1})},n.getTitle=function(){return n.props.jimuLayerViewInfo&&n.props.useMapWidgetIds&&n.props.useMapWidgetIds[0]&&n.props.jimuLayerViewInfo.datasourceId?Object(m.jsx)(m.DataSourceComponent,{useDataSource:Object(m.Immutable)({dataSourceId:n.props.jimuLayerViewInfo.datasourceId,mainDataSourceId:n.props.jimuLayerViewInfo.datasourceId,rootDataSourceId:n.props.jimuLayerViewInfo.rootDatasourceId})},(function(e,t,n){return e.getLabel()})):"None"},n.getContent=function(){var e=n.props.useMapWidgetIds&&n.props.useMapWidgetIds[0],t=Object(m.getAppStore)().getState().appStateInBuilder.appConfig.widgets[e];return t&&t.useDataSources&&t.useDataSources[0]?Object(m.jsx)("div",{className:"w-100 mt-1 mb-2"},Object(m.jsx)("div",{onClick:function(){n.handleClickNone()}},Object(m.jsx)("div",{className:"layerviewselector-ds-item pl-2 pr-2"},"None")),Object(m.jsx)("div",{className:"w-100 mt-1 mb-1"},Object(m.jsx)("div",{className:"w-100 border border-bottom-0 border-right-0 border-left-0"})),Object(m.jsx)(m.MultipleDataSourceComponent,{useDataSources:t.useDataSources},(function(e,t){var o=Object(m.Immutable)(Object.keys(e)),r=[];return n.props.jimuLayerViewInfo&&n.props.jimuLayerViewInfo.datasourceId&&r.push(n.props.jimuLayerViewInfo.datasourceId),Object(m.jsx)(Oe,{fromRootDsIds:o,onSelect:function(e){n.handleChooseLayer(e)},selectedDsIds:Object(m.Immutable)(r)})}))):n.getEmptyContent()},n.getEmptyContent=function(){return Object(m.jsx)("div",{className:"w-100 mt-1 mb-2"},Object(m.jsx)("div",{className:"layerviewselector-ds-item pl-2 pr-2",onClick:function(){n.handleClickNone()}},"None"))},n.state={listOpen:!1,width:0},n}return ke(t,e),t.prototype.render=function(){var e,t,n=this;return Object(m.jsx)("div",{className:Object(m.classNames)("w-100",(e={},e[this.props.className]=!!this.props.className,e))},Object(m.jsx)($.Dropdown,{size:"sm",toggle:function(e){n.toggleList(e)},isOpen:this.state.listOpen,className:"w-100"},Object(m.jsx)($.DropdownToggle,{size:"sm",type:"tertiary",className:Object(m.classNames)("h-100 p-0 m-0 d-flex flex-column align-items-center toollist-item h-100","justify-content-between toollist-item-click h-100 border-0 layerviewselector-input")},Object(m.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center"},Object(m.jsx)("div",{className:"layerviewselector-input-text ml-2"},this.getTitle()),Object(m.jsx)($.Icon,{size:8,icon:Se}))),Object(m.jsx)($.DropdownMenu,{className:Object(m.classNames)("ml-0 mr-0 mb-0 mt-1 p-0",(t={},t[this.props.className]=!!this.props.className,t))},Object(m.jsx)("div",{className:"w-100 h-100 layerviewselector-bg"},Object(m.jsx)("div",{style:{width:this.state.width+"px"}},this.getContent())))),Object(m.jsx)(m.ReactResizeDetector,{handleWidth:!0,onResize:this.onResize}))},t}(m.React.PureComponent),Ce=m.themeUtils.withStyles(Pe,"JimuLayerViewSelector"),Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(e){function t(t){var n=e.call(this,t)||this;return n.onStyleClick=function(e){n.state.selectedValue!==e&&(n.setState({selectedValue:e}),n.props.onChange&&n.props.onChange(e))},n.state={selectedValue:n.props.value},n}return Ie(t,e),t.prototype.componentDidUpdate=function(e,t){e.value!==this.props.value&&this.setState({selectedValue:this.props.value})},t.prototype.render=function(){var e=this,t=this.props.styles;return m.React.createElement("div",{className:Object(m.classNames)("widget-setting--stylepicker w-100",{small:"small"===this.props.size})},Object.keys(t).map((function(n,o){return m.React.createElement("div",{key:n,role:"button",className:Object(m.classNames)("widget-setting--stylepicker-item",{active:n===e.state.selectedValue,"full-width":"full"===t[n].size}),style:{backgroundImage:"url("+t[n].thumbnail+")"},onClick:function(){return e.onStyleClick(n)}})})))},t}(m.React.PureComponent),Me=m.themeUtils.withStyles(_e,"StylePicker"),Ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Re=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},Ee=function(e){function t(n){var o=e.call(this,n)||this;return o.state={value:o.props.value},o.onRadioButtonChange=function(e){var t=e.target.value;o.state.value!==t&&(o.setState({value:t}),o.props.onChange&&o.props.onChange(t))},t.count++,o.inputName="setting-radiogroup-"+t.count,o}return Ne(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.options,o=t.className,r=Re(t,["options","className"]);return m.React.createElement($.FormGroup,Ae({},r,{onChange:this.onRadioButtonChange,className:"setting--button-group "+o}),n.map((function(t){return m.React.createElement($.Label,{key:t.value},m.React.createElement($.Radio,{value:t.value,name:e.inputName,checked:e.state.value===t.value}),t.content)})))},t.count=0,t}(m.React.PureComponent),Le=m.themeUtils.withStyles(Ee,"RadioGroup"),De=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Te=function(){return(Te=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ze=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},Ue=n(48),Be=function(e){function t(n){var o=e.call(this,n)||this;return o.state={value:o.props.value,size:"default"},o.onRadioButtonClick=function(e){o.setState({value:e})},t.count++,o.inputName="setting-radiogroup-"+t.count,o}return De(t,e),t.prototype.componentDidUpdate=function(e,t){this.props.value!==e.value&&this.setState({value:this.props.value}),this.state.value!==t.value&&this.props&&this.props.onChange&&this.props.onChange(this.state.value)},t.prototype.render=function(){var e=this,t=this.props,n=t.options,o=t.className,r=t.vertical,i=ze(t,["options","className","vertical"]),a=Object(m.classNames)("setting--item-selector",o,{vertical:r});return m.React.createElement("div",Te({},i,{className:a}),n.map((function(t,n){return m.React.createElement("div",{className:"setting--item-selector-item "+(e.state.value===t.value?"active":"")+" ",key:t.value.toString()+n},e.state.value===t.value&&m.React.createElement("span",{className:"check-ribbon"},m.React.createElement($.Icon,{icon:Ue})),m.React.createElement($.Button,{className:"p-0",onClick:function(){e.onRadioButtonClick(t.value)},active:e.state.value===t.value},t.content),m.React.createElement("label",{className:"text-break"},t.label))})))},t.count=0,t}(m.React.PureComponent),We=m.themeUtils.withStyles(Be,"ItemCardSelector");!function(e){e.CurrentWindow="_self",e.TopWindow="_top",e.NewWindow="_blank"}(Q||(Q={}));var He=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=function(e){function t(t){var n=e.call(this,t)||this;return n.itemOnClick=function(e){n.props.onClick(e),n.setState({selectedItemName:e.name})},n}return He(t,e),t.prototype.getListContent=function(){var e=this;return this.props.datas.map((function(t,n){return m.React.createElement("div",{onClick:function(){return e.itemOnClick(t)},key:n,className:Object(m.classNames)("linksetting-list-item btn w-100 border text-left border-bottom-0 rounded-0 text-truncate",{itemselected:e.props.linkParam.value===t.id})},t.name)}))},t.prototype.render=function(){var e=this,t=this.props.datas.find((function(t){return e.props.linkParam.value===t.id})),n=t&&t.id;return m.React.createElement("div",{className:"linksetting-list w-100"},m.React.createElement($.Select,{value:n,className:"w-100",onChange:function(t){return e.itemOnClick(e.props.datas.find((function(e){return e.id===t.target.value})))}},this.props.datas.map((function(e,t){return m.React.createElement("option",{key:t,value:e.id},e.name)}))))},t}(m.React.PureComponent),Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(e){function t(t){var n=e.call(this,t)||this;return n.currentPage={id:m.CONSTANTS.CURRENT_PAGE,name:n.props.intl.formatMessage({id:"currentPage",defaultMessage:$.defaultMessages.currentPage})},n.getInitLinkParam=function(){var e=n.props.appConfig.pageStructure;if(!e||e.length<1)return Object(m.Immutable)({value:""});if(n.props.originLinkParam.linkType!==m.LinkType.Page){var t=n.getPageData();return Object(m.Immutable)({linkType:m.LinkType.Page,value:t&&t.some((function(e){return"default"===e.id}))?"default":t&&t[0]&&t[0].id,openType:Q.CurrentWindow})}return n.props.originLinkParam},n.getPageData=function(){var e=n.props.appConfig&&n.props.appConfig.pages,t=e&&Object.keys(e).filter((function(t){return e[t].type===m.PageType.Normal})),o=[n.currentPage];return t&&(o=o.concat(t.map((function(t){return{id:t,name:e[t].label}})))),o},n.setLinkParam=function(e){var t=n.props.linkParam;t=t.set("value",e.id),n.props.onLinkParamChange(t)},n}return Ve(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam();this.props.onLinkParamChange(e)},t.prototype.render=function(){var e=this.getPageData();return m.React.createElement("div",{className:"w-100"},m.React.createElement("div",{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"chooseAPage",defaultMessage:$.defaultMessages.chooseAPage})),m.React.createElement("div",{style:{maxHeight:this.props.selectAreaMaxHeight?this.props.selectAreaMaxHeight:"",overflowY:this.props.selectAreaMaxHeight?"auto":""}},m.React.createElement(Fe,{linkParam:this.props.linkParam,datas:e,onClick:this.setLinkParam})))},t}(m.React.PureComponent),qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ge=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitLinkParam=function(){var e=n.props.appConfig.dialogs;if(!e||Object.keys(e).length<1)return Object(m.Immutable)({linkType:m.LinkType.Dialog,value:""});if(n.props.originLinkParam.linkType!==m.LinkType.Dialog){var t=n.getDialogData();return Object(m.Immutable)({linkType:m.LinkType.Dialog,value:t&&t.some((function(e){return"default"===e.id}))?"default":t&&t[0]&&t[0].id})}return n.props.originLinkParam},n.getDialogData=function(){var e,t,o=n.props.appConfig&&n.props.appConfig.dialogs,r=(null===(e=o&&Object.values(o).filter((function(e){return(null==e?void 0:e.mode)===m.DialogMode.Fixed})))||void 0===e?void 0:e.sort((function(e,t){return e.index-t.index})))||[],i=(null===(t=o&&Object.values(o).filter((function(e){return(null==e?void 0:e.mode)===m.DialogMode.Anchored})))||void 0===t?void 0:t.sort((function(e,t){return e.index-t.index})))||[],a=r.concat(i).map((function(e){return e.id}));return a&&a.filter((function(e){return!o[e].isSplash})).map((function(e){return{id:e,name:o[e].label}}))},n.setLinkParam=function(e){var t=n.props.linkParam;t=t.set("value",e.id),n.props.onLinkParamChange(t)},n}return qe(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam();this.props.onLinkParamChange(e)},t.prototype.componentDidUpdate=function(e){if(e.appConfig!==this.props.appConfig){var t=this.getInitLinkParam();this.props.onLinkParamChange(t)}},t.prototype.render=function(){var e=this.getDialogData();return m.React.createElement("div",{className:"w-100"},m.React.createElement("div",{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"chooseADialog",defaultMessage:$.defaultMessages.chooseADialog})),m.React.createElement("div",{style:{maxHeight:this.props.selectAreaMaxHeight?this.props.selectAreaMaxHeight:"",overflowY:this.props.selectAreaMaxHeight?"auto":""}},e&&e.length>0&&m.React.createElement(Fe,{linkParam:this.props.linkParam,datas:e,onClick:this.setLinkParam})))},t}(m.React.PureComponent),Ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qe=n(72),Xe=n(86),Ke=function(e){function t(t){return e.call(this,t)||this}return Ye(t,e),t.prototype.componentWillMount=function(){this.setState({collapse:this.props.isOpen})},t.prototype.render=function(){var e=this;return m.React.createElement("div",{className:Object(m.classNames)("w-100",this.props.className)},m.React.createElement("div",{style:{overflow:"hidden"},className:"w-100 btn pb-2 pr-2 d-flex justify-content-between",onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),e.setState({collapse:!e.state.collapse})}},m.React.createElement("div",null,this.props.title),m.React.createElement($.Icon,{icon:this.state.collapse?Qe:Xe,size:"12"})),m.React.createElement($.Collapse,{isOpen:this.state.collapse},this.props.children))},t}(m.React.PureComponent),Ze=n(31);function $e(e,t){var n=t&&t.pages;return n&&n[e]&&n[e].type===m.PageType.Normal&&Ze.searchUtils.getContentsInPageBody(t,e,m.LayoutItemType.Section,Ze.utils.getCurrentSizeMode())||[]}function et(e,t){if(!e)return[];var n=tt(e,t);if(n&&n.length>0){var o=[],r=[];return n.forEach((function(e){o=o.concat(nt(e,t).map((function(e){return e.id})))})),o.length>0&&o.forEach((function(e){r=r.concat(et(e,t))})),o.concat(r)}return[]}function tt(e,t){return Ze.searchUtils.getContentsInView(t,e,m.LayoutItemType.Section,Ze.utils.getCurrentSizeMode())||[]}function nt(e,t){for(var n=t.sections[e].views,o=[],r=0;r<n.length;r++)o.push({id:n[r],label:t.views[n[r]].label});return o}function ot(e){if(!e)return null;if(!new RegExp("^(([h][t]{2}[p][s])?://)").test(e))return"httpError";var t=e.indexOf(".");return t<0||t===e.length-1?"invalidUrlError":null}var rt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(){return(it=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},at=function(e){function t(t){var n=e.call(this,t)||this;return n.noScroll="Do not scroll",n.getInitLinkParam=function(){return n.props.originLinkParam.linkType===m.LinkType.View?n.props.originLinkParam:Object(m.Immutable)({linkType:m.LinkType.View,openType:Q.CurrentWindow,value:""})},n.pageChange=function(e){var t=n.props.linkParam;t=t.set("value",e.target.value),n.props.onLinkParamChange(t)},n.viewChange=function(e,t){var o=[];(o=Object.assign(o,n.state.viewLinkParamArr))[0]||(o[0]=n.getDefaultPageId());var r=n.props.appConfig.sections[t].views,i=o.filter((function(t){return r.some((function(e){return e===t}))&&t!==e})),a=[],s=o.indexOf(e);if(s>-1?i=i.concat(o[s]):a=a.concat(e),i&&i.length>0){var l=[];i.forEach((function(e){l=l.concat(et(e,n.props.appConfig))})),i=i.concat(l)}o=(o=o.filter((function(e){return!i.some((function(t){return t===e}))}))).concat(a);var c=n.props.linkParam;c=c.set("value",o.join(",")),n.props.onLinkParamChange(c)},n.viewRemove=function(e){var t=[];(t=Object.assign(t,n.state.viewLinkParamArr))[0]||(t[0]=n.getDefaultPageId());var o=et(e,n.props.appConfig).concat(e);t=t.slice(0,1).concat(t.slice(1).filter((function(e){return!o.some((function(t){return t===e}))})));var r=n.props.linkParam;r=r.set("value",t.join(",")),n.props.onLinkParamChange(r,!0)},n.onScrollToViewChange=function(e){n.setState({scrollToViewId:e})},n.getDefaultPageId=function(){var e=n.props.appConfig&&n.props.appConfig.pages,t=e&&Object.keys(e).filter((function(e){return $e(e,n.props.appConfig).length>0}));return t&&t.find((function(t){return e[t].isDefault}))||t&&t[0]},n.getSelectedVeiwIds=function(){return n.state.viewLinkParamArr.slice(1)},n.state={viewLinkParamArr:[],scrollToViewId:n.noScroll},n}return rt(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam(),t=e.value,n=e.linkType;t&&n===m.LinkType.View?this.setState({viewLinkParamArr:t.split(",")}):this.setState({viewLinkParamArr:[]}),this.props.onLinkParamChange(e)},t.getDerivedStateFromProps=function(e,t){var n=e.linkParam,o=n.value,r=n.linkType;return o&&r===m.LinkType.View?it(it({},t),{viewLinkParamArr:o.split(",")}):it(it({},t),{viewLinkParamArr:[]})},t.prototype.render=function(){var e,t,n=this;if(!this.props.appConfig)return null;var o={};Object.keys(this.props.appConfig.pages).forEach((function(e){n.props.appConfig.pages[e]&&n.props.appConfig.pages[e].type===m.PageType.Normal&&(o[e]=it({},n.props.appConfig.pages[e]))}));var r=this.state.viewLinkParamArr[0]||this.getDefaultPageId();return o[r]?m.React.createElement("div",{className:"w-100"},m.React.createElement("div",{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"chooseViews",defaultMessage:$.defaultMessages.chooseViews})),m.React.createElement("div",{style:{maxHeight:this.props.selectAreaMaxHeight?this.props.selectAreaMaxHeight:"",overflowY:this.props.selectAreaMaxHeight?"auto":""}},m.React.createElement($.Select,{value:r,onChange:this.pageChange,className:"w-100 mb-3"},Object.keys(o).filter((function(e){return $e(e,n.props.appConfig).length>0})).map((function(e,t){return m.React.createElement("option",{key:t,value:o[e].id},o[e].label)}))),m.React.createElement("div",{className:Object(m.classNames)("choose-view",{"mb-3":(null===(e=$e(r,this.props.appConfig))||void 0===e?void 0:e.length)>0})},$e(r,this.props.appConfig).map((function(e){return m.React.createElement(st,{sections:n.props.appConfig.sections,sectionId:e,viewsInfo:nt(e,n.props.appConfig),viewLinkParamArr:n.state.viewLinkParamArr,viewChange:n.viewChange,viewRemove:n.viewRemove,key:e})}))),m.React.createElement("div",{className:Object(m.classNames)("choose-view",{"mb-3":(null===(t=this.getSelectedVeiwIds())||void 0===t?void 0:t.length)>0})},this.getSelectedVeiwIds().map((function(e){return tt(e,n.props.appConfig).map((function(e){return m.React.createElement(st,{sections:n.props.appConfig.sections,sectionId:e,viewsInfo:nt(e,n.props.appConfig),viewLinkParamArr:n.state.viewLinkParamArr,viewChange:n.viewChange,viewRemove:n.viewRemove,key:e})}))}))))):null},t}(m.React.PureComponent),st=function(e){function t(t){var n=e.call(this,t)||this;return n.onViewChange=function(e){n.setState({viewId:e}),n.props.viewChange(e,n.props.sectionId)},n.state={viewId:null},n}return rt(t,e),t.prototype.componentWillUnmount=function(){this.props.viewRemove(this.state.viewId)},t.prototype.render=function(){var e=this;return m.React.createElement(Ke,{className:"mb-3 choose-view",title:this.props.sections[this.props.sectionId]&&this.props.sections[this.props.sectionId].label,isOpen:!0,key:this.props.sectionId},m.React.createElement("div",{className:"linksetting-list w-100 view-border border-top-0 border-left-0 border-right-0 rounded-0"},this.props.viewsInfo.map((function(t,n){return m.React.createElement("div",{onClick:function(){return e.onViewChange(t.id)},key:n,className:Object(m.classNames)("linksetting-list-item btn w-100 view-border px-2 pt-1 text-left border-bottom-0 rounded-0 text-truncate",{"item-common":!e.props.viewLinkParamArr.includes(t.id)},{itemselected:e.props.viewLinkParamArr.includes(t.id)}),title:t.label},t.label)}))))},t}(m.React.PureComponent),lt=n(64),ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pt=Object(m.Immutable)([lt.ExpressionInputType.Static,lt.ExpressionInputType.Attribute,lt.ExpressionInputType.Expression]),ut=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitLinkParam=function(){return n.props.originLinkParam.linkType===m.LinkType.WebAddress?n.props.originLinkParam:Object(m.Immutable)({linkType:m.LinkType.WebAddress,openType:Q.NewWindow,value:""})},n.webAddressInputChange=function(e){var t=e,o=n.props.linkParam;o=o.set("value",t).set("expression",null),n.props.onLinkParamChange(o)},n.webAddressExpressionChange=function(e){var t=n.props.linkParam;t=t.set("expression",e).set("value",""),n.props.onLinkParamChange(t),n.closeExpPopup()},n.openExpPopup=function(){return n.setState({isExpPopupOpen:!0})},n.closeExpPopup=function(){return n.setState({isExpPopupOpen:!1})},n.getDefaultExp=function(){return{name:"Expression",parts:[{type:m.ExpressionPartType.String,exp:'"https://"'}]}},n.staticUrlChange=function(e){var t,o=ot(t=e&&e.target&&e.target.value?e.target.value.trim():"");o?(n.setState({showUrlError:!0}),"httpError"===o?n.setState({urlError:n.props.intl.formatMessage({id:"httpsUrlMessage",defaultMessage:$.defaultMessages.httpsUrlMessage})}):"invalidUrlError"===o&&n.setState({urlError:n.props.intl.formatMessage({id:"invalidUrlMessage",defaultMessage:$.defaultMessages.invalidUrlMessage})})):n.setState({showUrlError:!1,urlError:""}),n.webAddressInputChange(t)},n.state={isExpPopupOpen:!1,showUrlError:!1,urlError:""},n}return ct(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam();this.props.onLinkParamChange(e)},t.prototype.render=function(){return m.React.createElement("div",{className:"w-100"},m.React.createElement("div",{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"url",defaultMessage:$.defaultMessages.url})),m.React.createElement("div",null,this.props.useDataSources&&this.props.useDataSources.length>0?m.React.createElement(lt.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.webAddressExpressionChange,expression:this.props.linkParam&&this.props.linkParam.expression||this.getDefaultExp(),closeExpPopup:this.closeExpPopup,openExpPopup:this.openExpPopup,isExpPopupOpen:this.state.isExpPopupOpen,types:pt,widgetId:this.props.widgetId}):m.React.createElement($.TextInput,{value:this.props.linkParam.value?this.props.linkParam.value:"",className:"w-100",invalid:this.state.showUrlError,placeholder:this.props.intl.formatMessage({id:"websitePlaceholder",defaultMessage:$.defaultMessages.websitePlaceholder}),spellCheck:!1,onChange:this.staticUrlChange,onAcceptValue:this.webAddressInputChange}),this.state.showUrlError&&m.React.createElement("div",{className:"d-flex w-100 align-items-center justify-content-between url-error-container",style:{marginTop:"5px"}},m.React.createElement($.Icon,{size:16,icon:n(65)}),m.React.createElement("div",null,this.state.urlError))))},t}(m.React.PureComponent),dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ft=function(e){function t(t){var n=e.call(this,t)||this;return n.getLinkTypeContent=function(){return n.props.isLinkPageSetting?Object(m.jsx)($.Select,{value:n.state.linkParam.linkType,onChange:n.linkTypeChange,className:"w-100"},Object(m.jsx)("option",{value:m.LinkType.WebAddress},n.props.intl.formatMessage({id:"url",defaultMessage:$.defaultMessages.url}))):Object(m.jsx)($.Select,{value:n.state.linkParam.linkType,onChange:n.linkTypeChange,className:"w-100"},Object(m.jsx)("option",{value:m.LinkType.None},n.props.intl.formatMessage({id:"none",defaultMessage:$.defaultMessages.none})),Object(m.jsx)("option",{value:m.LinkType.Page},n.props.intl.formatMessage({id:"page",defaultMessage:m.defaultMessages.page})),Object(m.jsx)("option",{value:m.LinkType.View},n.props.intl.formatMessage({id:"view",defaultMessage:m.defaultMessages.view})),Object(m.jsx)("option",{value:m.LinkType.Dialog},n.props.intl.formatMessage({id:"dialog",defaultMessage:m.defaultMessages.dialog})),Object(m.jsx)("option",{value:m.LinkType.WebAddress},n.props.intl.formatMessage({id:"url",defaultMessage:$.defaultMessages.url})))},n.getLinkContent=function(e){switch(e){case m.LinkType.None:return null;case m.LinkType.Page:return Object(m.jsx)(Je,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange,intl:n.props.intl});case m.LinkType.Dialog:return Object(m.jsx)(Ge,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange,intl:n.props.intl});case m.LinkType.View:return Object(m.jsx)(at,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,intl:n.props.intl,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange,browserSizeMode:n.props.browserSizeMode});case m.LinkType.WebAddress:return Object(m.jsx)(ut,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,intl:n.props.intl,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,onLinkParamChange:n.linkParamChange,useDataSources:n.props.useDataSources,widgetId:n.props.widgetId});default:return null}},n.linkTypeChange=function(e){var t=Object(m.Immutable)(n.state.linkParam);n.setState({linkParam:t.set("linkType",e.target.value)})},n.radioOpenTypeChange=function(e){var t=Object(m.Immutable)(n.state.linkParam);t=t.set("openType",e),n.setState({linkParam:t})},n.linkParamChange=function(e,t){t?e&&n.state.linkParam&&e.linkType===n.state.linkParam.linkType&&n.setState({linkParam:e}):n.setState({linkParam:e})},n.settingConfirm=function(){var e=Object(m.Immutable)(n.state.linkParam);n.setState({originLinkParam:e}),n.props.onSettingConfirm(e)},n.isLinkParamOk=function(e){if(!e||!e.linkType)return!1;if(e.linkType===m.LinkType.Page||e.linkType===m.LinkType.Dialog)return!(!e.value||"string"!=typeof e.value);if(e.linkType===m.LinkType.View){var t=e.value&&e.value.split(",")[0]||null,o=e.value&&e.value.split(",").slice(1)||[];return!!(t&&"string"==typeof t&&o.length>0)}if(e.linkType===m.LinkType.WebAddress){if(n.props.useDataSources&&n.props.useDataSources.length>0){var r=e.expression&&e.expression.parts,i=!1;return r&&r.length>0&&(i=1!==r.length||!!r[0].exp&&'""'!==r[0].exp),i}return!ot(e.value)}return!0},n}return dt(t,e),t.prototype.componentWillMount=function(){if(this.props.linkParam&&this.props.linkParam.linkType)this.setState({linkParam:Object(m.Immutable)(this.props.linkParam),originLinkParam:Object(m.Immutable)(this.props.linkParam)});else{var e={linkType:m.LinkType.None,openType:"_self"};this.setState({linkParam:Object(m.Immutable)(e),originLinkParam:Object(m.Immutable)(e)})}},t.prototype.render=function(){var e=this;if(this.props.appConfig){var t=this.getLinkTypeContent(),n=this.getLinkContent(this.state.linkParam.linkType);return Object(m.jsx)("div",{className:Object(m.classNames)(this.props.className,"w-100 h-100")},Object(m.jsx)("div",{className:"widget-builder-linksetting w-100 h-100"},Object(m.jsx)("div",{style:{position:"relative"},className:"w-100 h-100"},Object(m.jsx)($.Container,null,Object(m.jsx)($.Row,{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"linkTo",defaultMessage:$.defaultMessages.linkTo})),Object(m.jsx)($.Row,{className:"mb-3"},t),this.state.linkParam.linkType!==m.LinkType.None?Object(m.jsx)("div",null,Object(m.jsx)($.Row,{className:"mb-3"},n),this.state.linkParam.linkType!==m.LinkType.Dialog&&Object(m.jsx)("div",null,Object(m.jsx)($.Row,{className:"mb-12 option-name"},this.props.intl.formatMessage({id:"openIn",defaultMessage:$.defaultMessages.openIn})),Object(m.jsx)($.Container,{className:"p-0"},Object(m.jsx)($.Row,{className:"mb-3"},Object(m.jsx)($.Radio,{onChange:function(){return e.radioOpenTypeChange(Q.CurrentWindow)},id:"link-setting-app-window",checked:this.state.linkParam.openType===Q.CurrentWindow}),Object(m.jsx)($.Label,{for:"link-setting-app-window",className:"ml-2 link-setting-cursor-pointer open-type-label text-truncate"},this.props.intl.formatMessage({id:"appWindow",defaultMessage:$.defaultMessages.appWindow}))),Object(m.jsx)($.Row,{className:"mb-3"},Object(m.jsx)($.Radio,{onChange:function(){return e.radioOpenTypeChange(Q.TopWindow)},id:"link-setting-top-window",checked:this.state.linkParam.openType===Q.TopWindow}),Object(m.jsx)($.Label,{for:"link-setting-top-window",className:"ml-2 link-setting-cursor-pointer open-type-label text-truncate"},this.props.intl.formatMessage({id:"topWindow",defaultMessage:$.defaultMessages.topWindow}))),Object(m.jsx)($.Row,{className:"mb-3"},Object(m.jsx)($.Radio,{onChange:function(){return e.radioOpenTypeChange(Q.NewWindow)},id:"link-setting-new-window",checked:this.state.linkParam.openType===Q.NewWindow}),Object(m.jsx)($.Label,{for:"link-setting-new-window",className:"ml-2 link-setting-cursor-pointer open-type-label text-truncate"},this.props.intl.formatMessage({id:"newWindow",defaultMessage:$.defaultMessages.newWindow})))))):null),Object(m.jsx)("div",{className:"w-100",style:{position:"absolute"}},Object(m.jsx)($.Button,{className:"w-100 text-dark link-setting-ok-btn",type:"primary",onClick:this.settingConfirm,disabled:!this.isLinkParamOk(this.state.linkParam)},Object(m.jsx)("div",{className:"text-truncate"},this.props.intl.formatMessage({id:"ok",defaultMessage:m.defaultMessages.ok})))))))}return null},t.prototype.componentDidMount=function(){this.props.isLinkPageSetting&&this.linkTypeChange({target:{value:m.LinkType.WebAddress}})},t}(m.React.PureComponent),gt=m.ReactRedux.connect((function(e){return{appConfig:window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder.appConfig:e.appConfig,browserSizeMode:window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder.browserSizeMode:e.browserSizeMode}}))(Object(m.injectIntl)(m.themeUtils.withStyles(ft,"LinkSetting"))),mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=function(){return(ht=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},bt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},vt=[{name:"preventOverflow",options:{boundariesElement:"viewport"}}],yt=function(e){function t(t){var n=e.call(this,t)||this;return n.state={realIsOpen:n.getRealIsOpen()},n}return mt(t,e),t.prototype.componentDidUpdate=function(e){var t=this;e.isOpen!==this.props.isOpen||"left"===this.props.position&&e.leftSidebarCollapse&&!this.props.leftSidebarCollapse||"right"===this.props.position&&e.rightSidebarCollapse&&!this.props.rightSidebarCollapse?this.setState({realIsOpen:this.getRealIsOpen()}):("left"===this.props.position&&!e.leftSidebarCollapse&&this.props.leftSidebarCollapse||"right"===this.props.position&&!e.rightSidebarCollapse&&this.props.rightSidebarCollapse)&&setTimeout((function(){return t.setState({realIsOpen:t.getRealIsOpen()})}),210)},t.prototype.getReference=function(e){return"left"===e?document&&document.querySelector('[data-layoutid="left-sidebar-left-layout"]'):document&&document.querySelector('[data-layoutid="right-sidebar-right-layout"]')},t.prototype.getRealIsOpen=function(){var e=this.props,t=e.isOpen,n=e.position,o=e.leftSidebarCollapse,r=e.rightSidebarCollapse;return t&&("left"===n?o:r)},t.prototype.getPlacement=function(e){return"left"===e?"right-start":"left-start"},t.prototype.render=function(){var e=this.props,t=(e.isOpen,e.position),n=e.className,o=(e.dispatch,e.leftSidebarCollapse,e.rightSidebarCollapse,bt(e,["isOpen","position","className","dispatch","leftSidebarCollapse","rightSidebarCollapse"])),r=this.state.realIsOpen;return m.React.createElement($.Popper,ht({reference:this.getReference(t),placement:this.getPlacement(t),open:r,className:Object(m.classNames)("bg-light-300",n),modifiers:vt},o),this.props.children)},t}(m.React.PureComponent),wt=m.ReactRedux.connect((function(e,t){var n,o,r,i;return{leftSidebarCollapse:null===(o=null===(n=e.widgetsState)||void 0===n?void 0:n["left-sidebar"])||void 0===o?void 0:o.collapse,rightSidebarCollapse:null===(i=null===(r=e.widgetsState)||void 0===r?void 0:r["right-sidebar"])||void 0===i?void 0:i.collapse}}))(m.themeUtils.withStyles(yt,"SidePopper")),xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=function(e){function t(t){var n=e.call(this,t)||this;return n.close=function(){n.props.onSettingCancel()},n.getIsOpen=function(){return n.props.isOpen||n.props.showDialog},n}return xt(t,e),t.prototype.render=function(){var e=this.props.pisition||"right",t=this.props.title;return m.React.createElement(wt,{isOpen:this.getIsOpen(),position:e},m.React.createElement("div",{className:"bg-light-300 w-100 h-100"},m.React.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between"},m.React.createElement($.PanelHeader,{level:1,className:"p-3",showClose:!!this.close,onClose:this.close,title:this.props.intl.formatMessage({id:t?"setLinkForTitle":"setLink",defaultMessage:t?$.defaultMessages.setLinkForTitle:$.defaultMessages.setLink},{title:t})})),m.React.createElement("div",{className:"w-100 h-100 px-3",style:{overflowY:"auto"}},m.React.createElement("div",null,m.React.createElement(gt,{isLinkPageSetting:this.props.isLinkPageSetting,linkParam:this.props.linkParam,onSettingConfirm:this.props.onSettingConfirm,useDataSources:this.props.useDataSources,selectAreaMaxHeight:"500px",widgetId:this.props.widgetId}),m.React.createElement("div",{style:{height:"100px"}})))))},t}(m.React.PureComponent),Ot=m.themeUtils.withTheme(Object(m.injectIntl)(jt)),kt=n(44),St=function(){return(St=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Pt=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},Ct=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function It(){var e,t,n,o;return Pt(this,void 0,void 0,(function(){var r,i;return Ct(this,(function(a){return r=null===(o=null===(n=null===(t=null===(e=Object(m.getAppStore)())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===o?void 0:o.dataSources,i=[],r&&Object.keys(r).forEach((function(e){var t=m.DataSourceManager.getInstance().getDataSource(e);i.push(_t(t))})),[2,Promise.allSettled(i).then((function(e){var t={};return e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})).forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]?t[n].dataSources=t[n].dataSources.concat(e[n].dataSources):t=St(St({},t),e)}))})),t}))]}))}))}function _t(e,t){var n,o,r,i,a,s,l,c,p,u;return void 0===t&&(t=!1),Pt(this,void 0,void 0,(function(){var d,f,g,h,b,v,y,w,x,j,O,k;return Ct(this,(function(S){switch(S.label){case 0:return d={},e?(f=null===(i=null===(r=null===(o=null===(n=Object(m.getAppStore)())||void 0===n?void 0:n.getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===r?void 0:r.appConfig)||void 0===i?void 0:i.widgets,g=(null===(a=e.getMainDataSource())||void 0===a?void 0:a.id)==e.id,h=kt.dataComponentsUtils.getWidgetsUsingDsOrItsViews(e.id,f,!1).length>0,b=m.dataSourceUtils.getFullServiceUrl(null===(s=e.getDataSourceJson())||void 0===s?void 0:s.url,!1),g&&b&&(t||h)?(null===(l=e.getDataSourceJson())||void 0===l?void 0:l.portalUrl)&&(null===(c=e.getDataSourceJson())||void 0===c?void 0:c.itemId)?[4,Bt(null===(p=e.getDataSourceJson())||void 0===p?void 0:p.itemId,null===(u=e.getDataSourceJson())||void 0===u?void 0:u.portalUrl)]:[3,2]:[3,4]):[2,d];case 1:return y=S.sent(),[3,3];case 2:y=null,S.label=3;case 3:v=y,w=m.dataSourceUtils.isOriginDataPremium(v,b),x=m.dataSourceUtils.isOriginDataSubscriber(v,b),(w||x)&&(d[b]={dataSources:[e],isPremium:w,isSubscriber:x}),S.label=4;case 4:return j=[],g&&e.isDataSourceSet&&(O=e.type===kt.AllDataSourceTypes.WebMap||e.type===kt.AllDataSourceTypes.WebScene,k=O&&h||t,e.getChildDataSources().forEach((function(e){j.push(_t(e,k))}))),[2,Promise.allSettled(j).then((function(e){var t=d;return e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})).forEach((function(e){e&&Object.keys(e).forEach((function(n){t[n]?t[n].dataSources=t[n].dataSources.concat(e[n].dataSources):t=St(St({},t),e)}))})),t}))]}}))}))}function Mt(e,t){var n;if(!e||!t)return null;var o=null;for(var r in t)if((null===(n=t[r])||void 0===n?void 0:n.sourceUrl)===e){o=t[r];break}return o}function Nt(e,t,n,o){return!(!e||!t)&&(e.sourceUrl===t&&((!e.hitsPerInterval&&!n||e.hitsPerInterval===n)&&!((e.intervalSeconds||o)&&e.intervalSeconds!==o)))}function At(){var e,t,n=null===(e=Object(m.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder.appInfo;return null===(t=null==n?void 0:n.typeKeywords)||void 0===t?void 0:t.includes("Registered App")}function Rt(){var e,t,n,o,r,i,a,s,l,c;return Pt(this,void 0,void 0,(function(){var p,u,d,f,g,h,b=this;return Ct(this,(function(v){switch(v.label){case 0:return!(null===(n=null===(t=null===(e=Object(m.getAppStore)().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.jimuConfig)||void 0===n?void 0:n.isInPortal)&&!(null===(i=null===(r=null===(o=Object(m.getAppStore)().getState())||void 0===o?void 0:o.appContext)||void 0===r?void 0:r.jimuConfig)||void 0===i?void 0:i.isDevEdition)?[3,2]:[4,Promise.resolve(!1)];case 1:return[2,v.sent()];case 2:return p=At(),u=!1,p||(d=null===(a=Object(m.getAppStore)().getState())||void 0===a?void 0:a.appStateInBuilder.appInfo,f=null===(c=null===(l=null===(s=Object(m.getAppStore)().getState())||void 0===s?void 0:s.appStateInBuilder)||void 0===l?void 0:l.user)||void 0===c?void 0:c.username,u=(null==d?void 0:d.owner)===f),p||u?[3,4]:[4,Promise.resolve(!1)];case 3:return[2,v.sent()];case 4:return[4,It()];case 5:return g=v.sent(),h=Object.keys(g).map((function(e){return Pt(b,void 0,void 0,(function(){return Ct(this,(function(t){switch(t.label){case 0:return[4,m.ServiceManager.getInstance().fetchServiceInfo(e).then((function(e){return e.isHostedInSamePortal}))];case 1:return[2,t.sent()]}}))}))})),[2,Promise.all(h).then((function(e){return(null==e?void 0:e.length)>0&&(null==e?void 0:e.some((function(e){return e})))}))]}}))}))}function Et(e,t){return Pt(this,void 0,void 0,(function(){var n,o=this;return Ct(this,(function(r){switch(r.label){case 0:return e&&0!==e.length&&t?[3,2]:[4,Promise.resolve()];case 1:return[2,r.sent()];case 2:return n=zt(),[4,m.esri.restRequest.request(n,{authentication:m.SessionManager.getInstance().getSessionByUrl(Object(m.getAppStore)().getState().portalUrl),httpMethod:"POST",params:{proxies:e.join()}}).then((function(e){return Pt(o,void 0,void 0,(function(){var n;return Ct(this,(function(o){return e.results&&Object.values(e.results).forEach((function(e){e.success&&Lt(e.proxyId,t)})),null==t||t.exec(),(null===(n=e.results)||void 0===n?void 0:n.every((function(e){return!0===e.success})))?[2,Promise.resolve()]:[2,Promise.reject("Deleting existing proxy failed: "+JSON.stringify(e))]}))}))})).catch((function(n){return Pt(o,void 0,void 0,(function(){return Ct(this,(function(o){return e.forEach((function(e){Lt(e,t)})),null==t||t.exec(),[2,Promise.reject("Deleting existing proxy failed: "+JSON.stringify(n))]}))}))}))];case 3:return[2,r.sent()]}}))}))}function Lt(e,t){var n,o,r,i=null===(r=null===(o=null===(n=Object(m.getAppStore)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===r?void 0:r.appProxies,a=i&&Object.values(i).find((function(t){return t.proxyId===e}));a&&(null==t||t.removeAppProxy(a.id))}function Dt(){var e,t,n,o,r,i,a,s=null===(t=null===(e=Object(m.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.portalUrl,l=null===(o=null===(n=Object(m.getAppStore)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===o?void 0:o.appId;return s+"/sharing/rest/content/users/"+(null===(a=null===(i=null===(r=Object(m.getAppStore)().getState())||void 0===r?void 0:r.appStateInBuilder)||void 0===i?void 0:i.appInfo)||void 0===a?void 0:a.owner)+"/items/"+l}function Tt(){return Dt()+"/createProxies"}function zt(){return Dt()+"/deleteProxies"}var Ut={};function Bt(e,t){return Pt(this,void 0,void 0,(function(){var n,o=this;return Ct(this,(function(r){switch(r.label){case 0:return n=function(e,t){return m.SessionManager.getInstance().getSessionKeyFromUrl(t)+"-"+e}(e,t),Ut[n]||(Ut[n]=m.requestUtils.requestWrapper(t,(function(n){return Pt(o,void 0,void 0,(function(){return Ct(this,(function(o){switch(o.label){case 0:return[4,m.esri.restPortal.getItem(e,{portal:m.portalUrlUtils.getPortalRestUrl(t),authentication:n})];case 1:return[2,o.sent()]}}))}))}))),[4,Ut[n]];case 1:return[2,r.sent()]}}))}))}var Wt,Ht=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=n(48),Vt=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.interval={none:n.props.intl.formatMessage({id:"intervalNone",defaultMessage:$.defaultMessages.intervalNone}),second:n.props.intl.formatMessage({id:"intervalSecond",defaultMessage:$.defaultMessages.intervalSecond}),minute:n.props.intl.formatMessage({id:"intervalMinute",defaultMessage:$.defaultMessages.intervalMinute}),hour:n.props.intl.formatMessage({id:"intervalHour",defaultMessage:$.defaultMessages.intervalHour}),day:n.props.intl.formatMessage({id:"intervalDay",defaultMessage:$.defaultMessages.intervalDay})},n.setIsHostedInSamePortal=function(){n.props.sourceUrl&&m.ServiceManager.getInstance().fetchServiceInfo(n.props.sourceUrl).then((function(e){n.__unmount||n.setState({isHostedInSamePortal:e.isHostedInSamePortal})}))},n.onToggleProxy=function(){var e;e=n.props.proxyConfig?null:Object(m.Immutable)({sourceUrl:n.props.sourceUrl}),n.props.onChange(n.props.sourceUrl,e)},n.onHitsPerInervalChange=function(e){var t=e,o=Object(m.Immutable)({sourceUrl:n.props.sourceUrl,hitsPerInterval:t}),r=n.props.proxyConfig?n.props.proxyConfig.merge(o):o;n.props.onChange(n.props.sourceUrl,r)},n.onIntervalUnitChange=function(e){var t=e.target.value,o=n.getIntervalSeconds(t),r=Object(m.Immutable)({sourceUrl:n.props.sourceUrl,intervalSeconds:o}),i=n.props.proxyConfig?n.props.proxyConfig.merge(r):r;n.props.onChange(n.props.sourceUrl,i)},n.state={isHostedInSamePortal:!0},n}return Ht(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.setIsHostedInSamePortal()},t.prototype.componentDidUpdate=function(e){this.__unmount=!1,e.sourceUrl!==this.props.sourceUrl&&this.setIsHostedInSamePortal()},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.getIntervalUnit=function(e){if(!e)return"none";switch(e){case 1:return"second";case 60:return"minute";case 3600:return"hour";case 86400:return"day";default:return"none"}},t.prototype.getIntervalSeconds=function(e){if(!e)return null;switch(e){case"second":return 1;case"minute":return 60;case"hour":return 3600;case"day":return 86400;default:return null}},t.prototype.render=function(){var e,t,n=this;if(!this.props.sourceUrl)return null;var o=this.props.label,r=!!this.props.proxyConfig,i=this.getIntervalUnit(null===(e=this.props.proxyConfig)||void 0===e?void 0:e.intervalSeconds),a=m.SessionManager.getInstance().getMainSession(),s=this.props.sourceUrl+"?token="+a.token;return m.React.createElement("tr",{className:"row m-0 content-table-tr"},m.React.createElement("td",{className:"col-2",title:this.state.isHostedInSamePortal?null:this.props.intl.formatMessage({id:"disabledProxyTooltip",defaultMessage:$.defaultMessages.disabledProxyTooltip})},m.React.createElement($.Switch,{onChange:this.onToggleProxy,checked:r,className:"mr-2",disabled:!this.state.isHostedInSamePortal})),m.React.createElement("td",{className:"col-4",title:o},m.React.createElement($.Link,{to:s,target:"_blank",className:"font-size-13 px-0 text-truncate d-block text-left"},o)),m.React.createElement("td",{className:"col-2"},this.props.isPremium&&m.React.createElement($.Icon,{icon:Ft,size:16})),m.React.createElement("td",{className:"col-2"},r&&m.React.createElement($.NumericInput,{size:"sm",value:null===(t=this.props.proxyConfig)||void 0===t?void 0:t.hitsPerInterval,onChange:this.onHitsPerInervalChange,precision:0,min:1,className:"request-limit"})),m.React.createElement("td",{className:"col-2"},r&&m.React.createElement($.Select,{value:i,onChange:this.onIntervalUnitChange,size:"sm",className:"request-interval"},Object.keys(this.interval).map((function(e,t){return m.React.createElement("option",{value:e,key:t,selected:e===i},n.interval[e])})))))},t}(m.React.PureComponent),Jt=n(12),qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnName={authorized:t.props.intl.formatMessage({id:"authorized",defaultMessage:$.defaultMessages.authorized}),subscriberContent:t.props.intl.formatMessage({id:"subscriberContent",defaultMessage:$.defaultMessages.subscriberContent}),credits:t.props.intl.formatMessage({id:"credits",defaultMessage:$.defaultMessages.credits}),requestLimit:t.props.intl.formatMessage({id:"requestLimit",defaultMessage:$.defaultMessages.requestLimit}),requestInterval:t.props.intl.formatMessage({id:"requestInterval",defaultMessage:$.defaultMessages.requestInterval})},t.onProxyChange=function(e,n){var o,r=t.props.proxyConfigs||Object(m.Immutable)({}),i=m.dataSourceUtils.getDsTypeFromWholeServiceUrl(e)===m.DataSourceTypes.SceneService;if(n){if(o=r.set(e,n),i){var a=e.replace("/SceneServer","/FeatureServer"),s=n.set("sourceUrl",a);o=o.set(a,s)}}else if(o=r.without(e),i){a=e.replace("/SceneServer","/FeatureServer");o=o.without(a)}t.props.onChange(o)},t}return qt(t,e),t.prototype.render=function(){var e,t=this,n=this.props.needProxyDataSources,o=this.props.proxyConfigs;return m.React.createElement("div",{className:Jt("h-100 w-100 bg-light-300",(e={},e[this.props.className]=!!this.props.className,e))},m.React.createElement("div",{className:"subscriber-warning"},this.props.intl.formatMessage({id:"subscriberWarning",defaultMessage:$.defaultMessages.subscriberWarning})),m.React.createElement("div",{className:"secondary-title mt-4 mb-3"},this.props.intl.formatMessage({id:"data",defaultMessage:$.defaultMessages.data})),m.React.createElement("table",{className:"content-table w-100"},m.React.createElement("thead",{className:"content-table-header container"},m.React.createElement("tr",{className:"row"},Object.keys(this.columnName).map((function(e,n){return m.React.createElement("th",{key:n,className:Jt("text-truncate",{"col-4":"subscriberContent"===e,"col-2":"subscriberContent"!==e}),title:t.columnName[e]},t.columnName[e])})))),m.React.createElement("tbody",{className:"container"},n&&Object.keys(n).map((function(e,r){var i,a,s=n[e],l=s.dataSources[0],c=(null===(i=l)||void 0===i?void 0:i.getLayerDefinition)?null===(a=l)||void 0===a?void 0:a.getLayerDefinition():l.getServiceDefinition?l.getServiceDefinition():null;return m.React.createElement(Vt,{isPremium:s.isPremium,isSubscriber:s.isSubscriber,sourceUrl:e,intl:t.props.intl,key:r,onChange:t.onProxyChange,label:(null==c?void 0:c.name)||m.dataSourceUtils.getServiceLabelFromUrl(e),icon:kt.dataComponentsUtils.getDsIcon(l.getDataSourceJson()),proxyConfig:null==o?void 0:o[e]})})))))},t}(m.React.PureComponent),Yt=Object(m.injectIntl)(m.themeUtils.withStyles(Gt,"ProxySetting")),Qt=n(32),Xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Zt=function(){return(Zt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},$t=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},en=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tn={},nn=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.getProxyConfigFromAppProxyJsons=function(){return $t(n,void 0,void 0,(function(){var e,t,n,o,r;return en(this,(function(i){switch(i.label){case 0:return[4,It()];case 1:return e=i.sent(),t={},n=null===(r=null===(o=Object(m.getAppStore)().getState().appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===r?void 0:r.appProxies,Object.keys(e).forEach((function(e){var o=Mt(e,n);o&&(t[e]=o.without("id").without("proxyId").without("proxyUrl"))})),[2,{proxyConfigs:Object(m.Immutable)(t),needProxyDataSources:e}]}}))}))},n.registerApp=function(){return $t(n,void 0,void 0,(function(){var e,t,n,o,r,i,a;return en(this,(function(s){switch(s.label){case 0:return e=null===(r=null===(o=Object(m.getAppStore)().getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===r?void 0:r.appId,tn[e]?[4,tn[e]]:[3,2];case 1:return[2,s.sent()];case 2:return t=null===(a=null===(i=Object(m.getAppStore)().getState())||void 0===i?void 0:i.appStateInBuilder)||void 0===a?void 0:a.portalUrl,n=t+"/sharing/rest/oauth2/registerApp",tn[e]=m.esri.restRequest.request(n,{authentication:m.SessionManager.getInstance().getSessionByUrl(Object(m.getAppStore)().getState().portalUrl),httpMethod:"POST",params:{itemId:e,appType:"browser",redirect_uris:JSON.stringify([this.getAppRootUrl()])}}),[4,tn[e]];case 3:return[2,s.sent()]}}))}))},n.createProxies=function(e){return $t(n,void 0,void 0,(function(){var t,n,o,r,i,a,s,l;return en(this,(function(c){switch(c.label){case 0:return e?[3,2]:[4,Promise.resolve(null)];case 1:return[2,c.sent()];case 2:return t=null===(l=null===(s=null===(a=Object(m.getAppStore)().getState())||void 0===a?void 0:a.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===l?void 0:l.appProxies,n={},o=[],Object.keys(e).forEach((function(r){var i=e[r];if(i){var a=i.hitsPerInterval,s=i.intervalSeconds,l=Mt(r,t);Nt(l,r,a,s)?n[l.id]=l:o=o.concat({sourceUrl:r,hitsPerInterval:a,intervalSeconds:s})}})),0===o.length?[2,Object(m.Immutable)(n)]:At()?[3,4]:[4,this.registerApp()];case 3:c.sent(),c.label=4;case 4:return r={referrers:[this.getAppUrl()]},i=Tt(),[2,m.esri.restRequest.request(i,{authentication:m.SessionManager.getInstance().getSessionByUrl(Object(m.getAppStore)().getState().portalUrl),httpMethod:"POST",params:{serviceProxyParams:r,proxies:o}}).then((function(e){var t,o,r=(null==e?void 0:e.appProxies)||[],i=n,a=null===(o=null===(t=Object(m.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===o?void 0:o.appConfig,s=null==a?void 0:a.appProxies;return r.forEach((function(e){var t=Mt(e.sourceUrl,s),n=(null==t?void 0:t.id)||m.appConfigUtils.getUniqueId(a.set("appProxies",s?s.merge(i):i),"appProxy");i[n]=Zt(Zt({},e),{id:n})})),Object(m.Immutable)(i)}))]}}))}))},n.getAppRootUrl=function(){var e;return null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.origin},n.getAppUrl=function(){var e,t,o,r,i,a,s=null===(t=null===(e=Object(m.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appId,l=null===(r=null===(o=Object(m.getAppStore)().getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===r?void 0:r.appInfo,c="Web Experience Template"===(null==l?void 0:l.type),p=null===(i=m.urlUtils.getAppUrl({appId:s,isTemplate:c}))||void 0===i?void 0:i.replace(/^\//,"");return(null===(a=n.getAppRootUrl())||void 0===a?void 0:a.replace(/\/$/,""))+"/"+p},n.onProxyConfigChange=function(e){n.setState({proxyConfigs:e})},n.onFinish=function(){var e,t,o,r;n.setState({isLoading:!0});var i=n.state.proxyConfigs||Object(m.Immutable)({}),a=null===(o=null===(t=null===(e=Object(m.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===o?void 0:o.appProxies,s=a&&Object.values(a).filter((function(e){var t,n=i[null==e?void 0:e.sourceUrl];if(m.dataSourceUtils.getDsTypeFromWholeServiceUrl(null==e?void 0:e.sourceUrl)===m.DataSourceTypes.FeatureService){var o=null===(t=null==e?void 0:e.sourceUrl)||void 0===t?void 0:t.replace("/FeatureServer","/SceneServer"),r=i[o];n=n||(null==r?void 0:r.set("sourceUrl",null==e?void 0:e.sourceUrl))}return!n||!Nt(e,n.sourceUrl,n.hitsPerInterval,n.intervalSeconds)}));Et(null==s?void 0:s.map((function(e){return e.proxyId})),null===(r=n.state)||void 0===r?void 0:r.getAppConfigAction()).then((function(){return $t(n,void 0,void 0,(function(){var e=this;return en(this,(function(t){switch(t.label){case 0:return[4,this.createProxies(i).then((function(t){var n;if(!e.__unmount){if(t){var o=null===(n=e.state)||void 0===n?void 0:n.getAppConfigAction();Object.keys(t).forEach((function(e){null==o||o.editAppProxy(t[e])})),null==o||o.exec()}e.props.onFinish().then((function(){e.__unmount||setTimeout((function(){e.setState({isLoading:!1},(function(){e.props.onToggle()}))}),3e3)}),(function(){e.__unmount||setTimeout((function(){e.setState({isLoading:!1},(function(){e.props.onToggle()}))}),3e3)}))}}))];case 1:return[2,t.sent()]}}))}))})).catch((function(e){console.error("Creating proxy failed: ",e),n.setState({isLoading:!1,isError:!0},(function(){setTimeout((function(){n.setState({isError:!1})}),5500)}))}))},n.getTostStyle=function(){var e,t,o,r,i,a,s,l,c,p,u;return Object(m.css)(Wt||(Wt=Kt(["\n      & {\n        height:  ",";\n        top: ",";\n      }\n      .jimu-toast-info {\n        background: ",";\n        line-height: ",";\n        color: ",";\n        font-weight: 300;\n        padding: 0 ",";\n        box-shadow: 0 0 "," "," ",";\n      }\n    "],["\n      & {\n        height:  ",";\n        top: ",";\n      }\n      .jimu-toast-info {\n        background: ",";\n        line-height: ",";\n        color: ",";\n        font-weight: 300;\n        padding: 0 ",";\n        box-shadow: 0 0 "," "," ",";\n      }\n    "])),m.polished.rem(40),m.polished.rem(60),null===(r=null===(o=null===(t=null===(e=n.props)||void 0===e?void 0:e.theme)||void 0===t?void 0:t.colors)||void 0===o?void 0:o.palette)||void 0===r?void 0:r.secondary[300],m.polished.rem(40),null===(l=null===(s=null===(a=null===(i=n.props)||void 0===i?void 0:i.theme)||void 0===a?void 0:a.colors)||void 0===s?void 0:s.palette)||void 0===l?void 0:l.dark[800],m.polished.rem(16),m.polished.rem(10),m.polished.rem(2),m.polished.rgba(null===(u=null===(p=null===(c=n.props)||void 0===c?void 0:c.theme)||void 0===p?void 0:p.colors)||void 0===u?void 0:u.white,.2))},n.state={getAppConfigAction:null,isLoading:!1,isError:!1,proxyConfigs:null,needProxyDataSources:null},n}return Xt(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,m.moduleLoader.loadModule("jimu-for-builder").then((function(t){e.__unmount||e.setState({getAppConfigAction:t.getAppConfigAction})})),this.setState({isLoading:!0}),this.getProxyConfigFromAppProxyJsons().then((function(t){e.__unmount||e.setState({proxyConfigs:t.proxyConfigs,needProxyDataSources:t.needProxyDataSources,isLoading:!1})}),(function(t){e.__unmount||e.setState({isLoading:!1}),console.error("Getting proxy config error",t)}))},t.prototype.componentDidUpdate=function(e){var t=this;(!e.isOpen&&this.props.isOpen||e.appProxies!==this.props.appProxies)&&(this.setState({isLoading:!0}),this.getProxyConfigFromAppProxyJsons().then((function(e){t.__unmount||t.setState({proxyConfigs:e.proxyConfigs,needProxyDataSources:e.needProxyDataSources,isLoading:!1})}),(function(e){t.__unmount||t.setState({isLoading:!1}),console.error("Getting proxy config error",e)})))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t=this.state.proxyConfigs,n=this.state.needProxyDataSources;return Object(m.jsx)($.Modal,{isOpen:this.props.isOpen,centered:!0,className:Object(m.classNames)((e={},e[this.props.className]=!!this.props.className,e)),returnfocusafterclose:"true",contentClassName:"proxy-setting-container",backdrop:"static"},Object(m.jsx)($.ModalHeader,{className:"d-flex justify-content-between header px-30",toggle:this.props.onToggle},Object(m.jsx)("div",{className:"flex-grow-1 text-truncate"},this.props.intl.formatMessage({id:"subscriberContents",defaultMessage:$.defaultMessages.subscriberContents}))),Object(m.jsx)($.ModalBody,{className:"d-flex px-30"},Object(m.jsx)(Yt,{onChange:this.onProxyConfigChange,proxyConfigs:t,needProxyDataSources:n})),Object(m.jsx)($.ModalFooter,{className:"px-30"},Object(m.jsx)($.Button,{className:"mr-2",type:"primary",onClick:this.onFinish},this.props.intl.formatMessage({id:"publish",defaultMessage:m.defaultMessages.publish})),Object(m.jsx)($.Button,{type:"default",onClick:this.props.onCancel},this.props.intl.formatMessage({id:"cancel",defaultMessage:m.defaultMessages.cancel}))),this.state.isLoading&&Object(m.jsx)($.Loading,{type:Qt.a.Secondary}),this.state.isError&&Object(m.jsx)($.Toast,{open:this.state.isError,type:Qt.c.Info,css:this.getTostStyle(),text:this.props.intl.formatMessage({id:"creatProxyToPublishAppError",defaultMessage:$.defaultMessages.creatProxyToPublishAppError})}))},t}(m.React.PureComponent),on=Object(m.injectIntl)(m.themeUtils.withStyles(m.themeUtils.withTheme(nn),"ProxySettingPopup")),rn=m.ReactRedux.connect((function(e,t){var n,o;return{appProxies:null===(o=null===(n=null==e?void 0:e.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===o?void 0:o.appProxies}}))(on),an=n(74),sn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ln=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},cn=function(){return(cn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},pn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sn(t,e),t.prototype.componentDidUpdate=function(e){this.props.pageId===e.pageId&&this.props.sizemode===e.sizemode||this.props.toggle()},t.prototype.getStyle=function(){var e=this.props.theme;return e&&Object(m.css)(dn||(dn=ln(["\n      background-color: ",";\n      ","\n      > * {\n        ::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        ::-webkit-scrollbar-track {\n          background: transparent;\n        }\n\n        ::-webkit-scrollbar-thumb {\n          background: ",";\n          border-radius: 10px;\n        }\n\n        ::-webkit-scrollbar-thumb:hover {\n          background: ",";\n        }\n      }\n    "],["\n      background-color: ",";\n      ","\n      > * {\n        ::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        ::-webkit-scrollbar-track {\n          background: transparent;\n        }\n\n        ::-webkit-scrollbar-thumb {\n          background: ",";\n          border-radius: 10px;\n        }\n\n        ::-webkit-scrollbar-thumb:hover {\n          background: ",";\n        }\n      }\n    "])),e.colors.palette.light[300],Object(an.a)({background:e.colors.palette.light[300],border:{color:e.colors.palette.light[600],width:"1px"}}),e.colors.palette.light[500],e.colors.palette.light[800])},t.prototype.render=function(){var e=this.props,t=(e.pageId,e.sizemode,e.dispatch,pn(e,["pageId","sizemode","dispatch"]));return Object(m.jsx)($.Popper,cn({css:this.getStyle()},t))},t}(m.React.PureComponent);var dn,fn,gn,mn,hn,bn,vn,yn,wn,xn,jn,On,kn,Sn,Pn,Cn,In=m.ReactRedux.connect((function(e){return{pageId:e.appRuntimeInfo.currentPageId,sizemode:e.browserSizeMode}}))(un),_n=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Nn=[{name:"flip",enabled:!0},{name:"preventOverflow",enabled:!0,options:{boundariesElement:"viewport",padding:10}}],An=function(e){function t(t){var n=e.call(this,t)||this;return n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.state={widgetInfoList:null,open:!0,generation:0},n}return _n(t,e),t.prototype.componentDidMount=function(){this.loadWidgetInfos()},t.prototype.loadWidgetInfos=function(){var e=this;m.WidgetManager.getInstance().getWidgetListInfo().then((function(t){var n=t.filter((function(t){return e.props.isItemAccepted(t,e.props.isPlaceholder)}));e.setState({generation:e.state.generation+1,widgetInfoList:n})}))},t.prototype.createWidgetCard=function(e){var t,n,o=this;return Object(m.jsx)("div",{className:"d-flex align-items-start justify-content-center widget-card col-4",key:e.name,onClick:function(){return o.props.onItemSelect(e)}},Object(m.jsx)("div",{className:"d-flex flex-column w-100 h-100 widget-card--content pt-2"},Object(m.jsx)("div",{className:"d-flex justify-content-center"},Object(m.jsx)("div",{className:"widget-card-image mb-1"},Object(m.jsx)($.Icon,{className:"w-100",autoFlip:null===(n=null===(t=e.manifest)||void 0===t?void 0:t.properties)||void 0===n?void 0:n.flipIcon,icon:"string"==typeof e.icon?e.icon:e.icon&&e.icon.svg,color:this.props.builderTheme.colors.dark}))),Object(m.jsx)("div",{className:"flex-grow-1 d-flex align-items-center"},Object(m.jsx)("div",{className:"widget-card-name w-100 text-center text-capitalize text-truncate",css:Object(m.css)(fn||(fn=Mn(["\n                line-height: 1rem;\n                max-height: 2.2rem;\n                white-space: normal;\n              "],["\n                line-height: 1rem;\n                max-height: 2.2rem;\n                white-space: normal;\n              "]))),title:e.label},e.label))))},t.prototype.formatMessage=function(e){return this.props.intl.formatMessage({id:e,defaultMessage:$.defaultMessages[e]})},t.prototype.getStyle=function(){var e=this.props.builderTheme;return Object(m.css)(gn||(gn=Mn(["\n      background-color: ",";\n\n      .content {\n        max-height: 350px;\n        height: auto;\n        width: 380px;\n        overflow-x: hidden;\n        padding: 10px;\n      }\n\n      .widget-card {\n        height: 80px;\n        padding: 4px;\n\n        .widget-card--content {\n          cursor: pointer;\n          background-color: ",";\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .widget-card-image {\n          width: 20px;\n          height: 20px;\n          &:after {\n            display: none;\n          }\n          img {\n            width: 20px;\n            height: 20px;\n          }\n        }\n\n        .widget-card-name {\n          line-height: 1rem;\n          max-height: 2rem;\n          white-space: normal;\n          color: ",";\n          padding: 0 10px;\n          font-size: 13px;\n        }\n      }\n\n      .widget-type-label {\n        color: ",";\n        font-size: 14px;\n        margin: 0 4px 4px;\n      }\n    "],["\n      background-color: ",";\n\n      .content {\n        max-height: 350px;\n        height: auto;\n        width: 380px;\n        overflow-x: hidden;\n        padding: 10px;\n      }\n\n      .widget-card {\n        height: 80px;\n        padding: 4px;\n\n        .widget-card--content {\n          cursor: pointer;\n          background-color: ",";\n          &:hover {\n            background-color: ",";\n          }\n        }\n\n        .widget-card-image {\n          width: 20px;\n          height: 20px;\n          &:after {\n            display: none;\n          }\n          img {\n            width: 20px;\n            height: 20px;\n          }\n        }\n\n        .widget-card-name {\n          line-height: 1rem;\n          max-height: 2rem;\n          white-space: normal;\n          color: ",";\n          padding: 0 10px;\n          font-size: 13px;\n        }\n      }\n\n      .widget-type-label {\n        color: ",";\n        font-size: 14px;\n        margin: 0 4px 4px;\n      }\n    "])),e.colors.palette.light[300],e.colors.palette.light[500],e.colors.palette.light[600],e.colors.palette.dark[800],e.colors.palette.dark[800])},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.state.widgetInfoList,n=[],o=[];return t&&t.length>0&&t.forEach((function(e){e.manifest.widgetType===m.WidgetType.Layout?o.push(e):n.push(e)})),Object(m.jsx)(In,{theme:this.props.builderTheme,placement:"bottom",toggle:this.togglePopper,css:this.getStyle(),version:this.state.generation,modifiers:Nn,reference:this.props.referenceElement,open:!0},Object(m.jsx)("div",{className:"shadow-lg content",ref:function(t){return e.contentRef=t}},!this.state.widgetInfoList&&Object(m.jsx)($.Loading,null),n.length>0&&Object(m.jsx)("div",{className:"widget-type-label"},this.formatMessage("basic")),n.length>0&&Object(m.jsx)("div",{className:"w-100 h-100 row m-0"},n.map((function(t){return e.createWidgetCard(t)}))),o.length>0&&Object(m.jsx)("div",{className:"widget-type-label"},this.formatMessage("layout")),o.length>0&&Object(m.jsx)("div",{className:"w-100 h-100 row m-0"},o.map((function(t){return e.createWidgetCard(t)})))))},t.defaultProps={isPlaceholder:!1,isItemAccepted:function(){return!0}},t}(m.React.PureComponent),Rn=Object(m.injectIntl)(An),En=n(37),Ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Tn=function(e){function t(t){var n=e.call(this,t)||this;return n.onTemplateSelected=function(e){n.setState({selectedIndex:e}),n.props.onItemSelect(n.templates[e])},n.templates=n.props.pageMode===m.PageMode.FitWindow?Object(En.getFullScreenPageTemplates)():Object(En.getAutoScrollPageTemplates)(),Object(En.addLabelAndDescription)(n.templates),n.state={selectedIndex:-1},n}return Ln(t,e),t.prototype.formatMessage=function(e){return this.props.intl.formatMessage({id:e,defaultMessage:$.defaultMessages[e]})},t.prototype.createTemplateCard=function(e,t){var n=this;return Object(m.jsx)("div",{className:"page-item d-flex flex-column col-6",key:t,title:e.description},Object(m.jsx)("div",{className:Object(m.classNames)("img-container d-flex align-items-center justify-content-center",{active:this.state.selectedIndex===t}),onClick:function(){return n.onTemplateSelected(t)}},Object(m.jsx)($.Icon,{autoFlip:!0,className:"thumbnail",icon:e.icon,width:160,height:120,options:{currentColor:!1}})),Object(m.jsx)("div",{className:"name w-100 text-center"},e.label))},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(mn||(mn=Dn(["\n      height: 100%;\n      overflow: auto;\n      .page-item {\n        width: 160px;\n        margin-bottom: 18px;\n        user-select: none;\n        .img-container {\n          height: 110px;\n          width: 162px;\n          cursor: pointer;\n          &:hover {\n            outline: 2px solid ",";\n          }\n        }\n\n        .name {\n          margin-top: 5px;\n          font-size: 14px;\n          color: ",";\n        }\n      }\n    "],["\n      height: 100%;\n      overflow: auto;\n      .page-item {\n        width: 160px;\n        margin-bottom: 18px;\n        user-select: none;\n        .img-container {\n          height: 110px;\n          width: 162px;\n          cursor: pointer;\n          &:hover {\n            outline: 2px solid ",";\n          }\n        }\n\n        .name {\n          margin-top: 5px;\n          font-size: 14px;\n          color: ",";\n        }\n      }\n    "])),e.colors.palette.primary[600],e.colors.palette.dark[300])},t.prototype.render=function(){var e=this;return Object(m.jsx)("div",{className:"container pt-4 px-4",css:this.getStyle()},Object(m.jsx)("div",{className:"row"},this.templates.map((function(t,n){return e.createTemplateCard(t,n)}))))},t}(m.React.PureComponent),zn=Object(m.injectIntl)(Tn),Un=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Un(t,e),t.prototype.render=function(){var e=this.props.theme;return Object(m.jsx)("div",{className:"w-100 h-100"},Object(m.jsx)("h3",{className:"pt-3 px-4 mb-3 text-dark-600 text-truncate",title:this.props.formatMessage("addPage")},this.props.formatMessage("addPage")),Object(m.jsx)($.Tabs,{fill:!0,underline:!0,css:Object(m.css)(hn||(hn=Bn(["\n          position: absolute;\n          bottom: 0;\n          top: 3.5rem;\n          width: 100%;\n          .tab-content {\n            position: absolute;\n            top: 2rem;\n            bottom: 0;\n          }\n          .jimu-nav {\n            padding-left: ",";\n            padding-right: ",";\n          }\n          .nav-item {\n            width: 50%;\n          }\n        "],["\n          position: absolute;\n          bottom: 0;\n          top: 3.5rem;\n          width: 100%;\n          .tab-content {\n            position: absolute;\n            top: 2rem;\n            bottom: 0;\n          }\n          .jimu-nav {\n            padding-left: ",";\n            padding-right: ",";\n          }\n          .nav-item {\n            width: 50%;\n          }\n        "])),e&&e.sizes[4],e&&e.sizes[4])},Object(m.jsx)($.Tab,{id:"fullScreenApp",title:this.props.formatMessage("fullScreenApp"),defaultActive:!0},Object(m.jsx)(zn,{theme:e,pageMode:m.PageMode.FitWindow,onItemSelect:this.props.onItemSelect})),Object(m.jsx)($.Tab,{id:"scrollingPage",title:this.props.formatMessage("scrollingPage")},Object(m.jsx)(zn,{theme:e,pageMode:m.PageMode.AutoScroll,onItemSelect:this.props.onItemSelect}))))},t}(m.React.PureComponent),Hn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hn(t,e),t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(bn||(bn=Fn(["\n      background-color: ",";\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 200px;\n        padding: 1px;\n        margin-bottom: 10px;\n\n        .block-item--icon {\n          background: ",";\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n        }\n      }\n    "],["\n      background-color: ",";\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 200px;\n        padding: 1px;\n        margin-bottom: 10px;\n\n        .block-item--icon {\n          background: ",";\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n        }\n      }\n    "])),e.colors.palette.light[300],e.colors.palette.light[400],e.colors.palette.primary[500])},t.prototype.createBlock=function(e,t){var n=this;return Object(m.jsx)("div",{key:t,className:"col-6 block-item",onClick:function(){return n.props.onItemSelect(e)}},Object(m.jsx)("div",{className:"block-item--icon"},Object(m.jsx)($.Icon,{icon:e.icon,width:"100%",height:"auto",options:{currentColor:!1},autoFlip:!0})))},t.prototype.render=function(){var e,t=this;return this.props.isHeader?e=Object(En.getHeaderTemplates)():this.props.isFooter&&(e=Object(En.getFooterTemplates)()),e?Object(m.jsx)("div",{className:"w-100 container p-4",css:this.getStyle()},Object(m.jsx)("div",{className:"row"},e.map((function(e,n){return t.createBlock(e,n)})))):null},t}(m.React.PureComponent),Jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Gn=[{name:"flip",enabled:!0}],Yn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOutsideClick=function(e){var t=!1;n.props.referenceElement&&(t=n.props.referenceElement.contains(e.target)),!n.contentRef||t||n.contentRef.contains(e.target)||n.props.onClose()},n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.onItemSelect=function(e){n.props.onClose(),n.props.onItemSelect(e)},n.state={open:!0},n}return Jn(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick)},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.props,n=t.referenceElement,o=t.theme,r=t.pageMode,i=t.isHeader,a=t.isFooter,s=i||a;return Object(m.jsx)(In,{placement:"bottom",theme:this.props.theme,reference:n,offset:[0,10],open:!0,toggle:this.togglePopper,showArrow:!0,modifiers:Gn},Object(m.jsx)("div",{ref:function(t){return e.contentRef=t},style:{width:400}},Object(m.jsx)("div",{className:"w-100",css:Object(m.css)(vn||(vn=qn(["\n          max-height: 640px;\n          height: ",";\n          overflow: auto;\n        "],["\n          max-height: 640px;\n          height: ",";\n          overflow: auto;\n        "])),s?"auto":"calc(100vh - 150px)")},s&&Object(m.jsx)(Vn,{isHeader:i,isFooter:a,theme:o,onItemSelect:this.onItemSelect}),!s&&r&&Object(m.jsx)(zn,{theme:o,pageMode:r,onItemSelect:this.onItemSelect}),!s&&!r&&Object(m.jsx)(Wn,{theme:o,formatMessage:this.props.formatMessage,onItemSelect:this.onItemSelect}))))},t}(m.React.PureComponent),Qn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Kn=function(e){function t(t){var n=e.call(this,t)||this;return n.onTemplateSelected=function(e){n.setState({selectedIndex:e}),n.props.onItemSelect(n.templates[e])},n.templates=Object(En.getDialogTemplates)(),n.state={selectedIndex:-1},n}return Qn(t,e),t.prototype.formatMessage=function(e){return this.props.intl.formatMessage({id:e,defaultMessage:$.defaultMessages[e]})},t.prototype.createTemplateCard=function(e,t){var n=this;return Object(m.jsx)("div",{className:"dialog-item d-flex flex-column col-6",key:t},Object(m.jsx)("div",{className:Object(m.classNames)("img-container d-flex align-items-center justify-content-center",{active:this.state.selectedIndex===t}),onClick:function(){return n.onTemplateSelected(t)}},Object(m.jsx)($.Icon,{autoFlip:!0,className:"thumbnail",icon:e.icon,width:166,height:140,options:{currentColor:!1}})),Object(m.jsx)("div",{className:"name w-100 text-center"},this.formatMessage(e.name)))},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(yn||(yn=Xn(["\n      .dialog-item {\n        margin-bottom: 18px;\n        user-select: none;\n        .img-container {\n          cursor: pointer;\n          background: ",";\n          &:hover {\n            outline: 2px solid ",";\n          }\n        }\n\n        .name {\n          margin-top: 5px;\n          font-size: 14px;\n          color: ",";\n        }\n      }\n    "],["\n      .dialog-item {\n        margin-bottom: 18px;\n        user-select: none;\n        .img-container {\n          cursor: pointer;\n          background: ",";\n          &:hover {\n            outline: 2px solid ",";\n          }\n        }\n\n        .name {\n          margin-top: 5px;\n          font-size: 14px;\n          color: ",";\n        }\n      }\n    "])),e.colors.palette.light[200],e.colors.palette.primary[500],e.colors.palette.dark[300])},t.prototype.render=function(){var e=this;return Object(m.jsx)("div",{className:"container pt-4 pl-4 pr-4",css:this.getStyle()},Object(m.jsx)("div",{className:"row h-100"},this.templates.map((function(t,n){return e.createTemplateCard(t,n)}))))},t}(m.React.PureComponent),Zn=Object(m.injectIntl)(Kn),$n=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $n(t,e),t.prototype.render=function(){var e=this.props.theme;return Object(m.jsx)("div",{className:"w-100 h-100"},Object(m.jsx)("h3",{className:"pt-4 px-4 mb-3 text-dark-600 text-truncate",title:this.props.formatMessage("addDialog")},this.props.formatMessage("addDialog")),Object(m.jsx)("div",{className:"overflow-auto",style:{height:"calc(100% - 70px)"}},Object(m.jsx)(Zn,{theme:e,onItemSelect:this.props.onItemSelect})))},t}(m.React.PureComponent),to=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),no=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},oo=[{name:"flip",enabled:!0}],ro=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOutsideClick=function(e){var t=!1;n.props.referenceElement&&(t=n.props.referenceElement.contains(e.target)),!n.contentRef||t||n.contentRef.contains(e.target)||n.props.onClose()},n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.onItemSelect=function(e){n.props.onClose(),n.props.onItemSelect(e)},n.state={open:!0},n}return to(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick)},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.props,n=t.referenceElement,o=t.theme,r=t.showList;return Object(m.jsx)(In,{placement:"bottom",theme:this.props.theme,reference:n,offset:[0,10],open:!0,toggle:this.togglePopper,showArrow:!0,modifiers:oo},Object(m.jsx)("div",{ref:function(t){return e.contentRef=t},style:{width:400}},Object(m.jsx)("div",{className:"w-100",css:Object(m.css)(wn||(wn=no(["\n          max-height: "," ;\n          height: calc(100vh - 150px);\n          overflow: auto;\n        "],["\n          max-height: "," ;\n          height: calc(100vh - 150px);\n          overflow: auto;\n        "])),r?"638px":"385px")},r?Object(m.jsx)(eo,{theme:o,onItemSelect:this.onItemSelect,formatMessage:this.props.formatMessage}):Object(m.jsx)(Zn,{theme:o,onItemSelect:this.props.onItemSelect}))))},t}(m.React.PureComponent),io=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ao=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},so=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return io(t,e),t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(xn||(xn=ao(["\n      background-color: ",";\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 200px;\n        height: 62px;\n        padding: 1px;\n        margin-bottom: 10px;\n\n        .block-item--icon {\n          background: ",";\n          height: 60px;\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n        }\n      }\n    "],["\n      background-color: ",";\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 200px;\n        height: 62px;\n        padding: 1px;\n        margin-bottom: 10px;\n\n        .block-item--icon {\n          background: ",";\n          height: 60px;\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n        }\n      }\n    "])),e.colors.palette.light[300],e.colors.palette.light[400],e.colors.palette.primary[600])},t.prototype.createBlock=function(e,t){var n=this;return Object(m.jsx)("div",{key:t,className:"col-6 block-item",onClick:function(){return n.props.onItemSelect(e)}},Object(m.jsx)("div",{className:"block-item--icon"},Object(m.jsx)($.Icon,{icon:e.icon,width:"100%",height:"100%",options:{currentColor:!1}})))},t.prototype.render=function(){var e=this;return Object(m.jsx)("div",{className:"w-100 container",css:this.getStyle()},Object(m.jsx)("div",{className:"row"},Object(En.getBlockTemplates)().map((function(t,n){return e.createBlock(t,n)}))))},t}(m.React.PureComponent),lo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),co=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},po=[{name:"flip",enabled:!0}],uo=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOutsideClick=function(e){var t=!1;n.props.referenceElement&&(t=n.props.referenceElement.contains(e.target)),!n.contentRef||t||n.contentRef.contains(e.target)||n.props.onClose()},n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.state={open:!0},n}return lo(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick)},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(jn||(jn=co(["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 450px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 10px 15px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "],["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 450px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 10px 15px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "])),e.colors.palette.dark[100],e.colors.palette.light[600])},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.props,n=t.referenceElement,o=t.theme;return Object(m.jsx)(In,{placement:"bottom",theme:this.props.theme,css:this.getStyle(),reference:n,offset:[0,10],toggle:this.togglePopper,open:!0,showArrow:!0,modifiers:po},Object(m.jsx)("div",{ref:function(t){return e.contentRef=t},className:"template-content"},Object(m.jsx)(so,{referenceElement:n,theme:o,onItemSelect:this.props.onItemSelect})))},t}(m.React.PureComponent),fo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),go=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},mo=function(e){function t(t){var n=e.call(this,t)||this;return n.state={templates:null},n}return fo(t,e),t.prototype.componentDidMount=function(){var e=Object(En.getScreenTemplates)();this.setState({templates:e})},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(On||(On=go(["\n      display: grid;\n      background-color: ",";\n      grid-template-columns: 1fr 1fr;\n      grid-row-gap: 10px;\n      grid-column-gap: 10px;\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 164px;\n        height: 100px;\n\n        .block-item--icon {\n          background: ",";\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n        }\n      }\n    "],["\n      display: grid;\n      background-color: ",";\n      grid-template-columns: 1fr 1fr;\n      grid-row-gap: 10px;\n      grid-column-gap: 10px;\n\n      .block-item {\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 164px;\n        height: 100px;\n\n        .block-item--icon {\n          background: ",";\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n        }\n      }\n\n      .size-mode-SMALL .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n        }\n      }\n    "])),e.colors.palette.light[300],e.colors.palette.light[200],e.colors.palette.primary[600])},t.prototype.createBlock=function(e,t){var n=this;return Object(m.jsx)("div",{key:t,className:"block-item",onClick:function(){return n.props.onItemSelect(e)}},Object(m.jsx)("div",{className:"block-item--icon"},Object(m.jsx)($.Icon,{icon:e.icon,width:"100%",height:"100%",options:{currentColor:!1}})))},t.prototype.render=function(){var e=this;return this.state.templates?Object(m.jsx)("div",{className:"w-100",css:this.getStyle()},this.state.templates.map((function(t,n){return e.createBlock(t,n)}))):Object(m.jsx)($.Loading,null)},t}(m.React.PureComponent),ho=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bo=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},vo=[{name:"flip",enabled:!0}],yo=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOutsideClick=function(e){var t=!1;n.props.referenceElement&&(t=n.props.referenceElement.contains(e.target)),!n.contentRef||t||n.contentRef.contains(e.target)||n.props.onClose()},n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.state={open:!0},n}return ho(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick)},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(kn||(kn=bo(["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 400px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 16px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "],["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 400px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 16px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "])),e.colors.palette.dark[100],e.colors.palette.light[600])},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.props,n=t.referenceElement,o=t.theme;return Object(m.jsx)(In,{placement:"bottom",theme:this.props.theme,css:this.getStyle(),reference:n,offset:[0,10],toggle:this.togglePopper,open:!0,showArrow:!0,modifiers:vo},Object(m.jsx)("div",{ref:function(t){return e.contentRef=t},className:"template-content"},Object(m.jsx)(mo,{referenceElement:n,theme:o,onItemSelect:this.props.onItemSelect})))},t}(m.React.PureComponent),wo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xo=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},jo=function(e){function t(t){var n=e.call(this,t)||this;return n.state={templates:null},n}return wo(t,e),t.prototype.componentDidMount=function(){var e=Object(En.getScreenGroupTemplates)();this.setState({templates:e})},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(Sn||(Sn=xo(["\n      background-color: ",";\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      grid-row-gap: 10px;\n      grid-column-gap: 10px;\n\n      .block-item {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 180px;\n        height: 125px;\n        padding: 1px;\n\n        .block-item--icon {\n          background: ",";\n          height: 108px;\n          width: 100%;\n          position: relative;\n\n          .screen-group-icon {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n          }\n\n          .default-icon {\n            opacity: 1;\n          }\n          .gif-icon {\n            opacity: 0;\n          }\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n          .default-icon {\n            opacity: 0;\n          }\n          .gif-icon {\n            opacity: 1;\n          }\n        }\n\n        .block-item-label {\n          color: ",";\n        }\n      }\n\n      .size-mode-SMALL & .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n          .block-item-label {\n            display: none;\n          }\n        }\n      }\n    "],["\n      background-color: ",";\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      grid-row-gap: 10px;\n      grid-column-gap: 10px;\n\n      .block-item {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-around;\n        align-items: center;\n        cursor: pointer;\n        width: 180px;\n        height: 125px;\n        padding: 1px;\n\n        .block-item--icon {\n          background: ",";\n          height: 108px;\n          width: 100%;\n          position: relative;\n\n          .screen-group-icon {\n            position: absolute;\n            width: 100%;\n            height: 100%;\n          }\n\n          .default-icon {\n            opacity: 1;\n          }\n          .gif-icon {\n            opacity: 0;\n          }\n        }\n        .block-item--icon:hover {\n          outline: 2px solid ",";\n          .default-icon {\n            opacity: 0;\n          }\n          .gif-icon {\n            opacity: 1;\n          }\n        }\n\n        .block-item-label {\n          color: ",";\n        }\n      }\n\n      .size-mode-SMALL & .block-item{\n        .block-item {\n          width: 140px;\n          height: 44px;\n\n          .block-item--icon {\n            height: 42px;\n          }\n          .block-item-label {\n            display: none;\n          }\n        }\n      }\n    "])),e.colors.palette.light[300],e.colors.palette.light[200],e.colors.palette.primary[600],e.colors.palette.dark[400])},t.prototype.createBlock=function(e,t){var n=this;return Object(m.jsx)("div",{key:t,className:"block-item",onClick:function(){return n.props.onItemSelect(e)}},Object(m.jsx)("div",{className:"block-item--icon"},Object(m.jsx)($.Icon,{className:"default-icon screen-group-icon",icon:e.icon,width:"100%",height:"100%"}),Object(m.jsx)("img",{className:"gif-icon screen-group-icon",src:m.urlUtils.isAbsoluteUrl(e.gifIcon)?e.gifIcon:""+m.urlUtils.getFixedRootPath()+e.gifIcon,width:"100%",height:"100%"})),Object(m.jsx)("span",{className:"block-item-label"},e.label))},t.prototype.render=function(){var e=this;return this.state.templates?Object(m.jsx)("div",{className:"w-100",css:this.getStyle()},this.state.templates.map((function(t,n){return e.createBlock(t,n)}))):Object(m.jsx)($.Loading,null)},t}(m.React.PureComponent),Oo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ko=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},So=[{name:"flip",options:{fallbackPlacements:["top","right"]}}],Po=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOutsideClick=function(e){var t=!1;n.props.referenceElement&&(t=n.props.referenceElement.contains(e.target)),!n.contentRef||t||n.contentRef.contains(e.target)||n.props.onClose()},n.togglePopper=function(){n.state.open&&n.props.onClose&&n.props.onClose(),n.setState({open:!n.state.open})},n.state={open:!0},n}return Oo(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick)},t.prototype.getStyle=function(){var e=this.props.theme;return Object(m.css)(Pn||(Pn=ko(["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 400px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 10px 15px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "],["\n      .title {\n        font-size: 14px;\n        color: ",";\n        padding: 0 5px 5px 5px;\n      }\n      .template-content {\n        height: auto;\n        max-height: 600px;\n        width: 400px;\n        border: 1px solid ",";\n        box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);\n        overflow: auto;\n        padding: 10px 15px;\n      }\n\n      .size-mode-SMALL & .template-content {\n        max-height: 600px;\n        width: 320px;\n      }\n    "])),e.colors.palette.dark[100],e.colors.palette.light[600])},t.prototype.render=function(){var e=this;if(!this.state.open)return null;var t=this.props,n=t.referenceElement,o=t.theme;return Object(m.jsx)(In,{placement:"bottom",theme:this.props.theme,css:this.getStyle(),reference:n,offset:[0,10],toggle:this.togglePopper,open:!0,showArrow:!0,modifiers:So},Object(m.jsx)("div",{ref:function(t){return e.contentRef=t},className:"template-content"},Object(m.jsx)(jo,{referenceElement:n,theme:o,onItemSelect:this.props.onItemSelect})))},t}(m.React.PureComponent),Co=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Io=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},_o=function(e){function t(t){var o=e.call(this,t)||this;return o.initData=function(){if(Array.isArray(o.props.value)&&o.props.value.length)return!1;var e=o.deepClone(o.state.option);e.ruleOptionName=o.props.intl.formatMessage({id:"option",defaultMessage:$.defaultMessages.option})+0;var t=[e];o.props.onChange(t)},o.onOptionChange=function(e,t,n,r){var i=o.deepClone(o.props.value);i[t].rule[e][n]=r,o.props.onChange(i,t)},o.onSelectChange=function(e,t,n){var r=e[0];if(r){var i=o.deepClone(o.props.value),a=r.name;i[n].rule[t].jimuFieldName=a,o.props.onChange(i,n)}},o.addOption=function(){var e=Array.isArray(o.props.value),t=e?o.props.value.length:0,n=o.createOptionText(t),r=o.deepClone(o.state.option);r.ruleOptionName=n;var i=e?o.deepClone(o.props.value):[];i.push(r),o.props.onChange(i)},o.createOptionText=function(e){var t=o.props.intl.formatMessage({id:"option",defaultMessage:$.defaultMessages.option})+e;if(!o.isOptionNameRepeat(t))return t;var n=e+1;return o.createOptionText(n)},o.deleteOption=function(e){var t=o.deepClone(o.props.value);t.splice(e,1),o.props.onChange(t)},o.deleteAll=function(){o.props.onChange([])},o.toggleOptionNameDisplay=function(e,t){var n=o.deepClone(o.props.value),r=n[e].isEditOptionName;if(r=!!r,n[e].isEditOptionName=!r,t){var i=t.target.value;!o.isOptionNameRepeat(i)&&i&&(n[e].ruleOptionName=i)}o.props.onChange(n)},o.isOptionNameRepeat=function(e){if(!Array.isArray(o.props.value))return!1;var t=!1;return o.props.value.forEach((function(n){n.ruleOptionName==e&&(t=!0)})),t},o.deepClone=function(e){var t=Array.isArray(e)?[]:{};for(var n in e){var r=("object"==typeof e[n]||"function"==typeof e[n])&&null!==e[n];t[n]=r?o.deepClone(e[n]):e[n]}return t},o.setInputRef=function(e){e&&(e.select(),e.focus())},o.createRuleOptionElement=function(e,t,r,i){var a=t.jimuFieldName?Object(m.Immutable)([t.jimuFieldName]):Object(m.Immutable)([]);return Object(m.jsx)("div",{className:"select-down-con",key:t.jimuFieldName||r},o.props.useDataSource&&Object(m.jsx)("div",{className:"sort-field-selector"},Object(m.jsx)(kt.FieldSelector,{useDataSources:e,onChange:function(e,t){o.onSelectChange(e,r,i)},selectedFields:a,isSearchInputHidden:!0,isDataSourceDropDownHidden:!0,useDropdown:!0})),[{getTitle:function(){return o.nls("ascending")},order:m.OrderRule.Asc,getIcon:function(){return n(92)}},{getTitle:function(){return o.nls("decending")},order:m.OrderRule.Desc,getIcon:function(){return n(91)}}].map((function(e,n,a){return Object(m.jsx)($.Button,{key:n,title:e.getTitle(),type:t.order==e.order?"primary":"secondary",className:"sort-button "+(o.props.singleRowItemOnly&&t.order!=e.order?"collapse":""),onClick:function(){o.onOptionChange(r,i,"order",o.props.singleRowItemOnly?Io(a,[a[0]])[n+1].order:e.order)}},Object(m.jsx)($.Icon,{size:"12",icon:e.getIcon(),className:"sort-arrow-down-icon"}))})))},o.createOptionNameElement=function(e,t){var r=e.ruleOptionName,i=o.props.intl.formatMessage({id:"optionNamePlaceholder",defaultMessage:$.defaultMessages.optionNamePlaceholder}),a=Object(m.jsx)($.TextInput,{type:"text",value:r,onBlur:function(e){o.toggleOptionNameDisplay(t,e)},ref:function(e){o.setInputRef(e)},placeholder:i});return Object(m.jsx)("div",{className:"option-name d-flex"},e.isEditOptionName?a:Object(m.jsx)("span",{title:r,onDoubleClick:function(){o.toggleOptionNameDisplay(t)}},r),Object(m.jsx)("span",{title:o.nls("edit"),onClick:function(){o.toggleOptionNameDisplay(t)}},Object(m.jsx)($.Icon,{size:"12",icon:n(94),className:"option-name-icon"})))},o.createOptionElement=function(e,t,r){var i;i=Object(m.jsx)("div",{className:"close-con text-right"},Object(m.jsx)("span",{title:o.nls("deleteOption"),onClick:function(){o.deleteOption(r)}},Object(m.jsx)($.Icon,{size:o.props.singleRowItemOnly?14:12,icon:n(36),className:"sort-arrow-down-icon"})));var a=function(){return t.rule.map((function(t,n){return o.createRuleOptionElement(e,t,n,r)}))};return Object(m.jsx)("div",{className:"select-con",key:r},o.props.singleRowItemOnly&&Object(m.jsx)(m.React.Fragment,null,Object(m.jsx)("div",{className:"option-name-con"},Object(m.jsx)($.Icon,{size:14,icon:n(279)}),a(),i))||Object(m.jsx)(m.React.Fragment,null,Object(m.jsx)("div",{className:"option-name-con"},o.createOptionNameElement(t,r),i),a()))},o.nls=function(e){return o.props.intl?o.props.intl.formatMessage({id:e,defaultMessage:$.defaultMessages[e]}):e},o.onDataSourceCreated=function(e){},o.state={option:{ruleOptionName:"",isEditOptionName:!1,rule:[{jimuFieldName:"",order:m.OrderRule.Asc}]}},o}return Co(t,e),t.prototype.componentDidMount=function(){this.initData()},t.prototype.componentDidUpdate=function(e,t){var n,o,r,i=this;(null===(n=null==e?void 0:e.useDataSource)||void 0===n?void 0:n.dataSourceId)!==(null===(r=null===(o=this.props)||void 0===o?void 0:o.useDataSource)||void 0===r?void 0:r.dataSourceId)&&Promise.resolve(!0).then((function(){i.initData()}))},t.prototype.render=function(){var e,t=this,o=this.props.value,r=this.props.intl.formatMessage({id:"invalidExpression",defaultMessage:$.defaultMessages.invalidExpression});return Object(m.jsx)("div",{className:Object(m.classNames)("sort-con",this.props.singleRowItemOnly&&"single-row-item",(e={},e[this.props.className]=!!this.props.className,e))},Object(m.jsx)("div",null,Object(m.jsx)("div",{className:"add-option-btn"},Object(m.jsx)($.Icon,{size:"12",icon:n(105),className:"add-option-icon"}),Object(m.jsx)("span",{onClick:this.addOption},this.props.intl.formatMessage({id:"addOption",defaultMessage:$.defaultMessages.addOption}))),Object(m.jsx)(m.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated},(function(e){return Array.isArray(o)?(t.props.optionRenderFunction||function(){return o.map((function(e,n){var o;return t.createOptionElement(Object(m.Immutable)([null===(o=t.props.useDataSource)||void 0===o?void 0:o.asMutable({deep:!0})]),e,n)}))})(t.props,t.createOptionElement):r})),Array.isArray(o)&&0==o.length&&Object(m.jsx)("div",{className:"no-sort-remind"},Object(m.jsx)("div",null,this.props.intl.formatMessage({id:"noOptionRemindText",defaultMessage:$.defaultMessages.noOptionRemindText})),Object(m.jsx)("div",null,this.props.intl.formatMessage({id:"pleaceAddOne",defaultMessage:$.defaultMessages.pleaceAddOne})))))},t}(m.React.PureComponent),Mo=m.themeUtils.withStyles(Object(m.injectIntl)(_o),"SortSetting"),No=function(){return(No=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ao=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},Ro=n(280),Eo=n(281),Lo=function(e){var t=$.hooks.useTranslate(),n=e.vertical,o=void 0!==n&&n,r=e.onChange,i=e.autoFlip,a=void 0===i||i,s=e.className,l=e.size,c=void 0===l?"sm":l,p=Ao(e,["vertical","onChange","autoFlip","className","size"]),u="sm"===c?12:16;return m.React.createElement($.ButtonGroup,No({size:c,className:Object(m.classNames)("setting--direction-selector",s)},p),m.React.createElement($.Button,{size:c,title:t("horizontal"),type:"default",icon:!0,active:!o,onClick:function(){return r(!1)}},m.React.createElement($.Icon,{size:u,icon:Ro,autoFlip:a})),m.React.createElement($.Button,{size:c,title:t("vertical"),type:"default",icon:!0,active:o,onClick:function(){return r(!0)}},m.React.createElement($.Icon,{size:u,icon:Eo})))},Do=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),To=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};!function(e){e.Auto="AUTO",e.Custom="CUSTOM"}(Cn||(Cn={}));var zo,Uo,Bo,Wo,Ho,Fo,Vo=n(78),Jo=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleDropdown=function(){n.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))},n.state={dropdownOpen:!1},n._onAutoSelected=n.onSelect.bind(n,Cn.Auto),n._onCustomSelected=n.onSelect.bind(n,Cn.Custom),n}return Do(t,e),t.prototype.onSelect=function(e){this.props.mode!==e&&this.props.onChange(e)},t.prototype.getStyle=function(){return Object(m.css)(zo||(zo=To(["\n      .auto-dropdown.jimu-dropdown {\n        width: 26px;\n        height: 26px;\n\n        .btn {\n          padding: 0 !important;\n        }\n      }\n\n      & > .jimu-dropdown .jimu-dropdown-button,\n      & > .jimu-dropdown .jimu-dropdown-button:hover {\n        height: 26px;\n        padding: 0 0.375rem;\n      }\n    "],["\n      .auto-dropdown.jimu-dropdown {\n        width: 26px;\n        height: 26px;\n\n        .btn {\n          padding: 0 !important;\n        }\n      }\n\n      & > .jimu-dropdown .jimu-dropdown-button,\n      & > .jimu-dropdown .jimu-dropdown-button:hover {\n        height: 26px;\n        padding: 0 0.375rem;\n      }\n    "])))},t.prototype.autoInput=function(){return Object(m.jsx)($.Input,{style:{width:"110px"},css:Object(m.css)(Uo||(Uo=To(["\n          background-color: var(--light-600);\n          border-color: var(--light-600);\n          color: var(--black);\n          height: 1.625rem;\n          border-width: 0;\n          padding: 0 0.25rem;\n        "],["\n          background-color: var(--light-600);\n          border-color: var(--light-600);\n          color: var(--black);\n          height: 1.625rem;\n          border-width: 0;\n          padding: 0 0.25rem;\n        "]))),disabled:!0,value:this.props.intl.formatMessage({id:"auto"})})},t.prototype.render=function(){var e=this.props,t=e.mode,n=e.intl,o=n.formatMessage({id:"auto"}),r=n.formatMessage({id:"custom"});return Object(m.jsx)("div",{className:"d-flex",css:this.getStyle()},Object(m.jsx)($.Dropdown,{className:"auto-dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown},Object(m.jsx)($.DropdownButton,{icon:!0}),Object(m.jsx)($.DropdownMenu,null,Object(m.jsx)($.DropdownItem,{onClick:this._onAutoSelected},Object(m.jsx)("span",{css:Object(m.css)(Bo||(Bo=To(["width: 1rem;"],["width: 1rem;"])))},t===Cn.Auto&&Object(m.jsx)($.Icon,{icon:Vo,size:12})),o),Object(m.jsx)($.DropdownItem,{onClick:this._onCustomSelected},Object(m.jsx)("span",{css:Object(m.css)(Wo||(Wo=To(["width: 1rem;"],["width: 1rem;"])))},t===Cn.Custom&&Object(m.jsx)($.Icon,{icon:Vo,size:12})),r))),t===Cn.Auto&&this.autoInput(),t===Cn.Custom&&this.props.children)},t}(m.React.PureComponent),qo=Object(m.injectIntl)(Jo),Go=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Yo=function(e){var t,n,o,r,i,a,s,l=e.title,c=e.children,p=e.selected,u=e.onClick,d=(r=m.React.useContext(m.ThemeContext),i=null===(t=null==r?void 0:r.colors)||void 0===t?void 0:t.palette.primary[600],a=null===(n=null==r?void 0:r.colors)||void 0===n?void 0:n.palette.light[200],s=null===(o=null==r?void 0:r.colors)||void 0===o?void 0:o.black,m.React.useMemo((function(){return Object(m.css)(Ho||(Ho=Go(["\n      width: 100%;\n      height:  ",";\n      padding: ","  ",";\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: ",";\n      background-color: ",";\n      position: relative;\n      &.selected {\n        outline: 3px solid ",";\n      }\n      >.overlay {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        cursor: pointer;\n      }\n  "],["\n      width: 100%;\n      height:  ",";\n      padding: ","  ",";\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: ",";\n      background-color: ",";\n      position: relative;\n      &.selected {\n        outline: 3px solid ",";\n      }\n      >.overlay {\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        cursor: pointer;\n      }\n  "])),m.polished.rem(50),m.polished.rem(8),m.polished.rem(12),s,a,i)}),[i,a,s]));return Object(m.jsx)("div",{css:d,title:l,className:Object(m.classNames)("quick-style-item",{selected:p}),onClick:u},Object(m.jsx)("div",{className:"overlay"}),c)},Qo=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Xo=function(){return(Xo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ko=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},Zo=[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["bottom-end","top-end"]}}],$o=function(e){var t=e.open,n=e.reference,o=e.onClose,r=e.placement,i=void 0===r?"right-start":r,a=e.children,s=Ko(e,["open","reference","onClose","placement","children"]),l=function(){var e,t,n,o,r=m.themeUtils.getBuilderThemeVariables(),i=null===(e=null==r?void 0:r.colors)||void 0===e?void 0:e.palette.dark[600],a=null===(t=null==r?void 0:r.colors)||void 0===t?void 0:t.palette.dark[800],s=null===(n=null==r?void 0:r.colors)||void 0===n?void 0:n.palette.light[300],l=null===(o=null==r?void 0:r.colors)||void 0===o?void 0:o.palette.light[600];return m.React.useMemo((function(){return Object(m.css)(Fo||(Fo=Qo(["\n      background-color: ",";\n      color: ",";\n      border: 1px solid ",";\n      > .popper-box {\n        > .panel-header {\n          color: ",";\n          .action-btn {\n            color: ",";\n            &:hover {\n              color: ",";\n            }\n          }\n        }\n      }\n    "],["\n      background-color: ",";\n      color: ",";\n      border: 1px solid ",";\n      > .popper-box {\n        > .panel-header {\n          color: ",";\n          .action-btn {\n            color: ",";\n            &:hover {\n              color: ",";\n            }\n          }\n        }\n      }\n    "])),s,i,l,i,i,a)}),[i,a,s,l])}(),c=$.hooks.useTranslate($.defaultMessages);return Object(m.jsx)($.Popper,Xo({css:l,open:t,className:"shadow-2",reference:n,modifiers:Zo,placement:i},s),Object(m.jsx)($.PanelHeader,{className:"px-3 py-2",title:c("quickStyle"),onClose:o}),a)};function er(e){var t,n,o=Object(m.getAppStore)().getState().appStateInBuilder,r=o.appRuntimeInfo.currentPageId,i=o.appRuntimeInfo.currentDialogId,a=o.appRuntimeInfo.dialogInfos||Object(m.Immutable)({}),s=o.appConfig.dialogs,l=o.appConfig.pages,c={canClose:!0,checked:!0,isClosed:!0};return i&&((null===(t=s[i])||void 0===t?void 0:t.isSplash)&&(a=a.set(i,c)),l[r].autoOpenDialogId&&(a=a.set(r+"-"+l[r].autoOpenDialogId,c)),e&&Object.keys(l).map((function(e){l[e].autoOpenDialogId===i&&(a=a.set(e+"-"+i,c))}))),(null===(n=s[i])||void 0===n?void 0:n.isSplash)||Object.keys(s).some((function(e){s[e].isSplash&&(a=a.set(e,c))})),e&&a&&Object.keys(a).map((function(t){t!==e&&t!==r+"-"+e||(a=a.set(t,{canClose:tr(e),checked:!1,isClosed:!1}))})),a}function tr(e){var t=Object(m.getAppStore)().getState().appStateInBuilder.appConfig.dialogs[e];return!t.interactionType||!t.confirmBeforeClose}function nr(e){var t=Object(m.getAppStore)().getState().appStateInBuilder,n=t.appRuntimeInfo.currentPageId,o=t.appRuntimeInfo.currentDialogId;if(Z.builderAppSync.publishChangeSelectionToApp(null),o){var r=er();Z.builderAppSync.publishDialogInfosChangeToApp(r),Z.builderAppSync.publishDialogChangeToApp(null)}n!==e&&Z.builderAppSync.publishPageChangeToApp(e),Z.builderAppSync.publichActivePagePartChangeToApp(m.PagePart.Body)}function or(e){if(Z.builderAppSync.publishChangeSelectionToApp(null),e!==Object(m.getAppStore)().getState().appStateInBuilder.appRuntimeInfo.currentDialogId){Z.builderAppSync.publishDialogChangeToApp(e);var t=er(e);Z.builderAppSync.publishDialogInfosChangeToApp(t),Z.builderAppSync.publichActivePagePartChangeToApp(null)}}m.ThemeManager.getInstance().registerJimuThemeStyleModule("jimu-ui/advanced/setting-components/",{componentStyles:o})}}))}}}));