System.register(["jimu-core","jimu-ui","jimu-arcgis","jimu-ui/basic/color-picker","jimu-arcgis/arcgis-data-source","jimu-ui/advanced/style-setting-components"],(function(e){var t,n,o,i,a,s;return{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){i=e},function(e){a=e},function(e){s=e}],execute:function(){e(function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=962)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},14:function(e,t){e.exports=o},175:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM16 0v11H8.5v-1H15V1H6v2.5H5V0h11z" fill="#363636" fill-rule="nonzero"></path></svg>'},24:function(e,t){e.exports=i},323:function(e,t){e.exports='<svg viewBox="0 0 9 5" xmlns="http://www.w3.org/2000/svg"><path d="M4.128 4.587L.751.834A.5.5 0 011.123 0h6.754a.5.5 0 01.372.834L4.872 4.587a.5.5 0 01-.744 0z" fill="#000" fill-rule="evenodd"></path></svg>'},325:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="#363636" fill-rule="nonzero"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814z"></path><path d="M10.318 0C13.456 0 16 2.462 16 5.5S13.456 11 10.318 11a5.796 5.796 0 01-3.023-.842l-.22-.142.54-.752c.788.53 1.722.82 2.703.82 2.615 0 4.735-2.053 4.735-4.584 0-2.531-2.12-4.583-4.735-4.583-1.916 0-3.617 1.112-4.354 2.779l-.078.187L5 3.56C5.827 1.435 7.933 0 10.318 0z"></path></g></svg>'},326:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 0v16H0V0h16zM7.077 1H1v14h10.561L7.078 7.616 7.077 1zM15 6.391L9.56 9.779 12.73 15H15V6.391zM15 1H8.077v6.335l.965 1.589L15 5.213V1z" fill="#363636" fill-rule="nonzero"></path></svg>'},327:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16"><g fill="#363636" fill-rule="nonzero"><path d="M.75 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.75 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814z"></path><path d="M8.721 0c1.82 0 2.865 1.556 2.865 4.35 0 .462.12.66.385.774.219.093.473.126.99.131h.551l.397.009c1.251.05 1.807.336 2.04 1.333.41 1.76-1.62 3.114-5.904 4.313l-.326.09-.245-.999.64-.18c3.516-1.02 5.088-2.089 4.88-2.979-.094-.407-.382-.535-1.304-.553l-.787-.002c-.62-.008-.943-.055-1.3-.207-.648-.276-.998-.859-.998-1.73 0-2.286-.694-3.318-1.884-3.318-.731 0-1.68.55-2.815 1.685l-.215.22L5 2.203C6.398.748 7.626 0 8.721 0z"></path></g></svg>'},328:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="#363636" fill-rule="nonzero"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM9.72 1.11l.588-.808 5.082 3.7-4.577 2.656L14.61 9.49l-.598.801L9 6.555l4.56-2.649z"></path></g></svg>'},329:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595L.25 3zm.996 1.726l-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48-4.893-2.814zM12 6a2 2 0 100-4 2 2 0 000 4z" fill="#363636" fill-rule="nonzero"></path></svg>'},331:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M20.889 1.333h6.222a3.556 3.556 0 013.556 3.556v6.222a3.556 3.556 0 01-3.556 3.556h-6.222a3.556 3.556 0 01-3.556-3.556V4.889a3.556 3.556 0 013.556-3.556zM20 4v8h8V4h-8zM4.889 17.333h6.222a3.556 3.556 0 013.556 3.556v6.222a3.556 3.556 0 01-3.556 3.556H4.889a3.556 3.556 0 01-3.556-3.556v-6.222a3.556 3.556 0 013.556-3.556zM4 20v8h8v-8H4zm20 8a4 4 0 100-8 4 4 0 000 8zm0 2.667a6.667 6.667 0 110-13.334 6.667 6.667 0 010 13.334zM4.981 12h6.037L7.999 5.963 4.98 12zm4.212-9.615l5.176 10.352a1.334 1.334 0 01-1.192 1.93H2.825a1.333 1.333 0 01-1.192-1.929L6.809 2.386a1.332 1.332 0 012.385 0z"></path></svg>'},416:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 32"><path d="M38.784 9.778v2.962H3.236V9.778h.074L13.086.002l2.111 2.111-7.702 7.665h31.29zM3.236 21.628h31.327l-7.702 7.702 2.111 2.111 9.776-9.813h.037v-2.962H3.237v2.962z"></path></svg>'},417:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 10"><path d="M0 10h15V4H0v6zm1-5h13v4h-1V6h-1v3h-1V7h-1v2H9V6H8v3H7V7H6v2H5V6H4v3H3V7H2v2H1V5zm11-5v1H3V0H0v3h3V2h9v1h3V0h-3zM2 2H1V1h1v1zm12 0h-1V1h1v1z" fill="#000" fill-rule="nonzero"></path></svg>'},418:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 16"><g fill="#000" fill-rule="nonzero"><path d="M4 8h1v3H4V8zM2 9h1v2H2V9zm6-1h1v3H8V8zm4 0h1v3h-1V8z"></path><path d="M15 12V6h-2V5h1V2h-3v1L4 1.05V0H1v3h1v3H0v6h2v1H1v3h3v-1h7v1h3v-3h-1v-1h2zm-3-9h1v1h-1V3zm-8-.92L11 4v1h1v1H3V3h1v-.92zM2 1h1v1H2V1zm1 14H2v-1h1v1zm8-1H4v-1H3v-1h9v1h-1v1zm2 1h-1v-1h1v1zM1 11V7h13v4H1z"></path><path d="M6 9h1v2H6V9zm4 0h1v2h-1V9z"></path></g></svg>'},47:function(e,t){e.exports=a},51:function(e,t){e.exports=s},58:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 01.708 0 .464.464 0 010 .677l-2.833 2.71a.517.517 0 01-.708 0L.813 2.983a.464.464 0 010-.677.517.517 0 01.708 0z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},86:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 5.693a.517.517 0 01-.708 0 .464.464 0 010-.677l2.833-2.71a.517.517 0 01.708 0l2.833 2.71a.464.464 0 010 .677.517.517 0 01-.708 0L4 3.323l-2.479 2.37z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},952:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},953:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="nonzero"></path></svg>'},954:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M14.376 10.573l1.647.927-8 4.5-8-4.5 1.648-.927 1.02.574-.628.353 5.96 3.353 5.96-3.353-.627-.353 1.02-.574zm-.999-2.414l.606.341-5.96 3.353L2.063 8.5l.607-.341-1.02-.574L.023 8.5l8 4.5 8-4.5-1.626-.915-1.02.574zM8.023 1.023l-8 4.5 8 4.5 8-4.5-8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353-5.96-3.353z" fill="#000" fill-rule="nonzero"></path></svg>'},955:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M.1 6.9h6.8V.1H.1v6.8zm6-.8H3.985c.077-.403.25-.78.506-1.102a4.574 4.574 0 001.609.805V6.1zm0-1.128a3.758 3.758 0 01-1.006-.523c.31-.203.65-.358 1.006-.459v.982zM6.1.9v2.266a4.229 4.229 0 00-1.613.73 6.038 6.038 0 01-1.1-1.767l.002-.004-.004-.001A8.16 8.16 0 012.99.9H6.1zM.9.9h1.266a8.7 8.7 0 00.359 1.249A1.93 1.93 0 01.9 3.188V.9zm0 3.09a2.828 2.828 0 002.006-.966c.262.519.594 1 .987 1.428A3.367 3.367 0 003.17 6.1H.9V3.99zM9.1.1v6.8h6.8V.1H9.1zm.8.8h4.063a.373.373 0 01-.045.2.594.594 0 01-.438.176 1.637 1.637 0 00-1.175.49.91.91 0 00-.203.708c-.001.007-.114.736-.607.742a.74.74 0 00-.719.384.828.828 0 00-.026.6H9.9V.9zm5.2 5.2H9.9V5h2.296l-.474-.639a1.562 1.562 0 01-.192-.346c1.041-.03 1.37-1.188 1.365-1.587a.19.19 0 01.028-.154c.031-.037.166-.162.624-.2.419 0 .81-.205 1.049-.549a1.13 1.13 0 00.16-.625h.344v5.2zm-15 9.8h6.8V9.1H.1v6.8zm.8-6h5.2v.46l-2 1.973v.867l-3.2-.089V9.9zm0 4.01l4 .112v-1.355l1.2-1.182V15.1H.9v-1.19zm8.2 1.99h6.8V9.1H9.1v6.8zm6-.8h-1.792l-1.27-1.572 1.468-1.468 1.594 1.605V15.1zm0-5.2v2.628L12.49 9.9h2.61zm-5.2 0h1.46l1.581 1.592-1.978 1.98 1.316 1.628H9.9V9.9z" fill="#000" fill-rule="nonzero"></path></svg>'},956:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 11v4.001L5 15v1H0v-5h1zm15 0v5h-5v-1l4 .001V11h1zM5 0v1L1 .999V5H0V0h5zm11 0v5h-1V.999L11 1V0h5z" fill="#000" fill-rule="nonzero"></path></svg>'},957:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 9v6h16V9H0zm15 3h-1v2h-1v-3h-1v3h-1v-2h-1v2H9v-3H8v3H7v-2H6v2H5v-3H4v3H3v-2H2v2H1v-4h14v2zm.18-7.5l-2.85 2.85-.71-.7L13.23 5H9V4h4.32l-1.7-1.69.71-.7 2.85 2.89zM2.68 4H7v1H2.77l1.61 1.65-.71.7L.82 4.5l2.85-2.85.71.7L2.68 4z" fill="#000" fill-rule="nonzero"></path></svg>'},962:function(e,t,n){"use strict";n.r(t),n.d(t,"JimuMap",(function(){return yt})),n.d(t,"Draw",(function(){return Qt})),n.d(t,"MapStatesEditor",(function(){return Xt})),n.d(t,"SymbolSelector",(function(){return Bt})),n.d(t,"SymbolItem",(function(){return St}));var o={};n.r(o),n.d(o,"JimuMap",(function(){return m})),n.d(o,"Draw",(function(){return y}));var i,a,s,r,l,p,c,u,d=n(0),h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},m=function(e){return Object(d.css)(i||(i=h(["\n    position: relative;\n\n    .map-is-live-mode {\n      .is-widget {\n        pointer-events: auto !important;\n      }\n    }\n\n    .widget-map-usemask {\n      pointer-events: auto !important;\n    }\n\n    .map-is-design-mode {\n      .exbmap-ui,\n      .exbmap-ui-tool {\n        pointer-events: none !important;\n      }\n\n      .is-widget {\n        pointer-events: auto !important;\n      }\n    }\n\n    .widget-map{\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      z-index: -1;\n      .overview-container{\n        position: absolute;\n        top: 12px;\n        right: 12px;\n        width: 300px;\n        height: 200px;\n        border: 1px solid black;\n        z-index: 1;\n      }\n\n      .extent-container{\n        background-color: rgba(0, 0, 0, 0.5);\n        position: absolute;\n        z-index: 2;\n      }\n\n      .extent-btn-container{\n        button{\n          outline: none;\n        }\n        .previous-extent-btn{\n          color: #111;\n        }\n        .next-extent-btn{\n          color: #222;\n        }\n      }\n    }\n\n    .exbmap-ui-layout{\n      z-index: 0;\n    }\n\n    .mapswitch-container {\n      position: absolute;\n      z-index: 7;\n      width: 32px;\n      height: 32px;\n      bottom: 10px;\n      left: 10px;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3)\n    }\n\n    .mapswitch-icon {\n      fill: black;\n      left: 8px;\n      top: 8px;\n      position: absolute;\n      display: block;\n    }\n\n    .widget-map-background {\n      background-color: ",";\n      position: absolute;\n      z-index: 1;\n    }\n\n    @keyframes appear {\n      0%{opacity:0}\n      25%{opacity:.25}\n      50%{opacity:.5;}\n      75%{opacity:.75}\n      100%{opacity:1;}\n    }\n\n    @keyframes disappear {\n      0%{opacity:1}\n      25%{opacity:.75}\n      50%{opacity:.5;}\n      75%{opacity:.25}\n      100%{opacity:0;}\n    }\n\n    .multisourcemap-item-appear {\n      animation: appear 300ms;\n      -webkit-animation: appear 300ms;\n      -moz-animation: appear 300ms;\n      animation-fill-mode: forwards;\n      -webkit-animation-fill-mode: forwards;\n      -moz-animation-fill-mode: forwards;\n      animation-timing-function: ease-in;\n      -webkit-animation-timing-function: ease-in;\n      -moz-animation-timing-function: ease-in;\n    }\n\n    .multisourcemap-item-disappear {\n      animation: disappear 300ms;\n      -webkit-animation: disappear 300ms;\n      -moz-animation: disappear 300ms;\n      animation-fill-mode: forwards;\n      -webkit-animation-fill-mode: forwards;\n      -moz-animation-fill-mode: forwards;\n      animation-timing-function: ease-in;\n      -webkit-animation-timing-function: ease-in;\n      -moz-animation-timing-function: ease-in;\n    }\n\n    .multisourcemap-item-appear-noanimate {\n      opacity: 1;\n    }\n\n    .multisourcemap-item-disappear-noanimate {\n      opacity: 0;\n    }\n\n    .exbmap-ui-tool-shell {\n      pointer-events: auto;\n    }\n  "],["\n    position: relative;\n\n    .map-is-live-mode {\n      .is-widget {\n        pointer-events: auto !important;\n      }\n    }\n\n    .widget-map-usemask {\n      pointer-events: auto !important;\n    }\n\n    .map-is-design-mode {\n      .exbmap-ui,\n      .exbmap-ui-tool {\n        pointer-events: none !important;\n      }\n\n      .is-widget {\n        pointer-events: auto !important;\n      }\n    }\n\n    .widget-map{\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 100%;\n      z-index: -1;\n      .overview-container{\n        position: absolute;\n        top: 12px;\n        right: 12px;\n        width: 300px;\n        height: 200px;\n        border: 1px solid black;\n        z-index: 1;\n      }\n\n      .extent-container{\n        background-color: rgba(0, 0, 0, 0.5);\n        position: absolute;\n        z-index: 2;\n      }\n\n      .extent-btn-container{\n        button{\n          outline: none;\n        }\n        .previous-extent-btn{\n          color: #111;\n        }\n        .next-extent-btn{\n          color: #222;\n        }\n      }\n    }\n\n    .exbmap-ui-layout{\n      z-index: 0;\n    }\n\n    .mapswitch-container {\n      position: absolute;\n      z-index: 7;\n      width: 32px;\n      height: 32px;\n      bottom: 10px;\n      left: 10px;\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3)\n    }\n\n    .mapswitch-icon {\n      fill: black;\n      left: 8px;\n      top: 8px;\n      position: absolute;\n      display: block;\n    }\n\n    .widget-map-background {\n      background-color: ",";\n      position: absolute;\n      z-index: 1;\n    }\n\n    @keyframes appear {\n      0%{opacity:0}\n      25%{opacity:.25}\n      50%{opacity:.5;}\n      75%{opacity:.75}\n      100%{opacity:1;}\n    }\n\n    @keyframes disappear {\n      0%{opacity:1}\n      25%{opacity:.75}\n      50%{opacity:.5;}\n      75%{opacity:.25}\n      100%{opacity:0;}\n    }\n\n    .multisourcemap-item-appear {\n      animation: appear 300ms;\n      -webkit-animation: appear 300ms;\n      -moz-animation: appear 300ms;\n      animation-fill-mode: forwards;\n      -webkit-animation-fill-mode: forwards;\n      -moz-animation-fill-mode: forwards;\n      animation-timing-function: ease-in;\n      -webkit-animation-timing-function: ease-in;\n      -moz-animation-timing-function: ease-in;\n    }\n\n    .multisourcemap-item-disappear {\n      animation: disappear 300ms;\n      -webkit-animation: disappear 300ms;\n      -moz-animation: disappear 300ms;\n      animation-fill-mode: forwards;\n      -webkit-animation-fill-mode: forwards;\n      -moz-animation-fill-mode: forwards;\n      animation-timing-function: ease-in;\n      -webkit-animation-timing-function: ease-in;\n      -moz-animation-timing-function: ease-in;\n    }\n\n    .multisourcemap-item-appear-noanimate {\n      opacity: 1;\n    }\n\n    .multisourcemap-item-disappear-noanimate {\n      opacity: 0;\n    }\n\n    .exbmap-ui-tool-shell {\n      pointer-events: auto;\n    }\n  "])),"white")},f=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},y=function(e){var t=e.theme;return Object(d.css)(a||(a=f(['\n    .jimu-draw-loader {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 2px;\n      width: 100%;\n      animation: esri-fade-in 500ms ease-in-out;\n    }\n\n    .jimu-draw-loader:before {\n      background-color: rgba(110,110,110,0.3);\n      width: 100%;\n      z-index: 0;\n      content: "";\n      opacity: 1;\n      position: absolute;\n      height: 2px;\n      top: 0;\n      transition: opacity 500ms ease-in-out;\n    }\n\n    .jimu-draw-loader:after {\n      background-color: ',';\n      width: 20%;\n      z-index: 0;\n      animation: looping-progresss-bar-ani 1500ms linear infinite;\n      content: "";\n      opacity: 1;\n      position: absolute;\n      height: 2px;\n      top: 0;\n      transition: opacity 500ms ease-in-out;\n    }\n  '],['\n    .jimu-draw-loader {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 2px;\n      width: 100%;\n      animation: esri-fade-in 500ms ease-in-out;\n    }\n\n    .jimu-draw-loader:before {\n      background-color: rgba(110,110,110,0.3);\n      width: 100%;\n      z-index: 0;\n      content: "";\n      opacity: 1;\n      position: absolute;\n      height: 2px;\n      top: 0;\n      transition: opacity 500ms ease-in-out;\n    }\n\n    .jimu-draw-loader:after {\n      background-color: ',';\n      width: 20%;\n      z-index: 0;\n      animation: looping-progresss-bar-ani 1500ms linear infinite;\n      content: "";\n      opacity: 1;\n      position: absolute;\n      height: 2px;\n      top: 0;\n      transition: opacity 500ms ease-in-out;\n    }\n  '])),t.colors.primary)},g=n(1),S=n(47),b=n(14),w=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t}(d.React.PureComponent),M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveY=0,t.startY=0,t.isRegisted=!1,t.registerTouchEvent=function(e){e&&!t.isRegisted&&(e.addEventListener("touchstart",(function(e){t.moveY=0;var n=e.touches[0];t.startY=n.clientY}),{passive:!1}),e.addEventListener("touchmove",(function(n){var o=n.touches[0];t.moveY=-1*(o.clientY-t.startY),t.startY=o.clientY,e.scrollTop=e.scrollTop+t.moveY}),{passive:!1}),e.addEventListener("touchend",(function(e){t.moveY=0,t.startY=0}),{passive:!1}),t.isRegisted=!0)},t}return M(t,e),t.prototype.getStyle=function(){return Object(d.css)(r||(r=x(["\n      overflow: auto;\n      pointer-events: auto;\n      "],["\n      overflow: auto;\n      pointer-events: auto;\n      "])))},t.prototype.render=function(){var e=this;return Object(d.jsx)("div",{css:this.getStyle(),className:this.props.className,style:this.props.style,ref:function(t){e.registerTouchEvent(t)}},this.props.children)},t}(d.React.PureComponent),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.componentWillUnmount=function(){this.props.onDestroyed&&this.props.onDestroyed()},t.prototype.render=function(){return d.React.createElement(d.React.Fragment,null,this.props.children)},t}(d.React.PureComponent),P=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},C=n(331),V=n(952),N=function(e){function t(t){var n=e.call(this,t)||this;n.toolName=null,n.isContainedToMobilePanel=!1,n.generation=0,n._getContent=function(){return n.props.toolJson.isOnlyExpanded?Object(d.jsx)("div",{css:n._cssStyle(),className:"exbmap-ui exbmap-ui-tool-panel"},Object(d.jsx)(d.ErrorBoundary,null,n.getExpandPanel())):n.props.isMobile?n._renderMobileTool():n._renderPCTool()},n.onResize=function(e,t){e&&t&&(n.generation=t,n.forceUpdate())};var o=n.props.jimuMapView&&n.props.jimuMapView.view&&n.props.jimuMapView.view.container;return g.MobilePanelManager.getInstance().checkDomIsContained(o)&&(n.isContainedToMobilePanel=!0),n.modifiers=[{name:"flip",options:{padding:0}},{name:"preventOverflow",options:{padding:15,boundariesElement:o}}],n}return P(t,e),t.prototype._cssStyle=function(){return Object(d.css)(l||(l=I(['\n      /* pointer-events: auto;\n      box-shadow: 0 1px 2px rgba(0,0,0,0.3);\n      position: relative;\n\n      .exbmap-ui-tool-icon {\n        fill: black;\n        left: 8px;\n        top: 8px;\n        position: absolute;\n        display: block;\n      }\n\n      .exbmap-ui-tool-icon-selected {\n        color: #000;\n        background-color: #eee;\n      }\n\n      .exbmap-ui-tool-icon-selected:after {\n        width: 0;\n        height: 0;\n        border-top: 6px solid #000;\n        border-left: 6px solid transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        content: "";\n        margin-top: 1px;\n        margin-right: 1px;\n      }\n\n      .exbmap-ui-expand-content {\n        transition: opacity 250ms ease-in-out, margin 250ms ease-in-out;\n        min-height: 10px;\n        min-width: 10px;\n        padding-top: ',";\n        padding-bottom: ",";\n        padding-left: ",";\n        padding-right: ",";\n\n        .exbmap-ui-expand-content-header {\n          margin-bottom: ",";\n        }\n\n        .panel-title {\n          font-size: ",";\n          color: #000000;\n        }\n\n        .panel-icon {\n          cursor: pointer;\n          color: #6e6e6e;\n        }\n\n        .panel-icon:hover {\n          color: #2e2e2e;\n        }\n      }\n\n      .expand-placement-bottom {\n        padding-top: 0.25rem !important;\n      }\n\n      .expand-placement-left {\n        padding-right: 0.25rem !important;\n      }\n\n      .expand-placement-right {\n        padding-left: 0.25rem !important;\n      }\n\n      .expand-placement-top {\n        padding-bottom: 0.25rem !important;\n      } */\n      "],['\n      /* pointer-events: auto;\n      box-shadow: 0 1px 2px rgba(0,0,0,0.3);\n      position: relative;\n\n      .exbmap-ui-tool-icon {\n        fill: black;\n        left: 8px;\n        top: 8px;\n        position: absolute;\n        display: block;\n      }\n\n      .exbmap-ui-tool-icon-selected {\n        color: #000;\n        background-color: #eee;\n      }\n\n      .exbmap-ui-tool-icon-selected:after {\n        width: 0;\n        height: 0;\n        border-top: 6px solid #000;\n        border-left: 6px solid transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        content: "";\n        margin-top: 1px;\n        margin-right: 1px;\n      }\n\n      .exbmap-ui-expand-content {\n        transition: opacity 250ms ease-in-out, margin 250ms ease-in-out;\n        min-height: 10px;\n        min-width: 10px;\n        padding-top: ',";\n        padding-bottom: ",";\n        padding-left: ",";\n        padding-right: ",";\n\n        .exbmap-ui-expand-content-header {\n          margin-bottom: ",";\n        }\n\n        .panel-title {\n          font-size: ",";\n          color: #000000;\n        }\n\n        .panel-icon {\n          cursor: pointer;\n          color: #6e6e6e;\n        }\n\n        .panel-icon:hover {\n          color: #2e2e2e;\n        }\n      }\n\n      .expand-placement-bottom {\n        padding-top: 0.25rem !important;\n      }\n\n      .expand-placement-left {\n        padding-right: 0.25rem !important;\n      }\n\n      .expand-placement-right {\n        padding-left: 0.25rem !important;\n      }\n\n      .expand-placement-top {\n        padding-bottom: 0.25rem !important;\n      } */\n      "])),d.polished.rem(10),d.polished.rem(10),d.polished.rem(20),d.polished.rem(20),d.polished.rem(10),d.polished.rem(16))},t.prototype.onShowPanel=function(){},t.prototype.onClosePanel=function(){},t.prototype.destroy=function(){},t.getIsNeedSetting=function(){return!0},t.prototype._onIconClick=function(e){var t=this.getIcon()&&this.getIcon().onIconClick;t&&t(e),this.getExpandPanel()&&(this.isContainedToMobilePanel,this.props.activeToolName&&this.props.activeToolName===this.toolName?this.props.onActiveToolNameChange(null):(this.props.onActiveToolNameChange(this.toolName),this.onShowPanel()))},t.prototype._initIconContainer=function(e){e&&!this.iconContainer&&(this.iconContainer=e,this.forceUpdate())},t.prototype._renderPCTool=function(){var e=this,t=this.getIcon();t||(t={icon:C,onIconClick:function(){}});var n=this.getExpandPanel();return Object(d.jsx)("div",{className:"exbmap-ui exbmap-ui-tool",css:this._cssStyle()},Object(d.jsx)("div",{style:{},ref:function(t){e._initIconContainer(t)},className:Object(d.classNames)("exbmap-ui-tool esri-widget--button",{"exbmap-ui-tool-icon-selected":this.toolName===this.props.activeToolName&&n}),title:this.props.toolJson.isShowIconTitle?this.getTitle():"",onClick:function(t){e._onIconClick(t)}},Object(d.jsx)(g.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:t.icon})),this.iconContainer&&this.toolName===this.props.activeToolName&&n&&Object(d.jsx)(L,{onDestroyed:function(){e.onClosePanel()}},Object(d.jsx)(g.Popper,{className:"exbmap-ui-popper",reference:this.iconContainer,open:!(this.toolName!==this.props.activeToolName||!n),placement:this.props.toolJson.panelPlacement,modifiers:this.modifiers,version:this.generation,disablePortal:!0},Object(d.jsx)("div",{className:this.getExpandPanelPlacementClassName()},Object(d.jsx)("div",{className:"exbmap-ui-expand-content"},Object(d.jsx)("div",{className:"w-100 justify-content-between d-flex exbmap-ui-expand-content-header"},Object(d.jsx)("div",{className:"panel-title text-truncate",style:{maxWidth:"210px"},title:this.getTitle()},this.getTitle()),Object(d.jsx)("div",{onClick:function(){e.props.onActiveToolNameChange(null)}},Object(d.jsx)(g.Icon,{className:"panel-icon",width:20,height:20,icon:V}))),Object(d.jsx)(d.ErrorBoundary,null,n,Object(d.jsx)(d.ReactResizeDetector,{handleHeight:!0,onResize:this.onResize})))))))},t.prototype._renderMobileTool=function(){var e=this,t=this.getIcon();t||(t={icon:C,onIconClick:function(){}});var n=this.getExpandPanel();return Object(d.jsx)("div",{className:"exbmap-ui exbmap-ui-tool",css:this._cssStyle()},Object(d.jsx)("div",{style:{},ref:function(t){e.iconContainer=t},className:Object(d.classNames)("exbmap-ui-tool border-0 esri-widget--button",{"exbmap-ui-tool-icon-selected":this.toolName===this.props.activeToolName&&n}),title:this.props.toolJson.isShowIconTitle?this.getTitle():"",onClick:function(t){e._onIconClick(t)}},Object(d.jsx)(g.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:t.icon})),this.toolName===this.props.activeToolName&&n&&d.ReactDOM.createPortal(Object(d.jsx)(L,{onDestroyed:function(){e.onClosePanel()}},Object(d.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(d.jsx)("div",{className:"w-100 justify-content-between d-flex exbmap-ui-expand-content-header",style:{padding:"10px",fontWeight:"bold"}},Object(d.jsx)("div",{className:"panel-title text-truncate w-100",title:this.getTitle()},this.getTitle()),Object(d.jsx)("div",{style:{zIndex:1,pointerEvents:"auto",width:"40px",height:"30px"},onClick:function(){e.props.onActiveToolNameChange(null)},className:"d-flex justify-content-end align-items-start"},Object(d.jsx)(g.Icon,{className:"panel-icon",width:20,height:20,icon:V,color:"#6e6e6e"}))),Object(d.jsx)("div",{className:"flex-grow-1 w-100",style:{position:"relative"}},Object(d.jsx)(j,{className:"w-100 h-100",style:{position:"absolute",paddingLeft:"10px",paddingRight:"10px"}},Object(d.jsx)(d.ErrorBoundary,null,this.getExpandPanel()))))),document.getElementById(this.props.jimuMapView.id+"-bottom-panel")))},t.prototype.getExpandPanelPlacementClassName=function(){return this.props.toolJson.panelPlacement?"expand-placement-"+this.props.toolJson.panelPlacement.split("-")[0]:null},t.prototype.render=function(){return this._getContent()},t}(v),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),T=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Zoom",n}return D(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"ZoomLabel",defaultMessage:g.defaultMessages.ZoomLabel})},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(k,{jimuMapView:this.props.jimuMapView})},t}(N),k=function(e){function t(t){var n=e.call(this,t)||this;return n.Zoom=null,n.state={apiLoaded:!1},n}return D(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Zoom"]).then((function(t){e.Zoom=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.ZoomBtn=new this.Zoom({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.ZoomBtn&&(this.ZoomBtn.destroy(),this.ZoomBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t}})},t}(d.React.PureComponent),E=d.React.createContext({isShowMapSwitchBtn:!1,dataSourceIds:[],activeDataSourceId:null,switchMap:function(){},fullScreenMap:function(){},initialMapState:null}),R=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Home",n.getHomeContent=function(e){return d.React.createElement(A,{jimuMapView:n.props.jimuMapView,initialMapState:e})},n}return R(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"HomeLabel",defaultMessage:g.defaultMessages.HomeLabel})},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){var e=this;return d.React.createElement(E.Consumer,null,(function(t){var n=t.initialMapState;return e.getHomeContent(n)}))},t}(N),A=function(e){function t(t){var n=e.call(this,t)||this;return n.Home=null,n.generateViewPointFromInitialMapState=function(e){return"2d"===e.viewType?new n.Viewpoint({targetGeometry:n.Extent.fromJSON(e.extent),rotation:e.rotation}):n.Viewpoint.fromJSON(e.viewPoint)},n.state={apiLoaded:!1},n}return R(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Home","esri/geometry/Extent","esri/Viewpoint"]).then((function(t){e.Home=t[0],e.Extent=t[1],e.Viewpoint=t[2],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(e){this.state.apiLoaded&&this.container&&(this.homeBtn&&(this.container.innerHTML=""),this.homeBtn=new this.Home({container:this.container,view:this.props.jimuMapView.view,viewpoint:this.props.initialMapState?this.generateViewPointFromInitialMapState(this.props.initialMapState):this.props.jimuMapView.view.map.initialViewProperties.viewpoint}),e.initialMapState!==this.props.initialMapState&&this.props.jimuMapView.view.goTo(this.homeBtn.viewpoint,{animate:!1}))},t.prototype.componentWillUnmount=function(){this.homeBtn&&(this.homeBtn.destroy(),this.homeBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{className:"esri-widget--button",ref:function(t){e.container||(e.container=t)}})},t}(d.React.PureComponent),B=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Compass",n}return B(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"CompassLabel",defaultMessage:g.defaultMessages.CompassLabel})},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(z,{jimuMapView:this.props.jimuMapView})},t}(N),z=function(e){function t(t){var n=e.call(this,t)||this;return n.Compass=null,n.state={apiLoaded:!1},n}return B(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Compass"]).then((function(t){e.Compass=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.CompassBtn=new this.Compass({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.CompassBtn&&(this.CompassBtn.destroy(),this.CompassBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t}})},t}(d.React.PureComponent),H=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),W=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Locate",n}return H(t,e),t.prototype.getTitle=function(){return"Locate"},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(U,{jimuMapView:this.props.jimuMapView})},t}(N),U=function(e){function t(t){var n=e.call(this,t)||this;return n.Locate=null,n.state={apiLoaded:!1},n}return H(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Locate"]).then((function(t){e.Locate=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.LocateBtn=new this.Locate({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.LocateBtn&&(this.LocateBtn.destroy(),this.LocateBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{className:"esri-widget--button",ref:function(t){e.container=t}})},t}(d.React.PureComponent),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Navigation",n}return F(t,e),t.prototype.getTitle=function(){return"Navigation"},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(q,{jimuMapView:this.props.jimuMapView})},t}(N),q=function(e){function t(t){var n=e.call(this,t)||this;return n.Navigation=null,n.state={apiLoaded:!1},n}return F(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/NavigationToggle"]).then((function(t){e.Navigation=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.NavigationBtn=new this.Navigation({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.NavigationBtn&&(this.NavigationBtn.destroy(),this.NavigationBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t}})},t}(d.React.PureComponent),Y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Q=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Search",n}return Y(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"SearchLabel",defaultMessage:g.defaultMessages.SearchLabel})},t.prototype.getIcon=function(){return{icon:n(953)}},t.prototype.getExpandPanel=function(){return this.props.isMobile?Object(d.jsx)("div",{style:{minHeight:"32px",position:"relative",width:"100%"}},Object(d.jsx)(K,{jimuMapView:this.props.jimuMapView})):Object(d.jsx)("div",{style:{minWidth:"250px",minHeight:"32px",position:"relative"}},Object(d.jsx)(K,{jimuMapView:this.props.jimuMapView}))},t}(N),K=function(e){function t(t){var n=e.call(this,t)||this;return n.Search=null,n.state={apiLoaded:!1},n}return Y(t,e),t.prototype.getStyle=function(){return Object(d.css)(p||(p=Z(["\n      /* border: solid 1px rgba(110,110,110,0.3); */\n    "],["\n      /* border: solid 1px rgba(110,110,110,0.3); */\n    "])))},t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Search"]).then((function(t){e.Search=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.SearchBtn=new this.Search({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.SearchBtn&&(this.SearchBtn.destroy(),this.SearchBtn=null)},t.prototype.render=function(){var e=this;return Object(d.jsx)("div",{css:this.getStyle(),className:"w-100",ref:function(t){e.container=t}},!this.state.apiLoaded&&Object(d.jsx)("div",{className:"exbmap-basetool-loader"}))},t}(d.React.PureComponent),X=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Layers",n.handleTabIndexChange=function(e){n.setState({activeTabIndex:e})},n.state={activeTabIndex:0},n}return X(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"LayersLabel",defaultMessage:g.defaultMessages.LayersLabel})},t.prototype.getIcon=function(){return{icon:n(954)}},t.prototype.getExpandPanel=function(){var e=this;return d.React.createElement("div",{style:{width:this.props.isMobile?"100%":"250px",minHeight:"32px",position:"relative"},className:Object(d.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},d.React.createElement(g.Nav,{tabs:!0},d.React.createElement(g.NavItem,null,d.React.createElement(g.NavLink,{active:0===this.state.activeTabIndex,onClick:function(){e.handleTabIndexChange(0)}},this.props.intl.formatMessage({id:"LayersLabelLayer",defaultMessage:g.defaultMessages.LayersLabelLayer}))),d.React.createElement(g.NavItem,null,d.React.createElement(g.NavLink,{active:1===this.state.activeTabIndex,onClick:function(){e.handleTabIndexChange(1)}},this.props.intl.formatMessage({id:"LayersLabelLegend",defaultMessage:g.defaultMessages.LayersLabelLegend})))),d.React.createElement("div",{className:"mt-1"}),0===this.state.activeTabIndex&&d.React.createElement(ee,{jimuMapView:this.props.jimuMapView}),1===this.state.activeTabIndex&&d.React.createElement(te,{jimuMapView:this.props.jimuMapView}))},t}(N),ee=function(e){function t(t){var n=e.call(this,t)||this;return n.LayerList=null,n.state={apiLoaded:!1},n}return X(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/LayerList"]).then((function(t){e.LayerList=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.LayerListBtn=new this.LayerList({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.LayerListBtn&&(this.LayerListBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t},style:{width:"100%",minHeight:"32px",position:"relative"}},!this.state.apiLoaded&&d.React.createElement("div",{className:"exbmap-basetool-loader"}))},t}(d.React.PureComponent),te=function(e){function t(t){var n=e.call(this,t)||this;return n.Legend=null,n.state={apiLoaded:!1},n}return X(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Legend"]).then((function(t){e.Legend=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.LegendBtn=new this.Legend({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.LegendBtn&&(this.LegendBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t},style:{width:"100%",minHeight:"32px",position:"relative"}},!this.state.apiLoaded&&d.React.createElement("div",{className:"exbmap-basetool-loader"}))},t}(d.React.PureComponent),ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="BaseMap",n}return ne(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"BaseMapLabel",defaultMessage:g.defaultMessages.BaseMapLabel})},t.prototype.getIcon=function(){return{icon:n(955)}},t.prototype.getExpandPanel=function(){return d.React.createElement(ie,{jimuMapView:this.props.jimuMapView,isMobile:this.props.isMobile})},t}(N),ie=function(e){function t(t){var n=e.call(this,t)||this;return n.BaseMap=null,n.state={apiLoaded:!1},n}return ne(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/BasemapGallery"]).then((function(t){e.BaseMap=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.BaseMapBtn=new this.BaseMap({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.BaseMapBtn&&(this.BaseMapBtn.destroy(),this.BaseMapBtn=null)},t.prototype.render=function(){var e=this;return this.props.isMobile?d.React.createElement("div",{ref:function(t){e.container=t},style:{width:"100%",minHeight:"32px",maxWidth:"none",maxHeight:"none",overflowY:"auto",position:"relative"}},!this.state.apiLoaded&&d.React.createElement("div",{className:"exbmap-basetool-loader"})):d.React.createElement("div",{ref:function(t){e.container=t},style:{width:"250px",minHeight:"32px",position:"relative"},className:"exbmap-ui-pc-expand-maxheight"},!this.state.apiLoaded&&d.React.createElement("div",{className:"exbmap-basetool-loader"}))},t}(d.React.PureComponent),ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=function(e){function t(t){var n=e.call(this,t)||this;return n.unmount=!1,n.setMapThumbUrl=function(e){if(e||n.setState({mapThumbUrl:null}),n.props.portUrl&&n.props.portUrl!==Object(d.getAppStore)().getState().portalUrl)d.esri.restPortal.searchItems({q:"id:"+e,portal:n.props.portUrl+"/sharing/rest"}).then((function(e){if(!n.unmount)if(e.results[0]){var t=n.props.portUrl+"/sharing/rest/content/items/"+e.results[0].id+"/info/"+e.results[0].thumbnail;n.setState({mapThumbUrl:t})}else n.setState({mapThumbUrl:null})}));else{var t=Object(d.getAppStore)().getState().portalUrl;d.esri.restPortal.searchItems({q:"id:"+e,authentication:d.SessionManager.getInstance().getMainSession(),portal:t+"/sharing/rest"}).then((function(e){if(!n.unmount)if(e.results[0]){var o=d.SessionManager.getInstance().getMainSession(),i=null;i=o&&(null==o?void 0:o.token)?t+"/sharing/rest/content/items/"+e.results[0].id+"/info/"+e.results[0].thumbnail+"?token="+(null==o?void 0:o.token):t+"/sharing/rest/content/items/"+e.results[0].id+"/info/"+e.results[0].thumbnail,n.setState({mapThumbUrl:i})}else n.setState({mapThumbUrl:null})}))}},n.state={mapThumbUrl:null},n}return ae(t,e),t.prototype.componentDidMount=function(){this.unmount=!1,this.setMapThumbUrl(this.props.mapItemId)},t.prototype.componentDidUpdate=function(e,t){e.mapItemId!==this.props.mapItemId&&this.setMapThumbUrl(this.props.mapItemId)},t.prototype.componentWillUnmount=function(){this.unmount=!0},t.prototype.render=function(){return this.state.mapThumbUrl?d.React.createElement(g.ImageWithParam,{imageParam:{url:this.state.mapThumbUrl}}):d.React.createElement(g.ImageWithParam,{imageParam:{}})},t}(d.React.PureComponent),re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),le=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},pe=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="MapSwitch",n.switchMap=function(){},n.getContent=function(e,t,o,i){if(e){if(n.props.isMobile)return Object(d.jsx)("div",{className:"exbmap-ui-tool esri-widget--button",onClick:i,style:{marginTop:"10px"}},Object(d.jsx)(g.Icon,{width:16,height:16,className:"exbmap-ui-tool-icon",icon:n.getIcon().icon}));var a=null;return a=window.jimuConfig.isBuilder?Object(d.getAppStore)().getState().appStateInBuilder.appConfig.dataSources:Object(d.getAppStore)().getState().appConfig.dataSources,Object(d.jsx)("div",{css:n.getStyle(),onClick:i},Object(d.jsx)("div",{title:a[t[0]]?a[t[0]].label:null,className:Object(d.classNames)("mapthumb-item",{front:t[0]!==o},{back:t[0]===o})},Object(d.jsx)(se,{mapItemId:a[t[0]]?a[t[0]].itemId:null,portUrl:a[t[0]]?a[t[0]].portalUrl:null})),Object(d.jsx)("div",{title:a[t[1]]?a[t[1]].label:null,className:Object(d.classNames)("mapthumb-item",{front:t[1]!==o},{back:t[1]===o})},Object(d.jsx)(se,{mapItemId:a[t[1]]?a[t[1]].itemId:null,portUrl:a[t[1]]?a[t[1]].portalUrl:null})))}return null},n.getIconContent=function(t,o,i,a){return t?(n.switchMap=a,e.prototype.render.call(n)):null},n}return re(t,e),t.getIsNeedSetting=function(){return!1},t.prototype.getStyle=function(){return Object(d.css)(c||(c=le(["\n      width: ",";\n      height: ",";\n      cursor: pointer;\n      position: relative;\n\n      .mapthumb-item {\n        position: absolute;\n        width: ",";\n        height: ",";\n        transition: bottom 0.5s, left 0.5s, top 0.5s, right 0.5s, z-index 0.5s;\n      }\n\n      .front {\n        z-index: 1;\n        bottom: 0;\n        left: 0;\n      }\n\n      .back {\n        z-index: 0;\n        top: 0;\n        right: 0;\n      }\n    "],["\n      width: ",";\n      height: ",";\n      cursor: pointer;\n      position: relative;\n\n      .mapthumb-item {\n        position: absolute;\n        width: ",";\n        height: ",";\n        transition: bottom 0.5s, left 0.5s, top 0.5s, right 0.5s, z-index 0.5s;\n      }\n\n      .front {\n        z-index: 1;\n        bottom: 0;\n        left: 0;\n      }\n\n      .back {\n        z-index: 0;\n        top: 0;\n        right: 0;\n      }\n    "])),d.polished.rem(68),d.polished.rem(52),d.polished.rem(64),d.polished.rem(48))},t.prototype.getTitle=function(){return"MapSwitch"},t.prototype.getIcon=function(){var e=this;return{icon:n(416),onIconClick:function(){e.switchMap()}}},t.prototype.getExpandPanel=function(){var e=this;return this.props.toolJson.isOnlyExpanded?Object(d.jsx)(E.Consumer,null,(function(t){var n=t.isShowMapSwitchBtn,o=t.dataSourceIds,i=t.activeDataSourceId,a=t.switchMap;return e.getContent(n,o,i,a)})):null},t.prototype.render=function(){var t=this;return this.props.toolJson.isOnlyExpanded?e.prototype.render.call(this):Object(d.jsx)(E.Consumer,null,(function(e){var n=e.isShowMapSwitchBtn,o=e.dataSourceIds,i=e.activeDataSourceId,a=e.switchMap;return t.getIconContent(n,o,i,a)}))},t}(N),ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ue=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Fullscreen",n.fullScreenMap=function(){},n.getContent=function(t){return n.fullScreenMap=t,e.prototype.render.call(n)},n}return ce(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"FullScreenLabel",defaultMessage:g.defaultMessages.FullScreenLabel})},t.prototype.getIcon=function(){var e=this;return{icon:n(956),onIconClick:function(t){e.fullScreenMap()}}},t.prototype.getExpandPanel=function(){return null},t.prototype.render=function(){var e=this;return d.React.createElement(E.Consumer,null,(function(t){var n=t.fullScreenMap;return e.getContent(n)}))},t}(N),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),he=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="ScaleBar",n}return de(t,e),t.prototype.getTitle=function(){return"ScaleBar"},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(me,{jimuMapView:this.props.jimuMapView})},t}(N),me=function(e){function t(t){var n=e.call(this,t)||this;return n.ScaleBar=null,n.state={apiLoaded:!1},n}return de(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/ScaleBar"]).then((function(t){e.ScaleBar=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.ScaleBarBtn=new this.ScaleBar({container:this.container,view:this.props.jimuMapView.view,unit:"metric"}))},t.prototype.componentWillUnmount=function(){this.ScaleBarBtn&&(this.ScaleBarBtn.destroy(),this.ScaleBarBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{ref:function(t){e.container=t}})},t}(d.React.PureComponent),fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Attribution",n}return fe(t,e),t.getIsNeedSetting=function(){return!1},t.prototype.getTitle=function(){return"Attribution"},t.prototype.getIcon=function(){return null},t.prototype.getExpandPanel=function(){return d.React.createElement(ge,{jimuMapView:this.props.jimuMapView})},t}(N),ge=function(e){function t(t){var n=e.call(this,t)||this;return n.Attribution=null,n.state={apiLoaded:!1},n}return fe(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Attribution"]).then((function(t){e.Attribution=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(){this.state.apiLoaded&&this.container&&(this.AttributionBtn=new this.Attribution({container:this.container,view:this.props.jimuMapView.view}))},t.prototype.componentWillUnmount=function(){this.AttributionBtn&&(this.AttributionBtn.destroy(),this.AttributionBtn=null)},t.prototype.render=function(){var e=this;return d.React.createElement("div",{style:{position:"relative"},ref:function(t){e.container=t}})},t}(d.React.PureComponent),Se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),be=function(e){function t(t){var o=e.call(this,t)||this;return o.toolName="Measure",o.measureModules2D=[{name:"Line",title:"Line",path:"DistanceMeasurement2D",src:n(417)},{name:"Polygon",title:"Polygon",path:"AreaMeasurement2D",src:n(418)}],o.measureModules3D=[{name:"Line",title:"Line",path:"DirectLineMeasurement3D",src:n(417)},{name:"Polygon",title:"Polygon",path:"AreaMeasurement3D",src:n(418)}],o.handleMeasurceInstanceCreated=function(e,t){var n=o.state.measureInstances;n[t]=e,o.setState({measureInstances:n})},o.onTabClick=function(e){if(o.state.activeTabIndex===e);else{o.setState({activeTabIndex:e});for(var t=0;t<o.state.measureInstances.length;t++)t!==e&&o.state.measureInstances[t]&&(o.state.measureInstances[t].visible=!1),t===e&&o.state.measureInstances[t]&&(o.state.measureInstances[t].visible=!0)}},o.onClosePanel=function(){for(var e=0;e<o.state.measureInstances.length;e++)o.state.measureInstances[e]&&(o.state.measureInstances[e].visible=!1)},o.onShowPanel=function(){for(var e=0;e<o.state.measureInstances.length;e++)e!==o.state.activeTabIndex&&o.state.measureInstances[e]&&(o.state.measureInstances[e].visible=!1),e===o.state.activeTabIndex&&o.state.measureInstances[e]&&(o.state.measureInstances[e].visible=!0)},o.state={activeTabIndex:0,measureInstances:[null,null]},o}return Se(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"MeasureLabel",defaultMessage:g.defaultMessages.MeasureLabel})},t.prototype.getIcon=function(){return{icon:n(957)}},t.prototype.destroy=function(){for(var e=0;e<this.state.measureInstances.length;e++)this.state.measureInstances[e]&&!this.state.measureInstances[e].destroyed&&this.state.measureInstances[e].destroy()},t.prototype.getExpandPanel=function(){var e=this;return"2d"===this.props.jimuMapView.view.type?d.React.createElement("div",{style:{width:this.props.isMobile?"100%":"",position:"relative"},className:Object(d.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},d.React.createElement(g.Nav,{tabs:!0},this.measureModules2D.map((function(t,n){return d.React.createElement(g.NavItem,{key:n},d.React.createElement(g.NavLink,{active:e.state.activeTabIndex===n,onClick:function(){e.onTabClick(n)}},d.React.createElement(g.Icon,{width:16,height:16,className:"m-0",icon:t.src})))}))),d.React.createElement(we,{activeTabIndex:this.state.activeTabIndex,jimuMapView:this.props.jimuMapView,measureModule:this.measureModules2D[this.state.activeTabIndex],measureInstance:this.state.measureInstances[this.state.activeTabIndex],onMeasurceInstanceCreated:this.handleMeasurceInstanceCreated})):"3d"===this.props.jimuMapView.view.type?d.React.createElement("div",{style:{width:this.props.isMobile?"100%":"",position:"relative"},className:Object(d.classNames)({"exbmap-ui-pc-expand-maxheight":!this.props.isMobile})},d.React.createElement(g.Nav,{tabs:!0},this.measureModules3D.map((function(t,n){return d.React.createElement(g.NavItem,{key:n},d.React.createElement(g.NavLink,{active:e.state.activeTabIndex===n,onClick:function(){e.onTabClick(n)}},d.React.createElement(g.Icon,{width:16,height:16,className:"m-0",icon:t.src})))}))),d.React.createElement(we,{activeTabIndex:this.state.activeTabIndex,jimuMapView:this.props.jimuMapView,measureModule:this.measureModules3D[this.state.activeTabIndex],measureInstance:this.state.measureInstances[this.state.activeTabIndex],onMeasurceInstanceCreated:this.handleMeasurceInstanceCreated})):null},t}(N),we=function(e){function t(t){var n=e.call(this,t)||this;return n.MeasureInstance=null,n.state={apiLoaded:!1},n}return Se(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/"+this.props.measureModule.path]).then((function(t){e.MeasureClass=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(e){if(e.activeTabIndex===this.props.activeTabIndex&&e.measureModule===this.props.measureModule){if(this.state.apiLoaded&&this.parentContainer&&this.container)if(this.props.measureInstance)this.parentContainer.innerHTML="",this.parentContainer.appendChild(this.props.measureInstance.container),"measured"!==this.props.measureInstance.viewModel.state&&"measuring"!==this.props.measureInstance.viewModel.state&&this.props.measureInstance.viewModel.start();else{var t=new this.MeasureClass({container:this.container,view:this.props.jimuMapView.view});t.viewModel.start(),this.props.onMeasurceInstanceCreated(t,this.props.activeTabIndex)}}else this.reload()},t.prototype.reload=function(){var e=this;this.setState({apiLoaded:!1},(function(){Object(b.loadArcGISJSAPIModules)(["esri/widgets/"+e.props.measureModule.path]).then((function(t){e.MeasureClass=t[0],e.setState({apiLoaded:!0})}))}))},t.prototype.render=function(){var e=this;return d.React.createElement("div",{className:"w-100",style:{width:"250px",position:"relative",minHeight:"32px"},ref:function(t){e.parentContainer=t}},d.React.createElement("div",{ref:function(t){e.container=t}},!this.state.apiLoaded&&d.React.createElement("div",{className:"exbmap-basetool-loader"})))},t}(d.React.PureComponent),ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Me=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};!function(e){e.Point="point",e.Polyline="polyline",e.Polygon="polygon",e.Circle="circle",e.Rectangle="rectangle"}(u||(u={}));var xe,je,Oe,Le,Pe={style:"esriSMSCircle",color:[0,0,128,128],name:"Circle",outline:{color:[0,0,128,255],width:1},type:"esriSMS",size:18},Ie={tags:["solid"],title:"Blue Thin",style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},Ce={style:"esriSFSSolid",color:[79,129,189,77],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},Ve=n(323),Ne=n(175),De=n(327),Te=n(325),ke=n(328),Ee=n(329),Re=n(326),_e=function(e){function t(t){var n=e.call(this,t)||this;return n.currentActiveTool="rectangle",n.jsonUtils=null,n.resultGraphics=[],n.removeEvents=[],n.toggleIsSelectActive=function(){n.setState({isActive:!n.state.isActive})},n.getSelectToolIcon=function(){return"Point"===n.state.currentSelectType?Ee:"Rectangle"===n.state.currentSelectType?Ne:"Lasso"===n.state.currentSelectType?De:"Circle"===n.state.currentSelectType?Te:"Line"===n.state.currentSelectType?ke:Ne},n.toggleSelectTypePopup=function(){n.setState({isShowSelectTypePopup:!n.state.isShowSelectTypePopup})},n.toggleResultPopup=function(){n.setState({isShowResultPopup:!n.state.isShowResultPopup})},n.setCurrentSelectType=function(e){n.initializeSketchTool(),"Point"===e&&(n.sketchViewModel.create("point"),n.currentActiveTool="point"),"Rectangle"===e&&(n.sketchViewModel.create("rectangle"),n.currentActiveTool="rectangle"),"Lasso"===e&&(n.sketchViewModel.create("polygon"),n.currentActiveTool="polygon"),"Circle"===e&&(n.sketchViewModel.create("circle"),n.currentActiveTool="circle"),"Line"===e&&(n.sketchViewModel.create("polyline"),n.currentActiveTool="polyline"),n.setState({currentSelectType:e,isShowSelectTypePopup:!1,isActive:!0})},n.clearSelect=function(){n.props.jimuMapView.clearSelectedFeatures(),n.props.onClearSelect&&n.props.onClearSelect(null,{sketchViewModel:n.sketchViewModel})},n.state={isShowResultPopup:!1,isShowSelectTypePopup:!1,currentSelectType:"Rectangle",sketcheInitialized:!1,isActive:!1,spatialRelationship:"intersects",resultGraphics:[],isQuerying:!1},n}return ve(t,e),t.prototype.getCSSStyle=function(){var e=this.props.theme,t=e.arcgis.components.button.variants.default.default.bg,n=e.arcgis.components.button.variants.default.default.border;return Object(d.css)(xe||(xe=Me(["\n      .select-tool-container {\n        ","\n        ","\n      }\n\n      .select-tool-btn {\n        width: 32px;\n        height: 32px;\n      }\n\n      .content-bg {\n        background-color: ",";\n      }\n\n      .content-title {\n        font-size: ",";\n        font-weight: bold;\n      }\n\n      .select-tool-type-mobile-container-shell {\n        overflow-x: auto;\n      }\n\n      .select-tool-type-mobile-container-shell::-webkit-scrollbar {\n        height: 0 !important;\n        display: none;\n      }\n\n      .select-tool-type-mobile-container {\n        width: 400px;\n      }\n\n      .select-tool-type {\n        width: 64px;\n        height: 64px;\n        border: 1px solid ",";\n        cursor: pointer;\n      }\n\n      .select-tool-type-choosed {\n        border: 1px solid ",";\n        position: relative;\n      }\n\n      .select-tool-type-choosed:after {\n        width: 0;\n        height: 0;\n        border-top: 8px solid ",';\n        border-left: 8px solid transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        content: "";\n      }\n\n      .select-tool-type-text {\n        font-size: ',';\n      }\n\n      .select-tool-loader {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        width: 100%;\n        animation: esri-fade-in 500ms ease-in-out;\n      }\n\n      .select-tool-loader:before {\n        background-color: rgba(110,110,110,0.3);\n        width: 100%;\n        z-index: 0;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .select-tool-loader:after {\n        background-color: ',';\n        width: 20%;\n        z-index: 0;\n        animation: looping-progresss-bar-ani 1500ms linear infinite;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n    '],["\n      .select-tool-container {\n        ","\n        ","\n      }\n\n      .select-tool-btn {\n        width: 32px;\n        height: 32px;\n      }\n\n      .content-bg {\n        background-color: ",";\n      }\n\n      .content-title {\n        font-size: ",";\n        font-weight: bold;\n      }\n\n      .select-tool-type-mobile-container-shell {\n        overflow-x: auto;\n      }\n\n      .select-tool-type-mobile-container-shell::-webkit-scrollbar {\n        height: 0 !important;\n        display: none;\n      }\n\n      .select-tool-type-mobile-container {\n        width: 400px;\n      }\n\n      .select-tool-type {\n        width: 64px;\n        height: 64px;\n        border: 1px solid ",";\n        cursor: pointer;\n      }\n\n      .select-tool-type-choosed {\n        border: 1px solid ",";\n        position: relative;\n      }\n\n      .select-tool-type-choosed:after {\n        width: 0;\n        height: 0;\n        border-top: 8px solid ",';\n        border-left: 8px solid transparent;\n        position: absolute;\n        top: 0;\n        right: 0;\n        content: "";\n      }\n\n      .select-tool-type-text {\n        font-size: ',';\n      }\n\n      .select-tool-loader {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        width: 100%;\n        animation: esri-fade-in 500ms ease-in-out;\n      }\n\n      .select-tool-loader:before {\n        background-color: rgba(110,110,110,0.3);\n        width: 100%;\n        z-index: 0;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .select-tool-loader:after {\n        background-color: ',';\n        width: 20%;\n        z-index: 0;\n        animation: looping-progresss-bar-ani 1500ms linear infinite;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n    '])),t&&"background-color: "+t+";",n&&"border: "+n.color+" "+n.width+" solid;",e.colors.palette.light[100],d.polished.rem(13),e.colors.palette.light[400],e.colors.primary,e.colors.primary,d.polished.rem(12),e.colors.primary)},t.prototype.componentDidMount=function(){var e=this;this.state.sketcheInitialized||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/tasks/support/Query","esri/symbols/support/jsonUtils","esri/geometry/geometryEngine"]).then((function(t){e.SketchViewModel=t[0],e.GraphicsLayer=t[1],e.Query=t[2],e.jsonUtils=t[3],e.geometryEngine=t[4],e.props.jimuMapView.view.when((function(){e.initializeSketchTool(),e.setState({sketcheInitialized:!0})}))}))},t.prototype.componentDidUpdate=function(e,t){return t.sketcheInitialized!==this.state.sketcheInitialized&&this.state.sketcheInitialized?(this.initializeSketchTool(),void(this.state.isActive&&this.currentActiveTool&&this.sketchViewModel.create(this.currentActiveTool))):e.jimuMapView&&this.props.jimuMapView&&e.jimuMapView.id!==this.props.jimuMapView.id&&this.state.sketcheInitialized?(this.initializeSketchTool(),this.sketchViewModel.view=this.props.jimuMapView.view,void(this.state.isActive&&this.currentActiveTool&&this.sketchViewModel.create(this.currentActiveTool))):void(t.isActive!==this.state.isActive&&(this.initializeSketchTool(),this.state.isActive?this.sketchViewModel.create(this.currentActiveTool):this.removeSketchViewModel()))},t.prototype.componentWillUnmount=function(){this.removeSketchViewModel()},t.prototype.removeSketchViewModel=function(){this.sketchViewModel&&(this.sketchViewModel.destroy(),this.sketchViewModel=null,this.removeEvents.forEach((function(e){return e()})),this.removeEvents=[])},t.prototype.initializeSketchTool=function(){var e=this;if(this.SketchViewModel&&!this.sketchViewModel){this.sketchViewModel=new this.SketchViewModel({view:this.props.jimuMapView.view,layer:new this.GraphicsLayer,pointSymbol:this.jsonUtils.fromJSON(Pe),polylineSymbol:this.jsonUtils.fromJSON(Ie),polygonSymbol:this.jsonUtils.fromJSON(Ce)});var t=this.sketchViewModel.on("create",(function(t){var n=e.state.spatialRelationship;if("start"===t.state)e.props.onSelectStart&&e.props.onSelectStart(t,{spatialRelationship:n,sketchViewModel:e.sketchViewModel});else if("complete"===t.state){e.sketchViewModel.create(e.currentActiveTool),(e.props.onSelectComplete||function(t,n){var o=n.spatialRelationship;e.setState({isQuerying:!0}),e.props.jimuMapView.selectFeaturesByGraphic(t.graphic,o).then((function(){e.setState({isQuerying:!1})}))})(t,{spatialRelationship:n,sketchViewModel:e.sketchViewModel})}}));this.removeEvents.push(t.remove)}},t.prototype.render=function(){var e=this;return Object(d.jsx)("div",{css:this.getCSSStyle()},Object(d.jsx)("div",{className:"d-flex align-items-center justify-content-center select-tool-container",ref:function(t){e.btnContainer=t}},Object(d.jsx)("div",{className:"d-flex"},Object(d.jsx)("div",{className:"d-flex"},Object(d.jsx)("button",{onClick:this.toggleIsSelectActive,className:Object(d.classNames)("esri-widget--button  border-0 select-tool-btn d-flex align-items-center justify-content-center",{active:this.state.isActive}),disabled:!this.state.sketcheInitialized},Object(d.jsx)(g.Icon,{width:16,height:16,icon:this.getSelectToolIcon()})),Object(d.jsx)("button",{onClick:this.toggleSelectTypePopup,style:{width:18},className:Object(d.classNames)("esri-widget--button border-0 pl-1 pr-1 select-tool-btn d-flex align-items-center justify-content-center",{active:this.state.isShowSelectTypePopup}),disabled:!this.state.sketcheInitialized},Object(d.jsx)(g.Icon,{width:8,height:8,icon:Ve}))),Object(d.jsx)("button",{className:"select-tool-btn d-flex align-items-center justify-content-center select-tool-btn-hover esri-widget--button border-0",ref:function(t){e.selectResultContainer=t},onClick:this.clearSelect,disabled:!this.state.sketcheInitialized},Object(d.jsx)(g.Icon,{width:16,height:16,icon:Re})),Object(d.jsx)(g.Popper,{css:this.getCSSStyle(),reference:this.btnContainer,open:this.state.isShowSelectTypePopup,placement:"bottom-start",toggle:this.toggleSelectTypePopup},Object(d.jsx)("div",{className:"p-3 content-bg",style:{display:"flex",flexDirection:"column"}},Object(d.jsx)("div",{className:"content-title"},this.props.intl.formatMessage({id:"SelectionTool",defaultMessage:g.defaultMessages.SelectionTool})),Object(d.jsx)("div",{className:"mt-2 mb-2"},Object(d.jsx)("div",{className:"d-flex mb-2"},[{toolType:u.Rectangle,selectType:"Rectangle",icon:Ne,title:this.props.intl.formatMessage({id:"SelectionToolRectangle",defaultMessage:g.defaultMessages.SelectionToolRectangle})},{toolType:u.Polygon,selectType:"Lasso",icon:De,title:this.props.intl.formatMessage({id:"SelectionToolLasso",defaultMessage:g.defaultMessages.SelectionToolLasso})},{toolType:u.Circle,selectType:"Circle",icon:Te,title:this.props.intl.formatMessage({id:"SelectionToolCircle",defaultMessage:g.defaultMessages.SelectionToolCircle})},{toolType:u.Polyline,selectType:"Line",icon:ke,title:this.props.intl.formatMessage({id:"SelectionToolLine",defaultMessage:g.defaultMessages.SelectionToolLine})},{toolType:u.Point,selectType:"Point",icon:Ee,title:this.props.intl.formatMessage({id:"SelectionToolPoint",defaultMessage:g.defaultMessages.SelectionToolPoint})}].filter((function(t,n){var o;return!(null===(o=e.props.availableTools)||void 0===o?void 0:o.length)||e.props.availableTools.includes(t.toolType)})).map((function(t,n){return Object(d.jsx)("div",{key:n,className:Object(d.classNames)("select-tool-type mr-2 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover",{"select-tool-type-choosed":e.state.currentSelectType===t.selectType}),onClick:function(){e.setCurrentSelectType(t.selectType)}},Object(d.jsx)(g.Icon,{width:16,height:16,icon:t.icon}),Object(d.jsx)("div",{className:"select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center",title:t.title},t.title))})))),this.props.availableSelectionMode?Object(d.jsx)(d.React.Fragment,null,Object(d.jsx)("div",{className:"content-title"},this.props.intl.formatMessage({id:"SelectionMode",defaultMessage:g.defaultMessages.SelectionMode})),Object(d.jsx)("div",null,Object(d.jsx)("div",{className:"d-flex align-items-center mt-2"},Object(d.jsx)(g.Radio,{style:{cursor:"pointer"},checked:"intersects"===this.state.spatialRelationship,onChange:function(){e.setState({spatialRelationship:"intersects"})}}),Object(d.jsx)("label",{className:"m-0 ml-2 content-title",style:{cursor:"pointer"},onClick:function(){e.setState({spatialRelationship:"intersects"})}},this.props.intl.formatMessage({id:"SelectionWithin",defaultMessage:g.defaultMessages.SelectionWithin}))),Object(d.jsx)("div",{className:"d-flex align-items-center mt-2"},Object(d.jsx)(g.Radio,{style:{cursor:"pointer"},checked:"contains"===this.state.spatialRelationship,onChange:function(){e.setState({spatialRelationship:"contains"})}}),Object(d.jsx)("label",{className:"m-0 ml-2 content-title",style:{cursor:"pointer"},onClick:function(){e.setState({spatialRelationship:"contains"})}},this.props.intl.formatMessage({id:"SelectionContain",defaultMessage:g.defaultMessages.SelectionContain}))))):null)))),(this.state.isQuerying||!this.state.sketcheInitialized)&&Object(d.jsx)("div",{className:"select-tool-loader"}))},t}(d.React.PureComponent),Ae=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Be={Zoom:T,Home:_,Navigation:J,Locate:W,Compass:G,Search:Q,Layers:$,BaseMap:oe,Measure:be,MapSwitch:pe,FullScreen:ue,ScaleBar:he,Attribution:ye,Select:function(e){function t(t){var n=e.call(this,t)||this;return n.toolName="Select",n.state={},n}return Ae(t,e),t.prototype.getTitle=function(){return this.props.intl.formatMessage({id:"SelectLabel",defaultMessage:g.defaultMessages.SelectLabel})},t.prototype.getIcon=function(){return{icon:n(175)}},t.prototype.getExpandPanel=function(){return Object(d.jsx)(_e,{intl:this.props.intl,jimuMapView:this.props.jimuMapView})},t}(N)},Ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ze=function(e){function t(t){return e.call(this,t)||this}return Ge(t,e),t.prototype.componentDidMount=function(){var e=this.refs.baseToolInstance;(!Be[this.props.toolName].getIsNeedSetting()||this.props.toolConfig&&this.props.toolConfig["can"+this.props.toolName])&&(this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName]=e)},t.prototype.componentWillUnmount=function(){if(Be[this.props.toolName].getIsNeedSetting()){var e=this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName];e&&e.destroy&&(e.destroy(),delete this.props.jimuMapView.view.ui.exbMapTools[this.props.toolName])}},t.prototype.render=function(){var e=Be[this.props.toolName];return e?Object(d.jsx)("div",{className:Object(d.classNames)(this.props.className,"exbmap-ui exbmap-ui-tool-shell divitem",this.props.layoutConfig.elements[this.props.toolName].className,{"exbmap-ui-hidden-element":this.props.isHidden,"mb-0 mr-0":this.props.isLastElement,"rounded-pill":["Compass"].includes(this.props.toolName)})},Object(d.jsx)(e,{ref:"baseToolInstance",toolJson:this.props.layoutConfig.elements[this.props.toolName],toolName:this.props.toolName,isMobile:this.props.isMobile,jimuMapView:this.props.jimuMapView,activeToolName:this.props.activeToolName,onActiveToolNameChange:this.props.onActiveToolNameChange,intl:this.props.intl})):this.props.isMobile?Object(d.jsx)("span",null):null},t}(v),He=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),We=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ue=function(e){function t(n){var o=e.call(this,n)||this;return o.moveY=0,o.startY=0,o.sliding=!1,o.startDrag=!1,o.currentBottomPanelHeight=0,o.thumbMapElementNames=["FullScreen","Zoom","MapSwitch"],o.checkIsHiddenElement=function(e){return!!o.props.hiddenElementNames&&!!o.props.hiddenElementNames.includes(e)},o.start=function(e,t){if(o.startDrag=!0,"touch"===t){o.moveY=0;var n=e.touches[0];o.startY=n.clientY}"mouse"===t&&(o.moveY=0,o.startY=e.clientY),document.getElementById(o.props.jimuMapView.id+"-bottom-panel").classList.remove("expand-mobile-panel-transition")},o.move=function(e,t){if("touch"===t){o.sliding=!0;var n=e.touches[0];o.moveY=-1*(n.clientY-o.startY)}if("mouse"===t&&o.startDrag&&(o.sliding=!0,o.moveY=-1*(e.clientY-o.startY)),"mouse"!==t||o.startDrag){var i=150;o.state.bottomPanelHeight+o.moveY>i&&(i=o.state.bottomPanelHeight+o.moveY),document.getElementById(o.props.jimuMapView.id+"-bottom-panel").style.height=i+"px",o.currentBottomPanelHeight=i;var a=o.state.widgetHeight-i;a>360&&o.props.onSetHiddenElementNames([]),a>200&&a<=360&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage1),a>54&&a<=200&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage2),a<54&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage3)}},o.end=function(e,t){if("mouse"!==t||o.startDrag){if(o.startDrag=!1,o.sliding=!1,document.getElementById(o.props.jimuMapView.id+"-bottom-panel").classList.add("expand-mobile-panel-transition"),"touch"===t&&Math.abs(o.moveY)<10)return document.getElementById(o.props.jimuMapView.id+"-bottom-panel").style.height=o.state.bottomPanelHeight+"px",void(o.currentBottomPanelHeight=o.state.bottomPanelHeight);if(o.moveY>=0){var n=0;n=o.currentBottomPanelHeight>=150&&o.currentBottomPanelHeight<.6*o.state.widgetHeight?.6*o.state.widgetHeight:o.currentBottomPanelHeight>=.6*o.state.widgetHeight&&o.currentBottomPanelHeight<o.state.widgetHeight?o.state.widgetHeight-20:150,o.setState({bottomPanelHeight:n},(function(){o.checkResponsive()})),o.currentBottomPanelHeight=n}else{n=0;n=o.currentBottomPanelHeight>150&&o.currentBottomPanelHeight<.6*o.state.widgetHeight?150:o.currentBottomPanelHeight>=.6*o.state.widgetHeight&&o.currentBottomPanelHeight<o.state.widgetHeight?.6*o.state.widgetHeight:150,o.setState({bottomPanelHeight:n},(function(){o.checkResponsive()})),o.currentBottomPanelHeight=n}}},o.checkResponsive=function(){if(o.state.isThumbMap)o.props.onSetHiddenElementNames([]);else{if(0===o.state.bottomPanelHeight)return o.props.onActiveToolNameChange(null),void o.props.onSetHiddenElementNames([]);var e=o.state.widgetHeight-o.state.bottomPanelHeight;e>360&&o.props.onSetHiddenElementNames([]),e>200&&e<=360&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage1),e>54&&e<=200&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage2),e<54&&o.props.onSetHiddenElementNames(o.props.layoutConfig.mobileResponsiveStrategy.stage3)}},o.onResize=function(e,t){e<320&&t<380?o.setState({widgetWidth:e,widgetHeight:t,isThumbMap:!0},(function(){o.checkResponsive()})):o.setState({widgetWidth:e,widgetHeight:t,isThumbMap:!1},(function(){o.checkResponsive()}))},o.returnNullNode=function(e){return o.props.isMobile?Object(d.jsx)("span",{key:e}):null},o.checkIsLastElement=function(e,t){var n=t.toolName,i=o.props.layoutConfig,a=i.layout[e.groupName].children,s=a.indexOf(n);if(s===a.length-1)return!0;if(s<a.length-1){for(var r=!0,l=s+1;l<a.length;l++){var p=a[l];if("GROUP"!==i.elements[a[l]].type&&(!Be[p].getIsNeedSetting()||o.props.toolConfig&&o.props.toolConfig["can"+p]||i.lockToolNames&&i.lockToolNames.includes(p))){r=!1;break}}return r}},o.getGroupContent=function(e){if(e){var n=e.layout[o.props.groupName]&&e.layout[o.props.groupName].children;return o.checkIsShowGroup(e,n)?Object(d.jsx)("div",{css:o.getStyle(),className:Object(d.classNames)("exbmap-ui exbmap-ui-group",o.props.className,{"exbmap-ui-hidden-element":o.props.isHidden}),style:o.props.style},n.map((function(n,i){return e.elements[n]?"GROUP"===e.elements[n].type?Object(d.jsx)(t,{isHidden:o.checkIsHiddenElement(n),className:e.elements[n].className,style:e.elements[n].style,key:i,layoutConfig:e,toolConfig:o.props.toolConfig,isMobile:o.props.isMobile,intl:o.props.intl,jimuMapView:o.props.jimuMapView,groupName:n,activeToolName:o.props.activeToolName,hiddenElementNames:o.props.hiddenElementNames,onActiveToolNameChange:o.props.onActiveToolNameChange,isThumbMap:o.props.isMainGroup?o.state.isThumbMap:o.props.isThumbMap}):"TOOL"===e.elements[n].type&&(!Be[n].getIsNeedSetting()||o.props.toolConfig&&o.props.toolConfig["can"+n]||e.lockToolNames&&e.lockToolNames.includes(n))?Object(d.jsx)(ze,{isHidden:o.checkIsHiddenElement(n),key:i,layoutConfig:e,activeToolName:o.props.activeToolName,toolConfig:o.props.toolConfig,jimuMapView:o.props.jimuMapView,toolName:n,onActiveToolNameChange:o.props.onActiveToolNameChange,intl:o.props.intl,isMobile:o.props.isMobile,isLastElement:o.checkIsLastElement(e.elements[o.props.groupName],e.elements[n])}):o.returnNullNode(i):o.returnNullNode(i)})),o.props.isMobile&&o.props.isMainGroup&&Object(d.jsx)(d.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:o.onResize}),o.props.isMainGroup&&Object(d.jsx)("div",{className:"exbmap-ui w-100",style:{position:"relative",pointerEvents:"auto",overflow:"hidden",touchAction:"none",display:!o.props.isMobile||o.state.isThumbMap||o.props.isThumbMap?"none":"block"},ref:function(e){e&&e.addEventListener("touchmove",(function(e){e.preventDefault()}),{passive:!1})}},Object(d.jsx)("div",{id:o.props.jimuMapView.id+"-bottom-panel",className:"exbmap-ui w-100 expand-mobile-panel expand-mobile-panel-transition",style:{overflow:"hidden",pointerEvents:"auto",position:"relative",backgroundColor:"#fff",touchAction:"none",height:(o.sliding?o.currentBottomPanelHeight:o.state.bottomPanelHeight)+"px"}}),o.props.activeToolName&&Object(d.jsx)("div",{style:{touchAction:"none"},className:"expand-mobile-panel-touch-container d-flex justify-content-center align-items-center",onMouseDown:function(e){return o.start(e,"mouse")},onMouseMove:function(e){o.move(e,"mouse")},onMouseLeave:function(e){o.end(e,"mouse")},onMouseUp:function(e){o.end(e,"mouse")},onTouchStart:function(e){return o.start(e,"touch")},onTouchMove:function(e){o.move(e,"touch")},onTouchEnd:function(e){o.end(e,"touch")}},Object(d.jsx)("div",{className:"expand-mobile-panel-bar"})))):o.returnNullNode()}return o.returnNullNode()},o.checkIsShowGroup=function(e,t){if(t&&0!==t.length){var n=[];o.findAllToolNames(e,t,n);for(var i=!1,a=0;a<n.length;a++)if(o.props.toolConfig["can"+n[a]]||!Be[n[a]].getIsNeedSetting()||e.lockToolNames&&e.lockToolNames.includes(n[a])){i=!0;break}return i}return!1},o.findAllToolNames=function(e,t,n){if(t&&0!==t.length)for(var i=0;i<t.length;i++)if("GROUP"===e.elements[t[i]].type){var a=e.elements[t[i]].groupName;o.findAllToolNames(e,e.layout[a]&&e.layout[a].children,n)}else n.push(t[i])},o.state={bottomPanelHeight:0,isThumbMap:!!o.props.isMobile},o}return He(t,e),t.prototype.getStyle=function(){var e=this.props.layoutConfig.layout[this.props.groupName]&&this.props.layoutConfig.layout[this.props.groupName].position,t=this.props.layoutConfig.elements[this.props.groupName].direction;return Object(d.css)(je||(je=We(["\n      position: ",";\n      top: ","px;\n      bottom: ","px;\n      left: ","px;\n      right: ","px;\n      display: flex;\n      flex-flow: ",";\n      align-items: flex-start;\n\n      > .exbmap-ui + .exbmap-ui {\n        margin-top: ",";\n        margin-left: ",";\n      }\n\n      .exbmap-ui-group-expand-icon {\n        fill: black;\n        left: 8px;\n        top: 8px;\n        position: absolute;\n        display: block;\n      }\n\n      .expand-mobile-panel {\n        box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 2px;\n        border-radius: 10px 10px 0px 0px;\n      }\n\n      .expand-mobile-panel-transition {\n        transition: height 0.3s;\n      }\n\n      .expand-mobile-panel-touch-container {\n        top: 0;\n        position: absolute;\n        width: 100%;\n        height: 31px;\n      }\n\n      .expand-mobile-panel-bar {\n        width: 36px;\n        height: 4px;\n        background-color: #434343;\n        border-radius: 2px;\n      }\n      "],["\n      position: ",";\n      top: ","px;\n      bottom: ","px;\n      left: ","px;\n      right: ","px;\n      display: flex;\n      flex-flow: ",";\n      align-items: flex-start;\n\n      > .exbmap-ui + .exbmap-ui {\n        margin-top: ",";\n        margin-left: ",";\n      }\n\n      .exbmap-ui-group-expand-icon {\n        fill: black;\n        left: 8px;\n        top: 8px;\n        position: absolute;\n        display: block;\n      }\n\n      .expand-mobile-panel {\n        box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 2px;\n        border-radius: 10px 10px 0px 0px;\n      }\n\n      .expand-mobile-panel-transition {\n        transition: height 0.3s;\n      }\n\n      .expand-mobile-panel-touch-container {\n        top: 0;\n        position: absolute;\n        width: 100%;\n        height: 31px;\n      }\n\n      .expand-mobile-panel-bar {\n        width: 36px;\n        height: 4px;\n        background-color: #434343;\n        border-radius: 2px;\n      }\n      "])),e?"absolute":"relative",e?e.top:null,e?e.bottom:null,e?e.left:null,e?e.right:null,"vertical"===t?"column":"row","vertical"===t?"10px":0,"horizontal"===t?"10px":0)},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.props.activeToolName!==e.activeToolName){if(this.props.activeToolName&&e.activeToolName)return;this.props.activeToolName&&!e.activeToolName&&this.props.isMobile&&this.props.isMainGroup&&(this.setState({bottomPanelHeight:150},(function(){n.checkResponsive()})),this.currentBottomPanelHeight=150),!this.props.activeToolName&&e.activeToolName&&this.props.isMobile&&this.props.isMainGroup&&(this.setState({bottomPanelHeight:0},(function(){n.checkResponsive()})),this.currentBottomPanelHeight=0)}},t.prototype.render=function(){return this.getGroupContent(this.props.layoutConfig)},t}(v),Fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},qe=function(e){function t(t){var n=e.call(this,t)||this;return n.getMaxHeightForPcExpand=function(e){if(e){if(e<65)return null;var t=e-65;return t<300?t:300}return null},n.handleActiveNameChange=function(e){n.setState({activeToolName:e})},n.handSetHiddenElementNames=function(e){n.setState({hiddenElementNames:e})},n.getLayoutContent=function(e){return e&&n.props.toolConfig?Object(d.jsx)("div",{css:n.getStyle()},Object.keys(e.layout).map((function(t,o){return e.elements[t]&&"GROUP"===e.elements[t].type&&e.layout[t].position?Object(d.jsx)(Ue,{className:e.elements[t].className,style:e.elements[t].style,isResponsive:e.elements[t].isResponsive,isMobile:n.props.isMobile,isMainGroup:!0,key:o,layoutConfig:e,toolConfig:n.props.toolConfig,onActiveToolNameChange:n.handleActiveNameChange,jimuMapView:n.props.jimuMapView,groupName:t,activeToolName:n.state.activeToolName,hiddenElementNames:e.mobileResponsiveStrategy&&n.state.hiddenElementNames,intl:n.props.intl,onSetHiddenElementNames:n.handSetHiddenElementNames}):null}))):null},n.state={activeToolName:null,toolsContentInMobileExpandPanel:null,hiddenElementNames:[]},n.contentRef=document.createElement("div"),n.contentRef.className="exbmap-ui esri-ui-inner-container exbmap-ui-layout",n}return Fe(t,e),t.prototype.getStyle=function(){return Object(d.css)(Oe||(Oe=Je(['\n      z-index: 0;\n\n      .expand-panel-transition {\n        transition: opacity 0.3s, right 0.3s;\n      }\n\n      .scale-attribution-xy-group {\n        > div:first-of-type:nth-last-of-type(1) {\n          width: 100%;\n          max-width: 100% !important;\n        }\n      }\n\n      .exbmap-ui-hidden-element {\n        display: none !important;\n      }\n\n      .exbmap-basetool-loader {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        width: 100%;\n        animation: esri-fade-in 500ms ease-in-out;\n      }\n\n      .exbmap-basetool-loader:before {\n        background-color: rgba(110,110,110,0.3);\n        width: 100%;\n        z-index: 0;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .exbmap-basetool-loader:after {\n        background-color: #6e6e6e;\n        width: 20%;\n        z-index: 0;\n        animation: looping-progresss-bar-ani 1500ms linear infinite;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .exbmap-ui-pc-expand-maxheight {\n        max-height: ',"px;\n        overflow: auto\n      }\n      "],['\n      z-index: 0;\n\n      .expand-panel-transition {\n        transition: opacity 0.3s, right 0.3s;\n      }\n\n      .scale-attribution-xy-group {\n        > div:first-of-type:nth-last-of-type(1) {\n          width: 100%;\n          max-width: 100% !important;\n        }\n      }\n\n      .exbmap-ui-hidden-element {\n        display: none !important;\n      }\n\n      .exbmap-basetool-loader {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        width: 100%;\n        animation: esri-fade-in 500ms ease-in-out;\n      }\n\n      .exbmap-basetool-loader:before {\n        background-color: rgba(110,110,110,0.3);\n        width: 100%;\n        z-index: 0;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .exbmap-basetool-loader:after {\n        background-color: #6e6e6e;\n        width: 20%;\n        z-index: 0;\n        animation: looping-progresss-bar-ani 1500ms linear infinite;\n        content: "";\n        opacity: 1;\n        position: absolute;\n        height: 2px;\n        top: 0;\n        transition: opacity 500ms ease-in-out;\n      }\n\n      .exbmap-ui-pc-expand-maxheight {\n        max-height: ',"px;\n        overflow: auto\n      }\n      "])),this.getMaxHeightForPcExpand(this.props.widgetHeight))},t.prototype.componentDidMount=function(){this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.container&&this.props.jimuMapView.view.ui.container.appendChild(this.contentRef)},t.prototype.render=function(){return this.props.jimuMapView&&this.props.jimuMapView.view&&this.props.jimuMapView.view.ui&&this.props.jimuMapView.view.ui.container?Object(d.jsx)("div",null,d.ReactDOM.createPortal(this.getLayoutContent(this.props.layoutConfig),this.contentRef)):null},t}(d.React.PureComponent),Ye=[{elements:{navigator:{type:"GROUP",groupName:"navigator",direction:"vertical"},interact:{type:"GROUP",groupName:"interact",direction:"vertical",isResponsive:!0},bottom:{type:"GROUP",groupName:"bottom",direction:"vertical",className:"w-100"},"bottom-line1":{type:"GROUP",groupName:"bottom-line1",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100 scale-attribution-xy-group",style:{marginBottom:0}},"bottom-line2":{type:"GROUP",groupName:"bottom-line2",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100",style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"10px"}},attributionGroup:{type:"GROUP",groupName:"attributionGroup",direction:"horizontal",style:{maxWidth:"60%"}},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1},Navigation:{type:"TOOL",toolName:"Navigation",isOnlyExpanded:!0,isShowIconTitle:!1},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},ScaleBar:{type:"TOOL",toolName:"ScaleBar",isOnlyExpanded:!0,isShowIconTitle:!1},Attribution:{type:"TOOL",toolName:"Attribution",isOnlyExpanded:!0,isShowIconTitle:!1,className:"w-100"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"}},layout:{navigator:{children:["Zoom","Home","Navigation","Locate","Compass"],position:{top:15,left:15}},interact:{children:["Search","Layers","BaseMap","Measure"],position:{top:15,right:15}},"bottom-line1":{children:["ScaleBar","attributionGroup"]},"bottom-line2":{children:["MapSwitch","FullScreen"]},bottom:{children:["bottom-line2","bottom-line1"],position:{bottom:0,left:0}},attributionGroup:{children:["Attribution"]}}},{elements:{navigator:{type:"GROUP",groupName:"navigator",direction:"vertical"},interact:{type:"GROUP",groupName:"interact",direction:"horizontal",isResponsive:!0},fullScreenGroup:{type:"GROUP",groupName:"fullScreenGroup",direction:"horizontal"},bottom:{type:"GROUP",groupName:"bottom",direction:"vertical",className:"w-100"},"bottom-line1":{type:"GROUP",groupName:"bottom-line1",direction:"horizontal",className:"d-flex align-items-center justify-content-between w-100 scale-attribution-xy-group",style:{marginBottom:0}},"bottom-line2":{type:"GROUP",groupName:"bottom-line2",direction:"horizontal",className:"d-flex align-items-end justify-content-between w-100",style:{paddingLeft:"15px",paddingRight:"15px",marginBottom:"10px"}},attributionGroup:{type:"GROUP",groupName:"attributionGroup",direction:"horizontal",style:{maxWidth:"60%"},className:"attibute-group"},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1},Navigation:{type:"TOOL",toolName:"Navigation",isOnlyExpanded:!0,isShowIconTitle:!1},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},ScaleBar:{type:"TOOL",toolName:"ScaleBar",isOnlyExpanded:!0,isShowIconTitle:!1},Attribution:{type:"TOOL",toolName:"Attribution",isOnlyExpanded:!0,isShowIconTitle:!1,className:"w-100"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"bottom"}},layout:{navigator:{children:["Compass","Locate","Navigation","Zoom","Home"]},interact:{children:["Search","Layers","BaseMap","Measure"],position:{top:15,left:15}},fullScreenGroup:{children:["FullScreen"],position:{top:15,right:15}},"bottom-line1":{children:["ScaleBar","attributionGroup"]},"bottom-line2":{children:["MapSwitch","navigator"]},bottom:{children:["bottom-line2","bottom-line1"],position:{bottom:0,left:0}},attributionGroup:{children:["Attribution"]}}}],Ze=[{elements:{mainGroup:{type:"GROUP",groupName:"mainGroup",direction:"vertical",style:{position:"absolute"},className:"d-flex flex-column"},topGroup:{type:"GROUP",groupName:"topGroup",direction:"horizontal",className:"d-flex w-100 align-items-center justify-content-between",style:{padding:"10px"}},midGroup:{type:"GROUP",groupName:"midGroup",direction:"horizontal",className:"flex-grow-1 d-flex w-100 justify-content-between"},"midGroup-left":{type:"GROUP",groupName:"midGroup-left",direction:"vertical",className:"h-100 d-flex flex-column-reverse",style:{paddingLeft:"10px",paddingRight:"10px",paddingBottom:"10px"}},"midGroup-left-content":{type:"GROUP",groupName:"midGroup-left-content",direction:"vertical"},"midGroup-right":{type:"GROUP",groupName:"midGroup-right",direction:"vertical",className:"h-100 d-flex flex-column justify-content-between",style:{paddingRight:"10px",paddingLeft:"10px",paddingBottom:"10px"}},"midGroup-right-content-top":{type:"GROUP",groupName:"midGroup-right-content-top",direction:"vertical"},"midGroup-right-content-bottom":{type:"GROUP",groupName:"midGroup-right-content-bottom",direction:"vertical"},bottomGroup:{type:"GROUP",groupName:"bottomGroup",direction:"vertical"},Search:{type:"TOOL",toolName:"Search",isOnlyExpanded:!0,isShowIconTitle:!1,className:"flex-grow-1"},FullScreen:{type:"TOOL",toolName:"FullScreen",isOnlyExpanded:!1,isShowIconTitle:!0},Locate:{type:"TOOL",toolName:"Locate",isOnlyExpanded:!0,isShowIconTitle:!1},Compass:{type:"TOOL",toolName:"Compass",isOnlyExpanded:!0,isShowIconTitle:!1,className:"mb-0"},MapSwitch:{type:"TOOL",toolName:"MapSwitch",isOnlyExpanded:!0,isShowIconTitle:!0},Zoom:{type:"TOOL",toolName:"Zoom",isOnlyExpanded:!0,isShowIconTitle:!1},Home:{type:"TOOL",toolName:"Home",isOnlyExpanded:!0,isShowIconTitle:!1},Layers:{type:"TOOL",toolName:"Layers",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},BaseMap:{type:"TOOL",toolName:"BaseMap",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"},Measure:{type:"TOOL",toolName:"Measure",isOnlyExpanded:!1,isShowIconTitle:!0,panelPlacement:"left-start"}},layout:{mainGroup:{children:["topGroup","midGroup","bottomGroup"],position:{top:0,left:0,bottom:0,right:0}},topGroup:{children:["Search","FullScreen"]},midGroup:{children:["midGroup-left","midGroup-right"]},"midGroup-left":{children:["midGroup-left-content"]},"midGroup-left-content":{children:["Compass","MapSwitch"]},"midGroup-right":{children:["midGroup-right-content-top","midGroup-right-content-bottom"]},"midGroup-right-content-top":{children:["Layers","BaseMap","Measure"]},"midGroup-right-content-bottom":{children:["Zoom","Home","Locate"]}},mobileResponsiveStrategy:{stage1:["midGroup-left-content","midGroup-right-content-bottom"],stage2:["midGroup-left-content","midGroup-right-content-bottom","midGroup-right-content-top"],stage3:["topGroup","midGroup-left-content","midGroup-right-content-bottom","midGroup-right-content-top"]},lockToolNames:[]}],Qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ke=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}))},Xe=function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},$e=n(416);!function(e){e.Loading="LOADING",e.Loadok="LOADOK",e.LoadError="LOADERROR"}(Le||(Le={}));var et=function(e){function t(t){var n=e.call(this,t)||this;return n.highLightHandles={},n.mapBaseViewEventHandles={},n.dsManager=d.DataSourceManager.getInstance(),n.onExtented=null,n.isReceiveExtentChange=!1,n.startRenderMap=function(){Object(b.loadArcGISJSAPIModules)(["esri/geometry/Extent","esri/Viewpoint"]).then((function(e){n.Extent=e[0],n.Viewpoint=e[1],n.setState({isModulesLoaded:!0})}))},n.analysisMapView=function(){return Ke(n,void 0,void 0,(function(){var e=this;return Xe(this,(function(t){switch(t.label){case 0:return this.mapView?[3,5]:this.MapView?(this.initMapView(),[4,Promise.resolve()]):[3,2];case 1:return[2,t.sent()];case 2:return[4,Object(b.loadArcGISJSAPIModules)(["esri/geometry/Geometry","esri/webmap/InitialViewProperties","esri/Basemap","esri/layers/TileLayer","esri/views/MapView","esri/WebMap","esri/portal/Portal","esri/portal/PortalItem"]).then((function(t){return Ke(e,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return this.Geometry=t[0],this.InitialViewProperties=t[1],this.Basemap=t[2],this.TileLayer=t[3],this.MapView=t[4],this.WebMap=t[5],this.Portal=t[6],this.PortalItem=t[7],this.initMapView(),[4,Promise.resolve()];case 1:return[2,e.sent()]}}))}))}))];case 3:return[2,t.sent()];case 4:return[3,7];case 5:return[4,Promise.resolve()];case 6:return[2,t.sent()];case 7:return[2]}}))}))},n.analysisSceneView=function(){return Ke(n,void 0,void 0,(function(){var e=this;return Xe(this,(function(t){switch(t.label){case 0:return this.sceneView?[3,5]:this.SceneView?(this.initSceneView(),[4,Promise.resolve()]):[3,2];case 1:return[2,t.sent()];case 2:return[4,Object(b.loadArcGISJSAPIModules)(["esri/views/SceneView","esri/WebScene","esri/portal/Portal","esri/portal/PortalItem"]).then((function(t){return Ke(e,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return this.SceneView=t[0],this.WebScene=t[1],this.Portal=t[2],this.PortalItem=t[3],this.initSceneView(),[4,Promise.resolve()];case 1:return[2,e.sent()]}}))}))}))];case 3:return[2,t.sent()];case 4:return[3,7];case 5:return[4,Promise.resolve()];case 6:return[2,t.sent()];case 7:return[2]}}))}))},n.generateViewPointFromInitialMapState=function(e){return"2d"===e.viewType?new n.Viewpoint({targetGeometry:n.Extent.fromJSON(e.extent),rotation:e.rotation}):n.Viewpoint.fromJSON(e.viewPoint)},n.cloneMap=function(e){var t=null,o=e.getDataSourceJson(),i=null;if(o.type===S.DataSourceTypes.WebMap&&(i=n.WebMap),o.type===S.DataSourceTypes.WebScene&&(i=n.WebScene),o.portalUrl){var a=new n.Portal({url:d.portalUrlUtils.getHostUrlByOrgUrl(o.portalUrl)});t=new i({portalItem:new n.PortalItem({id:o.itemId,portal:a})})}else t=new i({portalItem:new n.PortalItem({id:o.itemId})});return t},n.getInitViewPointForDefaultWebMap=function(){var e=n.props.defaultMapInfo&&n.props.defaultMapInfo.defaultExtent;return n.props.baseWidgetProps.jimuMapConfig.initialMapState&&n.props.baseWidgetProps.jimuMapConfig.initialMapState.viewPoint?n.generateViewPointFromInitialMapState(n.props.baseWidgetProps.jimuMapConfig.initialMapState):new n.Viewpoint({targetGeometry:new n.Extent({xmin:e&&e.xmin,ymin:e&&e.ymin,xmax:e&&e.xmax,ymax:e&&e.ymax,spatialReference:{wkid:e.spatialReference.wkid}})})},n.getDefaultWebMap=function(){var e,t=n.props.defaultMapInfo&&n.props.defaultMapInfo.defaultExtent;return e=new n.Viewpoint({targetGeometry:new n.Extent({xmin:t&&t.xmin,ymin:t&&t.ymin,xmax:t&&t.xmax,ymax:t&&t.ymax,spatialReference:{wkid:t.spatialReference.wkid}})}),new n.WebMap({portalItem:{id:n.props.defaultMapInfo.defaultMapId,portal:{url:Object(d.getAppStore)().getState().portalUrl}},initialViewProperties:new n.InitialViewProperties({spatialReference:t&&t.spatialReference,viewpoint:e})})},n.initMapView=function(){if(n.extentWatch=null,!n.mapView){var e;if(n.props.isDefaultMap){e={map:n.getDefaultWebMap(),container:n.mapContainer,viewpoint:n.getInitViewPointForDefaultWebMap(),rotation:n.props.baseWidgetProps.jimuMapConfig.initialMapState&&n.props.baseWidgetProps.jimuMapConfig.initialMapState.rotation}}else{var t=n.cloneMap(n.state.mapDs);e=n.props.baseWidgetProps.jimuMapConfig.initialMapState?{map:t,container:n.mapContainer,viewpoint:n.props.baseWidgetProps.jimuMapConfig.initialMapState&&n.generateViewPointFromInitialMapState(n.props.baseWidgetProps.jimuMapConfig.initialMapState)}:{map:t,container:n.mapContainer}}n.mapView=new n.MapView(e),n.mapView.popup.spinnerEnabled=!1,n.mapView.ui.exbMapTools={},b.MapViewManager.getInstance().createJimuMapView({mapWidgetId:n.props.baseWidgetProps.id,datasourceId:n.props.dataSourceId,view:n.mapView}).then((function(){n.setState({mapLoadStatus:Le.Loadok},(function(){n.props.onMapLoaded(n.props.dataSourceId,Le.Loadok)}));var e=n.props.baseWidgetProps.id+"-"+n.props.dataSourceId,t=b.MapViewManager.getInstance().getJimuMapViewById(e);t&&(n.props.onJimuMapViewCreated(t),n.setState({mapBaseJimuMapView:t})),n.extentWatch||(n.extentWatch=n.mapView.watch("extent",(function(e){e&&(clearTimeout(n.onExtented),n.onExtented=setTimeout((function(){if(e)if(n.isReceiveExtentChange)n.isReceiveExtentChange=!1;else{var t=new d.ExtentChangeMessage(n.props.baseWidgetProps.id,e);t.addRelatedWidgetId(n.props.baseWidgetProps.id),n.props.onExtentChanged(n.props.dataSourceId,t)}}),200))}))),setTimeout((function(){n.goHome(!1).then((function(){var e=new d.ExtentChangeMessage(n.props.baseWidgetProps.id,n.mapView.extent);e.addRelatedWidgetId(n.props.baseWidgetProps.id),n.props.onExtentChanged(n.props.dataSourceId,e),n.props.onViewChanged&&n.props.onViewChanged({dataSourceId:n.props.dataSourceId,viewpoint:n.mapView.viewpoint.clone()})}))}),500)})),n.bindMapBaseViewEvent(n.mapView)}},n.initSceneView=function(){if(n.extentWatch=null,!n.sceneView){var e,t=n.cloneMap(n.state.mapDs);e=n.props.baseWidgetProps.jimuMapConfig.initialMapState?{map:t,container:n.mapContainer,qualityProfile:"low",viewpoint:n.props.baseWidgetProps.jimuMapConfig.initialMapState&&n.generateViewPointFromInitialMapState(n.props.baseWidgetProps.jimuMapConfig.initialMapState)}:{map:t,container:n.mapContainer,qualityProfile:"low"},n.sceneView=new n.SceneView(e),n.sceneView.popup.spinnerEnabled=!1,n.sceneView.ui.exbMapTools={},b.MapViewManager.getInstance().createJimuMapView({mapWidgetId:n.props.baseWidgetProps.id,datasourceId:n.props.dataSourceId,view:n.sceneView}),n.sceneView.when((function(){n.setState({mapLoadStatus:Le.Loadok},(function(){n.props.onMapLoaded(n.props.dataSourceId,Le.Loadok)}));var e=n.props.baseWidgetProps.id+"-"+n.props.dataSourceId,t=b.MapViewManager.getInstance().getJimuMapViewById(e);t&&(n.props.onJimuMapViewCreated(t),n.setState({mapBaseJimuMapView:t})),n.extentWatch||(n.extentWatch=n.sceneView.watch("extent",(function(e){e&&(clearTimeout(n.onExtented),n.onExtented=setTimeout((function(){if(e)if(n.isReceiveExtentChange)n.isReceiveExtentChange=!1;else{var t=new d.ExtentChangeMessage(n.props.baseWidgetProps.id,e);t.addRelatedWidgetId(n.props.baseWidgetProps.id),n.props.onExtentChanged(n.props.dataSourceId,t)}}),200))}))),setTimeout((function(){n.goHome(!1).then((function(){var e=new d.ExtentChangeMessage(n.props.baseWidgetProps.id,n.sceneView.extent);e.addRelatedWidgetId(n.props.baseWidgetProps.id),n.props.onExtentChanged(n.props.dataSourceId,e),n.props.onViewChanged&&n.props.onViewChanged({dataSourceId:n.props.dataSourceId,viewpoint:n.sceneView.viewpoint.clone()})}))}),500)})),n.bindMapBaseViewEvent(n.sceneView)}},n.updateMapView=function(e){e.disablePopUp?(n.mapView.popup.close(),n.mapView.popup.autoOpenEnabled=!1):n.mapView.popup.autoOpenEnabled=!0,n.mapView.ui&&(n.mapView.ui.components=[])},n.updateSceneView=function(e){e.disablePopUp?(n.sceneView.popup.close(),n.sceneView.popup.autoOpenEnabled=!1):n.sceneView.popup.autoOpenEnabled=!0,n.sceneView.ui&&(n.sceneView.ui.components=[])},n.bindMapBaseViewEvent=function(e){e&&(n.mapBaseViewEventHandles["mouse-wheel"]&&(n.mapBaseViewEventHandles["mouse-wheel"].remove(),n.mapBaseViewEventHandles["mouse-wheel"]=null),n.mapBaseViewEventHandles["mouse-wheel"]=e.on("mouse-wheel",(function(t){if(n.props.baseWidgetProps.jimuMapConfig.disableScroll)return t.stopPropagation(),void n.handleDisableWheel();n.props.onViewChanged&&n.props.onViewChanged({dataSourceId:n.props.dataSourceId,viewpoint:e.viewpoint.clone()})})),n.mapBaseViewEventHandles.drag&&(n.mapBaseViewEventHandles.drag.remove(),n.mapBaseViewEventHandles.drag=null),n.mapBaseViewEventHandles.drag=e.on("drag",(function(){n.props.onViewChanged&&n.props.onViewChanged({dataSourceId:n.props.dataSourceId,viewpoint:e.viewpoint.clone()})})),n.mapBaseViewEventHandles.click&&(n.mapBaseViewEventHandles.click.remove(),n.mapBaseViewEventHandles.click=null),n.mapBaseViewEventHandles.click=e.on("click",(function(){for(var e in n.highLightHandles)n.highLightHandles[e].remove()})))},n.getMapDsId=function(){return n.state.mapDs&&n.state.mapDs.id},n.onDataSourceCreated=function(e){n.setState({mapDs:e,preMapDs:n.state.mapDs})},n.onCreateDataSourceFailed=function(e){console.warn(e),n.setState({mapLoadStatus:Le.LoadError,mapDs:null,preMapDs:n.state.mapDs},(function(){n.props.onMapLoaded(n.props.dataSourceId,Le.LoadError),b.MapViewManager.getInstance().createJimuMapView({mapWidgetId:n.props.baseWidgetProps.id,datasourceId:n.props.dataSourceId,view:null})}))},n.setViewPoint=function(e){e&&n.state.mapDs&&(n.state.mapDs.type===S.DataSourceTypes.WebMap&&n.mapView&&(n.mapView.viewpoint=e),n.state.mapDs.type===S.DataSourceTypes.WebScene&&n.sceneView&&(n.sceneView.viewpoint=e))},n.getMapLoadStatus=function(){return n.state.mapLoadStatus},n.getViewPoint=function(){return n.state.mapDs?n.state.mapDs.type===S.DataSourceTypes.WebMap?n.mapView&&n.mapView.viewpoint?n.mapView.viewpoint.clone():null:n.state.mapDs.type===S.DataSourceTypes.WebScene?n.sceneView&&n.sceneView.viewpoint?(n.sceneView.goTo(n.sceneView.viewpoint.camera,{animate:!1}),n.sceneView.viewpoint.clone()):null:void 0:null},n.getViewType=function(){return n.state.mapDs&&n.state.mapDs.type},n.goToTilt=function(e){n.sceneView&&n.sceneView.goTo({tilt:e})},n.goHome=function(e){return Ke(n,void 0,void 0,(function(){var t;return Xe(this,(function(n){switch(n.label){case 0:return this.state.mapDs?[3,2]:[4,Promise.resolve()];case 1:return[2,n.sent()];case 2:return t=this.getMapBaseInitViewPoint(),this.state.mapDs.type===S.DataSourceTypes.WebMap&&this.mapView?[2,this.mapView.goTo(t,{animate:e})]:this.state.mapDs.type===S.DataSourceTypes.WebScene&&this.sceneView?[2,this.sceneView.goTo(t,{animate:e})]:[4,Promise.resolve()];case 3:return[2,n.sent()]}}))}))},n.getMapBaseInitViewPoint=function(){var e,t,o;return n.props.isDefaultMap?n.getInitViewPointForDefaultWebMap():n.props.baseWidgetProps.jimuMapConfig.initialMapState?n.generateViewPointFromInitialMapState(n.props.baseWidgetProps.jimuMapConfig.initialMapState):null===(o=null===(t=null===(e=n.state.mapDs.map)||void 0===e?void 0:e.initialViewProperties)||void 0===t?void 0:t.viewpoint)||void 0===o?void 0:o.clone()},n.formatMessage=function(e){return n.props.baseWidgetProps.intl.formatMessage({id:e,defaultMessage:g.defaultMessages[e]})},n.handleDisableWheel=function(){n.widgetContainer.style.pointerEvents="none",setTimeout((function(){n.widgetContainer.style.pointerEvents="auto"}),50)},n.getLayoutConfig=function(){return"xsmall"===n.state.widthBreakpoint?Ze[0]:n.props.baseWidgetProps.jimuMapConfig.layoutIndex?Ye[n.props.baseWidgetProps.jimuMapConfig.layoutIndex]:Ye[0]},n.onResize=function(e,t){e&&t&&(e<=545&&e>0?n.setState({widthBreakpoint:"xsmall",widgetHeight:t}):n.setState({widthBreakpoint:"other",widgetHeight:t}))},n.getMapSwitchForErrorMap=function(){return d.React.createElement(E.Consumer,null,(function(e){var t=e.isShowMapSwitchBtn,o=(e.dataSourceIds,e.activeDataSourceId,e.switchMap);return d.React.createElement("div",{className:"mapswitch-container",style:{display:t?"block":"none",marginBottom:"xsmall"===n.state.widthBreakpoint?10:0}},d.React.createElement("div",{onClick:function(e){e.preventDefault(),o()},className:"jimu-widget esri-widget--button"},d.React.createElement(g.Icon,{icon:$e,width:16,height:16,className:"mapswitch-icon"})))}))},n.state={mapLoadStatus:Le.Loading,widthBreakpoint:null,mapBaseJimuMapView:null,dataSourceId:null,widgetHeight:null},n}return Qe(t,e),t.prototype.componentDidMount=function(){var e=this;0===this.widgetContainer.getElementsByClassName("widget-map").length&&(this.mapContainer||(this.mapContainer=document&&document.createElement("div"),this.mapContainer.className="jimu-widget widget-map"),this.widgetContainer.appendChild(this.mapContainer)),!this.props.startLoadModules||this.state.isModulesLoaded?(this.getMapDsId()||this.props.isDefaultMap)&&(this.state.mapDs||this.props.isDefaultMap)&&(this.props.isDefaultMap?this.analysisMapView().then((function(){e.updateMapView(e.props.baseWidgetProps.jimuMapConfig)})):(this.state.mapDs.type===S.DataSourceTypes.WebMap&&this.analysisMapView().then((function(){e.updateMapView(e.props.baseWidgetProps.jimuMapConfig)})),this.state.mapDs.type===S.DataSourceTypes.WebScene&&this.analysisSceneView().then((function(){e.updateSceneView(e.props.baseWidgetProps.jimuMapConfig)})))):this.startRenderMap()},t.prototype.componentDidUpdate=function(){var e=this;if(this.state.isModulesLoaded){var t=this.getMapDsId(),n=this.state.preMapDs&&this.state.preMapDs.id,o=this.state.mapDs&&this.state.mapDs.getDataSourceJson().itemId,i=this.state.preMapDs&&this.state.preMapDs.getDataSourceJson().itemId;if(t!==n||o!==i){this.mapView=null,this.sceneView=null;var a=this.state.preMapDs&&this.props.baseWidgetProps.id+"-"+this.state.preMapDs.id;if(a&&b.MapViewManager.getInstance().destroyJimuMapView(a),this.state.mapLoadStatus===Le.LoadError&&!this.state.mapDs)return void this.setState({preMapDs:this.state.mapDs});this.setState({preMapDs:this.state.mapDs,mapLoadStatus:Le.Loading})}this.props.isDefaultMap&&(this.sceneView=null,this.analysisMapView().then((function(){e.updateMapView(e.props.baseWidgetProps.jimuMapConfig)}))),this.state.mapDs&&(this.state.mapDs.type===S.DataSourceTypes.WebMap&&(this.sceneView=null,this.analysisMapView().then((function(){e.updateMapView(e.props.baseWidgetProps.jimuMapConfig)}))),this.state.mapDs.type===S.DataSourceTypes.WebScene&&(this.mapView=null,this.analysisSceneView().then((function(){e.updateSceneView(e.props.baseWidgetProps.jimuMapConfig)}))))}},t.getDerivedStateFromProps=function(e,t){return e.dataSourceId!==t.dataSourceId?{dataSourceId:e.dataSourceId,mapLoadStatus:Le.Loading}:null},t.prototype.componentWillUnmount=function(){this.props.onViewChanged&&this.props.onViewChanged({dataSourceId:this.props.dataSourceId,viewpoint:null});var e=this.props.baseWidgetProps.id+"-"+this.props.dataSourceId;b.MapViewManager.getInstance().destroyJimuMapView(e),this.mapView&&!this.mapView.destroyed&&(this.mapView.container=null,this.mapView=null),this.sceneView&&!this.sceneView.destroyed&&(this.sceneView.container=null,this.sceneView=null),this.highLightHandles={},this.extentWatch=null},t.prototype.render=function(){var e=this,t=null;if(this.props.baseWidgetProps.useDataSources)for(var n=0;n<this.props.baseWidgetProps.useDataSources.length;n++)this.props.baseWidgetProps.useDataSources[n].dataSourceId==this.props.dataSourceId&&(t=this.props.baseWidgetProps.useDataSources[n]);return d.React.createElement("div",{className:"jimu-widget",style:{position:"relative"},ref:function(t){e.widgetContainer=t}},this.state.mapLoadStatus===Le.Loading&&d.React.createElement("div",{className:"jimu-widget widget-map-background"},d.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})),this.state.mapLoadStatus===Le.LoadError&&d.React.createElement("div",{className:"jimu-widget widget-map-background"},this.getMapSwitchForErrorMap(),d.React.createElement("div",{className:"jimu-widget d-flex justify-content-center align-items-center"},"map failed")),this.state.mapBaseJimuMapView&&this.state.widthBreakpoint&&d.React.createElement(qe,{isMobile:"xsmall"===this.state.widthBreakpoint,jimuMapView:this.state.mapBaseJimuMapView,appMode:this.props.baseWidgetProps.appMode,intl:this.props.baseWidgetProps.intl,layoutConfig:this.getLayoutConfig(),toolConfig:this.props.baseWidgetProps.jimuMapConfig.toolConifg?this.props.baseWidgetProps.jimuMapConfig.toolConifg:{},widgetHeight:"xsmall"===this.state.widthBreakpoint?null:this.state.widgetHeight}),!this.props.isDefaultMap&&d.React.createElement("div",{style:{position:"absolute",display:"none"}},d.React.createElement(d.DataSourceComponent,{useDataSource:t,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})),d.React.createElement(d.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}))},t}(d.React.PureComponent),tt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}))},ot=function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},it={firstMapVisible:[{zIndex:6,opacity:1},{zIndex:5,opacity:0}],secondMapVisible:[{zIndex:5,opacity:0},{zIndex:6,opacity:1}]},at=function(e){function t(t){var n=e.call(this,t)||this;return n.mutableStatePropsMap={},n.reInitWidgetInstance=function(e){n.state=e,n.isReIniting=!0},n.changeInitialMapDataSourceID=function(e,t){if(n.props.baseWidgetProps.useDataSources.length>1){var o=n.refs.firstMapInstance,i=n.refs.secondMapInstance;n.state.currentMapIndex?n.state.firstMapDsId&&n.state.firstMapDsId===e?(n.startChangeInitialMapAnimation(t),o.goHome(!1)):i.goHome(!1):n.state.secondMapDsId&&n.state.secondMapDsId===e?(n.startChangeInitialMapAnimation(t),i.goHome(!1)):o.goHome(!1)}},n.startChangeInitialMapAnimation=function(e){var t,o=Object.assign({},n.state),i=n.refs.firstMapInstance,a=n.refs.secondMapInstance;n.state.currentMapIndex?(o.currentMapIndex=0,o.multiMapStyle=it.firstMapVisible,(t=a&&a.getViewPoint&&a.getViewPoint())&&i&&i.setViewPoint&&i.setViewPoint(t),n.setState(o,(function(){e()}))):(o.currentMapIndex=1,o.multiMapStyle=it.secondMapVisible,(t=i&&i.getViewPoint&&i.getViewPoint())&&a&&a.setViewPoint&&a.setViewPoint(t),n.setState(o,(function(){e()})))},n.switchMap=function(){return nt(n,void 0,void 0,(function(){var e,t,n,o,i,a,s=this;return ot(this,(function(r){switch(r.label){case 0:return!this.props.baseWidgetProps.useDataSources||this.props.baseWidgetProps.useDataSources.length<2?[4,Promise.resolve()]:[3,2];case 1:return[2,r.sent()];case 2:return(e=Object.assign({},this.state)).useAnimation=!0,t=this.refs.firstMapInstance,n=this.refs.secondMapInstance,this.state.currentMapIndex?(e.currentMapIndex=0,e.multiMapStyle=it.firstMapVisible,(o=n&&n.getViewPoint&&n.getViewPoint())&&t&&t.setViewPoint&&t.setViewPoint(o)):(e.currentMapIndex=1,e.multiMapStyle=it.secondMapVisible,(o=t&&t.getViewPoint&&t.getViewPoint())&&n&&n.setViewPoint&&n.setViewPoint(o)),t&&n&&(i=t.getViewType(),a=n.getViewType(),i&&a&&i!==a&&(t.goToTilt(0),n.goToTilt(0),this.state.currentMapIndex?setTimeout((function(){t.goToTilt(45)}),300):setTimeout((function(){n.goToTilt(45)}),300))),[2,new Promise((function(t,n){s.setState(e,(function(){s.confirmJimuMapViewIsActive(),setTimeout((function(){s.setState({useAnimation:!1},(function(){return t(null)}))}),500)}))}))]}}))}))},n.handleMutableStatePropsChanged=function(e,t,n){},n.handleViewChanged=function(e){if(null===e.viewpoint){var t=n.refs.firstMapInstance,o=n.refs.secondMapInstance;return t&&t.goHome(!1),void(o&&o.goHome(!1))}var i=n.getCurrentVisibleDsId();if(i===e.dataSourceId){if(n.state.firstMapDsId&&n.state.firstMapDsId!==i)(t=n.refs.firstMapInstance)&&t.setViewPoint(e.viewpoint);if(n.state.secondMapDsId&&n.state.secondMapDsId!==i)(o=n.refs.secondMapInstance)&&o.setViewPoint(e.viewpoint);n.props.onViewPointChanged&&n.props.onViewPointChanged(e.viewpoint)}},n.handleExtentChanged=function(e,t){n.getCurrentVisibleDsId()===e&&(d.MessageManager.getInstance().publishMessage(t),n.props.onExtentChanged&&n.props.onExtentChanged(t.extent))},n.handleMapLoaded=function(e,t){n.forceUpdate()},n.handleJimuMapViewCreated=function(e){n.props.onJimuMapViewCreated&&n.props.onJimuMapViewCreated(e),n.confirmJimuMapViewIsActive()},n.confirmJimuMapViewIsActive=function(){if(n.props.isDefaultMap){var e=n.props.baseWidgetProps.id+"-null";(a=b.MapViewManager.getInstance().getJimuMapViewById(e))&&n.setActiveJimuMapView(a,!0)}else{var t=[];n.state.firstMapDsId&&t.push(n.state.firstMapDsId),n.state.secondMapDsId&&t.push(n.state.secondMapDsId);for(var o=n.getCurrentVisibleDsId(),i=0;i<t.length;i++){var a;e=n.props.baseWidgetProps.id+"-"+t[i];(a=b.MapViewManager.getInstance().getJimuMapViewById(e))&&(t[i]===o?n.setActiveJimuMapView(a,!0):n.setActiveJimuMapView(a,!1))}}},n.isShowMapSwitchBtn=function(){var e=n.refs.firstMapInstance,t=n.refs.secondMapInstance;return!(!e||!t)&&(e.getMapLoadStatus()!==Le.Loading&&t.getMapLoadStatus()!==Le.Loading||void 0)},n.getCurrentVisibleDsId=function(){return 1===n.state.multiMapStyle[0].opacity?n.state.firstMapDsId:n.state.secondMapDsId},n.handleViewGroupCreate=function(e){n.props.onViewGroupCreate&&n.props.onViewGroupCreate(e)},n.state={currentMapIndex:0,multiMapStyle:it.firstMapVisible,firstMapDsId:null,secondMapDsId:null,useAnimation:!1,useDataSources:null,currentJimuMapView:null},n.mutableStatePropsMap={},n.useMapWidgetIds=n.props.baseWidgetProps.id?Object(d.Immutable)([n.props.baseWidgetProps.id]):Object(d.Immutable)([]),n}return tt(t,e),t.prototype.componentDidMount=function(){if(!this.isReIniting&&this.props.baseWidgetProps.useDataSources){var e=this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID;e?e===(this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId)?this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId}):e===(this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId)?this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId}):this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId}):this.setState({firstMapDsId:this.props.baseWidgetProps.useDataSources[0]&&this.props.baseWidgetProps.useDataSources[0].dataSourceId,secondMapDsId:this.props.baseWidgetProps.useDataSources[1]&&this.props.baseWidgetProps.useDataSources[1].dataSourceId})}},t.getDerivedStateFromProps=function(e,n){return e.baseWidgetProps.useDataSources!==n.useDataSources?t.getChangedState(n.firstMapDsId,n.secondMapDsId,e.baseWidgetProps.useDataSources):null},t.prototype.componentDidUpdate=function(e,t,n){this.isReIniting?this.isReIniting=!1:(this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID!==e.baseWidgetProps.jimuMapConfig.initialMapDataSourceID&&this.changeInitialMapDataSourceID(this.props.baseWidgetProps.jimuMapConfig.initialMapDataSourceID,this.confirmJimuMapViewIsActive),this.props.baseWidgetProps.useDataSources!==e.baseWidgetProps.useDataSources&&this.confirmJimuMapViewIsActive())},t.prototype.setActiveJimuMapView=function(e,t){e.isActive!==t&&(t?(e.setIsActive(t),this.setState({currentJimuMapView:e}),this.props.onActiveViewChange&&this.props.onActiveViewChange(e)):e.setIsActive(t))},t.prototype.render=function(){var e=this;return d.React.createElement(E.Provider,{value:{isShowMapSwitchBtn:this.props.baseWidgetProps.useDataSources&&this.props.baseWidgetProps.useDataSources.length>1&&this.isShowMapSwitchBtn(),dataSourceIds:[this.state.firstMapDsId,this.state.secondMapDsId],activeDataSourceId:this.getCurrentVisibleDsId(),switchMap:this.switchMap,fullScreenMap:this.props.fullScreenMap,initialMapState:this.props.baseWidgetProps.jimuMapConfig&&this.props.baseWidgetProps.jimuMapConfig.initialMapState}},!this.props.isDefaultMap&&d.React.createElement("div",{className:"jimu-widget",style:{position:"relative"}},d.React.createElement("div",{className:Object(d.classNames)("jimu-widget",{"multisourcemap-item-appear":this.state.useAnimation&&this.state.multiMapStyle[0].opacity,"multisourcemap-item-disappear":this.state.useAnimation&&!this.state.multiMapStyle[0].opacity,"multisourcemap-item-appear-noanimate":this.state.multiMapStyle[0].opacity,"multisourcemap-item-disappear-noanimate":!this.state.multiMapStyle[0].opacity}),style:{position:"absolute",zIndex:this.state.multiMapStyle[0].zIndex}},this.state.firstMapDsId&&d.React.createElement(et,{ref:"firstMapInstance",onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,onExtentChanged:function(t,n){e.handleExtentChanged(t,n)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,dataSourceId:this.state.firstMapDsId})),d.React.createElement("div",{className:Object(d.classNames)("jimu-widget",{"multisourcemap-item-appear":this.state.useAnimation&&this.state.multiMapStyle[1].opacity,"multisourcemap-item-disappear":this.state.useAnimation&&!this.state.multiMapStyle[1].opacity,"multisourcemap-item-appear-noanimate":this.state.multiMapStyle[1].opacity,"multisourcemap-item-disappear-noanimate":!this.state.multiMapStyle[1].opacity}),style:{position:"absolute",zIndex:this.state.multiMapStyle[1].zIndex}},this.state.secondMapDsId&&d.React.createElement(et,{ref:"secondMapInstance",onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,onExtentChanged:function(t,n){e.handleExtentChanged(t,n)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,dataSourceId:this.state.secondMapDsId}))),this.props.isDefaultMap&&d.React.createElement("div",{className:"jimu-widget",style:{position:"relative"}},d.React.createElement("div",{className:Object(d.classNames)("jimu-widget multisourcemap-item-appear-noanimate"),style:{position:"absolute",zIndex:6}},d.React.createElement(et,{ref:"firstMapInstance",isDefaultMap:this.props.isDefaultMap,onViewChanged:this.handleViewChanged,baseWidgetProps:this.props.baseWidgetProps,onMapLoaded:this.handleMapLoaded,onMutableStatePropsChanged:this.handleMutableStatePropsChanged,dataSourceId:null,onExtentChanged:function(t,n){e.handleExtentChanged(t,n)},onJimuMapViewCreated:this.handleJimuMapViewCreated,startLoadModules:this.props.startLoadModules,defaultMapInfo:this.props.defaultMapInfo}))),d.React.createElement(b.JimuMapViewComponent,{useMapWidgetId:this.useMapWidgetIds[0],onViewGroupCreate:this.handleViewGroupCreate}))},t.getChangedState=function(e,t,n){var o={};if(n&&n[0]){for(var i=[],a=[],s=0;s<n.length;s++)e!==n[s].dataSourceId?i.push(n[s].dataSourceId):a.push(n[s].dataSourceId);a.length>0?(o.firstMapDsId=e,o.secondMapDsId=i[0]):0===a.length&&(i.includes(t)?(i.splice(i.indexOf(t),1),o.firstMapDsId=i[0],o.secondMapDsId=t):(o.firstMapDsId=i[0],o.secondMapDsId=i[1]))}else o.firstMapDsId=null,o.secondMapDsId=null;return o.firstMapDsId!==e?o.firstMapDsId?(o.multiMapStyle=it.firstMapVisible,o.currentMapIndex=0):o.secondMapDsId?(o.multiMapStyle=it.secondMapVisible,o.currentMapIndex=1):(o.multiMapStyle=it.firstMapVisible,o.currentMapIndex=0):o.secondMapDsId?o.secondMapDsId!==t&&(o.multiMapStyle=it.secondMapVisible,o.currentMapIndex=1):(o.multiMapStyle=it.firstMapVisible,o.currentMapIndex=0),o},t}(d.React.PureComponent);function st(e){return!window.jimuConfig.isInBuilder||e!==d.AppMode.Design}var rt,lt,pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ct=function(e){function t(t){var n=e.call(this,t)||this;return n.handleJimuMapViewCreated=function(e){n.props.onJimuMapViewCreated&&n.props.onJimuMapViewCreated(e)},n.state={defaultMapInfo:null},n}return pt(t,e),t.prototype.componentDidMount=function(){var e=this;b.portalUtils.getDefaultWebMap(Object(d.getAppStore)().getState().portalUrl).then((function(t){e.setState({defaultMapInfo:t})}))},t.prototype.render=function(){return d.React.createElement("div",{className:"w-100 h-100"},!this.state.defaultMapInfo&&d.React.createElement("div",{className:"widget-map jimu-widget"},d.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})),this.state.defaultMapInfo&&d.React.createElement("div",{className:Object(d.classNames)("jimu-widget",{"map-is-design-mode":!st(this.props.baseWidgetProps.appMode)})},d.React.createElement(at,{key:0,fullScreenMap:this.props.fullScreenMap,baseWidgetProps:this.props.baseWidgetProps,startLoadModules:this.props.startLoadModules,isDefaultMap:!0,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,ref:this.props.setMultiSourceMapInstance,onViewGroupCreate:this.props.onViewGroupCreate,onActiveViewChange:this.props.onActiveViewChange,defaultMapInfo:this.state.defaultMapInfo,onJimuMapViewCreated:this.handleJimuMapViewCreated})))},t}(d.React.PureComponent),ut=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}))},ht=function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},mt=function(e){function t(t){var n=e.call(this,t)||this;return n.multiSourceMapInstance=null,n.startRenderMap=function(){setTimeout((function(){n.setState({startLoadModules:!0})}),100)},n.getPlaceHolderImage=function(){var e=n.props.jimuMapConfig.placeholderImage;if(e){var t=new RegExp("^(.)+/sharing/rest/content/items/(.)+/info/(.)+"),o=d.SessionManager.getInstance().getMainSession();t.test(e)&&(e=o?e+"?token="+(null==o?void 0:o.token):e)}return e},n.fullScreenMap=function(){if(d.utils.isTouchDevice())if("fixed"===n.container.style.position)n.container.style.height=n.containerClientRect.height+"px",n.container.style.width=n.containerClientRect.width+"px",n.container.style.top=n.containerClientRect.top+"px",n.container.style.left=n.containerClientRect.left+"px",setTimeout((function(){n.container.style.transition=null,n.container.style.position="relative",n.container.style.zIndex="0",n.container.style.height="100%",n.container.style.width="100%",n.container.style.top="0",n.container.style.left="0",n.container.style.backgroundColor="none",n.parentContainer.appendChild(n.container)}),100);else{var e=n.container.getBoundingClientRect();n.containerClientRect=e,n.container.style.height=e.height+"px",n.container.style.width=e.width+"px",n.container.style.position="fixed",n.container.style.top=e.top+"px",n.container.style.left=e.left+"px",g.MobilePanelManager.getInstance().checkDomIsContained(n.container)?n.container.style.zIndex="502":n.container.style.zIndex="105",document&&document.body.appendChild(n.container),setTimeout((function(){n.container.style.transition="top 0.3s, bottom 0.3s, left 0.3s, right 0.3s, height 0.3s, width 0.3s",n.container.style.top="0px",n.container.style.left="0px",n.container.style.right="0px",n.container.style.bottom="0px",n.container.style.height=null,n.container.style.width=null,n.container.style.backgroundColor="#fff"}),100)}else{var t=n.container;if(!document)return;document.fullscreenElement===t&&document.exitFullscreen();var o=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(o)o.call(t);else if(void 0!==window.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}}},n.handleViewGroupCreate=function(e){e&&e.setMapWidgetInstance(n),n.props.onViewGroupCreate&&n.props.onViewGroupCreate(e)},n.handleJimuMapViewCreated=function(e){n.props.onJimuMapViewCreated&&n.props.onJimuMapViewCreated(e)},n.switchMap=function(){return dt(n,void 0,void 0,(function(){return ht(this,(function(e){switch(e.label){case 0:return this.multiSourceMapInstance?[4,this.multiSourceMapInstance.switchMap()]:[3,2];case 1:return[2,e.sent()];case 2:return[4,Promise.resolve()];case 3:return[2,e.sent()]}}))}))},n.setMultiSourceMapInstance=function(e){n.multiSourceMapInstance=e},n.state={},n}return ut(t,e),t.prototype.componentDidMount=function(){this.state.startLoadModules||!window.jimuConfig.isInBuilder&&this.props.jimuMapConfig.canPlaceHolder||this.startRenderMap()},t.prototype.render=function(){var e=this;return this.state.startLoadModules?this.props.useDataSources&&this.props.useDataSources[0]&&this.props.useDataSources[0].dataSourceId?d.React.createElement("div",{className:"jimu-widget",ref:function(t){e.parentContainer=t}},d.React.createElement("div",{className:Object(d.classNames)(this.props.className,"jimu-widget"),ref:function(t){e.container=t}},d.React.createElement("div",{className:Object(d.classNames)("jimu-widget",{"map-is-design-mode":!st(this.props.appMode)})},d.React.createElement(at,{fullScreenMap:this.fullScreenMap,baseWidgetProps:this.props,startLoadModules:this.state.startLoadModules,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,onActiveViewChange:this.props.onActiveViewChange,onViewGroupCreate:this.handleViewGroupCreate,ref:this.setMultiSourceMapInstance,onJimuMapViewCreated:this.handleJimuMapViewCreated})))):d.React.createElement("div",{className:"jimu-widget",ref:function(t){e.parentContainer=t}},d.React.createElement("div",{className:Object(d.classNames)(this.props.className,"jimu-widget"),ref:function(t){e.container=t}},d.React.createElement("div",{className:Object(d.classNames)("jimu-widget",{"map-is-design-mode":!st(this.props.appMode)})},d.React.createElement(ct,{fullScreenMap:this.fullScreenMap,baseWidgetProps:this.props,startLoadModules:this.state.startLoadModules,isDefaultMap:!0,setMultiSourceMapInstance:this.setMultiSourceMapInstance,onViewPointChanged:this.props.onViewPointChanged,onExtentChanged:this.props.onExtentChanged,onActiveViewChange:this.props.onActiveViewChange,onViewGroupCreate:this.handleViewGroupCreate,onJimuMapViewCreated:this.handleJimuMapViewCreated})))):d.React.createElement("div",{className:Object(d.classNames)(this.props.className,"jimu-widget")},d.React.createElement("div",{className:"widget-map jimu-widget"},d.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})))},t}(d.React.PureComponent),ft=d.ReactRedux.connect((function(e){return window.jimuConfig.isBuilder?{appMode:d.AppMode.Run}:{appMode:e&&e.appRuntimeInfo&&e.appRuntimeInfo.appMode}}))(Object(d.injectIntl)(mt)),yt=d.themeUtils.withStyles(ft,"JimuMap"),gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=function(e){function t(t){var n=e.call(this,t)||this;return n.symbolUtils=null,n.renderPreviewHTMLPromise=null,n.onHandleSymbolClick=function(){n.props.onSymbolSelected&&(n.props.isActive?n.props.onSymbolSelected(null,null):n.props.onSymbolSelected(n.props.index,n.props.symbol))},n.state={apiLoaded:!1},n}return gt(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/symbols/support/symbolUtils"]).then((function(t){e.symbolUtils=t[0],e.setState({apiLoaded:!0})}))},t.prototype.componentDidUpdate=function(e,t){var n,o;this.state.apiLoaded&&(this.renderPreviewHTMLPromise&&d.lodash.isDeepEqual(null===(n=e.symbol)||void 0===n?void 0:n.toJSON(),null===(o=this.props.symbol)||void 0===o?void 0:o.toJSON())||(this.container.innerHTML&&(this.container.innerHTML=""),this.renderPreviewHTMLPromise=this.symbolUtils.renderPreviewHTML(this.props.symbol,{node:this.container})))},t.prototype.render=function(){var e=this;return d.React.createElement("div",{className:Object(d.classNames)("w-100 h-100 justify-content-center d-flex align-items-center symbol-item",{"symbol-item-active":this.props.isActive}),ref:function(t){e.container=t},onClick:this.onHandleSymbolClick})},t}(d.React.PureComponent),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=function(e){function t(t){return e.call(this,t)||this}return bt(t,e),t.prototype.render=function(){return d.React.createElement("div",{className:"w-100 d-flex mt-2 mb-3"},d.React.createElement("div",{className:"justify-content-start d-flex align-items-center mr-4 pl-2"},this.props.intl.formatMessage({id:"drawToolPreview",defaultMessage:g.defaultMessages.drawToolPreview})),d.React.createElement("div",{className:"justify-content-center d-flex mt-1 mb-1 ml-3"},d.React.createElement("div",null,d.React.createElement(St,{symbol:this.props.symbol,isUsedForPreview:!0}))))},t}(d.React.PureComponent),vt=n(51),Mt=n(24),xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=function(e){function t(t){var n=e.call(this,t)||this;return n.onHandleChange=function(e){null==e||""===e||e<n.props.min?n.setState({value:n.props.min}):e>n.props.max?n.setState({value:n.props.max}):n.setState({value:e})},n.onTriggerChange=function(){n.props.value!==n.state.value&&n.props.onChange(n.state.value)},n.state={value:n.props.value},n}return xt(t,e),t.prototype.componentDidUpdate=function(e){this.props.value!==e.value&&this.setState({value:this.props.value})},t.prototype.render=function(){return d.React.createElement(g.NumericInput,{size:this.props.size,onPressEnter:this.onTriggerChange,onBlur:this.onTriggerChange,value:this.state.value,min:this.props.min,max:this.props.max,style:this.props.style,onChange:this.onHandleChange})},t}(d.React.PureComponent),Ot=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}))},Pt=function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},It=function(e){function t(t){var n=e.call(this,t)||this;return n.jsonUtils=null,n.Portal=null,n.portal=null,n.portalUrl=null,n.allPointSymbolList={},n.setInitialPointSymbolList=function(e){if(e){for(var t=!1,o=0;o<e.length;o++)if("Basic"===e[o].title){n.fetchPointSymbolListByItemId(e[o].id),t=!0;break}!t&&e&&e.length>0&&n.fetchPointSymbolListByItemId(e[0].id)}},n.handleSymbolSelected=function(e,t){n.setState({symbolSelectedInfo:{listItemId:n.state.currentPointSymbolListItemId,symbolIdx:e}}),n.props.onSymbolChanged(t)},n._isSymbolItemSelected=function(e){var t=n.state.currentPointSymbolListItemId===n.state.symbolSelectedInfo.listItemId,o=e===n.state.symbolSelectedInfo.symbolIdx;return t&&o},n.renderPointSymbolList=function(){var e;return n.jsonUtils?n.state.isLoading?d.React.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"}):null===(e=n.state.pointSymbolList)||void 0===e?void 0:e.map((function(e,t){var o=n.jsonUtils.fromJSON(e);return d.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},d.React.createElement(St,{index:t,symbol:o,isActive:n._isSymbolItemSelected(t),onSymbolSelected:n.handleSymbolSelected}))})):null},n.fetchSymbolSetInfos=function(){return Lt(n,void 0,void 0,(function(){var e=this;return Pt(this,(function(t){switch(t.label){case 0:return this.state.symbolSetInfos&&this.state.symbolSetInfos.length>0?[4,Promise.resolve(this.state.symbolSetInfos)]:[3,2];case 1:return[2,t.sent()];case 2:return[4,this.getSymbolSetGroupId().then((function(t){return Lt(e,void 0,void 0,(function(){var e=this;return Pt(this,(function(n){switch(n.label){case 0:return[4,this.getSymbolSetInfos(t).then((function(t){return Lt(e,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve(t)];case 1:return[2,e.sent()]}}))}))}))];case 1:return[2,n.sent()]}}))}))}))];case 3:return[2,t.sent()]}}))}))},n.getSymbolSetGroupId=function(){return Lt(n,void 0,void 0,(function(){var e=this;return Pt(this,(function(t){switch(t.label){case 0:return this.portal?[3,2]:[4,Promise.reject(null)];case 1:return[2,t.sent()];case 2:return[4,this.portal.queryGroups({query:this.portal.symbolSetsGroupQuery}).then((function(t){return Lt(e,void 0,void 0,(function(){var e;return Pt(this,(function(n){switch(n.label){case 0:return e=t.results[0],[4,Promise.resolve(e.id)];case 1:return[2,n.sent()]}}))}))}),(function(){return Lt(e,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,Promise.reject(null)];case 1:return[2,e.sent()]}}))}))}))];case 3:return[2,t.sent()]}}))}))},n.getSymbolSetInfos=function(e){return Lt(n,void 0,void 0,(function(){var t,n,o=this;return Pt(this,(function(i){switch(i.label){case 0:return t="group:"+e+' AND type:"Symbol Set"',n=[],this.portal?[3,2]:[4,Promise.resolve(null)];case 1:return[2,i.sent()];case 2:return t+=' AND (typekeywords:"by value" AND typekeywords:"marker")',[4,this.portal.queryItems({query:t,num:20,sortField:"title"}).then((function(e){return Lt(o,void 0,void 0,(function(){var t,o,i,a,s,r;return Pt(this,(function(l){switch(l.label){case 0:if(!(t=e.results))return[3,2];for(s=0;s<t.length;s++)r=t[s],(o=r.typeKeywords.join(" ")).indexOf("marker")>-1&&(i=r.title,a={name:i,id:r.id,title:r.title,keywords:o,dataUrl:this.getItemUrl(this.portalUrl,r.id)},o.indexOf("default")>-1?(a.defaultType=!0,n.unshift(a)):n.push(a));return[4,Promise.resolve(n)];case 1:return[2,l.sent()];case 2:return[4,Promise.reject(null)];case 3:return[2,l.sent()]}}))}))}))];case 3:return[2,i.sent()]}}))}))},n.onSelectChanged=function(e){var t=e.target.value;n.fetchPointSymbolListByItemId(t)},n.fetchPointSymbolListByItemId=function(e){n.allPointSymbolList[e]?n.setState({pointSymbolList:n.allPointSymbolList[e],currentPointSymbolListItemId:e}):(n.setState({pointSymbolList:[],currentPointSymbolListItemId:e}),n.requestPointSymJson(e))},n.requestPointSymJson=function(e){n.setState({isLoading:!0});var t=n.getItemUrl(n.portalUrl,e);d.esri.restRequest.request(t).then((function(t){n.allPointSymbolList[e]=t,n.setState({pointSymbolList:t,isLoading:!1})}),(function(e){console.error(e),n.setState({isLoading:!1})}))},n.getItemUrl=function(e,t){var o="",i=n.getBaseItemUrl(e);return i&&t&&(o=i+"/"+t+"/data"),o},n.getBaseItemUrl=function(e){var t="",o=n.portalUrl;return o&&(t=o+"/sharing/rest/content/items"),t},n.getPointSymbolParamsSetting=function(){return n.props.symbol?"simple-marker"===n.props.symbol.type?n.getPointSymbolParamsSettingForSimpleMarker():"picture-marker"===n.props.symbol.type?n.getPointSymbolParamsSettingForPictureMarker():null:null},n.updateSymbolSize=function(e){var t=n.props.symbol.clone();"simple-marker"===t.type&&(t.size=e),"picture-marker"===t.type&&(t.width=e,t.height=e),n.props.onSymbolChanged(t)},n.updateSymbolFillColor=function(e){var t=n.props.symbol.clone();t.color=e,n.props.onSymbolChanged(t)},n.updateSymbolOutLineColor=function(e){var t=n.props.symbol.clone();t.outline.color=e,n.props.onSymbolChanged(t)},n.updateSymbolOutLineWeight=function(e){var t=n.props.symbol.clone();t.outline.width=e,n.props.onSymbolChanged(t)},n.updateSymbolOpacity=function(e){var t=n.props.symbol.clone();t.color.a=e,n.props.onSymbolChanged(t)},n.getOpacityInSymbol=function(){var e=n.props.symbol.clone().color.a;return Math.round(100*e)/100},n.getPointSymbolParamsSettingForSimpleMarker=function(){var e=n.props.symbol,t=e.outline,o=n.convertSymbolColorToColorPickerValue(t.color),i=t.width,a=n.getOpacityInSymbol();return d.React.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between pl-2 pr-2"},d.React.createElement("div",null,d.React.createElement(jt,{size:"sm",value:e.size,min:1,max:50,style:{width:60},onChange:n.updateSymbolSize})),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement("div",null,d.React.createElement(Mt.ColorPicker,{color:n.convertSymbolColorToColorPickerValue(e.color),onChange:n.updateSymbolFillColor})),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement("div",{style:{position:"relative"}},d.React.createElement(Mt.ColorPicker,{color:o,onChange:n.updateSymbolOutLineColor}),d.React.createElement("div",{className:"jimu-draw-colorpicker-hole"})),d.React.createElement("div",null,d.React.createElement(jt,{size:"sm",value:i,min:1,max:20,style:{width:60},onChange:n.updateSymbolOutLineWeight}),d.React.createElement("div",null)),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement(g.Slider,{title:n.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:g.defaultMessages.drawToolOpacity})+": "+100*a+"%",value:a,style:{width:"60px"},min:0,max:1,step:.1,onChange:function(e){n.updateSymbolOpacity(e.currentTarget.value)}}),d.React.createElement(vt.InputUnit,{value:100*a+"%",style:{width:"70px"},onChange:function(e){n.onOpacityInputChanged(e)}}))},n.onOpacityInputChanged=function(e){var t=n.props.symbol.clone();t.color.a=e.distance/100,n.props.onSymbolChanged(t)},n.getPointSymbolParamsSettingForPictureMarker=function(){var e=n.props.symbol;return d.React.createElement("div",{className:"w-100"},d.React.createElement("div",{className:"w-100 d-flex align-items-center pl-2"},d.React.createElement(jt,{value:e.width,min:1,max:50,style:{width:80},onChange:n.updateSymbolSize})))},n.convertSymbolColorToColorPickerValue=function(e){if(e){var t=e.toRgba();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"}return null},n.state={apiLoaded:!1,symbolSetInfos:[],pointSymbolList:[],currentPointSymbolListItemId:null,symbolSelectedInfo:{listItemId:null,symbolIdx:null},isLoading:!0},n.portalUrl=d.portalUrlUtils.getHostUrlByOrgUrl(Object(d.getAppStore)().getState().portalUrl),n}return Ot(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils","esri/portal/Portal"]).then((function(t){e.jsonUtils=t[0],e.Portal=t[1],e.portal=new e.Portal({url:e.portalUrl}),e.portal.load().then((function(){e.fetchSymbolSetInfos().then((function(t){e.setState({symbolSetInfos:t},(function(){e.setInitialPointSymbolList(e.state.symbolSetInfos)}))}))})),e.setState({apiLoaded:!0})}))},t.prototype.render=function(){return d.React.createElement("div",null,d.React.createElement("div",{className:"d-flex justify-content-between w-100 align-items-center pl-2 pr-2 mb-3"},d.React.createElement("div",{className:"mr-4"},this.props.intl.formatMessage({id:"drawToolSource",defaultMessage:g.defaultMessages.drawToolSource})),d.React.createElement(g.Select,{className:"ml-4",onChange:this.onSelectChanged,value:this.state.currentPointSymbolListItemId},this.state.symbolSetInfos.map((function(e,t){return d.React.createElement("option",{key:t,value:e.id},e.title)})))),d.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPointSymbolList()),d.React.createElement("div",{className:"w-100 pb-2"},this.getPointSymbolParamsSetting()))},t}(d.React.PureComponent),Ct=[{tags:["solid"],title:"Blue Thin",style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},{tags:["solid"],title:"Red Thin",style:"esriSLSSolid",color:[192,80,77,255],width:3,name:"Red 1",type:"esriSLS"},{tags:["solid"],title:"Olive Green Thin",style:"esriSLSSolid",color:[155,187,89,255],width:3,name:"Olive Green 1",type:"esriSLS"},{tags:["solid"],title:"Purple Thin",style:"esriSLSSolid",color:[128,100,162,255],width:3,name:"Purple 1",type:"esriSLS"},{tags:["solid","blue","river"],title:"Aqua Thin",style:"esriSLSSolid",color:[75,172,198,255],width:3,name:"Aqua 1",type:"esriSLS"},{tags:["solid"],title:"Orange Thin",style:"esriSLSSolid",color:[247,150,70,255],width:3,name:"Orange 1",type:"esriSLS"},{tags:["solid"],title:"Blue",style:"esriSLSSolid",color:[79,129,189,255],width:5,name:"Blue 2",type:"esriSLS"},{tags:["solid"],title:"Red",style:"esriSLSSolid",color:[192,80,77,255],width:5,name:"Red 2",type:"esriSLS"},{tags:["solid"],title:"Olive Green",style:"esriSLSSolid",color:[155,187,89,255],width:5,name:"Olive Green 2",type:"esriSLS"},{tags:["solid"],title:"Purple",style:"esriSLSSolid",color:[128,100,162,255],width:5,name:"Purple 2",type:"esriSLS"},{tags:["solid","blue"],title:"Aqua",style:"esriSLSSolid",color:[75,172,198,255],width:5,name:"Aqua 2",type:"esriSLS"},{tags:["solid"],title:"Orange",style:"esriSLSSolid",color:[247,150,70,255],width:5,name:"Orange 2",type:"esriSLS"},{tags:["solid"],title:"Blue Thick",style:"esriSLSSolid",color:[79,129,189,255],width:7,name:"Blue 3",type:"esriSLS"},{tags:["solid","interstate","highway"],title:"Red Thick",style:"esriSLSSolid",color:[192,80,77,255],width:7,name:"Red 3",type:"esriSLS"},{tags:["solid"],title:"Olive Green Thick",style:"esriSLSSolid",color:[155,187,89,255],width:7,name:"Olive Green 3",type:"esriSLS"},{tags:["solid"],title:"Purple Thick",style:"esriSLSSolid",color:[128,100,162,255],width:7,name:"Purple 3",type:"esriSLS"},{tags:["solid","blue"],title:"Aqua Thick",style:"esriSLSSolid",color:[75,172,198,255],width:7,name:"Aqua 3",type:"esriSLS"},{tags:["solid"],title:"Orange Thick",style:"esriSLSSolid",color:[247,150,70,255],width:7,name:"Orange 3",type:"esriSLS"},{tags:["dashed"],title:"Blue Dash",style:"esriSLSDash",color:[79,129,189,255],width:3,name:"ColoredLineBlue4",type:"esriSLS"},{tags:["dashed"],title:"Red Dash",style:"esriSLSDash",color:[192,80,77,255],width:3,name:"ColoredLineRed4",type:"esriSLS"},{tags:["dashed"],title:"Olive Green Dash",style:"esriSLSDash",color:[155,187,89,255],width:3,name:"ColoredLineOliveGreen4",type:"esriSLS"},{tags:["dashed"],title:"Purple Dash ",style:"esriSLSDash",color:[128,100,162,255],width:3,name:"ColoredLinePurple4",type:"esriSLS"},{tags:["blue","dashed"],title:"Aqua Dash",style:"esriSLSDash",color:[75,172,198,255],width:3,name:"ColoredLineAqua4",type:"esriSLS"},{tags:["dashed"],title:"Orange Dash",style:"esriSLSDash",color:[247,150,70,255],width:3,name:"ColoredLineOrange4",type:"esriSLS"},{tags:["dotted"],title:"Blue Dot",style:"esriSLSDot",color:[79,129,189,255],width:3,name:"Blue Dot",type:"esriSLS"},{tags:["dotted"],title:"Red Dot",style:"esriSLSDot",color:[192,80,77,255],width:3,name:"Red Dot",type:"esriSLS"},{tags:["dotted"],title:"Olive Green Dot",style:"esriSLSDot",color:[155,187,89,255],width:3,name:"Olive Green Dot",type:"esriSLS"},{tags:["dotted"],title:"Purple Dot ",style:"esriSLSDot",color:[128,100,162,255],width:3,name:"Purple Dot",type:"esriSLS"},{tags:["blue","dotted"],title:"Aqua Dot",style:"esriSLSDot",color:[75,172,198,255],width:3,name:"Aqua Dot",type:"esriSLS"},{tags:["dotted"],title:"Orange Dot",style:"esriSLSDot",color:[247,150,70,255],width:3,name:"Orange Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Blue Dash Dot",style:"esriSLSDashDot",color:[79,129,189,255],width:3,name:"Blue Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Red Dash Dot",style:"esriSLSDashDot",color:[192,80,77,255],width:3,name:"Red Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Olive Green Dash Dot",style:"esriSLSDashDot",color:[155,187,89,255],width:3,name:"Olive Green Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Purple Dash Dot ",style:"esriSLSDashDot",color:[128,100,162,255],width:3,name:"Purple Dash Dot",type:"esriSLS"},{tags:["blue","dashed","dotted"],title:"Aqua Dash Dot",style:"esriSLSDashDot",color:[75,172,198,255],width:3,name:"Aqua Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Orange Dash Dot",style:"esriSLSDashDot",color:[247,150,70,255],width:3,name:"Orange Dash Dot",type:"esriSLS"},{tags:["dashed","dotted"],title:"Blue Dash Dot Dot",style:"esriSLSDashDotDot",color:[79,129,189,255],width:3,name:"ColoredLineBlue5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Red Dash Dot Dot",style:"esriSLSDashDotDot",color:[192,80,77,255],width:3,name:"ColoredLineRed5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Olive Green Dash Dot Dot",style:"esriSLSDashDotDot",color:[155,187,89,255],width:3,name:"ColoredLineOliveGreen5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Purple Dash Dot Dot ",style:"esriSLSDashDotDot",color:[128,100,162,255],width:3,name:"ColoredLinePurple5",type:"esriSLS"},{tags:["blue"],title:"Aqua Dash Dot Dot",style:"esriSLSDashDotDot",color:[75,172,198,255],width:3,name:"ColoredLineAqua5",type:"esriSLS"},{tags:["dashed","dotted"],title:"Orange Dash Dot Dot",style:"esriSLSDashDotDot",color:[247,150,70,255],width:3,name:"ColoredLineOrange5",type:"esriSLS"},{tags:["solid"],title:"Black",style:"esriSLSSolid",color:[0,0,0,255],width:3,name:"Gray 1",type:"esriSLS"},{tags:["solid"],title:"Gray 80",style:"esriSLSSolid",color:[51,51,51,255],width:3,name:"Gray 2",type:"esriSLS"},{tags:["solid"],title:"Gray 60",style:"esriSLSSolid",color:[119,119,119,255],width:3,name:"Gray 3",type:"esriSLS"},{tags:["solid"],title:"Gray 40",style:"esriSLSSolid",color:[187,187,187,255],width:3,name:"Gray 4",type:"esriSLS"},{tags:["solid"],title:"Gray 20",style:"esriSLSSolid",color:[221,221,221,255],width:3,name:"Gray 5",type:"esriSLS"},{tags:["solid"],title:"White",style:"esriSLSSolid",color:[255,255,255,255],width:3,name:"Gray 6",type:"esriSLS"},{tags:["green","solid"],title:"Lime",style:"esriSLSSolid",color:[0,255,0,255],width:5,name:"Lime",type:"esriSLS"},{tags:["solid"],title:"Brown",style:"esriSLSSolid",color:[165,42,42,255],width:5,name:"Brown",type:"esriSLS"},{tags:["solid"],title:"Green",style:"esriSLSSolid",color:[0,128,0,255],width:5,name:"Green",type:"esriSLS"},{tags:["solid"],title:"Yellow",style:"esriSLSSolid",color:[255,255,0,255],width:5,name:"Yellow",type:"esriSLS"},{tags:["blue","solid"],title:"Navy",style:"esriSLSSolid",color:[0,0,128,255],width:5,name:"Navy",type:"esriSLS"}],Vt=[{intl:"Dash",label:"dash",value:"dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"DashDot",label:"dash dot",value:"dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"Dot",label:"dot",value:"dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDash",label:"long dash",value:"long-dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDashDot",label:"long dash dot",value:"long-dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"LongDashDotDot",label:"long dash dot dot",value:"long-dash-dot-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="18.666666666666664,10.666666666666666,1,10.666666666666666,1,10.666666666666666" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDash",label:"short dash",value:"short-dash",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDashDot",label:"short dash dot",value:"short-dash-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333,1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDashDotDot",label:"short dash dot dot",value:"short-dash-dot-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="8,5.333333333333333,1,5.333333333333333,1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"ShortDot",label:"short dot",value:"short-dot",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="1,5.333333333333333" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'},{intl:"Solid",label:"solid",value:"solid",img:'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="3"><defs></defs><g transform="matrix(0.9375,0,0,0.9375,1.25,-0.9999999403953552)"><path fill="none" fill-rule="evenodd" stroke="rgba(255, 255, 255, 1)" stroke-width="2.6666666666666665" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="none" stroke-miterlimit="4" d="M 0 2.6666666666666665 L 40 2.6666666666666665"></path></g></svg>'}],Nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dt=function(e){function t(t){var n=e.call(this,t)||this;return n.jsonUtils=null,n.handleSymbolSelected=function(e,t){n.setState({currentIndex:e}),n.props.onSymbolChanged(t)},n.onSelectChanged=function(e){var t=e.target.value,o=n.props.symbol.clone();o.style=t,n.props.onSymbolChanged(o)},n.updateSymbolLineWidth=function(e){var t=n.props.symbol.clone();t.width=e,n.props.onSymbolChanged(t)},n.getOpacityInSymbol=function(){var e=n.props.symbol.clone().color.a;return Math.round(100*e)/100},n.updateSymbolOpacity=function(e){var t=n.props.symbol.clone();t.color.a=e,n.props.onSymbolChanged(t)},n.convertSymbolColorToColorPickerValue=function(e){if(e){var t=e.toRgba();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"}return null},n.updateSymbolFillColor=function(e){var t=n.props.symbol.clone();t.color=e,n.props.onSymbolChanged(t)},n.renderPolylineSymbolList=function(){return n.jsonUtils?Ct.map((function(e,t){var o=n.jsonUtils.fromJSON(e);return d.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},d.React.createElement(St,{index:t,key:t,symbol:o,isActive:n.state.currentIndex===t,onSymbolSelected:n.handleSymbolSelected}))})):null},n.getPolylineSymbolParamsSetting=function(){if(n.props.symbol){var e=n.props.symbol.clone(),t=e.color,o=e.style,i=e.width,a=n.getOpacityInSymbol();return d.React.createElement("div",{className:"w-100 d-flex align-items-center justify-content-between pl-2 pr-2 pb-2"},d.React.createElement(jt,{size:"sm",value:i,min:1,max:20,style:{width:80},onChange:n.updateSymbolLineWidth}),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement(g.Select,{size:"sm",value:o,onChange:n.onSelectChanged,style:{width:"80px"}},Vt.map((function(e,t){return d.React.createElement(g.Option,{key:t,title:n.props.intl.formatMessage({id:"drawTool"+e.intl,defaultMessage:g.defaultMessages["drawTool"+e.intl]}),value:e.value,label:e.label},d.React.createElement("img",{className:"mt-2 mb-2",style:{display:"block",width:"30px"},src:"data:image/svg+xml;utf8,"+e.img}))}))),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement(Mt.ColorPicker,{color:n.convertSymbolColorToColorPickerValue(t),onChange:n.updateSymbolFillColor}),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement(g.Slider,{title:n.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:g.defaultMessages.drawToolOpacity})+": "+100*a+"%",value:a,min:0,style:{width:"60px"},max:1,step:.1,onChange:function(e){n.updateSymbolOpacity(e.currentTarget.value)}}),d.React.createElement(vt.InputUnit,{value:100*a+"%",style:{width:"70px"},onChange:function(e){n.onOpacityInputChanged(e)}}))}return null},n.onOpacityInputChanged=function(e){var t=n.props.symbol.clone();t.color.a=e.distance/100,n.props.onSymbolChanged(t)},n.state={apiLoaded:!1,currentIndex:null},n}return Nt(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then((function(t){e.jsonUtils=t[0],e.setState({apiLoaded:!0})}))},t.prototype.render=function(){return d.React.createElement("div",null,d.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPolylineSymbolList()),d.React.createElement("div",{className:"w-100"},this.getPolylineSymbolParamsSetting()))},t}(d.React.PureComponent),Tt=[{tags:["opaque"],title:"Blue",style:"esriSFSSolid",color:[79,129,189,255],name:"Blue 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Red",style:"esriSFSSolid",color:[192,80,77,255],name:"Red 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[160,63,60,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Olive Green",style:"esriSFSSolid",color:[155,187,89,255],name:"Olive Green 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[115,140,61,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Purple",style:"esriSFSSolid",color:[128,100,162,255],name:"Purple 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[140,125,158,255],width:1.5,type:"esriSLS"}},{tags:["opaque","blue"],title:"Aqua",style:"esriSFSSolid",color:[75,172,198,255],name:"Aqua 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[63,131,150,255],width:1.5,type:"esriSLS"}},{tags:["opaque"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,255],name:"Orange 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[184,115,59,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Blue",style:"esriSFSSolid",color:[79,129,189,128],name:"Blue 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Red",style:"esriSFSSolid",color:[192,80,77,128],name:"Red 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[160,63,60,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Olive Green",style:"esriSFSSolid",color:[155,187,89,128],name:"Olive Green 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[115,140,61,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Purple",style:"esriSFSSolid",color:[128,100,162,128],name:"Purple 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[140,125,158,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque","blue"],title:"Aqua",style:"esriSFSSolid",color:[75,172,198,128],name:"Aqua 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[63,131,150,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,128],name:"Orange 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[184,115,59,255],width:1.5,type:"esriSLS"}},{tags:["semi-opaque"],title:"Blue",style:"esriSFSSolid",color:[220,232,255,255],name:"Blue 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[108,151,203,255],width:1.5,type:"esriSLS"}},{tags:[""],title:"Red",style:"esriSFSSolid",color:[255,199,198,255],name:"Red 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[207,101,99,255],width:1.5,type:"esriSLS"}},{title:"Olive Green",style:"esriSFSSolid",color:[235,254,208,255],name:"Olive Green 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[166,191,116,255],width:1.5,type:"esriSLS"}},{title:"Purple",style:"esriSFSSolid",color:[224,212,242,255],name:"Purple 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[145,122,171,255],width:1.5,type:"esriSLS"}},{tags:["blue"],title:"Aqua",style:"esriSFSSolid",color:[194,240,255,255],name:"Aqua 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[101,179,200,255],width:1.5,type:"esriSLS"}},{title:"Orange",style:"esriSFSSolid",color:[255,214,180,255],name:"Orange 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[251,164,93,255],width:1.5,type:"esriSLS"}},{tags:["white","outline"],title:"Blue",style:"esriSFSSolid",color:[108,151,203,255],name:"Blue 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Red",style:"esriSFSSolid",color:[207,101,99,255],name:"Red 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Olive Green",style:"esriSFSSolid",color:[166,191,116,255],name:"Olive Green 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline","blue"],title:"Aqua",style:"esriSFSSolid",color:[101,179,200,255],name:"Purple 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Red",style:"esriSFSSolid",color:[246,91,60,255],name:"Aqua 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["white","outline"],title:"Orange",style:"esriSFSSolid",color:[251,164,93,255],name:"Orange 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[255,255,255,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Blue",style:"esriSFSSolid",color:[108,151,203,0],name:"Blue 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[108,151,203,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Red",style:"esriSFSSolid",color:[207,101,99,0],name:"Red 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[207,101,99,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Olive Green",style:"esriSFSSolid",color:[166,191,116,0],name:"Olive Green 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[166,191,116,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Aqua",style:"esriSFSSolid",color:[101,179,200,0],name:"Purple 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[101,179,200,255],width:2,type:"esriSLS"}},{tags:["hollow","blue"],title:"Red",style:"esriSFSSolid",color:[246,91,60,0],name:"Aqua 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[246,91,60,255],width:2,type:"esriSLS"}},{tags:["hollow"],title:"Orange",style:"esriSFSSolid",color:[251,164,93,0],name:"Orange 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[251,164,93,255],width:2,type:"esriSLS"}},{tags:["no outline"],title:"Blue",style:"esriSFSSolid",color:[58,120,192,255],name:"Blue 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Red",style:"esriSFSSolid",color:[184,55,52,255],name:"Red 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Olive Green",style:"esriSFSSolid",color:[142,179,65,255],name:"Olive Green 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Purple",style:"esriSFSSolid",color:[111,79,150,255],name:"Purple 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline","blue"],title:"Aqua",style:"esriSFSSolid",color:[47,157,187,255],name:"Aqua 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{tags:["no outline"],title:"Orange",style:"esriSFSSolid",color:[239,132,38,255],name:"Orange 4",type:"esriSFS",outline:{style:"esriSLSNull",width:0,type:"esriSLS"}},{title:"Black",style:"esriSFSSolid",color:[0,0,0,255],name:"Gray 7",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 80",style:"esriSFSSolid",color:[51,51,51,255],name:"Gray 8",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 60",style:"esriSFSSolid",color:[119,119,119,255],name:"Gray 9",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 40",style:"esriSFSSolid",color:[187,187,187,255],name:"Gray 10",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray 20",style:"esriSFSSolid",color:[221,221,221,255],name:"Gray 11",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"White",style:"esriSFSSolid",color:[255,255,255,255],name:"Gray 12",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[1,1,1,153],name:"Gray 1",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[51,51,51,128],name:"Gray 2",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[119,119,119,128],name:"Gray 3",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[187,187,187,128],name:"Gray 4",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[221,221,221,128],name:"Gray 5",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{title:"Gray (opacity 50)",style:"esriSFSSolid",color:[221,221,221,128],name:"Gray 6",type:"esriSFS",outline:{style:"esriSLSSolid",color:[0,0,0,255],width:1.5,type:"esriSLS"}},{tags:["green","blue","outline"],title:"Lime",style:"esriSFSSolid",color:[0,255,0,128],name:"Lime",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Brown",style:"esriSFSSolid",color:[165,42,42,128],name:"Brown",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Green",style:"esriSFSSolid",color:[0,128,0,128],name:"Green",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Yellow",style:"esriSFSSolid",color:[255,255,0,128],name:"Yellow",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}},{tags:["blue","outline"],title:"Navy",style:"esriSFSSolid",color:[0,0,128,128],name:"Navy",type:"esriSFS",outline:{style:"esriSLSSolid",color:[71,105,146,255],width:1.5,type:"esriSLS"}}],kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.jsonUtils=null,n.handleSymbolSelected=function(e,t){n.setState({currentIndex:e}),n.props.onSymbolChanged(t)},n.renderPolygonSymbolList=function(){return n.jsonUtils?Tt.map((function(e,t){var o=n.jsonUtils.fromJSON(e);return d.React.createElement("div",{key:t,className:"mr-2 mt-2",style:{width:"35px",height:"35px",float:"left"}},d.React.createElement(St,{index:t,key:t,symbol:o,isActive:n.state.currentIndex===t,onSymbolSelected:n.handleSymbolSelected}))})):null},n.getPolygonSymbolParamsSetting=function(){if(n.props.symbol){var e=n.props.symbol.clone(),t=e.color,o=e.outline,i=n.convertSymbolColorToColorPickerValue(o.color),a=o.width,s=n.getOpacityInSymbol();return d.React.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center pl-2 pr-2 pb-2"},d.React.createElement("div",null,d.React.createElement(Mt.ColorPicker,{color:n.convertSymbolColorToColorPickerValue(t),onChange:n.updateSymbolFillColor})),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement("div",{style:{position:"relative"}},d.React.createElement(Mt.ColorPicker,{color:i,onChange:n.updateSymbolOutLineColor}),d.React.createElement("div",{className:"jimu-draw-colorpicker-hole"})),d.React.createElement(jt,{size:"sm",value:a,min:1,max:20,style:{width:80},onChange:n.updateSymbolOutLineWeight}),d.React.createElement("div",{className:"jimu-draw-symbol-divide-line"}),d.React.createElement(g.Slider,{title:n.props.intl.formatMessage({id:"drawToolOpacity",defaultMessage:g.defaultMessages.drawToolOpacity})+": "+100*s+"%",value:s,min:0,style:{width:"80px"},max:1,step:.1,onChange:function(e){n.updateSymbolOpacity(e.currentTarget.value)}}),d.React.createElement(vt.InputUnit,{value:100*s+"%",style:{width:"70px"},onChange:function(e){n.onOpacityInputChanged(e)}}))}return null},n.onOpacityInputChanged=function(e){var t=n.props.symbol.clone();t.color.a=e.distance/100,n.props.onSymbolChanged(t)},n.updateSymbolOutLineWeight=function(e){var t=n.props.symbol.clone();t.outline.width=e,n.props.onSymbolChanged(t)},n.updateSymbolOutLineColor=function(e){var t=n.props.symbol.clone();t.outline.color=e,n.props.onSymbolChanged(t)},n.convertSymbolColorToColorPickerValue=function(e){if(e){var t=e.toRgba();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"}return null},n.updateSymbolFillColor=function(e){var t=n.props.symbol.clone();t.color=e,n.props.onSymbolChanged(t)},n.getOpacityInSymbol=function(){var e=n.props.symbol.clone().color.a;return Math.round(100*e)/100},n.updateSymbolOpacity=function(e){var t=n.props.symbol.clone();t.color.a=e,n.props.onSymbolChanged(t)},n.state={apiLoaded:!1,currentIndex:null},n}return kt(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then((function(t){e.jsonUtils=t[0],e.setState({apiLoaded:!0})}))},t.prototype.render=function(){return d.React.createElement("div",null,d.React.createElement("div",{className:"m-2 p-1 jimu-draw-symbol-list"},this.renderPolygonSymbolList()),d.React.createElement("div",{className:"w-100"},this.getPolygonSymbolParamsSetting()))},t}(d.React.PureComponent),Rt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},At=function(e){function t(t){var n=e.call(this,t)||this;return n.checkSymbolType=function(e){return e?"simple-line"===e.type||"line-3d"===e.type?"polyline":"simple-fill"===e.type||"polygon-3d"===e.type?"polygon":"point":""},n.handlePointSymbolChanged=function(e){n.props.onPointSymbolChanged&&n.props.onPointSymbolChanged(e)},n.handlePolylineSymbolChanged=function(e){n.props.onPolylineSymbolChanged&&n.props.onPolylineSymbolChanged(e)},n.handlePolygonSymbolChanged=function(e){n.props.onPolygonSymbolChanged&&n.props.onPolygonSymbolChanged(e)},n}return Rt(t,e),t.prototype._cssStyle=function(){var e=this.props.theme;return Object(d.css)(rt||(rt=_t(["\n      .jimu-draw-symbol-divide-line {\n        border-right: 1px solid ",";\n        height: 26px;\n      }\n\n      .jimu-draw-symbol-list {\n        background-color: ",";\n        max-height: 150px;\n        overflow-y: auto;\n      }\n\n      .jimu-draw-colorpicker-hole {\n        background-color: ",";\n        position: absolute;\n        top: 6px;\n        width: 16px;\n        height: 14px;\n        left: 7px;\n        pointer-events: none;\n      }\n\n      .symbol-item {\n        cursor: pointer;\n\n        &:hover {\n          background-color: ",";\n        }\n      }\n\n      .symbol-item-active {\n        border: 1px solid ",";\n      }\n    "],["\n      .jimu-draw-symbol-divide-line {\n        border-right: 1px solid ",";\n        height: 26px;\n      }\n\n      .jimu-draw-symbol-list {\n        background-color: ",";\n        max-height: 150px;\n        overflow-y: auto;\n      }\n\n      .jimu-draw-colorpicker-hole {\n        background-color: ",";\n        position: absolute;\n        top: 6px;\n        width: 16px;\n        height: 14px;\n        left: 7px;\n        pointer-events: none;\n      }\n\n      .symbol-item {\n        cursor: pointer;\n\n        &:hover {\n          background-color: ",";\n        }\n      }\n\n      .symbol-item-active {\n        border: 1px solid ",";\n      }\n    "])),e.colors.palette.light[500],e.colors.palette.light[200],e.colors.white,e.colors.secondary,e.colors.primary)},t.prototype.render=function(){return Object(d.jsx)("div",{className:Object(d.classNames)(this.props.className,"jimu-symbol-selector"),style:{display:this.props.symbol?"block":"none"},css:this._cssStyle()},this.props.symbol&&Object(d.jsx)(wt,{symbol:this.props.symbol,intl:this.props.intl}),Object(d.jsx)("div",{style:{display:"point"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(d.jsx)(It,{onSymbolChanged:this.handlePointSymbolChanged,intl:this.props.intl,symbol:"point"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})),Object(d.jsx)("div",{style:{display:"polyline"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(d.jsx)(Dt,{onSymbolChanged:this.handlePolylineSymbolChanged,intl:this.props.intl,symbol:"polyline"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})),Object(d.jsx)("div",{style:{display:"polygon"===this.checkSymbolType(this.props.symbol)?"block":"none"}},Object(d.jsx)(Et,{onSymbolChanged:this.handlePolygonSymbolChanged,intl:this.props.intl,symbol:"polygon"===this.checkSymbolType(this.props.symbol)?this.props.symbol:null})))},t}(d.React.PureComponent),Bt=d.themeUtils.withTheme(At),Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ht=function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function r(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}l((o=o.apply(e,t||[])).next())}))},Wt=function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},Ut=n(58),Ft=n(86),Jt={angle:0,color:[255,255,255,255],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},size:6,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},qt={color:[130,130,130,255],style:"esriSLSSolid",type:"esriSLS",width:2},Yt={color:[150,150,150,51],outline:{color:[50,50,50,255],style:"esriSLSSolid",type:"esriSLS",width:2},style:"esriSFSSolid",type:"esriSFS"},Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.resizeObserver=null,n.SketchClass=null,n.SketchViewModelClass=null,n.GraphicsLayer=null,n.jsonUtils=null,n.activeTools=["point","polyline","polygon","rectangle","circle"],n.currentActiveTool=null,n.pointSymbol=null,n.polygonSymbol=null,n.polylineSymbol=null,n.onGraphicEdited=null,n.isSymbolChanging=!1,n._getDefaultVisibleElements=function(e){var t=null!=e?e:null;return t=t?Object.assign(t,{settingsMenu:!1}):{settingsMenu:!1}},n.insertCustomDom=function(){var e;n.container&&n.container.children[0]&&(n.container.children[0].contains(n.btnContainer)&&n.container.children[0].removeChild(n.btnContainer),n.btnContainer.style.display="block",n.container.children[0].appendChild(n.btnContainer),n.container.children[0].contains(n.collapseBtnContainer)&&n.container.children[0].removeChild(n.collapseBtnContainer),null!==(e=n.props.disableSymbolSelector)&&void 0!==e&&e||(n.collapseBtnContainer.style.display="block"),n.container.children[0].appendChild(n.collapseBtnContainer))},n.complete=function(){return Ht(n,void 0,void 0,(function(){var e=this;return Wt(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e.sketch&&["move","transform","reshape"].includes(e.sketch.activeTool)?(e.sketch.complete(),setTimeout((function(){t()}),500)):t()}))];case 1:return[2,t.sent()]}}))}))},n.deactivate=function(){n.sketch&&n.sketch.viewModel.cancel()},n.clearGraphics=function(){n.layer&&n.layer.removeAll(),n.props.onDrawToolCleared&&n.props.onDrawToolCleared()},n.getCurrentSymbol=function(e){return["polyline"].includes(e)?(n.polylineSymbol||(n.polylineSymbol=n.jsonUtils.fromJSON(qt)),n.polylineSymbol):["polygon","rectangle","circle"].includes(e)?(n.polygonSymbol||(n.polygonSymbol=n.jsonUtils.fromJSON(Yt)),n.polygonSymbol):(n.pointSymbol||(n.pointSymbol=n.jsonUtils.fromJSON(Jt)),n.pointSymbol)},n.handlePointSymbolChanged=function(e){var t=e||n.jsonUtils.fromJSON(Jt);n.pointSymbol=t,n.setState({currentSymbol:t},(function(){n.isSymbolChanging=!0,n.sketch.viewModel.pointSymbol=t}))},n.handlePolylineSymbolChanged=function(e){var t=e||n.jsonUtils.fromJSON(qt);n.polylineSymbol=t,n.setState({currentSymbol:t},(function(){n.isSymbolChanging=!0,n.sketch.viewModel.polylineSymbol=t}))},n.handlePolygonSymbolChanged=function(e){var t=e||n.jsonUtils.fromJSON(Yt);n.polygonSymbol=t,n.setState({currentSymbol:t},(function(){n.isSymbolChanging=!0,n.sketch.viewModel.polygonSymbol=t}))},n.onDrawToolContainerCreated=function(e){e&&(n.container=e,n.resizeObserver=new d.ResizeObserver((function(e,t){n.setState({containerWidth:n.container.clientWidth})})),n.resizeObserver.observe(n.container))},n._getPopperVisibility=function(){return n.props.disableSymbolSelector?"none":n.state.isPanelOpened?"block":"none"},n._isHideSelectionToolsDom=function(){var e,t,o,i,a=null===(e=n.props.visibleElements)||void 0===e?void 0:e.selectionTools,s=null===(t=n.props.updateOnGraphicClick)||void 0===t||t;if(a&&!s){var r=null===(o=a["rectangle-selection"])||void 0===o||o,l=null===(i=a["lasso-selection"])||void 0===i||i;return!r&&!l}return!1},n._getSelectionToolClass=function(){return n._isHideSelectionToolsDom()?"hide-selectiontools":""},n.getStyles=function(){return Object(d.css)(lt||(lt=zt(["\n        .jimu-draw-tool.hide-selectiontools > .esri-sketch__panel > .esri-sketch__tool-section:first-of-type {\n          display: none;\n        }\n    "],["\n        .jimu-draw-tool.hide-selectiontools > .esri-sketch__panel > .esri-sketch__tool-section:first-of-type {\n          display: none;\n        }\n    "])))},n.state={apiLoaded:!1,currentSymbol:null,containerWidth:null,isPanelOpened:!0,popperGeneration:0},n}return Gt(t,e),t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(b.loadArcGISJSAPIModules)(["esri/widgets/Sketch","esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/symbols/support/jsonUtils"]).then((function(t){e.SketchClass=t[0],e.SketchViewModelClass=t[1],e.GraphicsLayer=t[2],e.jsonUtils=t[3],e.setState({apiLoaded:!0},(function(){var t,n,o,i;e.sketch&&e.sketch.destroy(),e.props.layer?e.layer=e.props.layer:e.layer=new e.GraphicsLayer,(null===(t=e.props.jimuMapView.view)||void 0===t?void 0:t.map)&&(e.props.jimuMapView.view.map.findLayerById(e.layer.id)||e.props.jimuMapView.view.map.add(e.layer));var a=null===(n=e.props.updateOnGraphicClick)||void 0===n||n,s=null!==(o=e.props.defaultCreateOptions)&&void 0!==o?o:null,r=null!==(i=e.props.defaultUpdateOptions)&&void 0!==i?i:null;e.sketch=new e.SketchClass({container:e.container,creationMode:e.props.creationMode?e.props.creationMode:"continuous",visibleElements:e._getDefaultVisibleElements(e.props.visibleElements),viewModel:new e.SketchViewModelClass({view:e.props.jimuMapView.view,layer:e.layer,updateOnGraphicClick:a,defaultCreateOptions:s,defaultUpdateOptions:r})}),setTimeout((function(){e.insertCustomDom()}),1e3),e.sketch.watch("activeTool",(function(t){if(e.activeTools.includes(t))e.currentActiveTool=t,e.props.onDrawToolsActived&&e.props.onDrawToolsActived(t),e.setState({currentSymbol:e.getCurrentSymbol(t),popperGeneration:e.state.popperGeneration+1});else{if(e.isSymbolChanging)return void(e.isSymbolChanging=!1);e.currentActiveTool=null,e.setState({currentSymbol:null,popperGeneration:e.state.popperGeneration+1})}})),e.sketch.viewModel.on("create",(function(t){if("start"===t.state&&e.props.onDrawStart&&e.props.onDrawStart(),"complete"===t.state&&e.props.onDrawEnd){var n=!("point"!==(null==t?void 0:t.tool)||!e.props.onDrawStart);n&&e.props.onDrawStart(),(null==t?void 0:t.graphic)&&(t.graphic.attributes&&t.graphic.attributes.id||(t.graphic.attributes={},t.graphic.attributes.id=d.utils.getUUID()),setTimeout((function(){e.props.onDrawEnd(t.graphic)}),n?100:0))}"cancel"===t.state&&e.props.onDrawCancel&&e.props.onDrawCancel()})),e.sketch.viewModel.on("update",(function(t){if(e.props.onGraphicEdited&&!t.aborted&&(clearTimeout(e.onGraphicEdited),e.onGraphicEdited=setTimeout((function(){var n=t.graphics&&t.graphics[0];!n||n.attributes&&n.attributes.id||(n.attributes={},n.attributes.id=d.utils.getUUID()),e.props.onGraphicEdited({type:"modified",graphic:n})}),200)),"complete"===t.state&&e.props.onGraphicEdited){var n=t.graphics&&t.graphics[0];!n||n.attributes&&n.attributes.id||(n.attributes={},n.attributes.id=d.utils.getUUID()),e.props.onGraphicEdited({type:"complete",graphic:n})}})),e.sketch.viewModel.on("delete",(function(t){if(e.props.onGraphicEdited){var n=t.graphics&&t.graphics[0];!n||n.attributes&&n.attributes.id||(n.attributes={},n.attributes.id=d.utils.getUUID()),e.props.onGraphicEdited({type:"deleted",graphic:n})}})),e.props.onDrawToolCreated&&e.props.onDrawToolCreated({sketch:e.sketch,graphicsLayer:e.layer,complete:e.complete})}))}))},t.prototype.componentDidUpdate=function(e,t){this.state.apiLoaded&&this.container&&e.isActive!==this.props.isActive&&e.isActive&&this.deactivate()},t.prototype.componentWillUnmount=function(){this.sketch&&this.sketch.destroy(),this.props.jimuMapView.view&&this.props.jimuMapView.view.map&&this.layer&&this.props.jimuMapView.view.map.remove(this.layer)},t.prototype.render=function(){var e=this;return Object(d.jsx)("div",{className:Object(d.classNames)(this.props.className,"jimu-drawtool"),style:{width:(this.state.containerWidth?this.state.containerWidth:332)+"px",minHeight:"45px"}},Object(d.jsx)("div",{className:"w-100 d-flex",ref:function(t){e.toolbarContainer=t},css:this.getStyles()},!this.state.apiLoaded&&Object(d.jsx)("div",{style:{width:"332px",height:"45px"}},Object(d.jsx)("div",{className:"jimu-draw-loader"})),Object(d.jsx)("div",{ref:function(t){e.onDrawToolContainerCreated(t)},className:"jimu-draw-tool "+this._getSelectionToolClass()}),Object(d.jsx)(g.Button,{style:{display:"none",height:"32px",whiteSpace:"nowrap"},className:"ml-2 mr-2",size:"sm",onClick:this.clearGraphics,ref:function(t){e.btnContainer=t}},this.props.intl.formatMessage({id:"clear",defaultMessage:g.defaultMessages.clear})),Object(d.jsx)(g.Button,{style:{display:"none",height:"32px"},className:"align-items-center justify-content-center mr-1",disabled:!this.activeTools.includes(this.currentActiveTool),title:this.props.intl.formatMessage({id:"drawToolStyles",defaultMessage:g.defaultMessages.drawToolStyles}),ref:function(t){e.collapseBtnContainer=t},onClick:function(){e.setState({isPanelOpened:!e.state.isPanelOpened,popperGeneration:e.state.popperGeneration+1})}},Object(d.jsx)(g.Icon,{className:"mr-0",icon:this.state.isPanelOpened?Ut:Ft,size:12}))),Object(d.jsx)(g.Popper,{className:"surface-2 border-0",reference:this.toolbarContainer,placement:"bottom-start",open:!0,offset:[0,12],version:this.state.popperGeneration},Object(d.jsx)("div",{style:{width:this.state.containerWidth+"px",display:""+this._getPopperVisibility()}},Object(d.jsx)(Bt,{intl:this.props.intl,symbol:this.state.currentSymbol,onPointSymbolChanged:this.handlePointSymbolChanged,onPolylineSymbolChanged:this.handlePolylineSymbolChanged,onPolygonSymbolChanged:this.handlePolygonSymbolChanged}))))},t}(d.React.PureComponent),Qt=d.themeUtils.withStyles(Object(d.injectIntl)(Zt),"Draw"),Kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xt=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClickOk=function(){if(n.state.currentJimuMapView&&n.state.currentJimuMapView.view){var e=n.props.jimuMapConfig.setIn(["initialMapState","viewPoint"],n.state.currentJimuMapView&&n.state.currentJimuMapView.view&&n.state.currentJimuMapView.view.viewpoint.toJSON()).setIn(["initialMapState","extent"],n.state.currentJimuMapView&&n.state.currentJimuMapView.view&&n.state.currentJimuMapView.view.extent.toJSON()).setIn(["initialMapState","rotation"],n.state.currentJimuMapView&&n.state.currentJimuMapView.view&&n.state.currentJimuMapView.view.viewpoint.rotation).setIn(["initialMapState","viewType"],n.state.currentJimuMapView&&n.state.currentJimuMapView.view&&n.state.currentJimuMapView.view.type).setIn(["initialMapDataSourceID"],n.state.currentJimuMapView&&n.state.currentJimuMapView.datasourceId?n.state.currentJimuMapView.datasourceId:void 0);n.props.onConfigChanged&&n.props.onConfigChanged(e),n.setState({isShowDialog:!1})}},n.handleClickClose=function(){n.setState({isShowDialog:!1})},n.showDialog=function(){n.setState({isShowDialog:!0})},n.handleActiveViewChange=function(e){n.setState({currentJimuMapView:e})},n.getWidgetSize=function(){var e=n.querySelector('div.widget-renderer[data-widgetid="'+n.props.id+'"]'),t=null;if(e){var o=e.getBoundingClientRect();t={width:o.width,height:o.height}}else t={width:document.body.clientWidth-100,height:document.body.clientHeight-300};return n.getRightSize(t)},n.getRightSize=function(e){var t,n,o=document.body.clientWidth-100<1280?document.body.clientWidth-100:1280,i=document.body.clientHeight-300<800?document.body.clientHeight-300:800;return o/i>=e.width/e.height?{width:t=(n=i)*e.width/e.height,height:n}:{width:t=o,height:n=t*e.height/e.width}},n.state={isShowDialog:!1,currentJimuMapView:null},n}return Kt(t,e),t.prototype.querySelector=function(e){var t=document.querySelector('iframe[name="'+d.APP_FRAME_NAME_IN_BUILDER+'"]');return t?(t.contentDocument||t.contentWindow.document).querySelector(e):null},t.prototype.render=function(){var e=this,t=null;t=this.props.isUseWidgetSize?this.getWidgetSize():this.getRightSize({width:document.body.clientWidth-100,height:document.body.clientHeight-300});var n=this.props.jimuMapConfig?this.props.jimuMapConfig.set("toolConifg",{canZoom:!0,canHome:!0,canSearch:!0,canCompass:!0}):Object(d.Immutable)({});return Object(d.jsx)("div",null,Object(d.jsx)(g.Button,{onClick:this.showDialog},this.props.buttonLabel),this.state.isShowDialog&&Object(d.jsx)(g.AlertPopup,{isOpen:this.state.isShowDialog,title:this.props.title,onClickOk:function(){e.handleClickOk()},onClickClose:function(){e.handleClickClose()}},Object(d.jsx)("div",{style:{width:(t&&t.width)+"px",height:(t&&t.height)+"px"}},Object(d.jsx)("div",{className:"w-100 h-100",style:{backgroundColor:"gray"}},Object(d.jsx)(yt,{id:this.props.id+"editor",useDataSources:this.props.useDataSources,jimuMapConfig:n,onActiveViewChange:function(t){e.handleActiveViewChange(t)}})))))},t}(d.React.PureComponent);d.ThemeManager.getInstance().registerJimuThemeStyleModule("jimu-ui/advanced/map/",{componentStyles:o})}}))}}}));