System.register(["jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-core/react","jimu-ui/basic/sql-expression-runtime"],(function(e){var t,n,o,i,r;return{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){i=e},function(e){r=e}],execute:function(){e(function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=450)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},117:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.433.822l8 13.856-.866.5L9.31 13H1.5v-3h1v2h6.232L4.114 4H2.5v2h.95l-1.5 2-1.5-2H1.5V3h2.036l-.97-1.678.867-.5zM14.049 8l1.5 2H14.5v3h-3.035l-.576-1H13.5v-2h-.951l1.5-2zm.451-5v3h-1V4H6.268L5.69 3h8.81z" fill="#FFF" fill-rule="evenodd"></path></svg>'},118:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.049 8l1.5 2h-1.05v3H1.502v-3H2.5v2h11v-2h-.951l1.5-2zm.451-5v3h-1V4h-11v2h.951l-1.5 2-1.5-2h1.05V3h13z" fill="#FFF" fill-rule="evenodd"></path></svg>'},127:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM16 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM5.146 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 4.327a.5.5 0 01.708-.707l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055zM5.146 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 12.328a.5.5 0 11.708-.708l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055z" fill="#000"></path></svg>'},128:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)" fill-rule="evenodd" clip-rule="evenodd" fill="#000"><path d="M9 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM9 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM15.826 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.265a.5.5 0 01.707-.707l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055zM15.826 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.264a.5.5 0 01.707-.708l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055z"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},129:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 010 1H14l-.929 11.077a1 1 0 01-.878.916l-.119.007H3.926a1 1 0 01-.997-.923L2 4H.5a.5.5 0 010-1h4V1.167C4.5.469 5.204 0 6 0h4zm2.997 4H3.003l.923 11h8.148l.923-11zm-2.889 3l.892.87-3.325 3.73L5 8.991l.831-.933 1.783 1.74L10.108 7zM5.5 1v2h5V1c0-.04-5-.04-5 0z" fill="#000" fill-rule="nonzero"></path></svg>'},130:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".01" fill="#E3E3E3" d="M0 0h16v16H0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M.5 1a.5.5 0 000 1h15a.5.5 0 000-1H.5zM0 7.5A.5.5 0 01.5 7h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5zm0 6a.5.5 0 01.5-.5h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5z" fill="#000"></path></svg>'},18:function(e,t){e.exports=i},316:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15.5 12a.5.5 0 110 1H.5a.5.5 0 110-1h15zm0-5a.5.5 0 110 1H.5a.5.5 0 010-1h15zm0-5a.5.5 0 110 1H.5a.5.5 0 010-1h15z" fill="#076FE5" fill-rule="nonzero"></path></svg>'},317:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 3a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4zm5-3a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zm0 7a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zm0 7a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zM2 9a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4zm0 5a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4z" fill="#FFF" fill-rule="nonzero"></path></svg>'},34:function(e,t){e.exports=r},4:function(e,t,n){"use strict";n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return S})),n.d(t,"k",(function(){return b})),n.d(t,"j",(function(){return w})),n.d(t,"m",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return d})),n.d(t,"n",(function(){return u}));var o,i,r,a,s,l,c,d,u,p=0,h=20,g=42,f=40,m=0,v=14,S=14,b=175,w=220;!function(e){e.None="NONE",e.Single="SINGLE",e.Multiple="MULTIPLE"}(o||(o={})),function(e){e.Scroll="SCROLL",e.MultiPage="MULTIPAGE"}(i||(i={})),function(e){e.Start="FLEX-START",e.Center="CENTER",e.End="FLEX-END"}(r||(r={})),function(e){e.Horizon="HORIZON",e.Vertical="VERTICAL"}(a||(a={})),function(e){e.Glide="GLIDE",e.Fade="FADE",e.Float="FLOAT"}(s||(s={})),function(e){e.Hover0="HOVER0",e.Hover1="HOVER1",e.Hover2="HOVER2",e.Hover3="HOVER3"}(l||(l={})),function(e){e.Style0="STYLE0",e.Style1="STYLE1",e.Style2="STYLE2",e.Style3="STYLE3"}(c||(c={})),function(e){e.Style0="STYLE0",e.Style1="STYLE1",e.Style2="STYLE2",e.Style3="STYLE3",e.Style4="STYLE4",e.Style5="STYLE5",e.Style6="STYLE6",e.Style7="STYLE7"}(d||(d={})),function(e){e.Regular="REGULAR",e.Selected="SELECTED",e.Hover="HOVER"}(u||(u={}))},450:function(e,t,n){"use strict";n.r(t),n.d(t,"Widget",(function(){return pt}));var o=n(0),i=n(1),r=n(4),a=n(5),s=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},l=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};function c(e,t,n){var i;return s(this,void 0,Promise,(function(){var r,a,c,p,h=this;return l(this,(function(g){return r={page:1,pageSize:10},a=t.searchFields.split(","),t.searchOpen&&t.searchFields&&(c=null===(i=function(e,t,n){var i=o.dataSourceUtils.isHostedService(n.url),r=t.searchFields.split(",");if(t.searchOpen&&t.searchFields){var a={sql:"1=1",displaySQL:"",logicalOperator:"OR",parts:r.map((function(t){return{type:"SINGLE",jimuFieldName:t,operator:"STRING_OPERATOR_CONTAINS",valueOptions:{isValid:!0,sourceType:"USER_INPUT",inputEditor:"TEXT_BOX",value:Object(o.Immutable)([{value:e,label:t}])},displayType:"NONE",caseSensitive:i}}))};return o.dataSourceUtils.getArcGISSQL(a,n)}}(e,t,n))||void 0===i?void 0:i.sql,r.where=c),p=new RegExp("("+e+")","gi"),[2,u(r,n).then((function(t){return s(h,void 0,void 0,(function(){var n;return l(this,(function(o){return n=[],a.forEach((function(o){t.forEach((function(t){var i,r=null===(i=null==t?void 0:t.feature)||void 0===i?void 0:i.attributes[o];if(r&&!n.includes(r)&&r.match(p)){var a={suggestionHtml:d(r,e),suggestion:r};n.push(a)}}))})),[2,Promise.resolve(n)]}))}))}))]}))}))}function d(e,t){if(!t)return e;var n=new RegExp("("+t+")","gi");return e.replace(n,"<strong >$1</strong>")}function u(e,t){return s(this,void 0,Promise,(function(){var n=this;return l(this,(function(i){switch(i.label){case 0:return t?[3,2]:[4,Promise.resolve([])];case 1:return[2,i.sent()];case 2:return t.type!==o.DataSourceTypes.FeatureLayer?[3,4]:[4,t.query(e).then((function(t){return s(n,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,p(e,t)];case 1:return[2,n.sent()]}}))}))}))];case 3:return[2,i.sent()];case 4:return[4,Promise.resolve([])];case 5:return[2,i.sent()]}}))}))}function p(e,t){var n;return s(this,void 0,Promise,(function(){return l(this,(function(o){switch(o.label){case 0:return(null==e?void 0:e.where)!==(null===(n=null==t?void 0:t.queryParams)||void 0===n?void 0:n.where)?[3,2]:[4,Promise.resolve(null==t?void 0:t.records)];case 1:return[2,o.sent()];case 2:return[4,Promise.reject(!1)];case 3:return[2,o.sent()]}}))}))}var h,g,f,m,v,S=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=o.utils.memoize((function(e){var t=e.showTopTools,n=e.bottomToolH,i=e.topRightToolW,a=e.hasRecords,s=e.currentCardSize,l=e.direction,c=e.pageStyle,d=e.scrollBarOpen,u=e.appMode,p=e.theme,g=e.isHeightAuto,f=e.isWidthAuto,m=t?r.e:0,v=l===r.f.Horizon,b=l===r.f.Horizon?"column":"row";return Object(o.css)(h||(h=S(["\n    &.list-container {\n      /* position: ","; */\n      position: relative;\n      z-index: 0;\n      overflow: hidden;\n      .bottom-boundary {\n        height: 2px;\n        width: 2px;\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        opacity: 0;\n      }\n      ","\n\n\n      .editing-mask-list {\n        position: absolute;\n        top: ","px;\n        left: ","px;\n        bottom: ",";\n        right: 0;\n        z-index: 10;\n        background-color: ",";\n      }\n\n      .editing-mask-ds-tool {\n        position: absolute;\n        z-index: 10;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: ",";\n      }\n\n      .editing-mask-bottom-tool {\n        position: absolute;\n        z-index: 10;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: ",";\n      }\n\n      .tip-mask-list {\n        position: absolute;\n        top: ","px;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 10;\n        padding-top: 20%;\n      }\n\n      .datasource-tools {\n        position: relative;\n        height: ",";\n        padding-bottom: ",";\n        .sort-fields-input {\n          width: 200px;\n          margin-left: 8px;\n          margin-right: 16px;\n        }\n\n        .tool-row {\n          height: ","px;\n        }\n        .ds-tools-line {\n          width: 100%;\n          height: 1px;\n          margin-top: ",";\n          background-color: ",";\n        }\n        .ds-tools-line-blue {\n          background-color: ",";\n        }\n        .list-search-div {\n          width: calc(100% - ","px);\n          .list-search {\n            margin-bottom: ",";\n            width: 100%;\n          }\n        }\n\n      }\n      .tools-menu {\n        color: ",";\n      }\n      .tools-menu:hover {\n        color: ",";\n      }\n      .bottom-tools {\n        position: relative;\n        padding-top: ",";\n        min-height: ",";\n        .scroll-navigator {\n          .btn {\n            border-radius: ",";\n          }\n        }\n      }\n\n      .widget-list-list:focus {\n        outline: none;\n      }\n      .widget-list-list {\n        &>div {\n          position: relative;\n          flex: 1;\n          box-sizing: content-box;\n          ",";\n          ",";\n        }\n        padding: 0;\n        position: relative;\n        /* box-sizing: border-box; */\n        ","\n        height: "," !important;\n        width: "," !important;\n        display: flex;\n        ",";\n        ",";\n        ",";\n        ","\n      }\n      ","\n      .placeholder-alert-con {\n        position: absolute;\n        bottom: ",";\n        right: ",";\n        z-index: 11;\n      }\n    }\n  "],["\n    &.list-container {\n      /* position: ","; */\n      position: relative;\n      z-index: 0;\n      overflow: hidden;\n      .bottom-boundary {\n        height: 2px;\n        width: 2px;\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        opacity: 0;\n      }\n      ","\n\n\n      .editing-mask-list {\n        position: absolute;\n        top: ","px;\n        left: ","px;\n        bottom: ",";\n        right: 0;\n        z-index: 10;\n        background-color: ",";\n      }\n\n      .editing-mask-ds-tool {\n        position: absolute;\n        z-index: 10;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: ",";\n      }\n\n      .editing-mask-bottom-tool {\n        position: absolute;\n        z-index: 10;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background-color: ",";\n      }\n\n      .tip-mask-list {\n        position: absolute;\n        top: ","px;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        z-index: 10;\n        padding-top: 20%;\n      }\n\n      .datasource-tools {\n        position: relative;\n        height: ",";\n        padding-bottom: ",";\n        .sort-fields-input {\n          width: 200px;\n          margin-left: 8px;\n          margin-right: 16px;\n        }\n\n        .tool-row {\n          height: ","px;\n        }\n        .ds-tools-line {\n          width: 100%;\n          height: 1px;\n          margin-top: ",";\n          background-color: ",";\n        }\n        .ds-tools-line-blue {\n          background-color: ",";\n        }\n        .list-search-div {\n          width: calc(100% - ","px);\n          .list-search {\n            margin-bottom: ",";\n            width: 100%;\n          }\n        }\n\n      }\n      .tools-menu {\n        color: ",";\n      }\n      .tools-menu:hover {\n        color: ",";\n      }\n      .bottom-tools {\n        position: relative;\n        padding-top: ",";\n        min-height: ",";\n        .scroll-navigator {\n          .btn {\n            border-radius: ",";\n          }\n        }\n      }\n\n      .widget-list-list:focus {\n        outline: none;\n      }\n      .widget-list-list {\n        &>div {\n          position: relative;\n          flex: 1;\n          box-sizing: content-box;\n          ",";\n          ",";\n        }\n        padding: 0;\n        position: relative;\n        /* box-sizing: border-box; */\n        ","\n        height: "," !important;\n        width: "," !important;\n        display: flex;\n        ",";\n        ",";\n        ",";\n        ","\n      }\n      ","\n      .placeholder-alert-con {\n        position: absolute;\n        bottom: ",";\n        right: ",";\n        z-index: 11;\n      }\n    }\n  "])),g?"absolute":"relative",l===r.f.Horizon?"\n          margin-left: "+r.i+"px;\n          height: "+(g?"auto":"100%")+";\n          width: "+(f?"auto":"calc(100% - "+r.i+"px)")+";\n        ":"\n          margin-top: "+r.i+"px;\n          width: "+(f?"auto":"100%")+";\n          height: "+(g?"auto":"calc(100% - "+r.i+"px)")+";\n        ",l===r.f.Vertical&&a?s.height+m:m,l===r.f.Horizon&&a?s.width:0,o.polished.rem(n),o.polished.rgba(p.colors.black,.2),o.polished.rgba(p.colors.black,.2),o.polished.rgba(p.colors.black,.2),m,o.polished.rem(m),o.polished.rem(r.d),r.e-r.d,o.polished.rem(6),p.colors.palette.light[500],p.colors.palette.info[500],i,o.polished.rem(-4),p.colors.palette.light[800],p.colors.palette.info[500],o.polished.rem(r.b),o.polished.rem(r.a),p.borderRadiuses.circle,v&&"padding-right: "+o.polished.rem(15),!v&&"padding-bottom: "+o.polished.rem(15),window.jimuConfig.isInBuilder&&u!==o.AppMode.Run?"overflow: hidden !important;":"overflow-"+(v?"y":"x")+": hidden !important;",g?"auto":"calc(100% - "+m+"px - "+n+"px)",f?"auto":"100%","flex-direction: "+b,g&&"min-height: "+s.height+"px;",f&&"min-width: "+s.width+"px;",v?"\n              max-width: "+e.mexSize.maxWidth+"px;\n            ":"\n              max-height: "+e.mexSize.maxHeight+"px;\n            ",c!==r.l.Scroll||d?"":"\n          .widget-list-list::-webkit-scrollbar {\n            display: none; //Safari and Chrome\n          }\n          .widget-list-list {\n              -ms-overflow-style: none; //IE 10+\n              overflow: -moz-scrollbars-none; //Firefox\n          }\n        ",o.polished.rem(8),o.polished.rem(8))}));function w(e,t,n){var i,a,s,l,c,d,u,p,h,f,m=e.config,v=e.id,b=e.appMode,w=e.isHeightAuto,y=e.isWidthAuto,x=e.theme;return Object(o.css)(g||(g=S(["\n    "," {\n      overflow: visible;\n      background-color: transparent;\n      border: "," solid ",";\n      height: ",";\n      width: ",";\n      .list-with-mask {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n        background-color: ",";\n        z-index: 1;\n      }\n      .refresh-loading-con {\n        right: 0;\n        bottom:",";\n        align-items: center;\n        height: ",";\n        .auto-refresh-loading {\n          background: ",";\n          color: ",";\n          font-size: ",";\n          line-height: ",";\n          padding: 0 ",";\n        }\n        &.horizon-loading {\n          bottom:",";\n        }\n        &.vertical-loading {\n          right: ",";\n        }\n      }\n      .loading-con {\n        @keyframes loading {\n          0% {transform: rotate(0deg); };\n          100% {transform: rotate(360deg)};\n        }\n        width: ",";\n        height: ",";\n        border: 1px solid ",";\n        border-radius: 50%;\n        border-top: 1px solid ",";\n        box-sizing: border-box;\n        animation:loading 2s infinite linear;\n        margin-right: ",";\n      }\n      .widget-list {\n        overflow: ",";\n        height: ",";\n        width: ",";\n        /* align-items: ",";\n        justify-content: ","; */\n        ","\n      }\n    }\n\n  "],["\n    "," {\n      overflow: visible;\n      background-color: transparent;\n      border: "," solid ",";\n      height: ",";\n      width: ",";\n      .list-with-mask {\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n        background-color: ",";\n        z-index: 1;\n      }\n      .refresh-loading-con {\n        right: 0;\n        bottom:",";\n        align-items: center;\n        height: ",";\n        .auto-refresh-loading {\n          background: ",";\n          color: ",";\n          font-size: ",";\n          line-height: ",";\n          padding: 0 ",";\n        }\n        &.horizon-loading {\n          bottom:",";\n        }\n        &.vertical-loading {\n          right: ",";\n        }\n      }\n      .loading-con {\n        @keyframes loading {\n          0% {transform: rotate(0deg); };\n          100% {transform: rotate(360deg)};\n        }\n        width: ",";\n        height: ",";\n        border: 1px solid ",";\n        border-radius: 50%;\n        border-top: 1px solid ",";\n        box-sizing: border-box;\n        animation:loading 2s infinite linear;\n        margin-right: ",";\n      }\n      .widget-list {\n        overflow: ",";\n        height: ",";\n        width: ",";\n        /* align-items: ",";\n        justify-content: ","; */\n        ","\n      }\n    }\n\n  "])),"&.list-widget-"+v,o.polished.rem(r.c),o.polished.rgba(x.colors.black,window.jimuConfig.isInBuilder&&t?.2:0),w?"auto":"100%",y?"auto":"100%",o.polished.rgba(x.colors.black,0),n?o.polished.rem(r.a):0,o.polished.rem(24),o.polished.rgba(null===(s=null===(a=null===(i=x.colors)||void 0===i?void 0:i.palette)||void 0===a?void 0:a.dark)||void 0===s?void 0:s[100],.2),null===(l=x.colors)||void 0===l?void 0:l.black,o.polished.rem(12),o.polished.rem(24),o.polished.rem(7),n?o.polished.rem(r.a+6):o.polished.rem(6),o.polished.rem(6),o.polished.rem(16),o.polished.rem(16),null===(u=null===(d=null===(c=null==x?void 0:x.colors)||void 0===c?void 0:c.palette)||void 0===d?void 0:d.dark)||void 0===u?void 0:u[100],null===(f=null===(h=null===(p=null==x?void 0:x.colors)||void 0===p?void 0:p.palette)||void 0===h?void 0:h.dark)||void 0===f?void 0:f[800],o.polished.rem(4),window.jimuConfig.isInBuilder&&b!==o.AppMode.Run?"hidden":"auto",w?"auto":"100%",y?"auto":"100%",m.alignType,m.alignType,m.direction===r.f.Horizon?"\n            overflow-y: hidden;\n          ":"\n            overflow-x: hidden;\n          ")}function y(e){var t=e.theme;return Object(o.css)(f||(f=S(["\n    & {\n      padding: "," ",";\n      height: ",";\n    }\n    .ds-tools-line {\n      width: 100%;\n      height: 1px;\n      background-color: ",";\n    }\n    .ds-tools-line-blue {\n      background-color: ",";\n    }\n    .close-search {\n      margin-top: ",";\n    }\n  "],["\n    & {\n      padding: "," ",";\n      height: ",";\n    }\n    .ds-tools-line {\n      width: 100%;\n      height: 1px;\n      background-color: ",";\n    }\n    .ds-tools-line-blue {\n      background-color: ",";\n    }\n    .close-search {\n      margin-top: ",";\n    }\n  "])),o.polished.rem(6),o.polished.rem(11),o.polished.rem(40),t.colors.palette.light[500],t.colors.palette.info[500],o.polished.rem(-6))}function x(e){var t=e.theme;return Object(o.css)(m||(m=S(["\n    .close-search {\n      border: 1px solid ",";\n      box-sizing: border-box;\n      background-color: ",";\n    }\n    .search-box-content {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "],["\n    .close-search {\n      border: 1px solid ",";\n      box-sizing: border-box;\n      background-color: ",";\n    }\n    .search-box-content {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),t.colors.palette.light[500],t.colors.white)}function C(e,t){var n=e.theme;return Object(o.css)(v||(v=S(["\n    .list-data-action {\n      & {\n        padding-left: ",";\n        border-left: 1px solid ","\n      }\n    }\n    .m-left {\n      margin-left: ",";\n    }\n  "],["\n    .list-data-action {\n      & {\n        padding-left: ",";\n        border-left: 1px solid ","\n      }\n    }\n    .m-left {\n      margin-left: ",";\n    }\n  "])),o.polished.rem(4),t?n.colors.palette.light[200]:"transparent",o.polished.rem(4))}var I,O,j,M,T,z,R,L,k,D,P,A,_,E=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),B=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getNewProviderData=function(){var e=t.props;return{widgetId:e.widgetId,dataSourceId:e.datasourceId,recordIndex:e.index,record:e.record}},t.shouldComponentUpdateExcept=function(e,n,o,i){void 0===i&&(i=[]);var r=!1;return t.props&&Object.keys(t.props).some((function(n){return!o.includes(n)&&(t.props[n]!==e[n]?(r=!0,!0):void 0)})),t.state&&Object.keys(t.state).some((function(e){return!i.includes(e)&&(t.state[e]!==n[e]?(r=!0,!0):void 0)})),r},t.isProviderEqual=function(e,t){var n=!0;if(e)Object.keys(e).some((function(o){return t?e[o]!==t[o]?(n=!1,!0):void 0:(n=!1,!0)}));else if(t)return!1;return n},t.formatMessage=function(e,n){return t.props.formatMessage(e,n)},t.getStyle=function(){var e=t.props,n=e.widgetId,i=e.selectable,r=e.appMode;return Object(o.css)(O||(O=B(["\n      "," {\n        padding: 0;\n        border: 0;\n        background-color: transparent;\n        .list-card-content {\n          width: 100%;\n          height: 100%;\n          overflow: hidden;\n        }\n      }\n      &.surface-1 {\n        border: none !important;\n      }\n      .list-clear-background {\n        background: transparent;\n      }\n      ",":hover {\n        ","\n      }\n    "],["\n      "," {\n        padding: 0;\n        border: 0;\n        background-color: transparent;\n        .list-card-content {\n          width: 100%;\n          height: 100%;\n          overflow: hidden;\n        }\n      }\n      &.surface-1 {\n        border: none !important;\n      }\n      .list-clear-background {\n        background: transparent;\n      }\n      ",":hover {\n        ","\n      }\n    "])),"&.list-card-"+n,"&.list-card-"+n,window.jimuConfig.isInBuilder&&r!==o.AppMode.Run||!i?"":"cursor: pointer;")},t}return E(t,e),t}(o.React.Component),H=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},U=function(){return(U=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},W=n(117),V=n(118),q=[0,5],G=[{name:"flip",options:{boundary:document.body,fallbackPlacements:["right-start","left-start","bottom-start"]}}],Q=[{name:"offset",options:{offset:[0,10]}},{name:"arrow",enabled:!0}],Y=function(e){function t(t){var n=e.call(this,t)||this;return n.lastResizeCall=null,n.handleItemClick=function(e){var t=n.props.selectCard;e&&e.stopPropagation(),t()},n.handleCopyTo=function(e,t,i,r){if(i){var s=n.props,l=s.layouts,c=s.builderSupportModules,d=s.browserSizeMode,u=s.builderStatus,p=c.jimuForBuilderLib.getAppConfigAction(),h=p.appConfig,g=a.searchUtils.findLayoutId(l[u],d,h.mainSizeMode),f=a.searchUtils.findLayoutId(l[t],d,h.mainSizeMode);if(r){var m=c.widgetModules.searchUtils.getContainerLayoutItem(h.layouts[f],i.widgetId,o.LayoutItemType.Widget);m&&p.removeLayoutItem({layoutId:f,layoutItemId:m.id},!1)}p.duplicateLayoutItem(g,f,i.id,!1,r),p.exec(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},n.editStatus=function(e,t){var i=n.props,r=i.dispatch,a=i.widgetId;r(o.appActions.widgetStatePropChange(a,e,t))},n.handleBreakLink=function(e){var t=n.props,i=t.layouts,r=t.builderSupportModules,s=t.browserSizeMode,l=t.selection,c=t.builderStatus,d=t.dispatch,u=r.jimuForBuilderLib.getAppConfigAction(),p=u.appConfig,h=a.searchUtils.findLayoutItem(p,l);if(h){var g=a.searchUtils.findLayoutId(i[c],s,p.mainSizeMode);u.duplicateLayoutItem(g,g,h.id,!0),u.removeLayoutItem({layoutId:g,layoutItemId:h.id},!1),u.exec(),l.layoutId===g&&l.layoutItemId===h.id&&d(o.appActions.selectionChanged(null));var f=u.appConfig.layouts[g].content,m=Object.keys(f)[Object.keys(f).length-1];if(m){var v=f[m];d(o.appActions.selectionChanged({layoutId:g,layoutItemId:v.id}))}e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},n.getCopyDropdownItems=function(e){var t=n.props,i=t.cardConfigs,s=t.layouts,l=t.browserSizeMode,c=t.selection,d=t.builderStatus,u=t.builderSupportModules,p=u.jimuForBuilderLib.getAppConfigAction().appConfig,h=a.searchUtils.findLayoutItem(p,c);if(!c||!h||!window.jimuConfig.isInBuilder)return{items:Object(o.Immutable)([]),title:""};var g=[],f="",m=!0,v=i[r.n.Selected].selectionMode!==r.m.None,S=!!i[r.n.Hover].enable,b=function(e,t){return u.widgetModules.searchUtils.getContentsInLayoutWithLayoutWidgetOnly(p,e,o.LayoutItemType.Widget,l).indexOf(t)>-1},w=function(){if(i[r.n.Hover].enable){var e=a.searchUtils.findLayoutId(s[r.n.Hover],l,p.mainSizeMode);b(e,p.layouts[c.layoutId].content[c.layoutItemId].widgetId)||(S=!1),g.push({label:n.formatMessage("applyTo",{status:n.formatMessage("hover").toLocaleLowerCase()}),event:function(e){n.handleCopyTo(e,r.n.Hover,h,S)}})}},y=function(){if(i[r.n.Selected].selectionMode!==r.m.None){var e=a.searchUtils.findLayoutId(s[r.n.Selected],l,p.mainSizeMode);b(e,p.layouts[c.layoutId].content[c.layoutItemId].widgetId)||(v=!1),g.push({label:n.formatMessage("applyTo",{status:n.formatMessage("selected").toLocaleLowerCase()}),event:function(e){n.handleCopyTo(e,r.n.Selected,h,v)}})}},x=function(){var e=a.searchUtils.findLayoutId(s[r.n.Regular],l,p.mainSizeMode);b(e,p.layouts[c.layoutId].content[c.layoutItemId].widgetId)||(m=!1),g.push({label:n.formatMessage("applyTo",{status:n.formatMessage("regular").toLocaleLowerCase()}),event:function(e){n.handleCopyTo(e,r.n.Regular,h,m)}})};return d===r.n.Regular?(w(),y(),S&&v?f=n.formatMessage("linkedToAnd",{where1:n.formatMessage("selected").toLocaleLowerCase(),where2:n.formatMessage("hover").toLocaleLowerCase()}):S?f=n.formatMessage("linkedTo",{where:n.formatMessage("hover").toLocaleLowerCase()}):v&&(f=n.formatMessage("linkedTo",{where:n.formatMessage("selected").toLocaleLowerCase()}))):d===r.n.Hover?(x(),y(),m&&v?f=n.formatMessage("linkedToAnd",{where1:n.formatMessage("regular").toLocaleLowerCase(),where2:n.formatMessage("selected").toLocaleLowerCase()}):m?f=n.formatMessage("linkedTo",{where:n.formatMessage("regular").toLocaleLowerCase()}):v&&(f=n.formatMessage("linkedTo",{where:n.formatMessage("selected").toLocaleLowerCase()}))):(x(),w(),m&&S?f=n.formatMessage("linkedToAnd",{where1:n.formatMessage("regular").toLocaleLowerCase(),where2:n.formatMessage("hover").toLocaleLowerCase()}):m?f=n.formatMessage("linkedTo",{where:n.formatMessage("regular").toLocaleLowerCase()}):S&&(f=n.formatMessage("linkedTo",{where:n.formatMessage("hover").toLocaleLowerCase()}))),e?g.push({label:n.formatMessage("isolate"),event:n.handleBreakLink}):f=n.formatMessage("isolate"),{items:Object(o.Immutable)(g),title:f}},n._renderAction=function(){var e=[],t=n.props,i=t.theme,a=t.direction,s=Object(o.css)(j||(j=F(["\n      box-shadow: none;\n\n      &:after {\n        position: absolute;\n        content: '';\n        width: ","px;\n        height: ","px;\n        background-color: ",";\n        border: 2px solid ",";\n        border-radius: 50%;\n        z-index: ",";\n      }\n    "],["\n      box-shadow: none;\n\n      &:after {\n        position: absolute;\n        content: '';\n        width: ","px;\n        height: ","px;\n        background-color: ",";\n        border: 2px solid ",";\n        border-radius: 50%;\n        z-index: ",";\n      }\n    "])),12,12,i.colors.palette.primary[500],i.colors.white,20),l=Object(o.css)(M||(M=F(["\n      box-shadow: none;\n      height: ","px;\n      left: 0px;\n      right: 0px;\n      bottom: ","px;\n      &:after {\n        position: absolute;\n        content: '';\n        bottom: 50%;\n        left: 0;\n        right: 0;\n        height: 2px;\n        background-color: ",";\n        z-index: ",";\n      }\n    "],["\n      box-shadow: none;\n      height: ","px;\n      left: 0px;\n      right: 0px;\n      bottom: ","px;\n      &:after {\n        position: absolute;\n        content: '';\n        bottom: 50%;\n        left: 0;\n        right: 0;\n        height: 2px;\n        background-color: ",";\n        z-index: ",";\n      }\n    "])),16,-8,i.colors.palette.primary[300],20),c=Object(o.css)(T||(T=F(["\n      box-shadow: none;\n      width: ","px;\n      top: 0px;\n      bottom: 0px;\n      right: ","px;\n      &:after {\n        position: absolute;\n        content: '';\n        right: 50%;\n        top: 0;\n        bottom: 0;\n        width: 2px;\n        background-color: ",";\n        z-index: ",";\n      }\n    "],["\n      box-shadow: none;\n      width: ","px;\n      top: 0px;\n      bottom: 0px;\n      right: ","px;\n      &:after {\n        position: absolute;\n        content: '';\n        right: 50%;\n        top: 0;\n        bottom: 0;\n        width: 2px;\n        background-color: ",";\n        z-index: ",";\n      }\n    "])),16,-8,i.colors.palette.primary[300],20),d=Object(o.css)(z||(z=F(["\n      position: absolute;\n    "],["\n      position: absolute;\n    "]))),u=Object(o.css)(R||(R=F(["\n      width: ","px;\n      top: ","px;\n      bottom: ","px;\n      right: ","px;\n\n      &:after {\n        top: 50%;\n        right: 50%;\n        margin-top: ","px;\n        margin-right: ","px;\n      }\n    "],["\n      width: ","px;\n      top: ","px;\n      bottom: ","px;\n      right: ","px;\n\n      &:after {\n        top: 50%;\n        right: 50%;\n        margin-top: ","px;\n        margin-right: ","px;\n      }\n    "])),16,10,10,-8,-5,-5),p=Object(o.css)(L||(L=F(["\n      height: ","px;\n      left: ","px;\n      right: ","px;\n      bottom: ","px;\n\n      &:after {\n        left: 50%;\n        bottom: 50%;\n        margin-left: ","px;\n        margin-bottom: ","px;\n      }\n    "],["\n      height: ","px;\n      left: ","px;\n      right: ","px;\n      bottom: ","px;\n\n      &:after {\n        left: 50%;\n        bottom: 50%;\n        margin-left: ","px;\n        margin-bottom: ","px;\n      }\n    "])),16,10,10,-8,-5,-5);return a===r.f.Horizon?(e.push(Object(o.jsx)("span",{key:"10",className:"list-card-rnd-resize-left-line",css:[d,c]})),e.push(Object(o.jsx)("span",{key:"4",className:"list-card-rnd-resize-right",css:[d,s,u]}))):(e.push(Object(o.jsx)("span",{key:"9",className:"list-card-rnd-resize-bottom-line",css:[d,l]})),e.push(Object(o.jsx)("span",{key:"6",className:"list-card-rnd-resize-bottom",css:[d,s,p]}))),e},n.getCardToolsStyle=function(e){return Object(o.css)(k||(k=F(["\n      width: 100%;\n      .btn {\n        width: 100%;\n      }\n      .dropdown-toggle {\n        justify-content: center;\n      }\n    "],["\n      width: 100%;\n      .btn {\n        width: 100%;\n      }\n      .dropdown-toggle {\n        justify-content: center;\n      }\n    "])))},n.renderCardTools=function(){var e=n.props.index;if(window.jimuConfig.isInBuilder&&!(e>0)){var t=n.props,a=t.cardConfigs,s=t.selection,l=t.widgetId,c=t.appMode,d=t.builderSupportModules,u=t.datasourceId,p=t.browserSizeMode,h=t.builderStatus,g=t.selectionIsInList,f=t.selectionIsList,m=t.hideCardTool,v=d.jimuForBuilderLib.getAppConfigAction().appConfig,S=!0,b=d.widgetModules,w=b.searchUtils,y=b.BuilderDropDown,x=b.BuilderPopper,C=b.GLOBAL_RESIZING_CLASS_NAME,I=b.GLOBAL_H5_DRAGGING_CLASS_NAME,O=b.GLOBAL_DRAGGING_CLASS_NAME,j=b.BuilderButton,M=b.withBuilderTheme,T=f;(g||T)&&c!==o.AppMode.Run&&!m&&u||(S=!1);var z=!T&&s&&w&&w.getRelatedLayoutItemsInWidgetByLayoutInfo(v,s,l,p).length>1,R=n.getCopyDropdownItems(z),L=R.items,k=R.title,P=L&&L.length>0,A=M((function(e){return Object(o.jsx)("div",{className:"status-group d-flex flex-column align-items-center p-2",css:n.getCardToolsStyle(e)},Object(o.jsx)(j,{active:h===r.n.Regular,onClick:function(e){return n.handleBuilderStatusChange(e,r.n.Regular)}},n.formatMessage("regular")),a[r.n.Hover].enable&&Object(o.jsx)(j,{active:h===r.n.Hover,className:"mt-1",onClick:function(e){return n.handleBuilderStatusChange(e,r.n.Hover)}},n.formatMessage("hover")),a[r.n.Selected].selectionMode!==r.m.None&&Object(o.jsx)(j,{active:h===r.n.Selected,className:"mt-1",onClick:function(e){return n.handleBuilderStatusChange(e,r.n.Selected)}},n.formatMessage("selected")),!T&&(P||z)&&Object(o.jsx)(y,{className:"mt-1 w-100",toggleIsIcon:!0,toggleTitle:k,toggleType:"default",direction:"left",toggleContent:function(e){return Object(o.jsx)(i.Icon,{icon:z?V:W,size:16})},modifiers:Q,items:L}))}));return S&&n.props.isEditing&&(a[r.n.Hover].enable||a[r.n.Selected].selectionMode!==r.m.None)&&Object(o.jsx)(x,{placement:"left-start",css:Object(o.css)(D||(D=F(["\n            ."," &,\n            ."," &,\n            ."," & {\n              &.popper {\n                display: none;\n              }\n            }\n          "],["\n            ."," &,\n            ."," &,\n            ."," & {\n              &.popper {\n                display: none;\n              }\n            }\n          "])),O,C,I),reference:n.resizeRef.current,offset:q,modifiers:G,open:S},A())}},n.isItemAccept=function(e,t){var o,i;if(!e)return!1;var r=n.props.isEditing,a=null===(i=null===(o=e.manifest)||void 0===o?void 0:o.properties)||void 0===i?void 0:i.supportRepeat,s=n.props,l=s.builderSupportModules,c=s.widgetId,d=l.jimuForBuilderLib.getAppConfigAction().appConfig,u=l.widgetModules.selectionInList;return r&&a&&(!e.layoutInfo||e.layoutInfo&&u(e.layoutInfo,c,d,!1))},n.getEditorStyle=function(){return Object(o.css)(P||(P=F(["\n      &.list-card-content {\n        .fixed-layout {\n          border: 0 !important;\n        }\n      }\n    "],["\n      &.list-card-content {\n        .fixed-layout {\n          border: 0 !important;\n        }\n      }\n    "])))},n.state={didMount:!1},n.resizeRef=o.React.createRef(),n.providerData=n.getNewProviderData(),n}return H(t,e),t.prototype.shouldComponentUpdate=function(e,t){var n=this.shouldComponentUpdateExcept(e,t,["listStyle","selection"]);if(!(n=n||!o.utils.isDeepEqual(this.props.listStyle,e.listStyle))){var i=this.props,r=i.selectionIsInList;(i.selectionIsList||r)&&(n=!o.utils.isDeepEqual(this.props.selection,e.selection))}return n},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.selectionIsInList,o=t.isEditing,i=t.direction,a=t.isRTL,s=t.lockItemRatio,l=t.index;window.jimuConfig.isInBuilder&&0===l&&this.interactable&&(!o||n||s?this.interactable.resizable(!1):(this.interactable.resizable({edges:{top:!1,left:i===r.f.Horizon&&a,bottom:i===r.f.Vertical,right:i===r.f.Horizon&&!a}}),this.interactable.resizable(!0)))},t.prototype.componentDidMount=function(){var e=this;if(0===this.props.index&&window.jimuConfig.isInBuilder&&this.resizeRef.current){var t=this.props,n=t.interact,o=t.handleResizeCard,i=t.direction,a=t.isRTL;this.interactable=n(this.resizeRef.current).resizable({edges:{top:!1,left:i===r.f.Horizon&&a,bottom:i===r.f.Vertical,right:i===r.f.Horizon&&!a},modifiers:[n.modifiers.restrictEdges({outer:"parent",endOnly:!0}),n.modifiers.restrictSize({min:{width:r.h,height:r.h}})],inertia:!1,onstart:function(t){var n=e.props.changeIsResizingCard;n&&n(!0),t.stopPropagation()},onmove:function(t){t.stopPropagation(),e.lastResizeCall&&cancelAnimationFrame(e.lastResizeCall);var n=t.rect,i={width:n.right-n.left,height:n.bottom-n.top};e.lastResizeCall=requestAnimationFrame((function(){var e={};o(i,!1,e.top,e.left)}))},onend:function(t){t.stopPropagation(),e.lastResizeCall&&cancelAnimationFrame(e.lastResizeCall),e.lastResizeCall=requestAnimationFrame((function(){var n=t.rect,i={width:n.right-n.left,height:n.bottom-n.top};o(i,!0);var r=e.props.changeIsResizingCard;r&&r(!1)}))}})}this.setState({didMount:!0})},t.prototype.componentWillUnMount=function(){this.lastResizeCall&&cancelAnimationFrame(this.lastResizeCall),this.interactable&&(this.interactable.unset(),this.interactable=null)},t.prototype.handleBuilderStatusChange=function(e,t){this.editStatus("showCardSetting",t),this.editStatus("builderStatus",t),(0,this.props.selectCard)(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t.prototype.render=function(){var e=this.props,t=e.selectable,n=e.active,r=e.cardConfigs,a=e.LayoutEntry,s=e.selectionIsInList,l=e.isEditing,c=e.widgetId,d=e.listStyle,u=e.lockItemRatio,p=e.builderStatus,h=e.layouts,g=this.state.didMount,f=h[p],m=r[p].backgroundStyle,v=U({},i.styleUtils.toCSSStyle(m||{})),S=U({},i.styleUtils.toCSSStyle({borderRadius:(null==m?void 0:m.borderRadius)||0}||{})),b=this.getNewProviderData();return this.isProviderEqual(b,this.providerData)||(this.providerData=b),Object(o.jsx)(o.RepeatedDataSourceProvider,{data:this.providerData},Object(o.jsx)(i.ListGroupItem,{active:t&&n,css:this.getStyle(),style:U(U({},S),d),className:Object(o.classNames)("surface-1","list-card-"+c),onClick:this.handleItemClick,role:"listCardEditor"},g&&this.renderCardTools(),Object(o.jsx)("div",{className:"list-card-content d-flex",style:v,css:this.getEditorStyle(),ref:this.resizeRef},Object(o.jsx)(a,{isItemAccepted:this.isItemAccept,isRepeat:!0,layouts:f,isInWidget:!0}),l&&!s&&!u&&this._renderAction())))},t}(N),K=o.ReactRedux.connect((function(e,t){var n,i=t.selectionIsList,r=t.builderSupportModules,a=t.appMode,s=t.widgetId,l=t.browserSizeMode;if(!window.jimuConfig.isInBuilder||a===o.AppMode.Run)return{selection:void 0,showBreak:!1};var c=null===(n=null==r?void 0:r.widgetModules)||void 0===n?void 0:n.searchUtils,d=r.jimuForBuilderLib.getAppConfigAction().appConfig,u=0===t.index&&t.selectionIsInList&&e&&e.appRuntimeInfo&&e.appRuntimeInfo.selection;return{selection:u,showBreak:!i&&u&&c&&c.getRelatedLayoutItemsInWidgetByLayoutInfo(d,u,s,l).length>1}}))(Y),X=n(18),Z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(){return($=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},J=function(e){function t(t){var n=e.call(this,t)||this;return n.updateExpressionRecords=function(){var e,t;n.expressionRecords={},(null===(e=n.providerData)||void 0===e?void 0:e.dataSourceId)&&(null===(t=n.providerData)||void 0===t?void 0:t.record)&&(n.expressionRecords[n.providerData.dataSourceId]=n.providerData.record)},n.onUrlExpResolveChange=function(e){if(e.isSuccessful)n.setState({url:e.value});else{e.value;o.ExpressionResolverErrorCode.Failed,n.setState({url:""})}},n.handleItemClick=function(e){var t=n.props,o=t.onChange,i=t.active,r=n,a=r.providerData,s=r.linkRef,l=e.target&&e.target.tagName||"";if("a"===l.toLowerCase()||"button"===l.toLowerCase()||"linkClick"===e.exbEventType||i||s.current&&s.current.click(),i){var c=e.target&&e.target.tagName||"";"a"!==c.toLowerCase()&&"button"!==c.toLowerCase()&&"linkClick"!==e.exbEventType&&o(a&&a.record)}else o(a&&a.record);"linkClick"===e.exbEventType&&delete e.exbEventType},n.handleLinkClick=function(e){e.stopPropagation()},n.state={url:""},n.providerData=n.getNewProviderData(),n.updateExpressionRecords(),n.layoutRef=o.React.createRef(),n.linkRef=o.React.createRef(),n}return Z(t,e),t.prototype.shouldComponentUpdate=function(e,t){var n=this.shouldComponentUpdateExcept(e,t,["listStyle"]);return n=n||!o.utils.isDeepEqual(this.props.listStyle,e.listStyle)},t.prototype.render=function(){var e,t,n,s,l=this.props,c=l.selectable,d=l.active,u=l.cardConfigs,p=l.widgetId,h=l.listStyle,g=l.layouts,f=l.hoverLayoutOpen,m=l.appMode,v=l.isHover,S=l.linkParam,b=l.useDataSources,w=l.itemIdex,y=l.handleListMouseLeave,x=l.handleListMouseMove,C=this.props.queryObject,I=this.state.url;window.jimuConfig.isInBuilder&&m!==o.AppMode.Run?(t=u[r.n.Regular].backgroundStyle,e=g[r.n.Regular]):(e=g[r.n.Regular],t=u[r.n.Regular].backgroundStyle,S&&S.linkType&&(n=S.openType,s={linkType:S.linkType},S.linkType===o.LinkType.WebAddress?(s.value=I,C=void 0):s.value=S.value),f&&v&&g[r.n.Hover]&&(e=g[r.n.Hover],t=u[r.n.Hover].backgroundStyle),c&&d&&g[r.n.Selected]&&(e=g[r.n.Selected],t=u[r.n.Selected].backgroundStyle,C=void 0,s=void 0,n=void 0));var O=$({},i.styleUtils.toCSSStyle(t||{})),j=$({},i.styleUtils.toCSSStyle({borderRadius:(null==t?void 0:t.borderRadius)||0}||{})),M=this.getNewProviderData();return this.isProviderEqual(M,this.providerData)||(this.providerData=M,this.updateExpressionRecords()),Object(o.jsx)(o.RepeatedDataSourceProvider,{data:this.providerData},Object(o.jsx)(i.ListGroupItem,{active:c&&d,css:this.getStyle(),style:$($({},h),j),className:Object(o.classNames)("surface-1","list-card-"+p),onClick:this.handleItemClick,role:"listCardViewer"},Object(o.jsx)("div",{className:"list-card-content d-flex",onMouseLeave:y,onMouseMove:function(){x(w)},style:O},Object(o.jsx)("div",{className:"position-relative h-100 w-100"},Object(o.jsx)(X.Fragment,null,Object(o.jsx)(i._Link,{className:"p-0 w-100 h-100 position-absolute border-0 list-clear-background",ref:this.linkRef,to:s,onClick:this.handleLinkClick,target:n,queryObject:C}),Object(o.jsx)("div",{className:"d-flex w-100 h-100",ref:this.layoutRef},Object(o.jsx)(a.FixedLayoutViewer,{layouts:e}))))),Object(o.jsx)(o.ExpressionResolverComponent,{useDataSources:b,expression:null==S?void 0:S.expression,onChange:this.onUrlExpResolveChange,widgetId:this.props.widgetId})))},t}(N),ee=n(96),te=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ne=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},oe=new(0,o.esri.Sanitizer),ie=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({searchText:e,isShowSuggestion:!0},(function(){var t=n.props.onSearchTextChange;t&&t(e)}))},n.handleSubmit=function(e,t){void 0===t&&(t=!1);var o=n.props.onSubmit;o&&o(e,t)},n.onKeyUp=function(e){e&&e.target&&13===e.keyCode&&(n.setState({isShowSuggestion:!1}),n.handleSubmit(e.target.value,!0))},n.onSuggestionConfirm=function(e){n.setState({searchText:e,isShowSuggestion:!1},(function(){var t;n.handleSubmit(e),null===(t=n.props)||void 0===t||t.toggleSearchBoxVisible(!0)}))},n.handleClear=function(e){n.setState({searchText:""}),e.stopPropagation()},n.getStyle=function(){var e,t,i,r,a,s,l,c,d,u=n.props.theme;return Object(o.css)(A||(A=ne(["\n      position: relative;\n      .search-input {\n        cursor: pointer;\n        padding-left: 3px;\n        border: 0;\n        // border-bottom-width: 1px;\n        // border-bottom-style: solid;\n        // border-color: ",";\n        background: transparent;\n        height: ",";\n        min-width: 0;\n      }\n      .search-input:focus {\n        background: transparent;\n      }\n      .search-loading-con {\n        @keyframes loading {\n          0% {transform: rotate(0deg); };\n          100% {transform: rotate(360deg)};\n        }\n        width: ",";\n        height: ",";\n        min-width: ",";\n        border: 2px solid ",";\n        border-radius: 50%;\n        border-top: 2px solid ",";\n        box-sizing: border-box;\n        animation:loading 2s infinite linear;\n        margin-right: ",";\n      }\n      .clear-search, .search-back {\n        cursor: pointer;\n        padding: ",";\n        background: none;\n        border: none;\n        color: ","\n      }\n      .search-back {\n        margin-left: ",";\n      }\n      .clear-search:hover {\n        background: none;\n      }\n    "],["\n      position: relative;\n      .search-input {\n        cursor: pointer;\n        padding-left: 3px;\n        border: 0;\n        // border-bottom-width: 1px;\n        // border-bottom-style: solid;\n        // border-color: ",";\n        background: transparent;\n        height: ",";\n        min-width: 0;\n      }\n      .search-input:focus {\n        background: transparent;\n      }\n      .search-loading-con {\n        @keyframes loading {\n          0% {transform: rotate(0deg); };\n          100% {transform: rotate(360deg)};\n        }\n        width: ",";\n        height: ",";\n        min-width: ",";\n        border: 2px solid ",";\n        border-radius: 50%;\n        border-top: 2px solid ",";\n        box-sizing: border-box;\n        animation:loading 2s infinite linear;\n        margin-right: ",";\n      }\n      .clear-search, .search-back {\n        cursor: pointer;\n        padding: ",";\n        background: none;\n        border: none;\n        color: ","\n      }\n      .search-back {\n        margin-left: ",";\n      }\n      .clear-search:hover {\n        background: none;\n      }\n    "])),u.colors.primary,o.polished.rem(26),o.polished.rem(13),o.polished.rem(13),o.polished.rem(13),null===(i=null===(t=null===(e=null==u?void 0:u.colors)||void 0===e?void 0:e.palette)||void 0===t?void 0:t.secondary)||void 0===i?void 0:i[300],null===(s=null===(a=null===(r=null==u?void 0:u.colors)||void 0===r?void 0:r.palette)||void 0===a?void 0:a.primary)||void 0===s?void 0:s[500],o.polished.rem(4),o.polished.rem(6),null===(d=null===(c=null===(l=null==u?void 0:u.colors)||void 0===l?void 0:l.palette)||void 0===c?void 0:c.dark)||void 0===d?void 0:d[800],o.polished.rem(-6))},n.getSuggestionListStyle=function(){var e=n.props.suggestionWidth;return Object(o.css)(_||(_=ne(["\n      & {\n        max-height: ",";\n        min-width: ",";\n        overflow: auto;\n      }\n      button {\n        display: block;\n        width: 100%;\n        text-align: left;\n        border: none;\n        border-radius: 0;\n      }\n      button:hover {\n        border: none;\n      }\n    "],["\n      & {\n        max-height: ",";\n        min-width: ",";\n        overflow: auto;\n      }\n      button {\n        display: block;\n        width: 100%;\n        text-align: left;\n        border: none;\n        border-radius: 0;\n      }\n      button:hover {\n        border: none;\n      }\n    "])),o.polished.rem(300),o.polished.rem(e))},n.clearSearchText=function(){n.state.searchText&&(n.handleChange(""),n.setState({isShowSuggestion:!1}))},n.state={searchText:t.searchText||"",isShowSuggestion:!1},n}return te(t,e),t.prototype.componentDidUpdate=function(e){if(this.props.searchText!==e.searchText&&this.props.searchText!==this.state.searchText){var t=this.props.searchText;this.setState({searchText:t})}},t.prototype.render=function(){var e=this,t=this.props,r=t.placeholder,a=t.className,s=t.showClear,l=t.hideSearchIcon,c=t.inputRef,d=t.onFocus,u=t.onBlur,p=t.theme,h=t.searchSuggestion,g=t.showLoading,f=t.formatMessage,m=t.isShowBackButton,v=this.state,S=v.searchText,b=v.isShowSuggestion;return Object(o.jsx)("div",null,Object(o.jsx)("div",{css:this.getStyle(),className:"d-flex align-items-center "+a},m&&Object(o.jsx)(i.Button,{color:"tertiary",className:"search-back",icon:!0,size:"sm",onClick:function(t){var n;null===(n=e.props)||void 0===n||n.toggleSearchBoxVisible(!1)},title:f("topToolBack")},Object(o.jsx)(i.Icon,{size:20,icon:n(74),color:p.colors.palette.dark[800]})),!l&&!m&&Object(o.jsx)(i.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(t){return e.handleSubmit(e.state.searchText)}},Object(o.jsx)(i.Icon,{size:16,icon:n(82),color:p.colors.palette.light[800]})),Object(o.jsx)(i.TextInput,{className:"search-input",ref:c,placeholder:r,onChange:function(t){return e.handleChange(t.target.value)},onBlur:u,onFocus:d,value:S||"",onKeyDown:function(t){return e.onKeyUp(t)}}),g&&Object(o.jsx)("div",{className:"search-loading-con"}),S&&Object(o.jsx)(i.Button,{color:"tertiary",className:"clear-search",icon:!0,size:"sm",onClick:this.clearSearchText,title:f("clearSearch")},Object(o.jsx)(i.Icon,{size:14,icon:n(50),color:p.colors.palette.dark[800]})),s&&Object(o.jsx)(i.Button,{color:"tertiary",icon:!0,size:"sm",onClick:this.handleSubmit},Object(o.jsx)(i.Icon,{size:12,icon:n(50)}))),Object(o.jsx)("div",{ref:function(t){return e.reference=t}},Object(o.jsx)(i.Popper,{css:this.getSuggestionListStyle(),placement:"bottom-start",reference:this.reference,offset:[0,8],open:b,toggle:function(t){e.setState({isShowSuggestion:!b})}},h.map((function(t,n){var r=oe.sanitize(t.suggestionHtml);return Object(o.jsx)(i.Button,{key:n,type:"secondary",size:"sm",onClick:function(){e.onSuggestionConfirm(t.suggestion)},dangerouslySetInnerHTML:{__html:r}})})))))},t}(o.React.PureComponent);function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var ce=function(e,t){var n;void 0===t&&(t=le);var o,i=[],r=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r&&n===this&&t(a,i)||(o=e.apply(this,a),r=!0,n=this,i=a),o}};var de="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function ue(e){cancelAnimationFrame(e.id)}function pe(e,t){var n=de();var o={id:requestAnimationFrame((function i(){de()-n>=t?e.call(null):o.id=requestAnimationFrame(i)}))};return o}var he=null;function ge(e){if(void 0===e&&(e=!1),null===he||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var o=document.createElement("div"),i=o.style;return i.width="100px",i.height="100px",t.appendChild(o),document.body.appendChild(t),t.scrollLeft>0?he="positive-descending":(t.scrollLeft=1,he=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),he}return he}var fe=function(e,t){return e};function me(e){var t,n,o=e.getItemOffset,i=e.getEstimatedTotalSize,r=e.getItemSize,a=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,d=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return n=t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=c(n.props,se(se(n))),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:se(se(n)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=ce((function(e,t,o,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:o,visibleStopIndex:i})})),n._callOnScroll=void 0,n._callOnScroll=ce((function(e,t,o){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:o})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,i=n.props,a=i.direction,s=i.itemSize,l=i.layout,c=n._getItemStyleCache(d&&s,d&&l,d&&a);if(c.hasOwnProperty(e))t=c[e];else{var u=o(n.props,e,n._instanceProps),p=r(n.props,e,n._instanceProps),h="horizontal"===a||"horizontal"===l,g="rtl"===a,f=h?u:0;c[e]=t={position:"absolute",left:g?void 0:f,right:g?f:void 0,top:h?0:u,height:h?"100%":p,width:h?p:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=ce((function(e,t,n){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,o=t.clientWidth,i=t.scrollLeft,r=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,a=i;if("rtl"===t)switch(ge()){case"negative":a=-i;break;case"positive-descending":a=r-o-i}return a=Math.max(0,Math.min(a,r-o)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,o=t.clientHeight,i=t.scrollHeight,r=t.scrollTop;n.setState((function(e){if(e.scrollOffset===r)return null;var t=Math.max(0,Math.min(r,i-o));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&ue(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=pe(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}ae(t,e),t.getDerivedStateFromProps=function(e,t){return ve(e,t),u(e),null};var n=t.prototype;return n.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},n.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props.itemCount,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1)),this.scrollTo(a(this.props,e,t,o,this._instanceProps))},n.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,o=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===o?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},n.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,o=this.state,i=o.scrollOffset;if(o.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(ge()){case"negative":r.scrollLeft=-i;break;case"positive-ascending":r.scrollLeft=i;break;default:var a=r.clientWidth,s=r.scrollWidth;r.scrollLeft=s-a-i}else r.scrollLeft=i;else r.scrollTop=i}this._callPropsCallbacks()},n.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&ue(this._resetIsScrollingTimeoutId)},n.render=function(){var e=this.props,t=e.children,n=e.className,o=e.direction,r=e.height,a=e.innerRef,s=e.innerElementType,l=e.innerTagName,c=e.itemCount,d=e.itemData,u=e.itemKey,p=void 0===u?fe:u,h=e.layout,g=e.outerElementType,f=e.outerTagName,m=e.style,v=e.useIsScrolling,S=e.width,b=this.state.isScrolling,w="horizontal"===o||"horizontal"===h,y=w?this._onScrollHorizontal:this._onScrollVertical,x=this._getRangeToRender(),C=x[0],I=x[1],O=[];if(c>0)for(var j=C;j<=I;j++)O.push(Object(X.createElement)(t,{data:d,key:p(j,d),index:j,isScrolling:v?b:void 0,style:this._getItemStyle(j)}));var M=i(this.props,this._instanceProps);return Object(X.createElement)(g||f||"div",{className:n,onScroll:y,ref:this._outerRefSetter,style:re({position:"relative",height:r,width:S,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},m)},Object(X.createElement)(s||l||"div",{children:O,ref:a,style:{height:w?"100%":M,pointerEvents:b?"none":void 0,width:w?M:"100%"}}))},n._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],o=e[2],i=e[3];this._callOnItemsRendered(t,n,o,i)}if("function"==typeof this.props.onScroll){var r=this.state,a=r.scrollDirection,s=r.scrollOffset,l=r.scrollUpdateWasRequested;this._callOnScroll(a,s,l)}},n._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,o=this.state,i=o.isScrolling,r=o.scrollDirection,a=o.scrollOffset;if(0===t)return[0,0,0,0];var c=s(this.props,a,this._instanceProps),d=l(this.props,c,a,this._instanceProps),u=i&&"backward"!==r?1:Math.max(1,n),p=i&&"forward"!==r?1:Math.max(1,n);return[Math.max(0,c-u),Math.max(0,Math.min(t-1,d+p)),c,d]},t}(X.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},n}var ve=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Se=function(e,t,n){var o=e.itemSize,i=n.itemMetadataMap,r=n.lastMeasuredIndex;if(t>r){var a=0;if(r>=0){var s=i[r];a=s.offset+s.size}for(var l=r+1;l<=t;l++){var c=o(l);i[l]={offset:a,size:c},a+=c}n.lastMeasuredIndex=t}return i[t]},be=function(e,t,n,o,i){for(;o<=n;){var r=o+Math.floor((n-o)/2),a=Se(e,r,t).offset;if(a===i)return r;a<i?o=r+1:a>i&&(n=r-1)}return o>0?o-1:0},we=function(e,t,n,o){for(var i=e.itemCount,r=1;n<i&&Se(e,n,t).offset<o;)n+=r,r*=2;return be(e,t,Math.min(n,i-1),Math.floor(n/2),o)},ye=function(e,t){var n=e.itemCount,o=t.itemMetadataMap,i=t.estimatedItemSize,r=t.lastMeasuredIndex,a=0;if(r>=n&&(r=n-1),r>=0){var s=o[r];a=s.offset+s.size}return a+(n-r-1)*i},xe=me({getItemOffset:function(e,t,n){return Se(e,t,n).offset},getItemSize:function(e,t,n){return n.itemMetadataMap[t].size},getEstimatedTotalSize:ye,getOffsetForIndexAndAlignment:function(e,t,n,o,i){var r=e.direction,a=e.height,s=e.layout,l=e.width,c="horizontal"===r||"horizontal"===s?l:a,d=Se(e,t,i),u=ye(e,i),p=Math.max(0,Math.min(u-c,d.offset)),h=Math.max(0,d.offset-c+d.size);switch("smart"===n&&(n=o>=h-c&&o<=p+c?"auto":"center"),n){case"start":return p;case"end":return h;case"center":return Math.round(h+(p-h)/2);case"auto":default:return o>=h&&o<=p?o:o<h?h:p}},getStartIndexForOffset:function(e,t,n){return function(e,t,n){var o=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?o[i].offset:0)>=n?be(e,t,i,0,n):we(e,t,Math.max(0,i),n)}(e,n,t)},getStopIndexForStartIndex:function(e,t,n,o){for(var i=e.direction,r=e.height,a=e.itemCount,s=e.layout,l=e.width,c="horizontal"===i||"horizontal"===s?l:r,d=Se(e,t,o),u=n+c,p=d.offset+d.size,h=t;h<a-1&&p<u;)h++,p+=Se(e,h,o).size;return h},initInstanceProps:function(e,t){var n={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,o){void 0===o&&(o=!0),n.lastMeasuredIndex=Math.min(n.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),o&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});var Ce,Ie,Oe=n(97),je=n(34),Me=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Te=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ze=n(89),Re=[0,5],Le=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e,t){return n.props.formatMessage(e,t)},n.onPopperToggle=function(e){var t=n.props.filter,o=n.state.isOpen;o||n.setState({currentFilter:t}),n.setState({isOpen:!o})},n.onItemClick=function(e,t){n.setState({isOpen:!1}),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.handleFilterChange=function(e){n.setState({currentFilter:e})},n.handleApplyClick=function(e){var t=n.state.currentFilter,o=n.props,i=o.handleFilterApplyChange;(0,o.handleFilterChange)(t),i(!0),n.setState({isOpen:!1})},n.handleClearClick=function(e){(0,n.props.handleFilterApplyChange)(!1),n.setState({isOpen:!1})},n.getStyle=function(){var e=n.props.theme;return Object(o.css)(Ce||(Ce=Te(["\n      position: relative;\n      .dot {\n        position: absolute;\n        width: 6px;\n        height: 6px;\n        right: -2px;\n        top: 0px;\n        .dot-bottom {\n          width: 6px;\n          height: 6px;\n          background-color: transparent;\n          .dot-top {\n            width: 4px;\n            height: 4px;\n            background-color: ",";\n          }\n        }\n      }\n      :hover {\n        .dot-top {\n          background-color: ",";\n        }\n      }\n      & .active {\n        .dot-top {\n          background-color: ",";\n        }\n        :hover {\n          .dot-top {\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      position: relative;\n      .dot {\n        position: absolute;\n        width: 6px;\n        height: 6px;\n        right: -2px;\n        top: 0px;\n        .dot-bottom {\n          width: 6px;\n          height: 6px;\n          background-color: transparent;\n          .dot-top {\n            width: 4px;\n            height: 4px;\n            background-color: ",";\n          }\n        }\n      }\n      :hover {\n        .dot-top {\n          background-color: ",";\n        }\n      }\n      & .active {\n        .dot-top {\n          background-color: ",";\n        }\n        :hover {\n          .dot-top {\n            background-color: ",";\n          }\n        }\n      }\n    "])),e.colors.palette.dark[600],e.colors.palette.primary[500],e.colors.white,e.colors.white)},n.getPopperStyle=function(){return Object(o.css)(Ie||(Ie=Te(["\n      .filter-button-con button {\n        max-width: ",";\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    "],["\n      .filter-button-con button {\n        max-width: ",";\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    "])),o.polished.rem(100))},n.toggleRef=o.React.createRef(),n.state={isOpen:!1,currentFilter:t.filter},n}return Me(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.filter,i=t.appMode;n!==e.filter&&this.setState({currentFilter:n}),i!==e.appMode&&i===o.AppMode.Design&&this.setState({isOpen:!1})},t.prototype.render=function(){var e=this.props,t=e.filter,n=e.selectedDs,r=e.widgetId,a=e.title,s=e.applied,l=this.state,c=l.isOpen,d=l.currentFilter,u=s&&(null==t?void 0:t.sql)===(null==d?void 0:d.sql);return Object(o.jsx)(X.Fragment,null,Object(o.jsx)(i.Button,{css:this.getStyle(),size:"sm",type:"tertiary",icon:!0,title:a,ref:this.toggleRef,onClick:this.onPopperToggle},Object(o.jsx)(i.Icon,{icon:ze,size:16}),s&&Object(o.jsx)("div",{className:"dot align-items-center justify-content-center"},Object(o.jsx)("div",{className:"dot-bottom rounded-circle"},Object(o.jsx)("div",{className:"dot-top rounded-circle"})))),Object(o.jsx)(i.Popper,{placement:"bottom-start",reference:this.toggleRef.current,offset:Re,toggle:this.onPopperToggle,css:this.getPopperStyle(),open:c},Object(o.jsx)("div",{style:{padding:o.polished.rem(20),width:o.polished.rem(250)}},Object(o.jsx)("div",null,Object(o.jsx)(je.SqlExpressionRuntime,{widgetId:r,dataSource:n,expression:d,onChange:this.handleFilterChange})),Object(o.jsx)("div",{className:"d-flex w-100 mt-3 filter-button-con"},Object(o.jsx)(i.Button,{disabled:u,onClick:this.handleApplyClick,type:"primary",title:this.formatMessage("apply")},this.formatMessage("apply")),Object(o.jsx)(i.Button,{disabled:!s,style:{marginLeft:o.polished.rem(19)},onClick:this.handleClearClick,title:this.formatMessage("clear")},this.formatMessage("clear"))))))},t}(o.React.PureComponent),ke=n(63),De=n(64),Pe=n(54),Ae=n(52);function _e(e){var t=e.isRTL,n=e.totalPage,a=e.pageStyle,s=e.direction,l=e.currentPage,c=e.scrollStatus,d=e.isScrollEnd,u=e.isEditing,p=e.showLoading,h=e.handleScrollDown,g=e.handleScrollUp,f=e.handleSwitchPage,m=e.formatMessage;return o.React.createElement("div",{className:"bottom-tools w-100 d-flex align-items-center justify-content-center pl-2 pr-2"},a===r.l.MultiPage?o.React.createElement(i.Pagination,{size:"sm",totalPage:n,current:l,onChangePage:f,disabled:p}):o.React.createElement("div",{className:"d-flex scroll-navigator"},o.React.createElement(i.Button,{title:m("previous"),disabled:"start"===c,type:"secondary",size:"sm",icon:!0,onClick:g},o.React.createElement(i.Icon,{autoFlip:!0,icon:s===r.f.Horizon?Pe:De,size:12})),o.React.createElement(i.Button,{title:m("next"),disabled:"end"===c||d,type:"secondary",size:"sm",style:t?{marginRight:o.polished.rem(10)}:{marginLeft:o.polished.rem(10)},icon:!0,onClick:h},o.React.createElement(i.Icon,{autoFlip:!0,icon:s===r.f.Horizon?Ae:ke,size:12}))),window.jimuConfig.isInBuilder&&u&&o.React.createElement("div",{className:"editing-mask-bottom-tool"}))}var Ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Be=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},Ne=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},He=function(e,t){var n,i,r;return Be(this,void 0,Promise,(function(){var a,s,l;return Ne(this,(function(c){switch(c.label){case 0:return s=null===(r=null===(i=null===(n=Object(o.getAppStore)().getState())||void 0===n?void 0:n.appConfig)||void 0===i?void 0:i.widgets[t])||void 0===r?void 0:r.useDataSources[0],l=o.DataSourceManager.getInstance(),e&&s&&(a=l.createDataSourceByUseDataSource(Object.assign({},s,{mainDataSourceId:s.mainDataSourceId}),"localId")),[4,Promise.resolve(a)];case 1:return[2,c.sent()]}}))}))},Fe=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versions=[{version:"1.1.0",description:"",upgrader:function(e,n){return Be(t,void 0,void 0,(function(){var t;return Ne(this,(function(o){switch(o.label){case 0:return t=e.filter,[4,He(t,n).then((function(n){var o=e,i=t?Object(je.updateSQLExpressionByVersion)(t,"1.1.0",n):null;return o=o.set("filter",i)}))];case 1:return[2,o.sent()]}}))}))}}],t}return Ee(t,e),t}(o.BaseVersionManager));function Ue(e,t,n){return n===r.f.Horizon?We(e.width,t.width):We(e.height,t.height)}function We(e,t){return Math.abs(e-t)<1e-4}function Ve(e){var t=e.config,n=e.builderStatus,o=e.browserSizeMode,i=t.cardConfigs[n];i&&i.cardSize||(i=t.cardConfigs[r.n.Regular]);var a=i.cardSize[o];return a||(a=i.cardSize[Object.keys(i.cardSize)[0]]),a}function qe(e,t,n){var o,i=Ve(n),a=n.config,s=n.isHeightAuto,l=n.isWidthAuto;if(a.pageStyle===r.l.Scroll){if(!e)return 0;if(a.direction===r.f.Vertical){if(0===e.height)return 0;s&&(t=document.body.scrollHeight),o=Math.ceil(t/(i.height+a.space))+1}else{if(0===e.width)return 0;var c=e.width;l&&(c=document.body.scrollWidth),o=Math.ceil(c/(i.width+a.space))+1}a.navigatorOpen&&(o=Math.max(o,a.scrollStep))}else o=a.itemsPerPage;return o}function Ge(e,t){var n=r.a;return e&&(n=e.clientHeight),n=t?n:0}function Qe(e,t,n){var o=n?r.e:0;if(!e)return 0;var i=e.height-o-t;return i<0?0:i}function Ye(e,t){var n=e.config;return!(!t.datasource||n.pageStyle===r.l.Scroll&&!n.navigatorOpen)}function Ke(e){return Xe(e)||Je(e)||et(e)||$e(e)||Ze(e)}function Xe(e){var t=e.config;if(!t.sortOpen||!t.sorts||t.sorts.length<1)return!1;var n=t.sorts,o=!1;return n.some((function(e){return e.rule&&e.rule.some((function(e){return e&&e.jimuFieldName&&(o=!0),o})),o})),o}function Ze(e){var t=e.config;return t.searchOpen&&t.searchFields&&""!==t.searchFields}function $e(e){var t=e.config;return t.filterOpen&&!!t.filter}function Je(e){var t=e.config;return t.showSelectedOnlyOpen&&t.cardConfigs[r.n.Selected].selectionMode!==r.m.None}function et(e){var t=e.config;return t.showClearSelected&&t.cardConfigs[r.n.Selected].selectionMode!==r.m.None}var tt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ot=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},it=n(127),rt=n(128),at=n(129),st=n(82),lt=n(316),ct=n(130),dt=[{fake:!0},{fake:!0},{fake:!0}],ut=Object.assign({},ee.a,i.defaultMessages),pt=function(e){function t(t){var n=e.call(this,t)||this;n.isFirstLoad=!0,n.isHasScrolled=!1,n.updateWidgetRectTimeout=void 0,n.getBodySize=function(){n.bodySize={scrollWidth:document.body.scrollWidth,scrollHeight:document.body.scrollHeight,clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight}},n.updateListInBuilder=function(e,t){var o=n.props.config;if(!window.jimuConfig.isInBuilder)return!1;var i=Ve(n.props),a=n.layoutPropertiesChange(e);n.updateScrollContentSize(e.config),n.pageTypeChange(e),n.useDatasourcesChange(e),(a=n.listDivSizeChange(e,t,i,a))&&n.updateCardToolPosition(),n.listSortChange(e),n.listFilterChange(e),o.cardConfigs[r.n.Selected].selectionMode!==e.config.cardConfigs[r.n.Selected].selectionMode&&n.selectRecords([])},n.layoutPropertiesChange=function(e){var t=n.props,o=t.config,i=t.top,r=t.left,a=!1;if(!window.jimuConfig.isInBuilder)return!1;var s=!1,l=Ve(n.props),c=Ve(e);n.updateScrollContentSize(e.config);var d=i!==e.top||r!==e.left,u=o.direction!==e.config.direction,p=!Ue(c,l,o.direction);if(u||p||d)if(a=!0,p){var h={currentCardSize:l};s=!0,n.setState(h,(function(){s&&n.refreshList()}))}else u&&n.handleResizeCard(n.state.currentCardSize,!0,!1,!1,!0);return s||We(o.space,e.config.space)&&o.direction===e.config.direction||(s=!0,n.refreshList()),a},n.listDivSizeChange=function(e,t,o,i){var a,s=n.props,l=s.config,c=s.isHeightAuto,d=n.state.listDivSize,u=Ye(n.props,n.state),p=Ye(e,t),h=Ke(n.props),g=Ke(e);if(u!==p||h!==g)if(c)i=!0;else if(l.direction===r.f.Horizon){var f=(null===(a=n.state.widgetRect)||void 0===a?void 0:a.height)||(null==d?void 0:d.clientHeight);if((f-=Ge(n.paginatorDiv.current,u)+(h?1:0)*r.e)<r.h)return;var m={height:f,width:o.width};n.handleResizeCard(m,!0,!1,!1,!0)}return i},n.appModeChange=function(e){var t=n.props,i=t.appMode,a=t.selectionIsSelf,s=t.selectionStatus,l=t.builderStatus;e.appMode!=i&&(i===o.AppMode.Run?n.editBuilderAndSettingStatus(r.n.Regular):(s!==l&&(s?n.editBuilderAndSettingStatus(s):a||n.editBuilderAndSettingStatus(r.n.Regular)),n.setState({showSelectionOnly:!1,searchText:void 0,filterApplied:!1,hoverIndex:-1},(function(){n.scrollToIndex(0)}))))},n.pageTypeChange=function(e){n.props.config.pageStyle!==e.config.pageStyle&&n.setState({page:1})},n.useDatasourcesChange=function(e){var t=n.props.useDataSources,o=e.useDataSources;if(t&&t[0]){var i=o&&o[0];i&&i.dataSourceId===t[0].dataSourceId||n.setState({page:1})}else n.setState({datasource:void 0})},n.listSortChange=function(e){var t=n.props.config;t.sortOpen&&(t.sorts!==e.config.sorts&&n.setState({sortOptionName:void 0}))},n.listFilterChange=function(e){var t=n.props.config;t.filterOpen&&(t.filter!==e.config.filter&&n.setState({currentFilter:void 0,filterApplied:!1}))},n.setSelectionStatus=function(){var e=n.props,t=e.id,i=e.selectionIsInSelf;n.props.dispatch(o.appActions.widgetStatePropChange(t,"selectionIsInSelf",i))},n.updateScrollContentSize=function(e){var t=n.props.config;t.direction===e.direction&&t.space===e.space||n.setScrollContentSize()},n.scrollToSelectedItems=function(e){var t=e.getSelectedRecordIds();if(n.isMySelected)return n.isMySelected=!1,void(n.lastSelectedRecordIds=t||[]);if(t&&t.length>0){var o=!0;if(n.lastSelectedRecordIds&&t.length===n.lastSelectedRecordIds.length?t.some((function(e){if(!n.lastSelectedRecordIds.find((function(t){return t===e})))return o=!1,!0})):o=!1,!o||n.needScroll){var i=-1;if(n.records&&n.records.find((function(e,n){var o;if((null===(o=e.getId)||void 0===o?void 0:o.call(e))===t[0])return i=n,!0})),-1===i){var r=e.getRecords();if(r&&r.find((function(e,n){var o;if((null===(o=e.getId)||void 0===o?void 0:o.call(e))===t[0])return i=n,!0})),i>-1){var a=Math.ceil((i+1)/n.getPageSize());n.needScroll=!0,n.setState({page:a})}}else n.scrollToIndex(i),n.needScroll=!1}}n.lastSelectedRecordIds=t||[]},n.onDSCreated=function(e){n.setState({datasource:e})},n.onResize=function(e,t){var o={width:e,height:t},i=n.props.config;if(!n.state.isResizingCard){var a=Ye(n.props,n.state),s=Qe(o,Ge(n.paginatorDiv.current,a),Ke(n.props)),l=n.state.currentCardSize,c={width:l.width,height:l.height},d=!1;if(i.lockItemRatio){var u=c.width/c.height;i.direction===r.f.Horizon?(c.height=s,c.width=s*u,We(c.width,l.width)||(d=!0)):(c.height=e/u,c.width=e,We(c.height,l.height)||(d=!0))}else i.direction===r.f.Horizon?c.height=s:c.width=e;c.width<r.h||c.height<r.h||(n.setState({widgetRect:o,currentCardSize:c},(function(){d&&n.refreshList()})),n.resizeTimeout&&(clearTimeout(n.resizeTimeout),n.resizeTimeout=void 0),i.lockItemRatio&&(n.resizeTimeout=setTimeout((function(){n.handleResizeCard(c,!0,!1,!1,!0)}),500)),n.updateCardToolPosition(),n.setListDivSize(),Ue(c,l,i.direction))}},n.updateCardToolPosition=function(){n.props.selectionIsSelf&&(n.setState({hideCardTool:!0}),n.updateCardToolTimeout&&(clearTimeout(n.updateCardToolTimeout),n.updateCardToolTimeout=void 0),n.updateCardToolTimeout=setTimeout((function(){n.setState({hideCardTool:!1})}),500))},n.refreshList=function(e){void 0===e&&(e=!0),n.listRef.current&&n.listRef.current.resetAfterIndex(0,e)},n.isDsConfigured=function(){var e=n.props.useDataSources;return!!e&&!!e[0]},n.selectRecords=function(e){var t=n.state.datasource;if(t&&(o.MessageManager.getInstance().publishMessage(new o.DataRecordsSelectionChangeMessage(n.props.id,e)),e)){n.isMySelected=!0,t.selectRecordsByIds(e.map((function(e){return e.getId()})));var i=n.getOutputDs();i&&i.selectRecordsByIds(e.map((function(e){return e.getId()})))}},n.formatMessage=function(e,t){return n.props.intl.formatMessage({id:e,defaultMessage:ut[e]},t)},n.editStatus=function(e,t){var i=n.props,r=i.dispatch,a=i.id;r(o.appActions.widgetStatePropChange(a,e,t))},n.editWidgetConfig=function(e){window.jimuConfig.isInBuilder&&n.props.builderSupportModules.jimuForBuilderLib.getAppConfigAction().editWidgetConfig(n.props.id,e).exec()},n.scrollToIndex=function(e,t){void 0===t&&(t="start"),n.listRef.current&&n.listRef.current.scrollToItem(e,t)},n.isEditing=function(){var e=n.props,t=e.appMode,i=e.config,r=e.selectionIsSelf,a=e.selectionIsInSelf;return!!window.jimuConfig.isInBuilder&&((r||a)&&window.jimuConfig.isInBuilder&&t!==o.AppMode.Run&&i.isItemStyleConfirm)},n.handleItemChange=function(e){var t=n.props.config,o=n.state.datasource;if(o&&e){var i=o.getSelectedRecords()||[];if(t.cardConfigs[r.n.Selected].selectionMode&&t.cardConfigs[r.n.Selected].selectionMode!==r.m.None){var a=null==e?void 0:e.getId(),s=i.find((function(e){return e.getId()===a}));t.cardConfigs[r.n.Selected].selectionMode===r.m.Single?s?(n.selectRecords([]),n.setState({showSelectionOnly:!1})):n.selectRecords([e]):(i=s?i.filter((function(e){return e.getId()!==a})):[e].concat(i),n.selectRecords(i))}}},n.handleListPointerDown=function(e){n.setState({forceShowMask:!0}),n.mouseClickTimeout&&(clearTimeout(n.mouseClickTimeout),n.mouseClickTimeout=void 0),n.mouseClickTimeout=setTimeout((function(){n.setState({forceShowMask:!1})}),200)},n.handleScrollUp=function(e){var t=n.props.config.scrollStep,o=n.getListVisibleStartIndex()-t;o<0&&(o=0),n.scrollToIndex(o,"start")},n.handleScrollDown=function(e){var t=n.props.config.scrollStep,o=n.listVisibleStopIndex,i=n.getListVisibleStartIndex();o+t>=n.records.length-1&&n.records.length<n.getTotalCount()?(n.isSwitchPage=!0,n.setState({page:n.state.page+1})):n.scrollToIndex(i+t,"start")},n.handleSwitchPage=function(e){var t=n.getTotalPage();e<1||e>t||e!==n.state.page&&(n.isSwitchPage=!0,n.lastQueryStart=n.state.page,n.setState({page:e}))},n.handleListMouseLeave=function(){n.isEditing()||n.setState({hoverIndex:-1})},n.handleListMouseMove=function(e){n.isEditing()||e!==n.state.hoverIndex&&n.setState({hoverIndex:e})},n.lastScrollOffset=0,n.handleListScroll=function(e){e.scrollDirection;var t,i,a=e.scrollOffset,s=(e.scrollUpdateWasRequested,n.props),l=s.appMode,c=s.config,d=n.listOutDivRef,u=n.state,p=u.datasource,h=u.scrollStatus;n.lastScrollOffset=a,!d||(null!==(i=null===(t=n.records)||void 0===t?void 0:t.length)&&void 0!==i?i:0)<1||c.pageStyle!==r.l.Scroll||n.queryStatus===o.DataSourceStatus.Loading||!p||window.jimuConfig.isInBuilder&&l!==o.AppMode.Run||(n.isHasScrolled=!0,!function(e,t){return!e||t<2}(d,n.lastScrollOffset)?"mid"!==h&&n.setState({scrollStatus:"mid"}):"start"!==h&&n.setState({scrollStatus:"start"}))},n.getTotalPage=function(){var e=n.totalCount,t=n.props.config,o=e,i=Math.floor(o/t.itemsPerPage);return 0===o%t.itemsPerPage?i:i+1},n.getListVisibleStartIndex=function(){var e=n.lastScrollOffset,t=n.props.config,o=n.itemSize(0),i=1*e/o,r=Math.floor(i);return(i-r)*o>o-t.space&&r++,r},n.handleSortOptionChange=function(e,t){n.setState({sortOptionName:t.label,page:1},(function(){}))},n.handleSearchTextChange=function(e){var t=n;""!==e&&e||n.handleSearchSubmit(void 0),clearTimeout(t.suggestionsQueryTimeout),n.suggestionsQueryTimeout=setTimeout((function(){t.getSearchSuggestions(e)}),200)},n.getSearchSuggestions=function(e){c(e,n.props.config,n.state.datasource).then((function(e){n.setState({searchSuggestion:e})}))},n.handleSearchSubmit=function(e,t){void 0===t&&(t=!1),(n.state.searchText!==e||t)&&n.setState({searchText:e,page:1},(function(){}))},n.handleFilterChange=function(e){n.setState({currentFilter:e,page:1},(function(){}))},n.handleFilterApplyChange=function(e){var t={filterApplied:e,queryStart:0};n.setState(t,(function(){}))},n.handleShowSelectionClick=function(e){var t=n.state.showSelectionOnly;n.setState({showSelectionOnly:!t})},n.handleClearSelectionClick=function(e){n.setState({showSelectionOnly:!1}),n.selectRecords([])},n.resetShowSelectionStatus=function(){n.state.showSelectionOnly&&n.setState({showSelectionOnly:!1})},n._getCurrentPage=function(){return n.state.page},n.getTotalCount=function(){return n.totalCount||0},n.selectCard=function(){n.props.selectionIsInSelf&&n.selectSelf()},n.editBuilderAndSettingStatus=function(e){n.editStatus("showCardSetting",e),n.editStatus("builderStatus",e)},n.getSortItems=function(){var e=n.props.config,t=[];return e.sorts&&e.sorts.forEach((function(e){e.rule&&e.rule.forEach((function(o){o&&o.jimuFieldName&&t.push({label:e.ruleOptionName,event:n.handleSortOptionChange})}))})),Object(o.Immutable)(t)},n.renderListTopTools=function(e,t,a){var s,l,c=n.state,d=c.widgetRect,u=c.isSearchBoxVisible,p=c.isOpenTopToolsPopper,h=(null==d?void 0:d.width)||620,g=Ke(n.props),f=n.formatMessage("listDataActionLable",{layer:(null===(l=null===(s=e)||void 0===s?void 0:s.layerDefinition)||void 0===l?void 0:l.name)||""}),m=n.checkIsShowDataAction()?r.j:r.k;return Object(o.jsx)("div",{className:"datasource-tools w-100",css:C(n.props,g)},Object(o.jsx)("div",{className:"d-flex align-items-center"},Object(o.jsx)("div",{className:"flex-grow-1 tool-row"},g&&Object(o.jsx)("div",null,h>=m&&Object(o.jsx)("div",{className:"tool-row row1 d-flex align-items-center w-100 justify-content-between"},n.renderSearchTools(e,t),(!u||h>=360)&&n.renderTopRightTools(e,t)),h<m&&Object(o.jsx)("div",{className:"float-right",ref:function(e){return n.reference=e}},Object(o.jsx)(i.Button,{type:"tertiary",icon:!0,size:"sm",className:"tools-menu",title:n.formatMessage("guideStep9Title"),onClick:function(e){n.setState({isOpenTopToolsPopper:!p})}},Object(o.jsx)(i.Icon,{size:16,icon:lt})),n.renderListTopToolsInPoper(e,t)))),e&&n.checkIsShowDataAction()&&Object(o.jsx)("div",{className:Object(o.classNames)("list-data-action",{"m-left":h<m}),"data-testid":"data-action"},Object(o.jsx)(i.DataActionDropDown,{dataName:f,type:"tertiary",widgetId:n.props.id,dataSource:e,size:"sm",records:a}))),window.jimuConfig.isInBuilder&&n.isEditing()&&Object(o.jsx)("div",{className:"editing-mask-ds-tool"}))},n.renderListTopToolsInPoper=function(e,t){var a=n.state,s=a.widgetRect,l=a.isSearchBoxVisible,c=a.isOpenTopToolsPopper,d=n.isEditing(),u=((null==s?void 0:s.width)||620)<(n.checkIsShowDataAction()?r.j:r.k)&&c&&!d;return Object(o.jsx)("div",null,Object(o.jsx)(i.Popper,{placement:"bottom-start",reference:n.reference,offset:[-10,0],open:u,showArrow:!0,toggle:function(e){n.setState({isOpenTopToolsPopper:!u})}},Object(o.jsx)("div",{className:"tool-row row1 d-flex align-items-end justify-content-between",css:y(n.props)},n.renderSearchTools(e,t),!l&&n.renderTopRightTools(e,t))))},n.renderSearchTools=function(e,t){var r=n.isEditing()||!e||t!==o.DataSourceStatus.Loaded,a=n.state,s=a.searchText,l=a.widgetRect,c=a.isSearchBoxVisible,d=a.showLoading,u=(null==l?void 0:l.width)||620,p=n.props,h=p.theme,g=p.config,f=u<360?"ds-tools-line-blue":"",m=(null==g?void 0:g.searchHint)||n.formatMessage("search"),v=u<360&&c;return Object(o.jsx)("div",{className:"list-search-div flex-grow-1",css:x(n.props)},Ze(n.props)&&Object(o.jsx)("div",{className:"d-flex search-box-content"},(u>=360||c)&&Object(o.jsx)("div",{className:"flex-grow-1 w-100"},Object(o.jsx)(ie,{theme:h,placeholder:m,searchText:s,onSearchTextChange:n.handleSearchTextChange,onSubmit:n.handleSearchSubmit,disabled:r,searchSuggestion:n.state.searchSuggestion,suggestionWidth:u,showLoading:d,formatMessage:n.formatMessage,isShowBackButton:v,toggleSearchBoxVisible:n.toggleSearchBoxVisible,className:"list-search "}),Object(o.jsx)("div",{className:Object(o.classNames)("ds-tools-line",f)})),u<360&&!c&&Object(o.jsx)(i.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(e){n.toggleSearchBoxVisible(!0)},title:n.formatMessage("search")},Object(o.jsx)(i.Icon,{size:16,icon:st,color:h.colors.palette.light[800]}))))},n.toggleSearchBoxVisible=function(e){void 0===e&&(e=!1);var t=n.state.widgetRect;n.setState({isSearchBoxVisible:e});var o=n.checkIsShowDataAction()?r.j:r.k;((null==t?void 0:t.width)||620)<o&&(clearTimeout(n.showPopperTimeOut),n.showPopperTimeOut=setTimeout((function(){n.setState({isOpenTopToolsPopper:!0})})))},n.getPageSize=function(){var e=n.state.widgetRect,t=Ye(n.props,n.state),o=Qe(e,Ge(n.paginatorDiv.current,t),Ke(n.props))||1;return Math.max(qe(e,o,n.props),1)},n.renderTopRightTools=function(e,t){var r=n.state,a=r.sortOptionName,s=r.showSelectionOnly,l=r.currentFilter,c=r.filterApplied,d=n.props,u=d.config,p=d.theme,h=d.id,g=d.appMode,f=d.isRTL,m=n.getSortItems(),v=e&&e.getSelectedRecords(),S=v&&v.length>0,b=f?rt:it;return Object(o.jsx)("div",{className:"d-flex align-items-center mr-1",ref:n.listTopRightToolsDiv},Xe(n.props)&&Object(o.jsx)(X.Fragment,null,Object(o.jsx)(Oe.a,{theme:p,items:m,appMode:g,toggleType:"tertiary",toggleContent:function(e){return a||m&&m[0].label},size:"sm",caret:!0,showActive:!0,toggleTitle:n.formatMessage("listSort"),activeLabel:a||m&&m[0].label})),$e(n.props)&&Object(o.jsx)(Le,{filter:l||u.filter,appMode:g,applied:c,title:n.formatMessage("filter"),selectedDs:n.state.datasource,handleFilterChange:n.handleFilterChange,handleFilterApplyChange:n.handleFilterApplyChange,formatMessage:n.formatMessage,theme:p,widgetId:h}),Je(n.props)&&Object(o.jsx)(i.Button,{disabled:!S,type:"tertiary",title:s?n.formatMessage("showAll"):n.formatMessage("showSelection"),icon:!0,size:"sm",onClick:n.handleShowSelectionClick},Object(o.jsx)(i.Icon,{icon:s?ct:b,size:16})),et(n.props)&&Object(o.jsx)(i.Button,{disabled:!S,type:"tertiary",title:n.formatMessage("clearSelection"),icon:!0,size:"sm",onClick:n.handleClearSelectionClick},Object(o.jsx)(i.Icon,{icon:at,size:16})))},n.checkIsShowDataAction=function(){var e,t,i,r=n.props.id,a=null===(t=null===(e=Object(o.getAppStore)())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.appConfig,s=null===(i=null==a?void 0:a.widgets)||void 0===i?void 0:i[r];return(void 0===(null==s?void 0:s.enableDataAction)||(null==s?void 0:s.enableDataAction))&&n.isDsConfigured()},n.renderList=function(e,t){var a,s,l,c,d,u,p,h=n.state,g=h.LayoutEntry,f=h.showSelectionOnly,m=h.widgetRect,v=h.scrollStatus,S=h.autoRefreshLoadingString,w=h.toolsDivWidth,y=h.currentCardSize,x=h.isScrollEnd,C=h.isMount,I=n.props,O=I.config,j=I.isRTL,M=I.appMode,T=I.showLoading,z=I.theme,R=I.isHeightAuto,L=I.isWidthAuto,k=null==t?void 0:t.status,D=null==e?void 0:e.count;if(n.queryStatus=k,!C)return!1;k===o.DataSourceStatus.Unloaded?e=void 0:k===o.DataSourceStatus.Loaded&&null!==D&&(n.totalCount!==D&&(n.setPageTimeout=setTimeout((function(){n.setState({page:1})}),1)),n.totalCount=D);var P=!1;(T||window.jimuConfig.isInBuilder&&!g||e&&k===o.DataSourceStatus.Loading)&&(P=!0);var A=(null==e?void 0:e.getAutoRefreshInterval())||0;n.resetAutoRefreshTimes(P,A),A>0&&n.setRefreshLoadingString(P);var _,E=dt,B=Ye(n.props,n.state),N=Ge(n.paginatorDiv.current,B),H=Ke(n.props),F=Qe(m,N,H)||1,U=qe(m,F,n.props),W=m&&m.width||r.h,V=window.jimuConfig.isInBuilder&&M!==o.AppMode.Run?0:U;e&&O.isItemStyleConfirm&&(E=e&&(O.pageStyle===r.l.Scroll?e.getRecordsByPageWithSelection(1,U*n.state.page):e.getRecordsByPageWithSelection(n.state.page,U))||[],_=e.getSelectedRecords(),f&&(E=_)),window.jimuConfig.isInBuilder&&M!==o.AppMode.Run&&!P&&E.length<1&&(E=dt),P&&!n.isFirstLoad||(n.records=E),n.isFirstLoad=!1,0==E.length&&n.resetShowSelectionStatus(),n.lastSpace!==O.space&&(n.lastSpace=O.space,n.innerElementType=Object(X.forwardRef)((function(e,t){var n=e.style,i=ot(e,["style"]);return Object(o.jsx)("div",nt({ref:t,style:nt(nt({},n),{height:parseFloat(n.height)-(O.direction===r.f.Horizon?0:O.space)+"px",width:parseFloat(n.width)-(O.direction===r.f.Vertical?0:O.space)+"px"})},i))})));var q=null==e?void 0:e.getLabel(),G=null===o.appConfigUtils||void 0===o.appConfigUtils?void 0:o.appConfigUtils.getWidgetIdByOutputDataSource(null===(s=null===(a=n.props)||void 0===a?void 0:a.useDataSources)||void 0===s?void 0:s[0]),Q=null===(l=Object(o.getAppStore)().getState())||void 0===l?void 0:l.appConfig,Y=null===(d=null===(c=null==Q?void 0:Q.widgets)||void 0===c?void 0:c[G])||void 0===d?void 0:d.label,K={pageStyle:null==O?void 0:O.pageStyle,scrollBarOpen:null==O?void 0:O.scrollBarOpen,direction:null==O?void 0:O.direction,appMode:M,theme:z,isHeightAuto:R,isWidthAuto:L,currentCardSize:y,showTopTools:H||n.checkIsShowDataAction(),bottomToolH:N,topRightToolW:w,hasRecords:(null!==(p=null===(u=n.records)||void 0===u?void 0:u.length)&&void 0!==p?p:0)>0,mexSize:n.getListMaxSize()},Z=b(K);return Object(o.jsx)("div",{"data-testid":"listContainer",className:"list-container animation",css:Z},(H||n.checkIsShowDataAction())&&n.renderListTopTools(e,k,_),Object(o.jsx)(xe,{className:"widget-list-list",ref:n.listRef,useIsScrolling:!0,outerRef:n.setListOutDivRef,direction:j?"rtl":"ltr",layout:O.direction===r.f.Horizon?"horizontal":"vertical",itemCount:n.records.length,overscanCount:V,itemKey:n.itemKey,width:W,height:F,onItemsRendered:n.onItemsRendered,itemData:n.getItemsByRecords(n.records),innerElementType:n.innerElementType,itemSize:n.itemSize,onScroll:n.handleListScroll},n.itemRender),B&&Object(o.jsx)("div",{ref:n.paginatorDiv},Object(o.jsx)(_e,{isRTL:j,totalPage:n.getTotalPage(),currentPage:n._getCurrentPage(),isEditing:n.isEditing(),isScrollEnd:x,pageStyle:O.pageStyle,direction:O.direction,scrollStatus:v,handleScrollUp:n.handleScrollUp,handleScrollDown:n.handleScrollDown,handleSwitchPage:n.handleSwitchPage,formatMessage:n.formatMessage,showLoading:P})),window.jimuConfig.isInBuilder&&n.isEditing()&&!(!P&&(!E||E.length<1))&&Object(o.jsx)("div",{className:"editing-mask-list"}),!P&&(!E||E.length<1)&&Object(o.jsx)("div",{className:"tip-mask-list text-center"},n.formatMessage("listNoData")),k==o.DataSourceStatus.NotReady&&Object(o.jsx)("div",{className:"placeholder-alert-con"},Object(o.jsx)(i._Alert,{form:"tooltip",size:"small",type:"warning",text:n.formatMessage("outputDataIsNotGenerated",{outputDsLabel:q,sourceWidgetName:Y})})),(P||A>0)&&Object(o.jsx)("div",{className:Object(o.classNames)("position-absolute refresh-loading-con d-flex align-items-center",n.getRefreshLoadingClass())},P&&Object(o.jsx)("div",{className:"loading-con"}),A>0&&Object(o.jsx)("div",{className:"flex-grow-1 auto-refresh-loading"},S)))},n.setListOutDivRef=function(e){if(e){var t="bottomBoundary"+n.props.id;n.listOutDivRef=e,n.setListDivSize();var o=document.createElement("div");o.id=t,o.className="bottom-boundary";var i,r,a,s,l=n.listOutDivRef.getElementsByTagName("div")[0];n.setScrollContentSize(),l.appendChild(o),i=document.getElementById(t),r=n.listOutDivRef,a=n.intersectionObserverCallback,new IntersectionObserver((function(e,t){var n=e[0].intersectionRatio>0;a&&a(n)}),s||{root:r}).observe(i)}},n.setScrollContentSize=function(){var e;if(n.listOutDivRef){var t=(null===(e=n.props)||void 0===e?void 0:e.config).direction,o=n.listOutDivRef.getElementsByTagName("div")[0];t===r.f.Horizon?o.style.height="100%":o.style.width="100%"}},n.intersectionObserverCallback=function(e){var t,i,a=n.props,s=a.appMode,l=a.config,c=n.listOutDivRef,d=n.state.datasource;n.setState({isScrollEnd:e}),!c||(null!==(i=null===(t=n.records)||void 0===t?void 0:t.length)&&void 0!==i?i:0)<1||l.pageStyle===r.l.Scroll&&n.queryStatus!==o.DataSourceStatus.Loading&&d&&(!window.jimuConfig.isInBuilder||s===o.AppMode.Run&&e)&&n.isHasScrolled&&(n.records.length<n.getTotalCount()?(n.setState({page:n.state.page+1,scrollStatus:"end"}),n.isSwitchPage=!0):n.setState({scrollStatus:"end"}))},n.setListDivSize=function(){var e,t=n.listOutDivRef,o=(null==t?void 0:t.clientWidth)||null,i=(null==t?void 0:t.clientHeight)||null,r=(null===(e=n.listTopRightToolsDiv.current)||void 0===e?void 0:e.clientWidth)||0,a=(null==t?void 0:t.getBoundingClientRect())||null,s={clientWidth:o,clientHeight:i};n.setState({listDivSize:s,toolsDivWidth:r,listDivBoundRect:a})},n.getContentLayout=function(){var e=n.props,t=e.layoutId,i=e.browserSizeMode,r=Object(o.getAppStore)().getState().appConfig,s=a.searchUtils.getWidgetIdThatUseTheLayoutId(r,t);return a.searchUtils.getContentLayoutInfosInOneSizeMode(r,s,o.LayoutItemType.Widget,i)},n.getContentLayoutSetting=function(){var e,t,i,r,a,s=Object(o.getAppStore)().getState().appConfig.layouts,l=n.getContentLayout(),c=null===(e=null==l?void 0:l[0])||void 0===e?void 0:e.layoutId,d=null===(t=null==l?void 0:l[0])||void 0===t?void 0:t.layoutItemId;return null===(a=null===(r=null===(i=null==s?void 0:s[c])||void 0===i?void 0:i.content)||void 0===r?void 0:r[d])||void 0===a?void 0:a.setting},n.getListMaxSize=function(){var e,t,i,r=Object(o.Immutable)({maxWidth:n.bodySize.scrollWidth,maxHeight:n.bodySize.scrollHeight}),a=n.props,s=a.layoutId,l=a.browserSizeMode,c=a.appMode,d=Object(o.getAppStore)().getState().appConfig,u=o.utils.findViewportSize(d,l),p=null===(e=d.layouts[s])||void 0===e?void 0:e.type,h=n.getContentLayoutSetting(),g="auto"==(null===(t=null==h?void 0:h.autoProps)||void 0===t?void 0:t.width)||"auto"==(null==h?void 0:h.widthMode),f="auto"==(null===(i=null==h?void 0:h.autoProps)||void 0===i?void 0:i.height)||"auto"==(null==h?void 0:h.heightMode);if(p==o.LayoutType.ColumnLayout&&g&&(r=r.set("maxWidth",n.bodySize.clientWidth)),"ROW"===p&&f){var m=(null==u?void 0:u.height)||800,v=c==o.AppMode.Design?m:n.bodySize.clientHeight;r=r.set("maxHeight",v)}return r},n.getRefreshLoadingClass=function(){var e=n.props,t=e.config,i=e.appMode,a=t.direction,s=t.scrollBarOpen,l=window.jimuConfig.isInBuilder&&i===o.AppMode.Design;return!s||l?"":a==r.f.Vertical?"vertical-loading":"horizon-loading"},n.resetAutoRefreshTimes=function(e,t){void 0===e&&(e=!1);var o=n;clearTimeout(n.resetAutoRefreshTime),t<=0&&clearInterval(n.autoRefreshLoadingTime),n.resetAutoRefreshTime=setTimeout((function(){e&&t>0&&o.setState({autoRefreshLoadingString:o.formatMessage("lastUpdateAFewTime")}),o.setState({showLoading:e})}),0)},n.setRefreshLoadingString=function(e){if(void 0===e&&(e=!1),!e)return!1;var t=0,o=n;clearInterval(n.autoRefreshLoadingTime),n.autoRefreshLoadingTime=setInterval((function(){t++,o.setState({autoRefreshLoadingString:o.getLoadingString(t)})}),6e4)},n.getLoadingString=function(e){var t=n.formatMessage("lastUpdateAFewTime");return e>1&&e<=2?t=n.formatMessage("lastUpdateAMinute"):e>2&&(t=n.formatMessage("lastUpdateTime",{updateTime:e})),t},n.onItemsRendered=function(e){e.overscanStartIndex,e.overscanStopIndex;var t=e.visibleStartIndex,o=e.visibleStopIndex;n.listVisibleStartIndex=t,n.listVisibleStopIndex=o;var i=n.props.config;n.needRefreshListOnListRendered&&(n.needRefreshListOnListRendered=!1,n.refreshList()),n.isSwitchPage&&(i.pageStyle===r.l.Scroll?n.records.length>o+1&&(n.isSwitchPage=!1,n.onItemsRenderedTimeout=setTimeout((function(){n.handleScrollDown(null)}),500)):n.isSwitchPage=!1)},n.itemSize=function(e){var t=n.props.config,o=n.state.currentCardSize;return t.direction===r.f.Horizon?o.width+t.space:o.height+t.space},n.getItemsByRecords=function(e){var t=n.props,i=t.config,r=t.selectionIsInSelf,a=t.selectionIsSelf,s=t.builderStatus,l=t.appMode,c=t.queryObject,d=t.useDataSources,u=n.state,p=u.datasource,h=u.hoverIndex,g=(p&&i.isItemStyleConfirm?p.getSelectedRecordIds():[]).map((function(e){return e+""}));return e&&e.map((function(e,t){var u=0===t&&window.jimuConfig.isInBuilder&&l===o.AppMode.Design?{hideCardTool:n.state.hideCardTool,selectionIsList:a,selectionIsInList:r,isEditing:n.isEditing(),builderStatus:s,lockItemRatio:i.lockItemRatio,changeIsResizingCard:n.changeIsResizingCard}:{linkParam:i.linkParam,queryObject:c,useDataSources:d};return nt(nt({index:t,isHover:h===t,record:i.isItemStyleConfirm?e:void 0,active:!e.fake&&i.isItemStyleConfirm&&p&&g.includes(e.getId())},n.getOtherProps()),u)}))},n.getOtherProps=function(){var e=n.props,t=e.config,o=e.theme,i=e.id,a=e.appMode,s=e.builderSupportModules,l=e.layouts,c=e.browserSizeMode,d=e.dispatch,u=e.isRTL,p=n.state.datasource;return{browserSizeMode:c,space:t.space,isRTL:u,builderSupportModules:s,formatMessage:n.formatMessage,dispatch:d,widgetId:i,interact:window.jimuConfig.isInBuilder&&s.widgetModules.interact,selectCard:n.selectCard,handleResizeCard:n.handleResizeCard,appMode:a,onChange:n.handleItemChange,hoverLayoutOpen:t.cardConfigs[r.n.Hover].enable,selectable:t.cardConfigs[r.n.Selected].selectionMode!==r.m.None,direction:t.direction,theme:o,LayoutEntry:n.state.LayoutEntry,layouts:l,cardConfigs:t.cardConfigs,datasourceId:p&&p.id}},n.itemRender=function(e){var t=e.style,i=e.index,a=e.data,s=n.props,l=s.appMode,c=s.config;t=c.direction===r.f.Horizon?nt(nt({},t),{width:parseFloat(t.width)-c.space+"px"}):nt(nt({},t),{height:parseFloat(t.height)-c.space+"px"});var d=0===i&&window.jimuConfig.isInBuilder&&l===o.AppMode.Design?K:J;return Object(o.jsx)(d,nt({listStyle:t,widgetId:n.props.id},a[i],{handleListMouseMove:n.handleListMouseMove,handleListMouseLeave:n.handleListMouseLeave,itemIdex:i}))},n.itemKey=function(e){var t=n.records[e];return""+(t.getId&&t.getId()||e)};var s=t.config;n.paginatorDiv=o.React.createRef(),n.listTopRightToolsDiv=o.React.createRef();var l={LayoutEntry:null,page:1,sortOptionName:s.sorts&&s.sorts[0]&&s.sorts[0].ruleOptionName,currentCardSize:Ve(t),forceShowMask:!1,showList:!0,widgetRect:{width:r.h,height:r.h},searchText:"",currentFilter:void 0,filterApplied:!1,showSelectionOnly:!1,hideCardTool:!1,scrollStatus:"start",datasource:void 0,hoverIndex:-1,isScrolling:!1,isScrollSpeedOver:!1,isResizingCard:!1,searchSuggestion:[],isSearchBoxVisible:!1,isOpenTopToolsPopper:!1,latestUpdateTime:0,showLoading:!1,autoRefreshLoadingString:"",listDivSize:{clientWidth:null,clientHeight:null},toolsDivWidth:null,listDivBoundRect:null,isScrollEnd:!1,isMount:!1};return n.selectSelf=n.selectSelf.bind(n),n.handleResizeCard=n.handleResizeCard.bind(n),n.listRef=o.React.createRef(),window.jimuConfig.isInBuilder?l.LayoutEntry=n.props.builderSupportModules.LayoutEntry:l.LayoutEntry=a.FixedLayoutViewer,n.state=l,n.onResize=n.onResize.bind(n),n.changeIsResizingCard=n.changeIsResizingCard.bind(n),n.setRefreshLoadingString=n.setRefreshLoadingString.bind(n),n.resetAutoRefreshTimes=n.resetAutoRefreshTimes.bind(n),n.debounceOnResize=o.lodash.debounce((function(e,t){return n.onResize(e,t)}),200),n}return tt(t,e),t.prototype.componentDidMount=function(){this.setState({isMount:!0}),this.getBodySize(),window.addEventListener("resize",this.getBodySize)},t.prototype.componentWillUnmount=function(){clearTimeout(this.resizeTimeout),clearTimeout(this.updateCardToolTimeout),clearTimeout(this.mouseClickTimeout),clearTimeout(this.suggestionsQueryTimeout),clearTimeout(this.showPopperTimeOut),clearTimeout(this.resetAutoRefreshTime),clearTimeout(this.setPageTimeout),clearTimeout(this.onItemsRenderedTimeout),clearInterval(this.autoRefreshLoadingTime)},t.prototype.componentDidUpdate=function(e,t){var n,i=this.props,a=i.config,s=i.appMode,l=this.state.datasource;window.jimuConfig.isInBuilder&&s!==o.AppMode.Run||l&&a.cardConfigs[r.n.Selected].selectionMode!==r.m.None&&this.scrollToSelectedItems(l),this.updateListInBuilder(e,t),this.appModeChange(e),(null==e?void 0:e.selectionIsInSelf)!==(null===(n=this.props)||void 0===n?void 0:n.selectionIsInSelf)&&this.setSelectionStatus()},t.prototype.changeIsResizingCard=function(e){this.setState({isResizingCard:e})},t.prototype.handleResizeCard=function(e,t,n,o,i){var r=this;void 0===t&&(t=!1),void 0===i&&(i=!1),t?(e.width=parseFloat(e.width.toFixed(2)),e.height=parseFloat(e.height.toFixed(2)),window.jimuConfig.isInBuilder&&this.props.builderSupportModules.widgetModules.handleResizeCard(this.props,e,n,o,t,i)):this.setState({currentCardSize:e},(function(){r.refreshList(!1)}))},t.prototype.selectSelf=function(){window.jimuConfig.isInBuilder&&this.props.builderSupportModules.widgetModules.selectSelf(this.props)},t.prototype.getOutputDs=function(){var e=this.props.outputDataSources&&this.props.outputDataSources[0],t=this.props.useDataSources&&this.props.useDataSources[0];if(e&&t)return o.DataSourceManager.getInstance().getDataSource(e)},t.prototype.render=function(){var e=this,t=this.props,r=t.config,s=t.id,l=t.appMode,c=t.browserSizeMode,d=t.selectionIsInSelf,u=t.selectionIsSelf,p=t.useDataSources,h=t.builderStatus,g=t.layouts,f=Object(o.getAppStore)().getState().appConfig,m=this.state,v=m.forceShowMask,S=m.datasource,b=m.widgetRect,y=m.page,x=window.jimuConfig.isInBuilder,C=Object(o.classNames)("jimu-widget","widget-list","list-widget-"+s);if(!r.itemStyle)return Object(o.jsx)(i.WidgetPlaceholder,{widgetId:this.props.id,icon:n(317),message:this.formatMessage("placeHolderTip")});var I=Ye(this.props,this.state),O=qe(b,Qe(b,Ge(this.paginatorDiv.current,I),Ke(this.props)),this.props),j=function(e,t,n){var i,r,a,s={returnGeometry:!0},l=t.config,c=t.stateProps,d=t.useDataSources,u=e.sortOptionName,p=e.searchText,h=e.currentFilter,g=e.filterApplied,f=e.datasource,m=d&&d[0];if(!f||!m)return null;if(!f.query)return null;if(l.sortOpen&&l.sorts&&((null===(r=null===(i=null==(a=(a=l.sorts.find((function(e){return e.ruleOptionName===u})))||l.sorts[0])?void 0:a.rule)||void 0===i?void 0:i[0])||void 0===r?void 0:r.jimuFieldName)||(a=void 0),a)){var v=[];a.rule.forEach((function(e){e.jimuFieldName&&v.push(e.jimuFieldName+" "+e.order)})),(null==f?void 0:f.type)===o.DataSourceTypes.FeatureLayer?s.orderByFields=v.join(","):s.orderByFields=v}if(l.filterOpen&&g&&l.filter&&h&&h.sql&&(s.where=(s.where||"1=1")+" AND ",s.where+="("+h.sql+")"),c){var S=null==c?void 0:c[o.MessageType.ExtentChange];S&&(s.geometry=S.queryExtent,S.querySQL&&(s.where=(s.where||"1=1")+" AND ",s.where+="("+S.querySQL+")"));var b=c[o.MessageType.DataRecordsSelectionChange];b&&b.querySQL&&(s.where=(s.where||"1=1")+" AND ",s.where+="("+b.querySQL+")")}return l.searchOpen&&l.searchFields&&p&&(s.where=(s.where||"1=1")+" AND ",s.where+="("+l.searchFields.split(",").map((function(e){return l.searchExact?e+" = '"+p+"'":e+" LIKE '%"+p+"%'"})).join(" OR ")+")"),n>0&&(s.page=e.page,s.pageSize=n),s}(this.state,this.props,O);if(!function(e,t,n){return!!n&&(e=n.getRealQueryParams(e,"query"),t=n.getRealQueryParams(t,"query"),!(!e||!t)&&(delete e.page,delete e.pageSize,delete e.resultOffset,delete e.resultRecordCount,delete t.page,delete t.pageSize,delete t.resultOffset,delete t.resultRecordCount,o.utils.isDeepEqual(e,t)))}(j,this.lastQuery,S)&&S){var M=j;1!==y?(j=this.lastQuery,this.lastQuery=M,this.setState({page:1})):this.lastQuery=M}var T=null==f?void 0:f.layouts[a.searchUtils.findLayoutId(g[h],c,f.mainSizeMode)],z=T&&T.type;return Object(o.jsx)("div",{className:C,css:w(this.props,this.isEditing(),I),onPointerDown:function(t){return x&&l!==o.AppMode.Run&&!u&&!d&&e.handleListPointerDown(t)}},Object(o.jsx)("div",{className:"widget-list d-flex"},this.isDsConfigured()?Object(o.jsx)(o.DataSourceComponent,{query:S?j:null,useDataSource:p&&p[0],onDataSourceCreated:this.onDSCreated,widgetId:this.props.id,queryCount:!0},this.renderList):this.renderList()),x&&l!==o.AppMode.Run&&(v||!d&&!u||!r.isItemStyleConfirm&&z)&&Object(o.jsx)("div",{className:"list-with-mask"}),Object(o.jsx)(o.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.debounceOnResize}))},t.versionManager=Fe,t.mapExtraStateProps=function(e,t){var n,o,i,s,l,c,d,u,p,h,g,f,m,v,S,b=e&&e.appConfig,w=t.layouts,y=t.layoutId,x=t.layoutItemId,C=t.builderSupportModules,I=t.id,O=e&&e.browserSizeMode,j=e&&e.widgetsState&&e.widgetsState[t.id]&&e.widgetsState[t.id].builderStatus||r.n.Regular;if(b){var M=b&&e.appConfig.layouts&&e.appConfig.layouts[a.searchUtils.findLayoutId(w[j],O,b.mainSizeMode)];S=M&&M.type}var T,z=null===(n=b.layouts)||void 0===n?void 0:n[y],R=null===(i=null===(o=null==z?void 0:z.content)||void 0===o?void 0:o[x])||void 0===i?void 0:i.setting,L=(null===(s=null==R?void 0:R.autoProps)||void 0===s?void 0:s.height)===a.LayoutItemSizeModes.Auto||!0===(null===(l=null==R?void 0:R.autoProps)||void 0===l?void 0:l.height),k=(null===(c=null==R?void 0:R.autoProps)||void 0===c?void 0:c.width)===a.LayoutItemSizeModes.Auto||!0===(null===(d=null==R?void 0:R.autoProps)||void 0===d?void 0:d.width);if(window.jimuConfig.isInBuilder){var D=null===(g=null===(h=null===(p=null===(u=b.layouts)||void 0===u?void 0:u[y])||void 0===p?void 0:p.content)||void 0===h?void 0:h[x])||void 0===g?void 0:g.bbox;T=D&&{left:D.left,top:D.top}}var P,A=e&&e.appRuntimeInfo&&e.appRuntimeInfo.selection,_=A&&C&&C.widgetModules&&C.widgetModules.selectionInList(A,I,b,!1);return _&&(P=Object.keys(w).find((function(e){return a.searchUtils.findLayoutId(w[e],O,b.mainSizeMode)===A.layoutId}))),{selectionIsSelf:!(!A||A.layoutId!==y||A.layoutItemId!==x),selectionIsInSelf:!!_,selectionStatus:P,appMode:null===(f=null==e?void 0:e.appRuntimeInfo)||void 0===f?void 0:f.appMode,browserSizeMode:e&&e.browserSizeMode,builderStatus:e&&e.widgetsState&&e.widgetsState[t.id]&&e.widgetsState[t.id].builderStatus||r.n.Regular,showLoading:null===(v=null===(m=null==e?void 0:e.widgetsState)||void 0===m?void 0:m[t.id])||void 0===v?void 0:v.showLoading,isRTL:e&&e.appContext&&e.appContext.isRTL,subLayoutType:S,left:T&&T.left,top:T&&T.top,isHeightAuto:L,isWidthAuto:k,queryObject:e.queryObject}},t}(o.React.PureComponent);t.default=pt},5:function(e,t){e.exports=o},50:function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},52:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M9.521 5.47L3.981.162a.592.592 0 00-.813 0 .534.534 0 000 .779L8.448 6l-5.28 5.06a.534.534 0 000 .779.592.592 0 00.813 0l5.54-5.31a.726.726 0 000-1.058z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},54:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M2.479 5.47L8.019.162a.592.592 0 01.813 0 .534.534 0 010 .779L3.552 6l5.28 5.06a.534.534 0 010 .779.592.592 0 01-.813 0l-5.54-5.31a.726.726 0 010-1.058z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},63:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 3.146a.5.5 0 01.708 0L6 8.5l5.146-5.354a.5.5 0 01.708.708l-5.5 5.707a.5.5 0 01-.708 0l-5.5-5.707a.5.5 0 010-.708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},64:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 9.56a.5.5 0 00.708 0L6 4.208l5.146 5.354a.5.5 0 00.708-.708l-5.5-5.707a.5.5 0 00-.708 0l-5.5 5.707a.5.5 0 000 .708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},74:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 8a.522.522 0 01-.516.527H3.976L7.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L2 8l4.743-4.846a.508.508 0 01.73 0 .535.535 0 010 .746L3.976 7.473h9.508c.285 0 .516.236.516.527z" fill="#000" fill-rule="nonzero"></path></svg>'},82:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="evenodd"></path></svg>'},89:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M15 0v1.53h-.062L9.556 6.825v7.982a.5.5 0 01-.851.356l-2.26-2.224V6.818L1.07 1.53H1V0h14zm-1 1H2v.042l5.444 5.357v6.121l1.111 1.093V6.406L14 1.05V1z" fill="#C5C5C5" fill-rule="nonzero"></path><circle cx="3" cy="3" r="3" transform="translate(15 -5)" fill="#050505"></circle></g></svg>'},96:function(e,t,n){"use strict";t.a={_widgetLabel:"List",_widgetDescription:"A widget to display data in a list view.",_action_filter_label:"Filter",_layout_REGULAR_label:"Regular",_layout_HOVER_label:"Hover",_layout_SELECTED_label:"Selected",applyTo:"Apply to {status}",listLoading:"Loading",pleaseSelect:"Please select",listNoData:"No data",selectSortFields:"Select sorting fields",clearFilter:"Clear filter",isolate:"Isolate",linkedToAnd:"Linked to {where1} and {where2}",linkedTo:"Linked to {where}",placeHolderTip:"Please select a list template.",showSelected:"Show selected",clearSelected:"Clear selected",listSorting:"Sorting",listSort:"Sort",lastUpdateTime:"Last update: {updateTime} minutes ago",lastUpdateAMinute:"Last update: a minute ago",lastUpdateAFewTime:"Last update: a few seconds ago",guideStep2Title:"Template",guideStep2Content:"Click on a template and click start.",guideStep3Title:"Data",guideStep3Content:"Click on select data to add a data source.",guideStep4Title:"Add new data",guideStep4Content:"Click add new data to select a web map.",guideStep5Title:"Select data",guideStep5Content:"Click the feature layer in the select data panel and close the panel.",guideStep6Title:"Data",guideStep6Content:"Specifies the data source, allows you to filter the data and limit the number of features that appear in the list.",guideStep7Title:"Arrangement",guideStep7Content:"Click the expand icon to explore the Arrangement section. In here, it allows you to define the direction, height, spacing, and paging style for your list.",guideStep8Title:"States",guideStep8Content:"Click the expand icon to explore the available States. In this section, it provides a visual representation to communicate the state of the list items. There are three states: regular, selected, and hover. By default, the selected state is always on.",guideStep9Title:"Tools",guideStep9Content:"Click the expand icon to explore the available Tools. In here, you can include search, sort, filter, and show selected tools in your list.",guideStep10Title:"Select image",guideStep10Content:"Click the image widget to configure it in the content panel.",guideStep10Title2:"Image settings",guideStep10Content2:"Allows you to select the image source and other settings for your widget.",guideStep11Title:"Select text",guideStep11Content:"Click the text widget to add attributes in the widget toolbar.",guideStep11Title2:"Text settings",guideStep11Content2:"Provides the configurations and style, including adding dynamic content from the widget toolbar. ",guideStep12Title:"End of tour",guideStep12Content:"Add other widgets to enhance your experience.",clearSearch:"Clear search",minimize:"Minimize",topToolBack:"Back",showAllListRecords:"Show all records",listDataActionLable:"{layer} list selection"}},97:function(e,t,n){"use strict";var o,i,r=n(0),a=n(1),s=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},c=function(e){function t(t){var n=e.call(this,t)||this;n.onDropDownToggle=function(e){e.stopPropagation();var t=n.props,o=t.isDropDownOpen,i=t.onDropDownOpenChange;if(void 0!==o)i&&i(!o);else{var r=n.state.isOpen;n.setState({isOpen:!r})}},n.onItemClick=function(e,t){var o=n.props,i=o.isDropDownOpen,r=o.onDropDownOpenChange;void 0!==i?r&&r(!1):n.setState({isOpen:!1}),t.event(e,t),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.onDropDownMouseClick=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.getStyle=function(){return Object(r.css)(i||(i=l(["\n      & button {\n        padding: 0;\n      }\n    "],["\n      & button {\n        padding: 0;\n      }\n    "])))},n.state={isOpen:!1};var o=t.withBuilderStyle;return n.MyDropdown=o?o(a.Dropdown):a.Dropdown,n.MyDropdownToggle=o?o(a.DropdownToggle):a.DropdownToggle,n.MyDropdownMenu=o?o(a.DropdownMenu):a.DropdownMenu,n.MyDropdownItem=o?o(a.DropdownItem):a.DropdownItem,n}return s(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.items,o=t.toggleContent,i=t.caret,a=t.toggleType,s=t.menuContent,l=t.appMode,c=t.modifiers,d=t.toggleIsIcon,u=t.theme,p=t.isDropDownOpen,h=t.size,g=t.appendToBody,f=t.toggleTitle,m=t.direction,v=t.menuCss,S=t.className,b=t.showActive,w=t.activeLabel,y=t.fluid,x=this.state.isOpen;x=void 0===p?x:p;var C=this.MyDropdown,I=this.MyDropdownToggle,O=this.MyDropdownMenu,j=this.MyDropdownItem;return Object(r.jsx)(C,{size:h,toggle:this.onDropDownToggle,direction:m,fluid:y,isOpen:x&&l!==r.AppMode.Design,className:"my-dropdown "+S,css:this.getStyle()},o&&Object(r.jsx)(I,{icon:d,title:f,size:h,type:a,caret:i},o&&o(u)),Object(r.jsx)(O,{appendToBody:g,modifiers:c,css:v&&v(u)},s?s(u):n&&n.asMutable().map((function(t,n){return!t.hide&&Object(r.jsx)(j,{key:n,className:"no-user-select",title:t.label,active:b&&t.label===w,onClick:function(n){return e.onItemClick(n,t)}},t.label)}))))},t}(r.React.PureComponent);t.a=c}}))}}}));