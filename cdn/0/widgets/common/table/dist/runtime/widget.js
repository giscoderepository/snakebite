System.register(["jimu-core","jimu-ui","jimu-arcgis"],(function(e){var t,n,a;return{setters:[function(e){t=e},function(e){n=e},function(e){a=e}],execute:function(){e(function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=504)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},127:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM16 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM5.146 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 4.327a.5.5 0 01.708-.707l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055zM5.146 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 12.328a.5.5 0 11.708-.708l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055z" fill="#000"></path></svg>'},128:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)" fill-rule="evenodd" clip-rule="evenodd" fill="#000"><path d="M9 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM9 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM15.826 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.265a.5.5 0 01.707-.707l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055zM15.826 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.264a.5.5 0 01.707-.708l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055z"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},129:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 010 1H14l-.929 11.077a1 1 0 01-.878.916l-.119.007H3.926a1 1 0 01-.997-.923L2 4H.5a.5.5 0 010-1h4V1.167C4.5.469 5.204 0 6 0h4zm2.997 4H3.003l.923 11h8.148l.923-11zm-2.889 3l.892.87-3.325 3.73L5 8.991l.831-.933 1.783 1.74L10.108 7zM5.5 1v2h5V1c0-.04-5-.04-5 0z" fill="#000" fill-rule="nonzero"></path></svg>'},130:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".01" fill="#E3E3E3" d="M0 0h16v16H0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M.5 1a.5.5 0 000 1h15a.5.5 0 000-1H.5zM0 7.5A.5.5 0 01.5 7h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5zm0 6a.5.5 0 01.5-.5h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5z" fill="#000"></path></svg>'},3:function(e,t){e.exports=a},380:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 0H0v1h16V0zM8 6c2.583 0 5.166 1.45 7.75 4.349a.972.972 0 010 1.302C13.166 14.551 10.583 16 8 16S2.834 14.55.25 11.651a.972.972 0 010-1.302C2.834 7.449 5.417 6 8 6zm0 1c-2.237 0-4.558 1.303-6.961 4C3.442 13.697 5.763 15 8 15s4.558-1.303 6.961-4C12.558 8.303 10.237 7 8 7zm-3 4a3 3 0 106 0 3 3 0 00-6 0zm3 2a2 2 0 100-4 2 2 0 000 4zM0 3h13v1H0V3zm3 3H0v1h3V6z" fill="#000"></path></svg>'},381:function(e,t){e.exports='<svg viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="#000" d="M0 0h400v40H0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M80 55H20v9h60v-9zm100 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 135h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 215h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 295h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 95h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 175h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 255h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 334h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9zM20 374h60v9H20v-9zm160 0h-60v9h60v-9zm40 0h60v9h-60v-9zm160 0h-60v9h60v-9z" fill="#000"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 39h1v40h98V39h1v40h99V39h1v40h99V39h1v40h99V39h1v360h-1v-40h-99v40h99v1H0V39zm1 320v40h98v-40H1zm98-1H1v-39h98v39zm1 1v40h99v-40h-99zm99-1h-99v-39h99v39zm1 1v40h99v-40h-99zm99-1h-99v-39h99v39zm1 0h99v-39h-99v39zM1 318v-38h98v38H1zm99 0v-38h99v38h-99zm0-39h99v-39h-99v39zm100 39v-38h99v38h-99zm0-39h99v-39h-99v39zm100 39v-38h99v38h-99zm0-39h99v-39h-99v39zM1 279h98v-39H1v39zm0-79v39h98v-39H1zm98-1H1v-39h98v39zm1 1v39h99v-39h-99zm99-1h-99v-39h99v39zm1 1v39h99v-39h-99zm99-1h-99v-39h99v39zm1 1v39h99v-39h-99zm99-1h-99v-39h99v39zM1 159v-39h98v39H1zm99 0v-39h99v39h-99zm0-40h99V80h-99v39zm100 40v-39h99v39h-99zm0-40h99V80h-99v39zm100 40v-39h99v39h-99zm0-40h99V80h-99v39zM1 119h98V80H1v39z" fill="#000"></path></svg>'},382:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM16 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM5.146 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 4.327a.5.5 0 01.708-.707l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055zM5.146 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057L.146 12.328a.5.5 0 11.708-.708l1.264 1.265 2.323-2.71a.5.5 0 01.705-.055z" fill="#C5C5C5"></path></svg>'},383:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)" fill-rule="evenodd" clip-rule="evenodd" fill="#C5C5C5"><path d="M9 4.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM9 12.12a.5.5 0 01-.5.5h-8a.5.5 0 010-1h8a.5.5 0 01.5.5zM15.826 2.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.265a.5.5 0 01.707-.707l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055zM15.826 10.12a.5.5 0 01.055.705l-2.324 2.71a1 1 0 01-1.466.057l-1.265-1.264a.5.5 0 01.707-.708l1.265 1.265 2.323-2.71a.5.5 0 01.705-.055z"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},384:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M.5 1a.5.5 0 000 1h15a.5.5 0 000-1H.5zM0 7.5A.5.5 0 01.5 7h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5zm0 6a.5.5 0 01.5-.5h15a.5.5 0 010 1H.5a.5.5 0 01-.5-.5z" fill="#C5C5C5"></path></svg>'},385:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.366 7.841l-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66 3.875-4.15z" fill="#C5C5C5"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 010 1H14l-.929 11.077a1 1 0 01-.997.923H3.926a1 1 0 01-.997-.923L2 4H.5a.5.5 0 010-1h4zM3.003 4h9.994l-.923 11H3.926L3.003 4zM10.5 1v2h-5V1c0-.04 5-.04 5 0z" fill="#C5C5C5"></path></svg>'},386:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)" fill="#C5C5C5"><path d="M14.17 2.89l.191-1.357a.501.501 0 11.993.14l-.44 3.125-3.03-.424a.5.5 0 01.139-.99l1.42.198A7.011 7.011 0 007.998 1a7.014 7.014 0 00-6.952 6.03 7.162 7.162 0 00-.043.486A.513.513 0 01.496 8 .492.492 0 010 7.483a7.89 7.89 0 01.037-.467C.524 3.062 3.903 0 7.998 0c2.482 0 4.7 1.124 6.172 2.89zM15.996 8.518A.492.492 0 0015.5 8a.513.513 0 00-.509.484c-.011.183-.027.38-.047.517A7.014 7.014 0 018 15a7.01 7.01 0 01-5.386-2.51l1.463.178a.5.5 0 00.122-.993l-3.036-.37-.386 3.13a.501.501 0 10.995.123l.163-1.322A8.01 8.01 0 007.999 16c4.086 0 7.458-3.047 7.957-6.988.016-.131.03-.317.04-.494z"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h15.997v16H0z"></path></clipPath></defs></svg>'},387:function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)" fill="#C5C5C5"><path d="M16 0H0v1h16V0z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M5 11a3 3 0 106 0 3 3 0 00-6 0zm3 2a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8 6c2.583 0 5.166 1.45 7.75 4.349a.972.972 0 010 1.302C13.166 14.551 10.583 16 8 16S2.834 14.55.25 11.651a.972.972 0 010-1.302C2.834 7.449 5.417 6 8 6zm0 1c-2.237 0-4.558 1.303-6.961 4 2.403 2.697 4.724 4 6.96 4 2.238 0 4.559-1.303 6.962-4C12.558 8.303 10.237 7 8 7z"></path><path d="M0 3h13v1H0V3zM3 6H0v1h3V6z"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},388:function(e,t){e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1h16a1 1 0 011 1v5H1V2a1 1 0 011-1zm11 7H7v3h6V8zm0 4H7v3h6v-3zm1 3v-3h5v3h-5zm-1 1H7v3h6v-3zm1 3h4a1 1 0 001-1v-2h-5v3zm0-8V8h5v3h-5zM1 8h5v3H1V8zm0 4h5v3H1v-3zm0 4h5v3H2a1 1 0 01-1-1v-2zM0 2a2 2 0 012-2h16a2 2 0 012 2v16a2 2 0 01-2 2H2a2 2 0 01-2-2V2z" fill="#000"></path></svg>'},41:function(e,t,n){"use strict";var a,o;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),function(e){e.Dropdown="DROPDOWN",e.Tabs="TABS"}(a||(a={})),function(e){e.Single="SINGLE",e.Multiple="MULTIPLE"}(o||(o={}))},504:function(e,t,n){"use strict";n.r(t);var a,o,i,l=n(0),r=n(41),s=n(3),d={_widgetLabel:"Table",_widgetDescription:"This is an interactive table widget",showAllRecords:"Show all records",refresh:"Refresh",showHideCols:"Show/hide columns",toggleSelect:"Show selection/all",action_viewInTable_label:"View in table",tableDataActionLable:"{layer} table selection"},c=n(1),u=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},p=function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e,t,n,a){return new(n||(n=Promise))((function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}s((a=a.apply(e,t||[])).next())}))},b=function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},g=l.CONSTANTS.BREAK_POINTS,f=l.CONSTANTS.SELECTION_DATA_VIEW_ID,m=n(127),x=n(128),w=n(130),S=n(129),y=n(59),z=n(380),j=n(55),C=n(381),T=n(382),I=n(383),O=n(384),M=n(385),D=n(386),A=n(387),F=[l.DataSourceStatus.NotReady,l.DataSourceStatus.LoadError],k=function(e){function t(t){var a=e.call(this,t)||this;return a.FeatureTable=null,a.FeatureLayer=null,a.onToolStyleChange=function(e,t){e<g[0]?a.setState({mobileFlag:!0}):a.setState({mobileFlag:!1}),e<220?a.setState({searchToolFlag:!0}):a.setState({searchToolFlag:!1})},a.subSet=function(e,t){var n=e.map(JSON.stringify),a=t.map(JSON.stringify);return n.concat(a).filter((function(e,t,n){return n.indexOf(e)===n.lastIndexOf(e)})).map(JSON.parse)},a.onDataSourceCreated=function(e){a.setState({dataSource:e})},a.updateGeometryAndSql=function(e,t){var n;(null===(n=a.table)||void 0===n?void 0:n.layer)&&(a.table.layer.definitionExpression=null==t?void 0:t.where,l.dataSourceUtils.changeJimuFeatureLayerQueryToJSAPILayerQuery(e,Object(l.Immutable)(t)).then((function(e){var t,n,o;if(null==e?void 0:e.geometry){var i=e.geometry,r=null===(t=i)||void 0===t?void 0:t.toJSON(),s=null===(o=null===(n=a.table)||void 0===n?void 0:n.filterGeometry)||void 0===o?void 0:o.toJSON();l.lodash.isDeepEqual(s,r)||(a.table.filterGeometry=i)}})))},a.onDataSourceInfoChange=function(e,t){var n,o,i;if(e){a.dataSourceChange=!0,(null==e?void 0:e.status)===l.DataSourceStatus.Loaded&&(null==t?void 0:t.status)===l.DataSourceStatus.Loaded&&(a.dataSourceChange=!1);var r=a.state.dataSource,s=a.state,d=s.selectQueryFlag,c=s.activeTabId,u=s.selfDsChange,h=a.props.config.layersConfig,p=a.getDataActionTable(),v=h.asMutable({deep:!0}).concat(p).find((function(e){return e.id===c})),b=null==v?void 0:v.useDataSource;if(!r&&b||(null==r?void 0:r.id)!==(null==b?void 0:b.dataSourceId)){if(!(r=l.DataSourceManager.getInstance().getDataSource(null==b?void 0:b.dataSourceId)))return void a.setState({emptyTable:!0})}else if(!r&&!b)return;if((null==e?void 0:e.status)&&(null==e?void 0:e.status)!==l.DataSourceStatus.NotReady){a.setState({notReady:!1,emptyTable:!1});var g=r&&r.getCurrentQueryParams();(null==e?void 0:e.widgetQueries)!==(null==t?void 0:t.widgetQueries)&&a.updateGeometryAndSql(r,g);var f=null==t?void 0:t.selectedIds,m=null==e?void 0:e.selectedIds,x=null==t?void 0:t.sourceVersion,w=null==e?void 0:e.sourceVersion,S=null==e?void 0:e.gdbVersion,y=null==t?void 0:t.gdbVersion,z=(null===(n=null==v?void 0:v.useDataSource)||void 0===n?void 0:n.dataSourceId)===(null==r?void 0:r.id)&&(null==t?void 0:t.status)===(null==e?void 0:e.status)&&(null==t?void 0:t.instanceStatus)===(null==e?void 0:e.instanceStatus)&&(null==e?void 0:e.widgetQueries)===(null==t?void 0:t.widgetQueries)&&f===m&&x===w&&S===y;if(!(F.includes(null==e?void 0:e.status)||a.updatingTable||z)){if(a.setState({selectRecords:null==r?void 0:r.getSelectedRecords()}),y&&S&&S!==y&&a.table)return a.updatingTable=!0,void a.destoryTable().then((function(){a.createTable()}));var j=(null===(o=null==v?void 0:v.useDataSource)||void 0===o?void 0:o.dataSourceId)!==(null==r?void 0:r.id),C=(!(null==t?void 0:t.status)||F.includes(null==t?void 0:t.status))&&e&&!F.includes(null==e?void 0:e.status),T=f!==m&&(0!==(null==f?void 0:f.length)||0!==(null==m?void 0:m.length)),I=(null==e?void 0:e.status)===(null==t?void 0:t.status)&&(null==e?void 0:e.instanceStatus)===(null==t?void 0:t.instanceStatus),O=(null==e?void 0:e.status)===l.DataSourceStatus.Unloaded&&(null==e?void 0:e.instanceStatus)===l.DataSourceStatus.Created&&!T&&!I;if(C||j||O||x!==w){if(!a.dataActionCanLoad)return;return a.updatingTable=!0,void a.destoryTable().then((function(){a.createTable(r)}))}v.dataActionObject||f===m||(d?(a.asyncSelectedWhenSelection(m||Object(l.Immutable)([])),setTimeout((function(){a.asyncSelectedRebuild(r)}),500)):u?a.setState({selfDsChange:!1}):setTimeout((function(){a.asyncSelectedRebuild(r)}),500)),!v.dataActionObject&&(null===(i=a.table)||void 0===i?void 0:i.layer)&&f===m&&(a.table.layer.definitionExpression=g.where)}}else a.destoryTable().then((function(){a.setState({notReady:!0,emptyTable:!0})}))}else a.destoryTable().then((function(){a.setState({emptyTable:!0})}))},a.getLayerObjectIdField=function(){var e,t,n,o,i=a.state.dataSource;return(null===(t=null===(e=a.table)||void 0===e?void 0:e.layer)||void 0===t?void 0:t.objectIdField)||(null===(o=null===(n=i)||void 0===n?void 0:n.layer)||void 0===o?void 0:o.objectIdField)||"OBJECTID"},a.asyncSelectedWhenSelection=function(e){var t=a.state.dataSource,n=a.getLayerObjectIdField(),o=t&&t.getCurrentQueryParams(),i=!0;e.forEach((function(e){e||(i=!1)}));var l=e.length>0&&i?n+" IN ("+e.map((function(e){return e})).join()+")":o.where;0===e.length&&a.setState({selectQueryFlag:!1}),a.table&&a.table.layer&&(a.table.layer.definitionExpression=l)},a.getFeatureLayer=function(e,t){var n,o,i=a.props.id,r=e,s=null===(n=null==e?void 0:e.getDataSourceJson())||void 0===n?void 0:n.isDataInDataSourceInstance;if(t&&t.length>0){var d={objectIds:t.map((function(e){return parseInt(e)})),where:"1=1"};return e.query(d,{scope:l.QueryScope.InAllData}).then((function(e){return v(a,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve(null==e?void 0:e.records)];case 1:return t=n.sent(),[2,l.dataSourceUtils.createFeatureLayerByRecords(r,t)]}}))}))}))}var c=e&&e.getCurrentQueryParams();if(s)return r.load({returnGeometry:!0},{widgetId:i}).then((function(e){return v(a,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve(e)];case 1:return t=n.sent(),[2,l.dataSourceUtils.createFeatureLayerByRecords(r,t)]}}))}))}));if(!a.FeatureLayer)return Promise.resolve(o);if(r.itemId){var u=parseInt(r.layerId),h={portalItem:{id:r.itemId,portal:{url:r.portalUrl}},definitionExpression:c.where,layerId:u||void 0};r.url&&(h.url=r.url),o=new a.FeatureLayer(h)}else{if(!r.url)return r.layer?r.load({returnGeometry:!0},{widgetId:i}).then((function(e){return v(a,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,Promise.resolve(e)];case 1:return t=n.sent(),[2,l.dataSourceUtils.createFeatureLayerByRecords(r,t)]}}))}))})):Promise.resolve(o);o=new a.FeatureLayer({definitionExpression:c.where,url:r.url})}return s?Promise.resolve(o):o.load().then((function(){return v(a,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,Promise.resolve(o)];case 1:return[2,e.sent()]}}))}))}))},a.createTable=function(e){var t,n,o=a.props,i=o.config,s=o.id,d=i.layersConfig,c=a.state.activeTabId,u=a.state.dataSource;if(!u&&e&&(u=e),(null==u?void 0:u.dataViewId)===f){if(!(null===(t=null==u?void 0:u.getDataSourceJson())||void 0===t?void 0:t.isDataInDataSourceInstance)||0===(null==u?void 0:u.getSourceRecords().length))return a.setState({emptyTable:!0}),a.dataSourceChange=!1,a.dataActionCanLoad=!0,void(a.updatingTable=!1);a.setState({emptyTable:!1})}var h=a.getDataActionTable(),p=d.asMutable({deep:!0}).concat(h).find((function(e){return e.id===c}));if(p){var v;0===document.getElementsByClassName("table-container-"+s).length?((v=document&&document.createElement("div")).className="table-container-"+s,a.refs.tableContainer&&a.refs.tableContainer.appendChild(v)):v=document.getElementsByClassName("table-container-"+s)[0];var b=a.subSet(p.allFields,p.tableFields).map((function(e){return e.jimuName})),g=p.tableFields.map((function(e){return{name:e.jimuName,label:e.alias,visible:b.indexOf(e.jimuName)<0}})),m=[];p.enableSelect&&(m=m.concat([{label:a.formatMessage("showSelection"),iconClass:"widget-table-tool-icon-show-selection",clickFunction:function(){a.onShowSelection()}},{label:a.formatMessage("clearSelection"),iconClass:"widget-table-tool-icon-selection-clear",clickFunction:function(){a.onSelectionClear()}}])),p.enableRefresh&&m.push({label:a.formatMessage("refresh"),iconClass:"widget-table-tool-icon-refresh",clickFunction:function(){a.onTableRefresh()}}),m.push({label:a.formatMessage("showHideCols"),iconClass:"widget-table-tool-icon-show-hide-cols",clickFunction:function(){a.popupShowHideCols()}});var x=p.dataActionObject,w=void 0;if(x){w=x.dataActionRecordIds;var S=null===(n=p.useDataSource)||void 0===n?void 0:n.dataSourceId;S&&(u=l.DataSourceManager.getInstance().getDataSource(S))}u&&a.getFeatureLayer(u,w).then((function(e){var t,n,o;if(e&&(a.FeatureTable&&(o=e.layer?e.layer:e,a.refs.currentEl))){var i=!1;o.capabilities&&(i=p.enableEdit&&(null===(n=null===(t=o.capabilities)||void 0===t?void 0:t.editing)||void 0===n?void 0:n.supportsUpdateByOthers));var d=a.getLayerObjectIdField();if(i){var c=null==o?void 0:o.objectIdField;o.on("edits",(function(e){var t,n,a,o,i=e.addedFeatures,l=e.updatedFeatures,r=e.deletedFeatures,s=i&&i.length>0,h=l&&l.length>0,p=r&&r.length>0;if(s||h||p){var v=null===(n=null===(t=null==e?void 0:e.edits)||void 0===t?void 0:t.updateFeatures)||void 0===n?void 0:n[0],b=null===(o=null===(a=null==v?void 0:v.attributes)||void 0===a?void 0:a[c||d])||void 0===o?void 0:o.toString(),g=b?u.getRecordById(b):void 0;g&&g.setFeature(v),u.addVersion(),u.addSourceVersion()}}))}var h=u.getGDBVersion();h&&(o.gdbVersion=h),a.table=new a.FeatureTable({layer:o,container:v,visibleElements:{header:!0,menu:!0,menuItems:{clearSelection:!1,refreshData:!1,toggleColumns:!1}},menuConfig:{items:m},fieldConfigs:g,attachmentsEnabled:p.enableAttachements,editingEnabled:i}),x||setTimeout((function(){a.asyncSelectedRebuild(u)}),500);var b=a.table;b.grid.visibleElements.selectionColumn=!1,p.enableSelect&&b.grid.on("row-click",(function(e){var t,n,o=e.context;e.native;a.setState({selfDsChange:!0});var i=o.item.feature;p.selectMode===r.a.Single&&a.table.clearSelection(),o.selected?a.table.deselectRows(i):a.table.selectRows(i);var d=null===(n=null===(t=b.grid)||void 0===t?void 0:t.selectedItems)||void 0===n?void 0:n.toArray(),c=a.getLayerObjectIdField(),h=d&&d.length>0?c+" IN ("+d.map((function(e){var t;return(null===(t=e.feature)||void 0===t?void 0:t.attributes[c])||e.objectId})).join()+")":"1=2";u.query({where:h,returnGeometry:!0}).then((function(e){var t=null==e?void 0:e.records;t&&(l.MessageManager.getInstance().publishMessage(new l.DataRecordsSelectionChangeMessage(s,e.records)),t.length>0?u.selectRecordsByIds(t.map((function(e){return e.getId()})),t):u.clearSelection())}))})),a.dataSourceChange=!1,a.dataActionCanLoad=!0,a.updatingTable=!1,a.setState({emptyTable:!1})}}))}},a.asyncSelectedRebuild=function(e){var t,n,o=e&&e.getSelectedRecords();if((null===(t=a.table)||void 0===t?void 0:t.clearSelection)&&a.table.clearSelection(),o&&o.length>0){var i=[];o.forEach((function(e){var t=null==e?void 0:e.getId();t&&i.push(parseInt(t))})),(null===(n=a.table)||void 0===n?void 0:n.selectRows)&&a.table.selectRows(i)}},a.createDomStyle=function(e){var t,n,a=null===(n=null===(t=Object(l.getAppStore)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.theme,o=document.getElementById("exb-grid-styles"),i=document.getElementById("exb-sorter-styles");o&&o.remove(),i&&i.remove();var r=document&&document.createElement("dom-module");r.setAttribute("id","exb-grid-styles"),r.setAttribute("theme-for","vaadin-grid");var s=document&&document.createElement("dom-module");s.setAttribute("id","exb-sorter-styles"),s.setAttribute("theme-for","vaadin-grid-sorter");var d='<template>\n      <style>\n        [part~="header-cell"] {\n          color: '+e.colors.palette.dark[700]+";\n          background-color: "+e.colors.palette.light[100]+";\n        }\n      </style>\n    </template>",c="<template>\n      <style>\n        :host([direction]) {\n          color: "+e.colors.palette.dark[700]+";\n        }\n      </style>\n    </template>";switch(a){case"themes/default/":case"themes/shared-theme/":case"themes/ink/":d='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[100]+";\n            }\n          </style>\n        </template>";break;case"themes/dark/":case"themes/morandi/":d='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[300]+";\n            }\n          </style>\n        </template>",c="<template>\n          <style>\n            :host([direction]) {\n              color: "+e.colors.palette.dark[700]+";\n            }\n          </style>\n        </template>";break;case"themes/vivid/":d='<template>\n          <style>\n            [part~="header-cell"] {\n              color: '+e.colors.palette.dark[700]+";\n              background-color: "+e.colors.palette.light[200]+";\n            }\n          </style>\n        </template>",c="<template>\n          <style>\n            :host([direction]) {\n              color: "+e.colors.palette.dark[700]+";\n            }\n          </style>\n        </template>"}r.innerHTML=d,s.innerHTML=c,document.head.appendChild(r),document.head.appendChild(s)},a.formatMessage=function(e,t){var n=Object.assign({},d,c.defaultMessages);return a.props.intl.formatMessage({id:e,defaultMessage:n[e]},t)},a.onTagClick=function(e){var t=a.props.id;a.setState({activeTabId:e,selectQueryFlag:!1,tableShowColumns:void 0}),a.props.dispatch(l.appActions.widgetStatePropChange(t,"activeTabId",e))},a.handleTagChange=function(e){var t,n=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value,o=a.props.id;a.setState({activeTabId:n,selectQueryFlag:!1}),a.props.dispatch(l.appActions.widgetStatePropChange(o,"activeTabId",n))},a.onShowSelection=function(){var e,t,n=a.state,o=n.dataSource,i=n.selectQueryFlag;if(i){var l=o&&o.getCurrentQueryParams();a.table.layer.definitionExpression=l.where,(s=(null===(e=a.table.menuConfig)||void 0===e?void 0:e.items)||[]).length>0&&(s[0].label=a.formatMessage("showSelection"),s[0].iconClass="widget-table-tool-icon-show-selection"),a.table.menuConfig={items:s}}else{var r=a.table.grid.selectedItems.items;if(0===r.length)return;var s,d=a.getLayerObjectIdField(),c=d+" IN ("+r.map((function(e){var t;return(null===(t=e.feature)||void 0===t?void 0:t.attributes[d])||e.objectId})).join()+")";a.table.layer.definitionExpression=c,(s=(null===(t=a.table.menuConfig)||void 0===t?void 0:t.items)||[]).length>0&&(s[0].label=a.formatMessage("showAll"),s[0].iconClass="widget-table-tool-icon-show-all"),a.table.menuConfig={items:s}}setTimeout((function(){a.asyncSelectedRebuild(o)}),500),a.setState({selectQueryFlag:!i})},a.onSelectionClear=function(){var e=a.props.id,t=a.state.dataSource;a.table&&a.table.clearSelection(),t.clearSelection(),l.MessageManager.getInstance().publishMessage(new l.DataRecordsSelectionChangeMessage(e,[]))},a.onTableRefresh=function(){var e=a.props.id,t=a.state,n=t.selectQueryFlag,o=t.dataSource;n&&a.setState({selectQueryFlag:!1,selfDsChange:!0}),a.table&&a.table.clearSelection(),a.setState({searchText:""}),o.updateQueryParams({where:"1=1"},e),o.clearSelection(),a.table&&a.table.refresh()},a.popupShowHideCols=function(){var e=a.refs.advancedSelect.getElementsByTagName("button")[0];e&&e.click()},a.getQueryOptions=function(e){var t="1=1",n=a.props,o=n.useDataSources,i=n.id,r=a.state,s=r.searchText,d=r.dataSource,c=o&&o[0];if(!d||!c)return null;var u=l.dataSourceUtils.isHostedService(null==d?void 0:d.url)&&l.dataSourceUtils.containsNonLatinCharacter(s)?"N":"";return d.query?s?(e.enableSearch&&e.searchFields&&(t=(t||"1=1")+" AND ",t+="("+e.searchFields.split(",").map((function(t){return e.searchExact?"LOWER("+t+") = "+u+"'"+s.trim().toLowerCase()+"'":"LOWER("+t+") LIKE "+u+"'%"+s.trim().toLowerCase()+"%'"})).join(" OR ")+")"),d.getRealQueryParams({where:t},"load",{widgetId:i})):d.getRealQueryParams({where:t},"load",{widgetId:i}):null},a.handleChange=function(e){e?a.setState({searchText:e}):a.setState({searchText:e},(function(){a.handleSubmit()}))},a.handleSubmit=function(){var e,t=a.state.dataSource,n=a.props.id,o=a.props.config.layersConfig.find((function(e){return e.id===a.state.activeTabId})),i=a.getQueryOptions(o);t.updateQueryParams(i,n),(null===(e=a.table)||void 0===e?void 0:e.layer)&&(a.table.layer.definitionExpression=i.where)},a.onKeyUp=function(e){e&&e.target&&13===e.keyCode&&a.handleSubmit()},a.renderSearchTools=function(){var e=a.state,t=e.searchText,o=e.searchToolFlag,i=e.isOpenSearchPopper,r=a.props.theme;return Object(l.jsx)("div",{className:"table-search-div"},o?Object(l.jsx)("div",{className:"float-right",ref:function(e){return a.refs.searchPopup=e}},Object(l.jsx)(c.Button,{type:"tertiary",icon:!0,size:"sm",className:"tools-menu",title:a.formatMessage("search"),onClick:function(e){a.setState({isOpenSearchPopper:!i})}},Object(l.jsx)(c.Icon,{icon:n(82)})),Object(l.jsx)(c.Popper,{placement:"right-start",reference:a.refs.searchPopup,offset:[-10,-30],open:i,showArrow:!1,toggle:function(e){a.setState({isOpenSearchPopper:!i})}},Object(l.jsx)("div",{className:"d-flex align-items-center table-popup-search m-2"},Object(l.jsx)(c.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(e){a.setState({isOpenSearchPopper:!1})},className:"search-back mr-1"},Object(l.jsx)(c.Icon,{icon:n(74),color:r.colors.palette.dark[800]})),Object(l.jsx)(c.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(e){return a.handleSubmit()},className:"search-icon"},Object(l.jsx)(c.Icon,{icon:n(82),color:r.colors.palette.light[800]})),Object(l.jsx)(c.TextInput,{className:"popup-search-input",placeholder:a.formatMessage("search"),onChange:function(e){return a.handleChange(e.target.value)},value:t||"",onKeyDown:function(e){return a.onKeyUp(e)}})))):Object(l.jsx)("div",{className:"d-flex align-items-center table-search"},Object(l.jsx)(c.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(e){return a.handleSubmit()},className:"search-icon"},Object(l.jsx)(c.Icon,{icon:n(82),color:r.colors.palette.light[800]})),Object(l.jsx)(c.TextInput,{className:"search-input",placeholder:a.formatMessage("search"),onChange:function(e){return a.handleChange(e.target.value)},value:t||"",onKeyDown:function(e){return a.onKeyUp(e)}})))},a.getInitFields=function(){var e=a.state.activeTabId,t=a.props.config.layersConfig,n=a.getDataActionTable(),o=["CreationDate","Creator","EditDate","Editor","GlobalID"],i=t.asMutable({deep:!0}).concat(n).find((function(t){return t.id===e})).tableFields,l=[];for(var r in i){var s=i[r];o.includes(s.name)||l.push({value:s.name,label:s.alias})}return l},a.onValueChangeFromRuntime=function(e){e||(e=[]);var t=a.state.tableShowColumns,n=a.getInitFields(),o=t||n,i=e.length>o.length;a.subSet(o,e).map((function(e){i?a.table.showColumn(e.value):a.table.hideColumn(e.value)})),a.setState({tableShowColumns:e})},a.getStyle=function(e){var t,n,i=a.props,r=i.id,s=i.enableDataAction,d=a.state.mobileFlag,c="themes/morandi/"===(null===(n=null===(t=Object(l.getAppStore)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.theme);return Object(l.css)(o||(o=h(["\n      "," {\n        .table-indent{\n          width: calc(100% - 32px);\n          height: calc(100% - 26px);\n          margin: 10px 16px 16px;\n          .horizontal-action-dropdown{\n            position: absolute;\n            right: 17px;\n            top: 55px;\n            padding-left: 8px;\n            border-left: 1px solid ",";\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n          .data-action-btn{\n            position: relative;\n            top: -1px;\n            padding-left: 8px;\n            border-left: 1px solid ",";\n          }\n        }\n        .tab-flex{\n          width: 100%;\n        }\n        .top-drop{\n          width: 30%;\n          min-width: 150px;\n          button{\n            line-height: 1.5;\n          }\n        }\n        .nav-underline{\n          height: 32px;\n          border-bottom: 1px solid ",";\n        }\n        .nav-item + .nav-item{\n          margin-left: 0;\n        }\n        .csv-dropdown-con{\n          button{\n            border-radius: 13px;\n          }\n        }\n        .vertical-tag-list{\n          width: 20%;\n          display: inline-block;\n          .tagBtn{\n            width: 100%;\n          }\n        }\n        .horizontal-tag-list{\n          .tagBtn{\n            width: 150px;\n          }\n          .tab-content{\n            height: 8px;\n          }\n        }\n        .vertical-tag-list,\n        .horizontal-tag-list{\n          margin-bottom: 4px;\n          .activeBtn{\n            color: #fff;\n            background-color: #076fe5;\n          }\n        }\n        .dropdown-tag-list{\n          height: 40px;\n          margin-bottom: 4px;\n          .dropdown-button{\n            height: 30px;\n          }\n        }\n        .vertical-render-con{\n          width: 80%;\n          position: absolute;\n          left: 20%;\n          height: 100%;\n          top: 0;\n        }\n        .dropdown-render-con,\n        .horizontal-render-con{\n          width: 100%;\n          height: 100%;\n        }\n        .top-button-list{\n          margin: 8px 0;\n          position: absolute;\n          right: 17px;\n          top: 47px;\n          ",";\n          .top-button{\n            display: inline-flex;\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n        }\n        .table-search-div{\n          position: absolute;\n          left: 20px;\n          .table-search{\n            .search-icon{\n              z-index: 2;\n            }\n            .search-input{\n              padding-left: 30px;\n              margin-left: -30px;\n            }\n          }\n        }\n        .table-con{\n          width: 100%;\n          height: calc(100% - 46px);\n          .esri-feature-table__loader-container{\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -16px;\n            margin-top: -20px;\n            z-index: 2;\n          }\n          .esri-feature-table__title{\n            display: none\n          }\n          .esri-feature-table__menu{\n            position: absolute;\n            right: ",";\n            top: 51px;\n            ",";\n            .esri-button-menu{\n              button{\n                :hover{\n                  background-color: ",";\n                }\n                background-color: ",";\n                color: ",";\n                border-radius: ",";\n                border: 1px solid ",";\n              }\n            }\n          }\n          .esri-column__sorter{\n            overflow-x: hidden;\n          }\n        }\n        .adv-select-con{\n          width: 200px;\n          visibility: hidden;\n          position: absolute;\n          right: 17px;\n          top: 56px;\n        }\n        .placeholder-table-con{\n          height: calc(100% - 85px);\n          width: 100%;\n          position: relative;\n          top: 40px;\n          .placeholder-alert-con{\n            position: absolute;\n            right: 10px;\n            bottom: 10px;\n          }\n        }\n        .ds-container{\n          position: absolute;\n          display: none;\n        }\n        .dropdown-button-content{\n          .table-action-option-close{\n            display: none;\n          }\n        }\n      }\n    "],["\n      "," {\n        .table-indent{\n          width: calc(100% - 32px);\n          height: calc(100% - 26px);\n          margin: 10px 16px 16px;\n          .horizontal-action-dropdown{\n            position: absolute;\n            right: 17px;\n            top: 55px;\n            padding-left: 8px;\n            border-left: 1px solid ",";\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n          .data-action-btn{\n            position: relative;\n            top: -1px;\n            padding-left: 8px;\n            border-left: 1px solid ",";\n          }\n        }\n        .tab-flex{\n          width: 100%;\n        }\n        .top-drop{\n          width: 30%;\n          min-width: 150px;\n          button{\n            line-height: 1.5;\n          }\n        }\n        .nav-underline{\n          height: 32px;\n          border-bottom: 1px solid ",";\n        }\n        .nav-item + .nav-item{\n          margin-left: 0;\n        }\n        .csv-dropdown-con{\n          button{\n            border-radius: 13px;\n          }\n        }\n        .vertical-tag-list{\n          width: 20%;\n          display: inline-block;\n          .tagBtn{\n            width: 100%;\n          }\n        }\n        .horizontal-tag-list{\n          .tagBtn{\n            width: 150px;\n          }\n          .tab-content{\n            height: 8px;\n          }\n        }\n        .vertical-tag-list,\n        .horizontal-tag-list{\n          margin-bottom: 4px;\n          .activeBtn{\n            color: #fff;\n            background-color: #076fe5;\n          }\n        }\n        .dropdown-tag-list{\n          height: 40px;\n          margin-bottom: 4px;\n          .dropdown-button{\n            height: 30px;\n          }\n        }\n        .vertical-render-con{\n          width: 80%;\n          position: absolute;\n          left: 20%;\n          height: 100%;\n          top: 0;\n        }\n        .dropdown-render-con,\n        .horizontal-render-con{\n          width: 100%;\n          height: 100%;\n        }\n        .top-button-list{\n          margin: 8px 0;\n          position: absolute;\n          right: 17px;\n          top: 47px;\n          ",";\n          .top-button{\n            display: inline-flex;\n            button{\n              width: 32px;\n              height: 32px;\n            }\n          }\n        }\n        .table-search-div{\n          position: absolute;\n          left: 20px;\n          .table-search{\n            .search-icon{\n              z-index: 2;\n            }\n            .search-input{\n              padding-left: 30px;\n              margin-left: -30px;\n            }\n          }\n        }\n        .table-con{\n          width: 100%;\n          height: calc(100% - 46px);\n          .esri-feature-table__loader-container{\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -16px;\n            margin-top: -20px;\n            z-index: 2;\n          }\n          .esri-feature-table__title{\n            display: none\n          }\n          .esri-feature-table__menu{\n            position: absolute;\n            right: ",";\n            top: 51px;\n            ",";\n            .esri-button-menu{\n              button{\n                :hover{\n                  background-color: ",";\n                }\n                background-color: ",";\n                color: ",";\n                border-radius: ",";\n                border: 1px solid ",";\n              }\n            }\n          }\n          .esri-column__sorter{\n            overflow-x: hidden;\n          }\n        }\n        .adv-select-con{\n          width: 200px;\n          visibility: hidden;\n          position: absolute;\n          right: 17px;\n          top: 56px;\n        }\n        .placeholder-table-con{\n          height: calc(100% - 85px);\n          width: 100%;\n          position: relative;\n          top: 40px;\n          .placeholder-alert-con{\n            position: absolute;\n            right: 10px;\n            bottom: 10px;\n          }\n        }\n        .ds-container{\n          position: absolute;\n          display: none;\n        }\n        .dropdown-button-content{\n          .table-action-option-close{\n            display: none;\n          }\n        }\n      }\n    "])),"&.table-widget-"+r,e.colors.palette.light[200],e.colors.palette.light[200],e.colors.palette.light[300],d&&"display: none",s?"60px":"11px",!d&&"display: none",e.darkTheme?c?e.colors.palette.light[800]:e.colors.palette.light[600]:e.colors.palette.light[100],e.darkTheme?e.colors.palette.light[500]:e.colors.white,e.colors.black,c?"50%":"2px",e.darkTheme?e.colors.palette.light[500]:e.colors.palette.light[400])},a.getGlobalTableTools=function(e,t){var n=null==e?void 0:e.darkTheme,a=n?t?I:T:t?x:m;return Object(l.css)(i||(i=h(["\n      .widget-table-tool-icon-show-selection{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-all{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-selection-clear{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-refresh{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-hide-cols{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .esri-button-menu__item .esri-button-menu__item-label{\n        padding: 4px 15px !important;\n      }\n      .table-popup-search{\n        .search-icon{\n          z-index: 2;\n        }\n        .popup-search-input{\n          padding-left: 30px;\n          margin-left: -30px;\n        }\n      }\n      .table-action-option{\n        width: 100%;\n        display: inline-flex;\n        flex-direction: row;\n        .table-action-option-tab{\n          margin: auto 8px;\n        }\n        .table-action-option-close{\n          flex: 1;\n          button{\n            :hover {\n              color: ",";\n            }\n            float: right;\n          }\n        }\n      }\n      .esri-popover--open{\n        z-index: 1005 !important;\n      }\n      .jimu-dropdown-menu{\n        z-index: 1006 !important;\n      }\n    "],["\n      .widget-table-tool-icon-show-selection{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-all{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-selection-clear{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-refresh{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .widget-table-tool-icon-show-hide-cols{\n        background: url('data:image/svg+xml;utf8,","') no-repeat center;\n        background-size: 100%;\n        width: 16px;\n        height: 16px;\n      }\n      .esri-button-menu__item .esri-button-menu__item-label{\n        padding: 4px 15px !important;\n      }\n      .table-popup-search{\n        .search-icon{\n          z-index: 2;\n        }\n        .popup-search-input{\n          padding-left: 30px;\n          margin-left: -30px;\n        }\n      }\n      .table-action-option{\n        width: 100%;\n        display: inline-flex;\n        flex-direction: row;\n        .table-action-option-tab{\n          margin: auto 8px;\n        }\n        .table-action-option-close{\n          flex: 1;\n          button{\n            :hover {\n              color: ",";\n            }\n            float: right;\n          }\n        }\n      }\n      .esri-popover--open{\n        z-index: 1005 !important;\n      }\n      .jimu-dropdown-menu{\n        z-index: 1006 !important;\n      }\n    "])),encodeURIComponent(a),encodeURIComponent(n?O:w),encodeURIComponent(n?M:S),encodeURIComponent(n?D:y),encodeURIComponent(n?A:z),e.colors.white)},a.getDataActionTable=function(){var e=a.props.viewInTableObj,t=[];for(var n in e)t.push(p({},e[n]));return t},a.removeActionTab=function(e,t){var n=a.props,o=n.id,i=n.viewInTableObj;a.removeConfig=!0,t&&t.stopPropagation(),a.setState({tableShowColumns:void 0});var r=i;delete r[e.id],l.MutableStoreManager.getInstance().updateStateValue(o,"viewInTableObj",r)},a.state={apiLoaded:!1,dataSource:void 0,activeTabId:void 0,downloadOpen:!1,searchText:"",selectQueryFlag:!1,mobileFlag:!1,searchToolFlag:!1,tableShowColumns:void 0,isOpenSearchPopper:!1,emptyTable:!1,selectRecords:[],notReady:!1,selfDsChange:!1,advancedField:void 0,advancedTableField:[]},a.dataSourceChange=!1,a.dataActionCanLoad=!0,a.updatingTable=!1,a.removeConfig=!1,a.debounceOnResize=l.lodash.debounce((function(e,t){return a.onToolStyleChange(e,t)}),200),a}return u(t,e),t.getDerivedStateFromProps=function(e,n){var a,o=e.config.layersConfig,i=n.activeTabId,l=new t(e).getDataActionTable(),r=o.asMutable({deep:!0}).concat(l);if((!i||r.findIndex((function(e){return e.id===i}))<0)&&r.length>0){var s=r.find((function(e){var t;return e.id===(null===(t=r[0])||void 0===t?void 0:t.id)})),d=s&&s.allFields[0],c=s&&s.tableFields.map((function(e){return{value:e.name,label:e.alias}}));return{activeTabId:null===(a=r[0])||void 0===a?void 0:a.id,advancedField:d,advancedTableField:c}}return null},t.prototype.componentDidMount=function(){var e=this;this.state.apiLoaded||Object(s.loadArcGISJSAPIModules)(["esri/widgets/FeatureTable","esri/layers/FeatureLayer"]).then((function(t){e.FeatureTable=t[0],e.FeatureLayer=t[1],e.setState({apiLoaded:!0}),e.createTable()}))},t.prototype.componentWillUnmount=function(){this.table&&(this.table.menu.open=!1)},t.prototype.componentDidUpdate=function(e,t){var n,a,o,i,r,s,d,c,u,h,p,v,b=this,g=this.state,f=g.activeTabId,m=g.dataSource,x=this.props,w=x.id,S=x.config,y=x.currentPageId,z=x.state,j=x.belongToDataSourceInfos,C=S.layersConfig,T=this.getDataActionTable(),I=C.asMutable({deep:!0}).concat(T),O=(null===(a=null===(n=this.props)||void 0===n?void 0:n.stateProps)||void 0===a?void 0:a.removeLayerFlag)||!1,M=null===(i=null===(o=this.props)||void 0===o?void 0:o.stateProps)||void 0===i?void 0:i.dataActionActiveObj,D=(null==M?void 0:M.dataActionTable)?null==M?void 0:M.activeTabId:f;if(O){var A=document.getElementsByClassName("esri-popover esri-popover--open");A&&A.length>0&&A[0].remove(),this.props.dispatch(l.appActions.widgetStatePropChange(w,"removeLayerFlag",!1))}var k=z===l.WidgetState.Closed,L=e.currentPageId!==y;(k||L)&&this.table&&(this.table.menu.open=!1);var N=e.config.layersConfig.concat(T).find((function(e){return e.id===t.activeTabId})),P=I.find((function(e){return e.id===D}));if(this.removeConfig){if(this.removeConfig=!1,!P)return}else if(!N||!P)return;var H=null===(r=P.tableFields)||void 0===r?void 0:r.map((function(e){return{value:e.name,label:e.alias}}));D!==t.activeTabId&&this.setState({advancedField:null===(s=P.allFields)||void 0===s?void 0:s[0],advancedTableField:H});var R=["enableAttachements","enableEdit","allowCsv","enableSearch","searchFields","enableRefresh","enableSelect","selectMode","tableFields"],E=!1;for(var B in R){var _=R[B];if("tableFields"!==_?(null==N?void 0:N[_])!==(null==P?void 0:P[_]):!l.lodash.isDeepEqual(null==N?void 0:N[_],null==P?void 0:P[_])){E=!0;break}}var V=null===(d=null==N?void 0:N.useDataSource)||void 0===d?void 0:d.dataSourceId,Q=null===(c=null==P?void 0:P.useDataSource)||void 0===c?void 0:c.dataSourceId,U=null===(h=null===(u=null==e?void 0:e.belongToDataSourceInfos)||void 0===u?void 0:u[V])||void 0===h?void 0:h.widgetQueries,G=null===(p=null==j?void 0:j[Q])||void 0===p?void 0:p.widgetQueries,W=null===(v=null==j?void 0:j[Q])||void 0===v?void 0:v.status,J=m&&m.getCurrentQueryParams();V===Q&&U!==G&&this.updateGeometryAndSql(m,J);var q,K,X;if((null==M?void 0:M.dataActionTable)&&this.dataActionCanLoad&&!this.updatingTable)return this.dataActionCanLoad=!1,this.props.dispatch(l.appActions.widgetStatePropChange(w,"dataActionActiveObj",{activeTabId:D,dataActionTable:!1})),this.updatingTable=!0,void this.setState({activeTabId:D,searchText:"",tableShowColumns:void 0},(function(){b.destoryTable().then((function(){b.createTable()}))}));q=!F.includes(W),K=q&&(null==N?void 0:N.id)!==(null==P?void 0:P.id),X=q&&(null==N?void 0:N.id)===(null==P?void 0:P.id)&&E,b.updatingTable||!K&&!X||(this.updatingTable=!0,this.setState({searchText:"",tableShowColumns:void 0},(function(){b.destoryTable().then((function(){b.createTable()}))})))},t.prototype.destoryTable=function(){return v(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return this.table&&(this.table.menu.open=!1,!this.table.destroyed&&this.table.destroy()),[4,Promise.resolve()];case 1:return[2,e.sent()]}}))}))},t.prototype.render=function(){var e,t,a,o,i,s,d=this,u=this.state,h=u.activeTabId,p=u.dataSource,v=u.selectQueryFlag,b=u.tableShowColumns,g=u.mobileFlag,f=u.emptyTable,T=u.selectRecords,I=u.notReady,O=u.advancedField,M=u.advancedTableField,D=this.props,A=D.config,F=D.id,k=D.theme,L=D.isRTL,N=D.enableDataAction,P=A.layersConfig,H=A.arrangeType,R=this.getDataActionTable(),E=P.asMutable({deep:!0}).concat(R),B=E.find((function(e){return e.id===h}));E.length>0&&(s=B?B.useDataSource:E[0].useDataSource);var _=Object(l.classNames)("jimu-widget","widget-table","surface-1","table-widget-"+F);if(!s)return Object(l.jsx)(c.WidgetPlaceholder,{widgetId:F,type:"picture",style:{position:"absolute",left:0,top:0},icon:C});var V=H===r.b.Tabs,Q=this.getInitFields(),U=null==p?void 0:p.getLabel(),G=l.appConfigUtils.getWidgetIdByOutputDataSource(s),W=null===(e=Object(l.getAppStore)().getState())||void 0===e?void 0:e.appConfig,J=null===(a=null===(t=null==W?void 0:W.widgets)||void 0===t?void 0:t[G])||void 0===a?void 0:a.label,q=this.formatMessage("tableDataActionLable",{layer:(null===(i=null===(o=p)||void 0===o?void 0:o.layerDefinition)||void 0===i?void 0:i.name)||""});return Object(l.jsx)("div",{className:_,css:this.getStyle(k),ref:function(e){return d.refs.currentEl=e}},Object(l.jsx)("div",{className:"table-indent"},Object(l.jsx)("div",{className:"d-flex "+(V?"horizontal-tag-list":"dropdown-tag-list")},V?Object(l.jsx)(c.Tabs,{underline:!0,onTabSelect:this.onTagClick,className:"tab-flex"},E.map((function(e){var t=!!e.dataActionObject;return Object(l.jsx)(c.Tab,{key:e.id,id:e.id,defaultActive:e.id===h,active:e.id===h,title:e.name,className:"text-truncate tag-size",closeable:t,onClose:function(){return d.removeActionTab(e)}},Object(l.jsx)("div",{className:"mt-2"}))}))):Object(l.jsx)(c.Select,{size:"sm",value:h,onChange:this.handleTagChange,className:"top-drop"},E.map((function(e){return Object(l.jsx)("option",{key:e.id,value:e.id,title:e.name},Object(l.jsx)("div",{className:"table-action-option"},Object(l.jsx)("div",{className:"table-action-option-tab",title:e.name},e.name),e.dataActionObject&&Object(l.jsx)("div",{className:"table-action-option-close"},Object(l.jsx)(c.Button,{size:"sm",icon:!0,type:"tertiary",onClick:function(t){return d.removeActionTab(e,t)}},Object(l.jsx)(c.Icon,{icon:j,size:10})))))})))),Object(l.jsx)("div",{className:H===r.b.Tabs?"horizontal-render-con":"dropdown-render-con"},B.enableSearch&&B.searchFields&&this.renderSearchTools(),p&&g&&T&&N&&Object(l.jsx)("div",{className:"horizontal-action-dropdown"},Object(l.jsx)(c.DataActionDropDown,{dataName:q,widgetId:F,dataSource:p,records:T})),Object(l.jsx)("div",{className:"top-button-list"},B.enableSelect&&Object(l.jsx)("div",{className:"top-button ml-2"},Object(l.jsx)(c.Button,{size:"sm",onClick:this.onShowSelection,icon:!0,title:v?this.formatMessage("showAll"):this.formatMessage("showSelection")},Object(l.jsx)(c.Icon,{icon:v?w:L?x:m,size:14}))),B.enableSelect&&Object(l.jsx)("div",{className:"top-button ml-2"},Object(l.jsx)(c.Button,{size:"sm",onClick:this.onSelectionClear,icon:!0,title:this.formatMessage("clearSelection")},Object(l.jsx)(c.Icon,{icon:S,size:14}))),B.enableRefresh&&Object(l.jsx)("div",{className:"top-button ml-2"},Object(l.jsx)(c.Button,{size:"sm",onClick:this.onTableRefresh,icon:!0,title:this.formatMessage("refresh")},Object(l.jsx)(c.Icon,{icon:y,size:14}))),Object(l.jsx)("div",{className:"top-button ml-2"},Object(l.jsx)(c.Button,{size:"sm",onClick:this.popupShowHideCols,icon:!0,title:this.formatMessage("showHideCols")},Object(l.jsx)(c.Icon,{icon:z,size:14}))),p&&!g&&T&&N&&Object(l.jsx)("div",{className:"top-button ml-2 data-action-btn"},Object(l.jsx)(c.DataActionDropDown,{dataName:q,widgetId:F,dataSource:p,records:T}))),p&&Object(l.jsx)("div",{ref:"advancedSelect",className:"adv-select-con"},Object(l.jsx)(c.AdvancedSelect,{fluid:!0,dataSource:p,field:O,codedValues:M,isMultiple:!0,values:Object(l.Immutable)(b||Q),isEmptyOptionHidden:!1,onChange:this.onValueChangeFromRuntime})),f&&Object(l.jsx)("div",{className:"placeholder-table-con"},Object(l.jsx)(c.WidgetPlaceholder,{icon:n(388),message:this.formatMessage("noData")}),I&&Object(l.jsx)("div",{className:"placeholder-alert-con"},Object(l.jsx)(c._Alert,{form:"tooltip",size:"small",type:"warning",text:this.formatMessage("outputDataIsNotGenerated",{outputDsLabel:U,sourceWidgetName:J})}))),Object(l.jsx)("div",{ref:"tableContainer",className:"table-con"}),Object(l.jsx)("div",{className:"ds-container"},Object(l.jsx)(l.DataSourceComponent,{widgetId:F,useDataSource:Object(l.Immutable)(s),onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange})),Object(l.jsx)(l.Global,{styles:this.getGlobalTableTools(k,L)}),Object(l.jsx)(l.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.debounceOnResize}))))},t.mapExtraStateProps=function(e,t){var n,a,o,i,r,s,d=null===(a=null===(n=null==e?void 0:e.appConfig)||void 0===n?void 0:n.widgets)||void 0===a?void 0:a[t.id],c=null==d?void 0:d.enableDataAction,u=null===(o=null==d?void 0:d.useDataSources)||void 0===o?void 0:o.map((function(e){return e.dataSourceId})),h=l.DataSourceManager.getInstance(),p={};return null==u||u.forEach((function(t){var n,a,o=null===(n=h.getDataSource(t))||void 0===n?void 0:n.belongToDataSource;p[t]=null===(a=null==e?void 0:e.dataSourcesInfo)||void 0===a?void 0:a[null==o?void 0:o.id]})),{isRTL:null===(i=null==e?void 0:e.appContext)||void 0===i?void 0:i.isRTL,currentPageId:null===(r=null==e?void 0:e.appRuntimeInfo)||void 0===r?void 0:r.currentPageId,viewInTableObj:null===(s=null==t?void 0:t.mutableStateProps)||void 0===s?void 0:s.viewInTableObj,enableDataAction:void 0===c||c,belongToDataSourceInfos:p}},t}(l.React.PureComponent);t.default=k},55:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.637 15.866L30.951 27.18a2.667 2.667 0 01-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 01.781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 014.552.781l11.314 11.314L27.18.781a2.667 2.667 0 013.771 3.771L19.637 15.866z"></path></svg>'},59:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.444 3.582A7.011 7.011 0 008 1 7.014 7.014 0 001.05 7.03c-.017.122-.031.281-.044.477A.525.525 0 01.481 8 .48.48 0 010 7.492c.01-.195.024-.354.039-.476C.526 3.062 3.904 0 8 0c2.482 0 4.7 1.124 6.172 2.89l.19-1.356a.502.502 0 01.994.138l-.441 3.126-3.03-.425a.5.5 0 01.14-.99l1.419.199zM1.936 13.236l-.163 1.322a.502.502 0 01-.996-.121l.387-3.133 3.036.371a.5.5 0 01-.122.993l-1.463-.179A7.01 7.01 0 008 15a7.014 7.014 0 006.947-6c.019-.128.034-.297.048-.507A.526.526 0 0115.519 8a.48.48 0 01.48.507 7.579 7.579 0 01-.042.505C15.458 12.952 12.087 16 8 16a8.01 8.01 0 01-6.064-2.764z" fill="#000" fill-rule="nonzero"></path></svg>'},74:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 8a.522.522 0 01-.516.527H3.976L7.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L2 8l4.743-4.846a.508.508 0 01.73 0 .535.535 0 010 .746L3.976 7.473h9.508c.285 0 .516.236.516.527z" fill="#000" fill-rule="nonzero"></path></svg>'},82:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="evenodd"></path></svg>'}}))}}}));