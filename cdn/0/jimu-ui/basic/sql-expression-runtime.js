System.register(["jimu-core","jimu-ui"],(function(e){var t,n;return{setters:[function(e){t=e},function(e){n=e}],execute:function(){e(function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=967)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},215:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M1.1 3H.5a.5.5 0 010-1H3V1a1 1 0 011-1h4a1 1 0 011 1v1h2.5a.5.5 0 010 1h-.6l-.81 8.1a1 1 0 01-.995.9h-6.19a1 1 0 01-.995-.9L1.1 3zm1.005 0l.8 8h6.19l.8-8h-7.79zM4 2h4V1H4v1zm.5 2a.5.5 0 01.5.5v5a.5.5 0 01-1 0v-5a.5.5 0 01.5-.5zm3 0a.5.5 0 01.5.5v5a.5.5 0 01-1 0v-5a.5.5 0 01.5-.5z" fill-rule="evenodd"></path></svg>'},58:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 01.708 0 .464.464 0 010 .677l-2.833 2.71a.517.517 0 01-.708 0L.813 2.983a.464.464 0 010-.677.517.517 0 01.708 0z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},59:function(e,t){e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M.146 3.146a.5.5 0 01.708 0L6 8.5l5.146-5.354a.5.5 0 01.708.708l-5.5 5.707a.5.5 0 01-.708 0l-5.5-5.707a.5.5 0 010-.708z" fill="#000"></path></g><defs><clipPath id="clip0"><path fill="#fff" d="M0 0h12v12H0z"></path></clipPath></defs></svg>'},65:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 32"><path d="M16.492 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 21.333a2 2 0 11.001 3.999 2 2 0 01-.001-3.999zm0-2.666a2 2 0 01-2-2v-8a2 2 0 114 0v8a2 2 0 01-2 2z"></path></svg>'},87:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a.75.75 0 01.75.75v6.5h6.5a.75.75 0 110 1.5h-6.5v6.5a.75.75 0 11-1.5 0v-6.5H.75a.75.75 0 110-1.5h6.5V.75A.75.75 0 018 0z" fill="#000" fill-rule="evenodd"></path></svg>'},967:function(e,t,n){"use strict";n.r(t),n.d(t,"SqlExpressionSizeMode",(function(){return ee})),n.d(t,"ClauseInputEditor",(function(){return te})),n.d(t,"ClauseRelationship",(function(){return Oe})),n.d(t,"getOperatorsByShortType",(function(){return ge})),n.d(t,"getClauseArrayByChange",(function(){return be})),n.d(t,"getCamelCase",(function(){return Ce})),n.d(t,"getJimuFieldNamesBySqlExpression",(function(){return Ee})),n.d(t,"isSqlExpressionValid",(function(){return Te})),n.d(t,"getShownClauseNumberByExpression",(function(){return je})),n.d(t,"getTotalClauseNumberByExpression",(function(){return xe})),n.d(t,"getClauseLabel",(function(){return we})),n.d(t,"getClauseDefaultLabel",(function(){return Ve})),n.d(t,"updateSQLExpressionByVersion",(function(){return _e})),n.d(t,"getInputEditor",(function(){return Nt})),n.d(t,"getCodedValuesFromDs",(function(){return Dt})),n.d(t,"getDefaultClauseValObj",(function(){return Mt})),n.d(t,"getDefaultSingleClause",(function(){return Ut})),n.d(t,"getDefaultClauseSet",(function(){return kt})),n.d(t,"isCaseSensitiveSupportedByOperatorAndSourceType",(function(){return At})),n.d(t,"isAskForValueSupportedByOperatorAndSourceType",(function(){return Rt})),n.d(t,"getCodedValueInputEditorsByOperatorAndSourceType",(function(){return Lt})),n.d(t,"getClauseValObjByOperator",(function(){return Bt})),n.d(t,"getDisplayTypes",(function(){return qt})),n.d(t,"getInputEditorListByOperatorAndSourceType",(function(){return zt})),n.d(t,"getJimuFieldTypeByEsriType",(function(){return Wt})),n.d(t,"getOperatorsByEsriType",(function(){return Ht})),n.d(t,"SqlExpressionRuntime",(function(){return nn})),n.d(t,"InputEditorRender",(function(){return Qt}));var r={};n.r(r),n.d(r,"SqlExpressionClauseRuntime",(function(){return l})),n.d(r,"VIDoubleDateTimePicker",(function(){return p})),n.d(r,"VIDoubleNumberSelector",(function(){return p})),n.d(r,"VIPillSelector",(function(){return f})),n.d(r,"VIPredefinedSelector",(function(){return re}));var o,a=n(0),s=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function l(e){var t=e.theme;return Object(a.css)(o||(o=s(["\n    margin: 10px 0;\n\n    .sql-expression-label, .sql-expression-displaylabel{\n      width: 100%;\n      font-size: ",";\n      color: ",";\n    }\n    .sql-expression-input{\n      width: 100%;\n      \n    }\n    .sql-expression-hint{\n      margin-top: 4px;\n      font-size: ",";\n      color: ",";\n      font-style: italic;\n    }\n\n    .clause-inline{\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .sql-expression-label{\n        width: calc(40% - 8px);\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      .sql-expression-label, .sql-expression-displaylabel{\n        line-height: 32px;\n      }\n      .sql-expression-input{\n        width: calc(60% - 8px);\n      }\n    }\n\n  "],["\n    margin: 10px 0;\n\n    .sql-expression-label, .sql-expression-displaylabel{\n      width: 100%;\n      font-size: ",";\n      color: ",";\n    }\n    .sql-expression-input{\n      width: 100%;\n      \n    }\n    .sql-expression-hint{\n      margin-top: 4px;\n      font-size: ",";\n      color: ",";\n      font-style: italic;\n    }\n\n    .clause-inline{\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .sql-expression-label{\n        width: calc(40% - 8px);\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      .sql-expression-label, .sql-expression-displaylabel{\n        line-height: 32px;\n      }\n      .sql-expression-input{\n        width: calc(60% - 8px);\n      }\n    }\n\n  "])),a.polished.rem(13),t.colors.black,a.polished.rem(12),t.colors.palette.dark[300])}var i,u=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function p(e){return Object(a.css)(i||(i=u(["\n    justify-content: space-between;\n    .double-input-connector{\n      margin-top: 0.15rem;\n      margin-bottom: 0.15rem;\n      text-align: center;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  "],["\n    justify-content: space-between;\n    .double-input-connector{\n      margin-top: 0.15rem;\n      margin-bottom: 0.15rem;\n      text-align: center;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  "])))}var c,d=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function f(e){var t=e.theme;return Object(a.css)(c||(c=d(["\n    /** setting */\n    .pill-selector-button{\n      justify-content: space-between;\n      display: flex;\n      align-items: center;\n\n      .pill-display-label{\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        width: calc(100% - 20px);\n      }\n    }\n\n    .pill-selector-popper{\n      padding: 12px;\n      max-width: 320px;\n      max-height: 320px;\n      overflow-y: auto;\n\n      .jimu-btn{\n        margin: 4px;\n        max-width: 100%;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n\n    /** runtime */\n    .pill-runtime-container{\n      /* width: calc(100% + 10px); */\n      width: 100%;\n      .pill-btn-container{\n        display: flex;\n        flex-wrap: wrap;\n        margin-left: -5px;\n        margin-top: -5px;\n\n        .pill-btn{\n          margin: 5px;\n          max-width: calc(100% - 10px);\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          /* &:first-of-type{\n            margin-left: 0;\n          }\n          &:last-of-type{\n            margin-right: 0;\n          } */\n\n          &.pill-dash-btn{\n            border: 1px dashed ","; /*TODO*/\n          }\n        }\n      }\n      &.block-pills .pill-btn{\n        display: block;\n        margin-top: 10px;\n      }\n    }\n  "],["\n    /** setting */\n    .pill-selector-button{\n      justify-content: space-between;\n      display: flex;\n      align-items: center;\n\n      .pill-display-label{\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        width: calc(100% - 20px);\n      }\n    }\n\n    .pill-selector-popper{\n      padding: 12px;\n      max-width: 320px;\n      max-height: 320px;\n      overflow-y: auto;\n\n      .jimu-btn{\n        margin: 4px;\n        max-width: 100%;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n\n    /** runtime */\n    .pill-runtime-container{\n      /* width: calc(100% + 10px); */\n      width: 100%;\n      .pill-btn-container{\n        display: flex;\n        flex-wrap: wrap;\n        margin-left: -5px;\n        margin-top: -5px;\n\n        .pill-btn{\n          margin: 5px;\n          max-width: calc(100% - 10px);\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          /* &:first-of-type{\n            margin-left: 0;\n          }\n          &:last-of-type{\n            margin-right: 0;\n          } */\n\n          &.pill-dash-btn{\n            border: 1px dashed ","; /*TODO*/\n          }\n        }\n      }\n      &.block-pills .pill-btn{\n        display: block;\n        margin-top: 10px;\n      }\n    }\n  "])),t.colors.white)}var m,v,h,y,O,g,S,b,C,I,E,T,j,x,w,V,_,P,F,N,D,M,U,k,A,R,L,B,q,z,W,H,K,Q,Y,J,G,X,Z,$,ee,te,ne=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function re(e){var t=e.theme;return Object(a.css)(m||(m=ne(["\n    .predefined-list{\n      min-height: 150px;\n\n      .predefined-list-header{\n        border-bottom: 1px solid ",";\n        line-height: 30px;\n\n        .dragIcon{\n          width: 26px;\n        }\n      }\n\n      .predefined-list-content{\n        .predefined-item{\n          padding: 5px 0px;\n          margin-bottom: 2px;\n          background-color: ",";\n        }\n      }\n\n      .predefined-value, .predefined-label{\n        width: 160px;\n        &.value-input-isValid{\n          outline: 1px solid ",';\n\n          button:focus, input:focus, .dropdown-button[aria-expanded="true"] {\n            border: none !important;\n          }\n        }\n      }\n      .predefined-label {\n        margin-left: 1.5rem;\n      }\n\n      .predefined-cbx{\n        display: flex;\n        width: 150px;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .predefined-delete{\n        width:100px;\n        text-align: right;\n      }\n\n    }\n\n    .invalide-label{\n      color: ',";\n      font-size: 12px;\n      margin-top: '-32px';\n      margin-bottom: '8px'\n    }\n  "],["\n    .predefined-list{\n      min-height: 150px;\n\n      .predefined-list-header{\n        border-bottom: 1px solid ",";\n        line-height: 30px;\n\n        .dragIcon{\n          width: 26px;\n        }\n      }\n\n      .predefined-list-content{\n        .predefined-item{\n          padding: 5px 0px;\n          margin-bottom: 2px;\n          background-color: ",";\n        }\n      }\n\n      .predefined-value, .predefined-label{\n        width: 160px;\n        &.value-input-isValid{\n          outline: 1px solid ",';\n\n          button:focus, input:focus, .dropdown-button[aria-expanded="true"] {\n            border: none !important;\n          }\n        }\n      }\n      .predefined-label {\n        margin-left: 1.5rem;\n      }\n\n      .predefined-cbx{\n        display: flex;\n        width: 150px;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .predefined-delete{\n        width:100px;\n        text-align: right;\n      }\n\n    }\n\n    .invalide-label{\n      color: ',";\n      font-size: 12px;\n      margin-top: '-32px';\n      margin-bottom: '8px'\n    }\n  "])),t.colors.palette.dark[200],t.colors.palette.light[400],t.colors.palette.danger[700],t.colors.palette.danger[700])}function oe(e,t){void 0===t&&(t=!1);var n="calc(100% - 8px)",r={inputEditorWidth:"calc("+n+" * 0.44)",connectorWidth:"calc("+n+" * 0.12)",dropDownWidth:"calc("+n+" * 0.32)"};return e&&(t?(r.inputEditorWidth="calc(calc(100% - 4px) * 0.6)",r.dropDownWidth="calc(calc(100% - 4px) * 0.4)"):r.inputEditorWidth="100%"),r}!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(ee||(ee={})),function(e){e.DoubleNumberSelector="DOUBLE_NUMBER_SELECTOR",e.TextInput="TEXT_BOX",e.UniquePredefinedSelector="UNIQUE_PREDEFINED_SELECTOR",e.MultiplePredefinedSelector="MULTIPLE_PREDEFINED_SELECTOR",e.FieldSelector="FIELD_SELECTOR",e.SimpleSelect="SIMPLE_SELECT",e.UniquePillWrapSelector="UNIQUE_PILL_WRAP_SELECTOR",e.MultipleSelect="MULTIPLE_SELECT",e.MultiplePillWrapSelector="MULTIPLE_PILL_WRAP_SELECTOR",e.DatePicker="DATE_PICKER",e.DateTimePicker="DATE_TIME_PICKER",e.DateRangeSelector="DATE_RANGE_SELECTOR",e.DoubleDatePicker="DOUBLE_DATE_PICKER",e.DoubleDateTimePicker="DOUBLE_DATE_TIME_PICKER",e.NumberListSelector="NUMBER_LIST_SELECTOR",e.BlankSelector="BLANK_SELECTOR"}(te||(te={}));var ae=[te.FieldSelector],se=[te.SimpleSelect,te.UniquePillWrapSelector],le=[te.MultipleSelect,te.MultiplePillWrapSelector],ie=[te.TextInput],ue=[te.TextInput],pe=[te.DoubleNumberSelector],ce=[te.DatePicker,te.DateTimePicker],de=[te.DoubleDatePicker,te.DoubleDateTimePicker],fe=[te.NumberListSelector],me=[te.SimpleSelect,te.UniquePillWrapSelector],ve=[te.BlankSelector],he=[te.UniquePredefinedSelector],ye=[te.MultiplePredefinedSelector],Oe=((v={})[a.ClauseOperator.StringOperatorIs]=((h={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,codedValueInputEditors:me,supportAskForValue:!0,supportCaseSensitive:!0},h[a.ClauseSourceType.Field]={normalInputEditors:ae},h[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0,supportCaseSensitive:!0},h[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},h),v[a.ClauseOperator.StringOperatorIsNot]=((y={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,codedValueInputEditors:me,supportAskForValue:!0,supportCaseSensitive:!0},y[a.ClauseSourceType.Field]={normalInputEditors:ae},y[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0,supportCaseSensitive:!0},y[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},y),v[a.ClauseOperator.StringOperatorContains]=((O={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},O[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},O[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},O),v[a.ClauseOperator.StringOperatorDoesNotContain]=((g={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},g[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},g[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},g),v[a.ClauseOperator.StringOperatorStartsWith]=((S={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},S[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},S[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},S),v[a.ClauseOperator.StringOperatorDoesNotStartWith]=((b={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},b[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},b[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},b),v[a.ClauseOperator.StringOperatorEndsWith]=((C={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},C[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},C[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},C),v[a.ClauseOperator.StringOperatorDoesNotEndWith]=((I={})[a.ClauseSourceType.UserInput]={normalInputEditors:ie,supportAskForValue:!0,supportCaseSensitive:!0},I[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0,supportCaseSensitive:!0},I[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},I),v[a.ClauseOperator.StringOperatorIsAnyOf]=((E={})[a.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:le,codedValueInputEditors:le,supportAskForValue:!0,supportCaseSensitive:!0},E[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},E),v[a.ClauseOperator.StringOperatorIsNoneOf]=((T={})[a.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:le,codedValueInputEditors:le,supportAskForValue:!0,supportCaseSensitive:!0},T[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0,supportCaseSensitive:!0},T),v[a.ClauseOperator.StringOperatorIsBlank]=((j={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve,supportCaseSensitive:!0},j),v[a.ClauseOperator.StringOperatorIsNotBlank]=((x={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve,supportCaseSensitive:!0},x),v[a.ClauseOperator.NumberOperatorIs]=((w={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,codedValueInputEditors:me,supportAskForValue:!0},w[a.ClauseSourceType.Field]={normalInputEditors:ae},w[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0},w[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},w),v[a.ClauseOperator.NumberOperatorIsNot]=((V={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,codedValueInputEditors:me,supportAskForValue:!0},V[a.ClauseSourceType.Field]={normalInputEditors:ae},V[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0},V[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},V),v[a.ClauseOperator.NumberOperatorIsAtLeast]=((_={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,supportAskForValue:!0},_[a.ClauseSourceType.Field]={normalInputEditors:ae},_[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,supportAskForValue:!0},_[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},_),v[a.ClauseOperator.NumberOperatorIsAtMost]=((P={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,supportAskForValue:!0},P[a.ClauseSourceType.Field]={normalInputEditors:ae},P[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,supportAskForValue:!0},P[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},P),v[a.ClauseOperator.NumberOperatorIsLessThan]=((F={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,supportAskForValue:!0},F[a.ClauseSourceType.Field]={normalInputEditors:ae},F[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,supportAskForValue:!0},F[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},F),v[a.ClauseOperator.NumberOperatorIsGreaterThan]=((N={})[a.ClauseSourceType.UserInput]={normalInputEditors:ue,supportAskForValue:!0},N[a.ClauseSourceType.Field]={normalInputEditors:ae},N[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,supportAskForValue:!0},N[a.ClauseSourceType.SingleSelectFromPredefined]={normalInputEditors:he,codedValueInputEditors:he,supportAskForValue:!0},N),v[a.ClauseOperator.NumberOperatorIsBetween]=((D={})[a.ClauseSourceType.UserInput]={normalInputEditors:pe,supportAskForValue:!0},D),v[a.ClauseOperator.NumberOperatorIsNotBetween]=((M={})[a.ClauseSourceType.UserInput]={normalInputEditors:pe,supportAskForValue:!0},M),v[a.ClauseOperator.NumberOperatorIsAnyOf]=((U={})[a.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:le,codedValueInputEditors:le,supportAskForValue:!0},U[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0},U),v[a.ClauseOperator.NumberOperatorIsNoneOf]=((k={})[a.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:le,codedValueInputEditors:le,supportAskForValue:!0},k[a.ClauseSourceType.MultipleSelectFromPredefined]={normalInputEditors:ye,codedValueInputEditors:ye,supportAskForValue:!0},k),v[a.ClauseOperator.NumberOperatorIsBlank]=((A={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve},A),v[a.ClauseOperator.NumberOperatorIsNotBlank]=((R={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve},R),v[a.ClauseOperator.DateOperatorIsOn]=((L={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},L[a.ClauseSourceType.Field]={normalInputEditors:ae},L[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0},L),v[a.ClauseOperator.DateOperatorIsNotOn]=((B={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},B[a.ClauseSourceType.Field]={normalInputEditors:ae},B[a.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:se,codedValueInputEditors:me,supportAskForValue:!0},B),v[a.ClauseOperator.DateOperatorIsIn]=((q={})[a.ClauseSourceType.UserInput]={normalInputEditors:[te.DateRangeSelector],supportAskForValue:!0},q),v[a.ClauseOperator.DateOperatorIsNotIn]=((z={})[a.ClauseSourceType.UserInput]={normalInputEditors:[te.DateRangeSelector],supportAskForValue:!0},z),v[a.ClauseOperator.DateOperatorIsBefore]=((W={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},W[a.ClauseSourceType.Field]={normalInputEditors:ae},W),v[a.ClauseOperator.DateOperatorIsAfter]=((H={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},H[a.ClauseSourceType.Field]={normalInputEditors:ae},H),v[a.ClauseOperator.DateOperatorIsOnOrBefore]=((K={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},K[a.ClauseSourceType.Field]={normalInputEditors:ae},K),v[a.ClauseOperator.DateOperatorIsOnOrAfter]=((Q={})[a.ClauseSourceType.UserInput]={normalInputEditors:ce,supportAskForValue:!0},Q[a.ClauseSourceType.Field]={normalInputEditors:ae},Q),v[a.ClauseOperator.DateOperatorIsInTheLast]=((Y={})[a.ClauseSourceType.UserInput]={normalInputEditors:fe,supportAskForValue:!0},Y),v[a.ClauseOperator.DateOperatorIsNotInTheLast]=((J={})[a.ClauseSourceType.UserInput]={normalInputEditors:fe,supportAskForValue:!0},J),v[a.ClauseOperator.DateOperatorIsBetween]=((G={})[a.ClauseSourceType.UserInput]={normalInputEditors:de,supportAskForValue:!0},G),v[a.ClauseOperator.DateOperatorIsNotBetween]=((X={})[a.ClauseSourceType.UserInput]={normalInputEditors:de,supportAskForValue:!0},X),v[a.ClauseOperator.DateOperatorIsBlank]=((Z={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve},Z),v[a.ClauseOperator.DateOperatorIsNotBlank]=(($={})[a.ClauseSourceType.UserInput]={normalInputEditors:ve},$),v);function ge(e,t){var n=[];return"STRING"===e?n=[a.ClauseOperator.StringOperatorIs,a.ClauseOperator.StringOperatorIsNot,a.ClauseOperator.StringOperatorStartsWith,a.ClauseOperator.StringOperatorDoesNotStartWith,a.ClauseOperator.StringOperatorEndsWith,a.ClauseOperator.StringOperatorDoesNotEndWith,a.ClauseOperator.StringOperatorContains,a.ClauseOperator.StringOperatorDoesNotContain,a.ClauseOperator.StringOperatorIsAnyOf,a.ClauseOperator.StringOperatorIsNoneOf,a.ClauseOperator.StringOperatorIsBlank,a.ClauseOperator.StringOperatorIsNotBlank]:"NUMBER"===e?n=[a.ClauseOperator.NumberOperatorIs,a.ClauseOperator.NumberOperatorIsNot,a.ClauseOperator.NumberOperatorIsAtLeast,a.ClauseOperator.NumberOperatorIsAtMost,a.ClauseOperator.NumberOperatorIsLessThan,a.ClauseOperator.NumberOperatorIsGreaterThan,a.ClauseOperator.NumberOperatorIsBetween,a.ClauseOperator.NumberOperatorIsNotBetween,a.ClauseOperator.NumberOperatorIsAnyOf,a.ClauseOperator.NumberOperatorIsNoneOf,a.ClauseOperator.NumberOperatorIsBlank,a.ClauseOperator.NumberOperatorIsNotBlank]:"DATE"===e&&(n=[a.ClauseOperator.DateOperatorIsOn,a.ClauseOperator.DateOperatorIsNotOn,a.ClauseOperator.DateOperatorIsIn,a.ClauseOperator.DateOperatorIsNotIn,a.ClauseOperator.DateOperatorIsBefore,a.ClauseOperator.DateOperatorIsAfter,a.ClauseOperator.DateOperatorIsOnOrBefore,a.ClauseOperator.DateOperatorIsOnOrAfter,a.ClauseOperator.DateOperatorIsBetween,a.ClauseOperator.DateOperatorIsNotBetween,a.ClauseOperator.DateOperatorIsBlank,a.ClauseOperator.DateOperatorIsNotBlank],t&&n.splice(8,0,a.ClauseOperator.DateOperatorIsInTheLast,a.ClauseOperator.DateOperatorIsNotInTheLast)),n}var Se=[a.ClauseSourceType.SingleSelectFromUnique,a.ClauseSourceType.MultipleSelectFromUnique];function be(e,t,n){var r=n.split("_"),o=parseInt(r[r.length-1]),a=e.slice(0,o);return t&&(a=a.concat(t)),a=a.concat(e.slice(o+1,e.length))}function Ce(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function Ie(e,t,n,r){var o=null;if(Se.includes(t.valueOptions.sourceType)&&t.askForValueOptions&&t.askForValueOptions.cascade!==a.ClauseCascade.None){var s=function(e,t,n){var r={sql:"",logicalOperator:e.logicalOperator,parts:[]},o=t.askForValueOptions.cascade,s=n.split("_"),l=null,i=parseInt(s[1]);return s.length>2&&(l=parseInt(s[1]),i=parseInt(s[3])),o===a.ClauseCascade.Previous?e.parts.some((function(e,t){if(l)if(t<l)r.parts.push(e);else{if(t!==l)return!0;var n=e,o={type:n.type,logicalOperator:n.logicalOperator,parts:[]};n.parts.some((function(e,t){if(!(t<i))return!0;o.parts.push(e)})),r.parts.push(o)}else{if(!(t<i))return!0;r.parts.push(e)}})):o===a.ClauseCascade.All&&e.parts.some((function(e,t){if(l)if(t!==l)r.parts.push(e);else{var n=e,o={type:n.type,logicalOperator:n.logicalOperator,parts:[]};n.parts.some((function(e,t){t!==i&&o.parts.push(e)})),r.parts.push(o)}else t!==i&&r.parts.push(e)})),r}(e,t,n);o=a.dataSourceUtils.getArcGISSQL(Object(a.Immutable)(s),r).sql}return o}function Ee(e){if(!e)return[];var t={};return function e(n){n.parts&&n.parts.forEach((function(n){n.type===a.ClauseType.Set?e(n):t[n.jimuFieldName]=!0}))}(e),Object.keys(t).map((function(e){return e}))}function Te(e){var t=!0;return e?(function e(n){n.parts&&n.parts.forEach((function(n){n.type===a.ClauseType.Set?e(n):n.valueOptions.isValid||(t=!1)}))}(e),t):t}function je(e){var t=0;return e&&e.parts.some((function(e){e.type===a.ClauseType.Single&&e.displayType!==a.ClauseDisplayType.None?t++:e.type===a.ClauseType.Set&&e.parts.some((function(e){e.displayType!==a.ClauseDisplayType.None&&t++}))})),t}function xe(e){var t=0;return e&&e.parts.some((function(e){e.type===a.ClauseType.Single?t++:e.type===a.ClauseType.Set&&e.parts.some((function(e){t++}))})),t}function we(e,t,n){var r=e.displayType,o=e.displayLabel,s=e.askForValueOptions,l="";return r!==a.ClauseDisplayType.None&&null===(l=r===a.ClauseDisplayType.UseAskForValue?s.label:o)&&(l=Ve(e,t,n)),l}function Ve(e,t,n){var r;if(!t)return"";var o=(t.alias||t.name)+" "+n;if(e.displayType===a.ClauseDisplayType.UseLabel){var s=null===(r=e.valueOptions)||void 0===r?void 0:r.value;if(s)o=o+" "+s.map((function(e){return t.type===a.JimuFieldType.String?"'"+e.label+"'":e.label})).join(",")}return o}function _e(e,t,n){if(e.parts){var r=e.asMutable({deep:!0});return r.parts.map((function(e){e.type===a.ClauseType.Set?e.parts.forEach((function(e){Pe(e,t,n)})):Pe(e,t,n)})),r}return null}function Pe(e,t,n){if("1.1.0"===t&&!e.displayType)if(e.askForValueOptions){if(e.displayType=a.ClauseDisplayType.UseAskForValue,""!==e.askForValueOptions.label){var r=Ve(e,e.jimuFieldName?Object(a.Immutable)(n.getSchema().fields[e.jimuFieldName]):null,a.i18n.getIntl().formatMessage({id:Ce(e.operator)}));e.askForValueOptions.label===r&&(e.askForValueOptions.label=null),e.askForValueOptions.label=null}}else e.displayType=a.ClauseDisplayType.None}var Fe,Ne,De=n(1),Me=(Fe=function(e,t){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ue=function(e){function t(t){var n=e.call(this,t)||this;return n._setStateForDisplayUI=function(){var e=n.props.fieldObj?n.props.fieldObj.type:null;n.setState({displayUI:n.getDisplayUI(e)})},n.getDisplayUI=function(e){var t="";switch(e){case a.JimuFieldType.Number:t="number";break;case a.JimuFieldType.String:case null:t="text"}return t},n.onNumberChange=function(e){var t=parseFloat(e.target.value),r=t+""!="NaN"?t:null;n.onChange(r)},n.onTextChange=function(e){var t=e.target.value;n.onChange(t+""!=""?t:null)},n.onChange=function(e){if(n.props.fieldObj){var t=null!==e?[{value:e,label:e+""}]:null,r=Mt(n.props.value.sourceType,n.props.value.inputEditor,t);n.props&&n.props.onChange(r)}},n.state={displayUI:null},n}return Me(t,e),t.prototype.componentDidMount=function(){var e=this.props.fieldObj?this.props.fieldObj.type:null;this.setState({displayUI:this.getDisplayUI(e)})},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj===e.fieldObj&&this.props.value.sourceType===e.value.sourceType&&this.props.value.inputEditor===e.value.inputEditor||this._setStateForDisplayUI()},t.prototype.render=function(){var e,t=this.props.runtime?void 0:"sm",n=oe(this.props.isSmallSize||this.props.runtime).inputEditorWidth,r=(null===(e=this.props.value)||void 0===e?void 0:e.value)?this.props.value.value[0].value:"";return"number"===this.state.displayUI?a.React.createElement(De.NumericInput,{size:t,style:{width:n},showHandlers:!1,value:r,onBlur:this.onNumberChange,onPressEnter:this.onNumberChange}):a.React.createElement(De.TextInput,{size:t,style:{width:n},type:"text",value:r,onBlur:this.onTextChange,onKeyUp:this.onTextChange})},t}(a.React.PureComponent),ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.getSelectedFields=function(){var e=n.props.value.value;return e?Object(a.Immutable)([e[0].value]):null},n.onChange=function(e){var t=e[0],r={value:t.jimuName,label:t.alias?t.alias:t.name},o=Mt(n.props.value.sourceType,n.props.value.inputEditor,[r]);n.props&&n.props.onChange(o)},n.state={FieldSelector:null,type:n.props.fieldObj.type},n}return ke(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,a.moduleLoader.loadModule("jimu-ui/advanced/data-source-selector").then((function(t){e.__unmount||e.setState({FieldSelector:t.FieldSelector})}))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj!==e.fieldObj&&this.setState({type:this.props.fieldObj.type})},t.prototype.render=function(){return this.state.FieldSelector?a.React.createElement("div",{style:{width:oe(this.props.isSmallSize).inputEditorWidth}},a.React.createElement(this.state.FieldSelector,{types:Object(a.Immutable)([this.state.type]),dataSources:[this.props.dataSource],onChange:this.onChange,hiddenFields:Object(a.Immutable)([this.props.fieldObj.jimuName]),selectedFields:this.getSelectedFields(),isDataSourceDropDownHidden:!0,isSearchInputHidden:!0,useDropdown:!0,dropdownProps:{size:this.props.runtime?void 0:"sm"}})):null},t}(a.React.PureComponent),Re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},n.onValue1Change=function(e){n.value1=parseFloat(e.target.value),n.onChange()},n.onValue2Change=function(e){n.value2=parseFloat(e.target.value),n.onChange()},n.onChange=function(){var e=[],t=null!==n.value1&&n.value1+""!="NaN"?{value:n.value1,label:n.value1+""}:null,r=null!==n.value2&&n.value2+""!="NaN"?{value:n.value2,label:n.value2+""}:null;e.push(t),e.push(r);var o=Mt(n.props.value.sourceType,n.props.value.inputEditor,e);n.props&&n.props.onChange(o)},n}return Re(t,e),t.prototype.render=function(){var e,t,n=this.props.runtime?void 0:"sm";this.value1=(null===(e=this.props.value)||void 0===e?void 0:e.value)&&this.props.value.value[0]?this.props.value.value[0].value:null,this.value2=(null===(t=this.props.value)||void 0===t?void 0:t.value)&&this.props.value.value[1]?this.props.value.value[1].value:null;var r=oe(!1);return a.React.createElement("div",{className:Object(a.classNames)(this.props.className,"double-number-picker d-flex")},a.React.createElement(De.NumericInput,{size:n,style:{width:r.inputEditorWidth},value:this.value1,showHandlers:!1,onBlur:this.onValue1Change,onPressEnter:this.onValue1Change}),a.React.createElement("div",{className:"double-input-connector",style:{width:r.connectorWidth}},this.i18nMessage("andLowerCase")),a.React.createElement(De.NumericInput,{size:n,style:{width:r.inputEditorWidth},value:this.value2,showHandlers:!1,onBlur:this.onValue2Change,onPressEnter:this.onValue2Change}))},t}(a.React.PureComponent),Be=a.themeUtils.withStyles(Object(a.injectIntl)(Le),"VIDoubleNumberSelector"),qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},We=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},He=function(e){function t(t){var n=e.call(this,t)||this;return n.onValueChange=function(e){var t=Mt(n.props.value.sourceType,n.props.value.inputEditor,e);n.props&&n.props.onChange(t)},n.state={},n}return qe(t,e),t.prototype.render=function(){var e=this.props.value&&this.props.value.value?this.props.value.value:Object(a.Immutable)([]),t=this.props,n=(t.value,t.fieldObj,We(t,["value","fieldObj"]));return a.React.createElement("div",{style:{width:oe(this.props.isSmallSize||this.props.runtime).inputEditorWidth}},a.React.createElement(De.AdvancedSelect,ze({},n,{field:this.props.fieldObj,values:e,isMultiple:this.props.isMultiple,allTag:"allDynamicTag",appendToBody:!!this.props.runtime,strategy:this.props.runtime?"absolute":"fixed",fluid:!0,size:this.props.runtime?void 0:"sm",onChange:this.onValueChange})))},t}(a.React.PureComponent),Ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e){function t(n){var r,o=e.call(this,n)||this;return o.getDataSource=function(){return o.dsManager.createLocalDataSource(o.props.dataSource,o.localDsRandomId)},o.isMultiple=function(){return o.props.value.sourceType===a.ClauseSourceType.MultipleSelectFromUnique},o.i18nMessage=function(e,t){return o.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]},t)},o.updateList=function(e){void 0===e&&(e=o.props.fieldObj),o._isMounted&&!o.props.codedValues&&e&&a.dataSourceUtils.queryValueLabelsByFieldAndPageSize(e,o.dataSource,100,o.props.intl,o.props.sql,o.context.scope,o.context.widgetId).then((function(e){o._isMounted&&o.setState({list:e.list,listWithSetValues:o.getListWithSetValues(e.list)})}))},o.getListWithSetValues=function(e){var t,n=(null===(t=o.props.value)||void 0===t?void 0:t.value)||[],r=e.concat(n).sort((function(e,t){var n;return null===(n=e.label)||void 0===n?void 0:n.localeCompare(t.label)}));return r.forEach((function(e,t){var n;e.value===(null===(n=r[t+1])||void 0===n?void 0:n.value)&&r.splice(t,1)})),r},o.getDisplayLabel=function(e){var t=e.value||[],n=t.length;return o.isMultiple()?o.i18nMessage("numSelected",{number:n}):n?t[0].label:o.i18nMessage("allTag")},o.onTogglePopper=function(){setTimeout((function(){return o.setState({isOpen:!o.state.isOpen})}),100)},o.isPillActive=function(e){var t;return!!((null===(t=o.props.value)||void 0===t?void 0:t.value)?o.props.value.value:[]).filter((function(t){return t.value===e})).length},o.onPillClick=function(e,t){var n,r=t.target.className.indexOf("active")<0;if(o.isMultiple()||r){var s=r?[e]:[];o.isMultiple()?null===(n=o.props.value.value)||void 0===n||n.map((function(t){(r||!r&&e.value!==t.value)&&s.push({value:t.value,label:t.label})})):(o.setState({isOpen:!1}),s.length&&s[0].value===a.EMPTY_OPTION_VALUE&&(s=[])),s=s.length?s:null;var l=Mt(o.props.value.sourceType,o.props.value.inputEditor,s);o.props&&o.props.onChange(l)}},o.onDisplayChange=function(e){var t=Mt(o.props.value.sourceType,e,o.props.value.value);o.props&&o.props.onChange(t)},o.getPills=function(e){var t=o.i18nMessage("allTag");return a.React.createElement("div",{className:"pill-btn-container"},!o.isMultiple()&&a.React.createElement(De.Button,{className:"pill-btn",size:o.props.runtime?void 0:"sm",value:a.EMPTY_OPTION_VALUE,active:null===o.props.value.value,onClick:function(e){return o.onPillClick({value:a.EMPTY_OPTION_VALUE,label:t},e)}},t),e.map((function(e,t){if(null!==e.value){var n=0===(o.props.codedValues||o.state.list).filter((function(t){return t.value===e.value})).length,r=o.isPillActive(e.value);return a.React.createElement(De.Button,{className:Object(a.classNames)("pill-btn",{"pill-dash-btn":n&&r}),size:o.props.runtime?void 0:"sm",key:t,value:e.value,active:r,onClick:function(t){return o.onPillClick(e,t)}},e.label)}})))},t.count++,o.dsManager=a.DataSourceManager.getInstance(),o.localDsRandomId=Ye(),o.dataSource=o.getDataSource(),o.state={list:[],listWithSetValues:(null===(r=o.props.value)||void 0===r?void 0:r.value)||[],isOpen:!1},o._isMounted=!0,o}return Ke(t,e),t.prototype.componentDidMount=function(){this.updateList()},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this.dsManager.destroyDataSource(this.dataSource.id)},t.prototype.componentDidUpdate=function(e){this.props.fieldObj!==e.fieldObj||this.props.codedValues!==e.codedValues||this.props.sql!==e.sql?this.updateList():this.props.datasourceInfo!==e.datasourceInfo||this.props.datasourceBelongInfo!==e.datasourceBelongInfo?(this.dataSource=this.getDataSource(),this.updateList()):this.props.value!==e.value&&this.setState({listWithSetValues:this.getListWithSetValues(this.state.list)})},t.prototype.render=function(){var e=this,t=this.props,r=t.className,o=t.codedValues,s=t.value,l=t.runtime,i=this.getDisplayLabel(s),u=o||this.state.listWithSetValues;return u.length>20&&(u=u.slice(0,20)),a.React.createElement("div",{className:Object(a.classNames)(r,"h-100")},l?a.React.createElement("div",{className:"pill-runtime-container"},this.getPills(u)):a.React.createElement("div",{className:"h-100 d-flex"},a.React.createElement(De.Button,{size:"sm",className:"pill-selector-button h-100",type:"default",ref:function(t){return e.pillButton=t},title:i,style:{width:oe(this.props.isSmallSize||l).inputEditorWidth,justifyContent:this.isMultiple()||null!==s.value?"space-between":"flex-end"},onClick:this.onTogglePopper},a.React.createElement("div",{className:"pill-display-label"},i),a.React.createElement(De.Icon,{icon:n(58),size:"8"})),a.React.createElement(De.Popper,{open:this.state.isOpen,toggle:this.onTogglePopper,className:r,showArrow:!0,reference:this.pillButton},a.React.createElement("div",{className:"pill-selector-popper"},a.React.createElement("div",{className:"pill-setting-container"},this.getPills(u))))))},t.contextType=De.QueryScopeContext,t.count=-1,t}(a.React.PureComponent),Ye=function(){return"PILL_SELECT-"+Qe.count},Je=a.ReactRedux.connect((function(e,t){var n=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return n&&t.dataSource?{datasourceInfo:n.dataSourcesInfo[t.dataSource.id]||null,datasourceBelongInfo:t.dataSource.isDataView?n.dataSourcesInfo[t.dataSource.belongToDataSource.id]:null}:{datasourceInfo:null,datasourceBelongInfo:null}}))(Qe),Ge=a.themeUtils.withStyles(Object(a.injectIntl)(Je),"VIPillSelector"),Xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(t){var n=e.call(this,t)||this;return n.getInputEditor=function(e){var t="";switch(e){case te.DatePicker:case te.DoubleDatePicker:t="date";break;case te.DateTimePicker:case te.DoubleDateTimePicker:t="datetime";break;default:t=null}return t},n.getFormatedValue=function(){var e;if(n.state.displayUI&&n.props.value&&n.props.value.value){var t=new Date(n.props.value.value[0].value),r=a.dataSourceUtils.getLocalTimes(t),o=new Date(r);if(!n.state.displayUI.includes("time")&&0!==o.getHours())return n.onChange(r),null;e=o.getFullYear()+"-"+("0"+(o.getMonth()+1)).slice(-2)+"-"+("0"+o.getDate()).slice(-2),n.state.displayUI.includes("time")&&(e=e+"T"+("0"+o.getHours()).slice(-2)+":"+("0"+o.getMinutes()).slice(-2)+":"+("0"+o.getSeconds()).slice(-2)),e=new Date(e)}return e||new Date},n.checkIfTimezoneChanged=function(){var e=!1;if(n.state.displayUI&&n.props.value&&n.props.value.value){var t=new Date(n.props.value.value[0].value),r=a.dataSourceUtils.getLocalTimes(t),o=new Date(r);n.state.displayUI.includes("time")||0===o.getHours()||(n.onChange(t.getTime()),e=!0)}return e},n.onChange=function(e,t){var r=e?[{value:e,label:t||""}]:null,o=Mt(n.props.value.sourceType,n.props.value.inputEditor,r);n.props&&n.props.onChange(o)},n.state={DatePicker:null,displayUI:null},n}return Xe(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,a.moduleLoader.loadModule("jimu-ui/basic/date-picker").then((function(t){e.__unmount||(e.props.value.inputEditor?e.setState({DatePicker:t.DatePicker,displayUI:e.getInputEditor(e.props.value.inputEditor)}):e.setState({DatePicker:t.DatePicker}))}))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.componentDidUpdate=function(e,t){this.__unmount||this.props.fieldObj===e.fieldObj&&this.props.value.sourceType===e.value.sourceType&&this.props.value.inputEditor===e.value.inputEditor||this.setState({displayUI:this.getInputEditor(this.props.value.inputEditor)})},t.prototype.render=function(){var e,t,n,r=this;if(!this.state.DatePicker)return null;var o=null,s=null===(t=null===(e=this.props.fieldObj)||void 0===e?void 0:e.format)||void 0===t?void 0:t.dateFormat,l=!1,i=!1,u=!1;if(this.state.displayUI){if(null===(n=this.props.value)||void 0===n?void 0:n.value){var p=this.props.value.value[0].value;"string"==typeof p?o=p:(o=new Date(p),l=!0)}"date"===this.state.displayUI?s?s.indexOf("Time")>0&&(s=s.split("24")[0].split("ShortTime")[0].split("LongTime")[0]):s=a.dateUtils.DATE_TIME_DEFAULT_FORMAT.date:"datetime"===this.state.displayUI&&(i=!0,s?s.indexOf("Time")<0&&(s=s+" "+a.dateUtils.DATE_TIME_DEFAULT_FORMAT.time):s=a.dateUtils.DATE_TIME_DEFAULT_FORMAT.dateTime,s.indexOf("LongTime")>=0&&(u=!0))}return a.React.createElement(this.state.DatePicker,{style:this.props.style||{width:oe(this.props.isSmallSize||this.props.runtime).inputEditorWidth},selectedDate:o,showTimeInput:i,isTimeLong:u,isUTCDate:l,format:s,runtime:this.props.runtime,supportVirtualDateList:!this.props.runtime,hasDoneButton:!0,onChange:function(e,t){return r.onChange(e,t)}})},t}(a.React.PureComponent),$e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=[a.dateUtils.VirtualDateType.ThisWeek,a.dateUtils.VirtualDateType.ThisMonth,a.dateUtils.VirtualDateType.ThisQuarter,a.dateUtils.VirtualDateType.ThisYear],tt=function(e){function t(t){var n=e.call(this,t)||this;return n.onValueChange=function(e,t){var r=e.target.value,o=null;""!==r&&(o=[{value:r,label:t.props.label}]);var a=Mt(n.props.value.sourceType,n.props.value.inputEditor,o);n.props&&n.props.onChange(a)},n.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.state={},n}return $e(t,e),t.prototype.render=function(){var e=this,t=this.props.value&&this.props.value.value?this.props.value.value[0].value:"";return a.React.createElement(De.Select,{size:this.props.runtime?void 0:"sm",style:{width:oe(this.props.isSmallSize||this.props.runtime).inputEditorWidth},value:t,onChange:this.onValueChange,menuProps:{onClick:this.stopPropagation}},a.React.createElement("option",{key:0,value:"",label:""}," "),et.map((function(t,n){var r=Ce(t),o=e.props.intl.formatMessage({id:r,defaultMessage:De.defaultMessages[r]});return a.React.createElement("option",{key:n,value:t,label:o},o)})))},t}(a.React.PureComponent),nt=Object(a.injectIntl)(tt),rt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},n.onChange=function(){var e=(n.value1.value||[null]).concat(n.value2.value||[null]),t=Mt(n.props.value.sourceType,n.props.value.inputEditor,e);n.props&&n.props.onChange(t)},n}return rt(t,e),t.prototype.render=function(){var e=this,t=this.props.value,n=(null==t?void 0:t.value)&&t.value[0]?[t.value[0]]:null,r=(null==t?void 0:t.value)&&t.value[1]?[t.value[1]]:null;this.value1=Mt(t.sourceType,t.inputEditor,n),this.value2=Mt(t.sourceType,t.inputEditor,r);var o=oe(!1);return a.React.createElement("div",{className:Object(a.classNames)(this.props.className,"double-datetime-picker d-flex")},a.React.createElement(Ze,{style:{width:o.inputEditorWidth},value:this.value1,fieldObj:this.props.fieldObj,runtime:this.props.runtime,onChange:function(t){e.value1=t,e.onChange()}}),a.React.createElement("div",{className:"double-input-connector",style:{width:o.connectorWidth}},this.i18nMessage("andLowerCase")),a.React.createElement(Ze,{style:{width:o.inputEditorWidth},value:this.value2,fieldObj:this.props.fieldObj,runtime:this.props.runtime,onChange:function(t){e.value2=t,e.onChange()}}))},t}(a.React.PureComponent),at=a.themeUtils.withStyles(Object(a.injectIntl)(ot),"VIDoubleDateTimePicker"),st=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=[a.dateUtils.TimeUnit.Minute,a.dateUtils.TimeUnit.Hour,a.dateUtils.TimeUnit.Day,a.dateUtils.TimeUnit.Week,a.dateUtils.TimeUnit.Month,a.dateUtils.TimeUnit.Year],it=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},n.onUnitSelect=function(e){e!==n.unit&&(n.unit=e,n.onChange())},n.onChange=function(){var e=[{value:n.value,label:n.unit}],t=Mt(n.props.value.sourceType,n.props.value.inputEditor,e);n.props&&n.props.onChange(t)},n.toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isOpen:!1},n}return st(t,e),t.prototype.render=function(){var e=this,t=this.props.value.value[0];this.value=t.value?t.value:null,this.unit=t.label;var r=this.i18nMessage(Ce(this.unit)),o=oe(this.props.isSmallSize||this.props.runtime,!0);return Object(a.jsx)("div",{className:"d-flex number-list-selector",style:{justifyContent:this.props.runtime?"space-between":"flex-start"}},Object(a.jsx)(De.NumericInput,{style:{width:o.inputEditorWidth},placeholder:this.i18nMessage("amount"),showHandlers:!1,value:this.value,onChange:function(t){e.value=t,e.onChange()},size:this.props.runtime?void 0:"sm"}),Object(a.jsx)(De.Dropdown,{className:"ml-1",style:{width:o.dropDownWidth},isOpen:this.state.isOpen,toggle:this.toggle,activeIcon:!0},Object(a.jsx)(De.DropdownButton,{type:"default",title:r,onClick:this.toggle,size:this.props.runtime?void 0:"sm",arrow:Object(a.jsx)(De.Icon,{icon:n(58),size:"8"})},r),Object(a.jsx)(De.DropdownMenu,{showArrow:!0},Object(a.jsx)(De.DropdownItem,{header:!0},this.i18nMessage("selectUnit")),lt.map((function(t,n){return Object(a.jsx)(De.DropdownItem,{key:n,onClick:function(){e.onUnitSelect(t)},active:e.unit===t},e.i18nMessage(Ce(t)))})))))},t}(a.React.PureComponent),ut=Object(a.injectIntl)(it),pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(){return(ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ft=n(215),mt=n(59),vt=function(e){function t(t){var n=e.call(this,t)||this;return n.externalDsStyle={maxWidth:"960px"},n.i18nMessage=function(e){var t=n.props.intl;return t?t.formatMessage({id:e,defaultMessage:De.defaultMessages[e]}):""},n.isDuplicated=function(){},n.onSelectValueChange=function(e){null===e?n.onChange({value:a.EMPTY_OPTION_VALUE,label:null,alias:null}):n.onChange({value:e[0].value,label:e[0].label,alias:e[0].label})},n.onNumberValueBlur=function(e){var t=parseFloat(e.target.value),r=t+""!="NaN"?t:null;if(r!==n.props.value.value){var o=null===r?null:r+"";n.onChange({value:r,label:o,alias:o})}},n.onNumberValueKeyUp=function(){n.numberValueInputRef.blur()},n.onStringValueBlur=function(e){var t=e.target.value.trim(),r=""!==t?t:null,o=r;t===n.i18nMessage("allTag")&&(r=a.EMPTY_OPTION_VALUE,o=null),r!==n.props.value.value&&n.onChange({value:r,label:t,alias:o})},n.onStringValueKeyUp=function(){n.stringValueInputRef.blur()},n.onAliasBlur=function(e){var t=e.target.value.trim();n.props.value.value===a.EMPTY_OPTION_VALUE&&t===n.i18nMessage("allTag")&&(t=null),t!==n.props.value.alias&&(t=""!==t?t:n.props.value.alias,n.onChange({value:n.props.value.value,label:n.props.value.label,alias:t,selected:n.props.value.selected}))},n.onAliasKeyUp=function(e){n.aliasInputRef.blur(),n.aliasInputRef},n.onAliasChange=function(e){""===e.target.value.trim()&&n.setState({alias:""})},n.setSelected=function(){n.onChange({value:n.props.value.value,label:n.props.value.label,alias:n.props.value.alias,selected:!n.props.value.selected})},n.onChange=function(e){var t,r=null!==(t=e.selected)&&void 0!==t?t:n.props.value.selected;n.props&&n.props.onChange(n.props.index,Object(a.Immutable)({value:e.value,label:e.label,alias:e.alias,selected:r}))},n.deleteItem=function(){n.props&&n.props.onChange(n.props.index,null)},n.toggleAdvancedSelect=function(){n.setState({isOpen:!n.state.isOpen})},n.getItem=function(e,t){var r=!1;n.props.allValues.map((function(e,o){if(null===t.value||e.value===t.value&&o<n.props.index)return r=!0,!0}));var o=t.value===a.EMPTY_OPTION_VALUE,s=o?n.i18nMessage("allTag"):t.value,l=o&&null===n.state.alias?n.i18nMessage("allTag"):n.state.alias;return Object(a.jsx)(a.React.Fragment,null,Object(a.jsx)("div",{className:"d-flex justify-content-between ml-2"},Object(a.jsx)("div",{className:Object(a.classNames)("predefined-value",{"value-input-isValid":r})},n.state.isOpen?Object(a.jsx)(De.AdvancedSelect,ct({},e,{field:n.props.field,appendToBody:!1,strategy:"fixed",values:[t],excludeValues:n.props.excludeValues,isEmptyOptionHidden:n.props.isMultiple,isOpen:n.state.isOpen,toggle:n.toggleAdvancedSelect,fluid:!0,size:"sm",onChange:n.onSelectValueChange})):Object(a.jsx)(De.InputGroup,null,n.props.field.type===a.JimuFieldType.Number?Object(a.jsx)(De.NumericInput,{size:"sm",showHandlers:!1,disabled:o,value:s,onBlur:n.onNumberValueBlur,onPressEnter:n.onNumberValueKeyUp}):Object(a.jsx)(De.TextInput,{type:"text",size:"sm",ref:function(e){return n.stringValueInputRef=e},disabled:o,value:s,onBlur:n.onStringValueBlur,onKeyUp:n.onStringValueKeyUp}),Object(a.jsx)(De.InputGroupAddon,{addonType:"append"},Object(a.jsx)(De.Button,{onClick:function(){return n.setState({isOpen:!0})},size:"sm",className:"border-left-0",type:"default",icon:!0},Object(a.jsx)(De.Icon,{icon:mt,size:8}))))),Object(a.jsx)("div",{className:"predefined-label"},Object(a.jsx)(De.TextInput,{size:"sm",type:"text",value:null!=l?l:"",ref:function(e){return n.aliasInputRef=e},onBlur:n.onAliasBlur,onKeyUp:n.onAliasKeyUp,onChange:n.onAliasChange})),Object(a.jsx)("div",{className:"predefined-cbx"},n.props.isMultiple?Object(a.jsx)(De.Checkbox,{className:"mt-1",checked:t.selected,onChange:n.setSelected}):Object(a.jsx)(De.Radio,{style:{cursor:"pointer"},onChange:n.setSelected,checked:t.selected})),Object(a.jsx)("div",{className:"predefined-delete"},Object(a.jsx)(De.Button,{type:"tertiary",title:n.i18nMessage("delete"),onClick:n.deleteItem,icon:!0,size:"sm"},Object(a.jsx)(De.Icon,{size:12,icon:ft})))))},n.state={alias:n.props.value.alias,isOpen:!1},n}return pt(t,e),t.prototype.componentDidUpdate=function(e,t){e.value.alias===this.props.value.alias&&t.alias===this.props.value.alias||this.setState({alias:this.props.value.alias})},t.prototype.render=function(){var e=this.props,t=e.value,n=(e.isMultiple,dt(e,["value","isMultiple"]));return Object(a.jsx)("div",{className:"w-100 d-flex predefined-item"},this.getItem(n,t))},t}(a.React.PureComponent),ht=Object(a.injectIntl)(vt),yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(){return(Ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},St=n(87),bt=function(e){function t(t){var n=e.call(this,t)||this;return n.externalDsStyle={maxWidth:"960px"},n.i18nMessage=function(e){var t=n.props.intl;return t?t.formatMessage({id:e,defaultMessage:De.defaultMessages[e]}):""},n.addItem=function(){var e=n.props.isMultiple||0!==n.props.values.length?{value:null,label:null,alias:null,selected:!1}:{value:a.EMPTY_OPTION_VALUE,label:null,alias:null,selected:!0},t=n.props.values.concat({value:e.value,label:e.label,alias:e.label,selected:e.selected});n.props.onChange(t)},n.onChange=function(e,t){var r=n.props.values.asMutable({deep:!0}),o=r[e].selected,s=r.slice(0,e);t&&(s=s.concat(t)),s=s.concat(r.slice(e+1,r.length)),(null==t?void 0:t.selected)&&!n.props.isMultiple?s.map((function(e){e.selected&&e.value!==t.value&&(e.selected=!1)})):o&&null===t&&!n.props.isMultiple&&s[0]&&(s[0].selected=!0),n.props.onChange(Object(a.Immutable)(s))},n.state={},n}return yt(t,e),t.prototype.render=function(){var e=this,t=this.props,n=(t.values,t.onChange,gt(t,["values","onChange"]));return Object(a.jsx)("div",{className:"predefined-container"},Object(a.jsx)("div",{className:"d-flex justify-content-end"},Object(a.jsx)(De.Button,{size:"sm",onClick:function(){e.addItem()},type:"default"},Object(a.jsx)(De.Icon,{icon:St,className:"mr-1",size:12}),this.i18nMessage("add"))),Object(a.jsx)("div",{className:"predefined-list"},Object(a.jsx)("div",{className:"d-flex predefined-list-header pl-2"},Object(a.jsx)("div",{className:"d-flex justify-content-between"},Object(a.jsx)("div",{className:"predefined-value"},this.i18nMessage("value")),Object(a.jsx)("div",{className:"predefined-label"},this.i18nMessage("label")),Object(a.jsx)("div",{className:"predefined-cbx"},this.i18nMessage("default")),Object(a.jsx)("div",{className:"predefined-delete"}))),Object(a.jsx)("div",{className:"predefined-list-content"},this.props.values.map((function(t,r){return Object(a.jsx)(ht,Ot({key:r,index:r,value:t,excludeValues:e.props.values.filter((function(e){return e.value!==t.value&&null!==e.value})),allValues:e.props.values},n,{onChange:e.onChange}))})))))},t}(a.React.PureComponent),Ct=Object(a.injectIntl)(bt),It=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Tt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},jt=n(65),xt=function(e){function t(t){var n,r,o=e.call(this,t)||this;return o.externalDsStyle={maxWidth:"700px"},o.i18nMessage=function(e,t){return o.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]},t)},o.handleToggle=function(e){e&&o.setState({isOpen:!o.state.isOpen})},o.handleOkBtn=function(){if(o.isPredefinedValid()){o.handleToggle(!0);var e=Mt(o.props.value.sourceType,o.props.value.inputEditor,o.state.value);o.props&&o.props.onChange(e)}else o.setState({isValid:!1})},o.isPredefinedValid=function(){var e=!1;if(o.state.value){var t=o.state.value.asMutable({deep:!0}).map((function(e){return e.value})).filter((function(e){return null!==e}));e=Array.from(new Set(t)).length===o.state.value.length}return e},o.handleCancelBtn=function(){var e,t;o.setState({isValid:!0,value:Object(a.Immutable)(null!==(t=null===(e=o.props.value)||void 0===e?void 0:e.value)&&void 0!==t?t:[])}),o.handleToggle(!0)},o.onSettingValueChange=function(e){o.setState({value:e,isValid:!0})},o.isValuesSet=function(){return o.state.value.length>0},o.onValueChangeForRuntime=function(e){var t=e?e.map((function(e){return e.value})):[a.EMPTY_OPTION_VALUE],n=o.state.value.asMutable({deep:!0});n.map((function(e){e.selected=t.includes(e.value)}));var r=Mt(o.props.value.sourceType,o.props.value.inputEditor,n);o.props&&o.props.onChange(r)},o.getValuesForRuntime=function(e){var t=[];return e.forEach((function(e){var n=e.value===a.EMPTY_OPTION_VALUE&&null===e.alias?null:e.alias;t.push({value:e.value,label:n,selected:e.selected})})),{values:t.filter((function(e){return e.selected})),codedValues:t}},o.state={isValid:!0,isOpen:!!t.isOpen,value:Object(a.Immutable)(null!==(r=null===(n=o.props.value)||void 0===n?void 0:n.value)&&void 0!==r?r:[])},o}return It(t,e),t.prototype.componentDidUpdate=function(e,t){var n,r;this.props.value!==e.value&&this.setState({value:Object(a.Immutable)(null!==(r=null===(n=this.props.value)||void 0===n?void 0:n.value)&&void 0!==r?r:[])})},t.prototype.render=function(){var e=this,t=this.props,n=t.runtime,r=t.value,o=t.fieldObj,s=t.isMultiple,l=t.intl,i=Tt(t,["runtime","value","fieldObj","isMultiple","intl"]),u={width:oe(this.props.isSmallSize||n).inputEditorWidth};if(n){var p=r&&r.value?r.value:Object(a.Immutable)([]),c=this.getValuesForRuntime(p),d=(i.codedValues,Tt(i,["codedValues"]));return a.React.createElement("div",{style:u},a.React.createElement(De.AdvancedSelect,Et({},d,{field:o,isMultiple:s,values:c.values,codedValues:c.codedValues,isEmptyOptionHidden:!0,fluid:!0,onChange:this.onValueChangeForRuntime})))}var f=this.i18nMessage(s?"multiplePredefinedLabel":"uniquePredefinedLabel");return a.React.createElement("div",{style:u},a.React.createElement("div",{className:"w-100"},a.React.createElement(De.Button,{className:Object(a.classNames)("w-100 h-100 nowrap",{"frame-active":this.isValuesSet()}),type:"secondary",size:"sm",onClick:function(){return e.handleToggle(!0)},title:f},a.React.createElement("div",{className:"w-100 px-2 text-truncate"},f)),a.React.createElement(De.Modal,{backdrop:"static",centered:!0,isOpen:this.state.isOpen,toggle:function(){return e.handleToggle(void 0)},contentClassName:"border-0 h-100",className:this.props.className,style:this.externalDsStyle,returnfocusafterclose:"true",size:"lg"},a.React.createElement(De.ModalHeader,{tag:"h4",toggle:this.handleCancelBtn},f),a.React.createElement(De.ModalBody,null,a.React.createElement(Ct,Et({},i,{field:o,values:this.state.value,isMultiple:s,onChange:this.onSettingValueChange}))),a.React.createElement(De.ModalFooter,null,a.React.createElement("div",{className:"m-0 w-100 d-block"},!this.state.isValid&&a.React.createElement("div",{className:"invalide-label"},a.React.createElement(De.Icon,{icon:jt,size:18,color:this.props.theme.colors.palette.danger[700],className:"mr-2"}),this.i18nMessage("predefinedValueInValidTip")),a.React.createElement("div",{className:"d-flex"},a.React.createElement(De.Button,{type:"primary",onClick:this.handleOkBtn,className:"ml-auto mr-2",style:{minWidth:"64px"}},l.formatMessage({id:"ok",defaultMessage:a.defaultMessages.ok})),a.React.createElement(De.Button,{type:"secondary",onClick:this.handleCancelBtn,style:{minWidth:"64px"}},l.formatMessage({id:"cancel",defaultMessage:a.defaultMessages.cancel}))))))))},t}(a.React.PureComponent),wt=a.themeUtils.withStyles(a.themeUtils.withTheme(Object(a.injectIntl)(xt)),"VIPredefinedSelector"),Vt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=function(e){function t(t){return e.call(this,t)||this}return Vt(t,e),t.prototype.render=function(){return a.React.createElement("div",null)},t}(a.React.PureComponent),Pt=function(){return(Pt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ft=((Ne={})[te.TextInput]=Ue,Ne[te.DoubleNumberSelector]=Be,Ne[te.FieldSelector]=Ae,Ne[te.SimpleSelect]=He,Ne[te.UniquePillWrapSelector]=Ge,Ne[te.MultipleSelect]=He,Ne[te.MultiplePillWrapSelector]=Ge,Ne[te.UniquePredefinedSelector]=wt,Ne[te.MultiplePredefinedSelector]=wt,Ne[te.DatePicker]=Ze,Ne[te.DateTimePicker]=Ze,Ne[te.DateRangeSelector]=nt,Ne[te.DoubleDatePicker]=at,Ne[te.DoubleDateTimePicker]=at,Ne[te.NumberListSelector]=ut,Ne[te.BlankSelector]=_t,Ne);function Nt(e,t,n,r,o,s,l,i){var u=Ft[e.inputEditor],p={value:e,fieldObj:t,dataSource:r,codedValues:o||null,runtime:s||!1,sql:l||null,isSmallSize:i},c=[te.MultipleSelect,te.MultiplePredefinedSelector].includes(e.inputEditor);return a.React.createElement(u,Pt({},p,{isMultiple:c,onChange:n}))}function Dt(e,t){e.getLayerDefinition();return e.getFieldCodedValueList(t)}function Mt(e,t,n,r){return{isValid:void 0===r||r,sourceType:e||a.ClauseSourceType.UserInput,inputEditor:t||te.TextInput,value:n||(t===te.NumberListSelector?[{value:null,label:a.dateUtils.TimeUnit.Day}]:null)}}function Ut(){return{type:a.ClauseType.Single,jimuFieldName:"",operator:null,valueOptions:Mt(null,null,null,!1),displayType:a.ClauseDisplayType.None,askForValueOptions:null,displayLabel:null}}function kt(){var e=Ut(),t=Ut();return{type:a.ClauseType.Set,logicalOperator:a.ClauseLogic.And,parts:Object(a.Immutable)([e,t])}}function At(e,t){return Oe[e][t].supportCaseSensitive||!1}function Rt(e,t){return Oe[e][t].supportAskForValue||!1}function Lt(e,t){return Oe[e][t].codedValueInputEditors||null}function Bt(e,t,n){var r=a.ClauseSourceType.UserInput;return Mt(r,zt(e,r,t,n)[0])}function qt(e,t,n,r,o){var s={},l=null,i=null,u=te.TextInput,p=Oe[n];if(p){for(var c in p)s[c]=[],i=i||c;Object.keys(s).map((function(p){var c;l&&(r=null);var d=zt(n,p,r,o);if(s[p]=d.inputEditorTypes,l=l||d.codedValues,p===i){var f=[a.ClauseOperator.DateOperatorIsOn,a.ClauseOperator.DateOperatorIsNotOn,a.ClauseOperator.DateOperatorIsBefore,a.ClauseOperator.DateOperatorIsAfter,a.ClauseOperator.DateOperatorIsOnOrBefore,a.ClauseOperator.DateOperatorIsOnOrAfter];u=d.inputEditorTypes[0],p===a.ClauseSourceType.UserInput&&(null===(c=t.format)||void 0===c?void 0:c.dateFormat)&&t.format.dateFormat.includes("Time")&&f.includes(n)&&(u=d.inputEditorTypes[1])}e===a.SqlExpressionMode.Simple&&(s[p]=[p===i?u:d.inputEditorTypes[0]],delete s[a.ClauseSourceType.SingleSelectFromPredefined],delete s[a.ClauseSourceType.MultipleSelectFromPredefined])}))}else i=a.ClauseSourceType.UserInput,s[i]=[u];return{displayTypes:s,codedValues:l,defaultSourceType:i,defaultInputEditorType:u}}function zt(e,t,n,r){t=t||a.ClauseSourceType.UserInput;var o=Oe[e],s=[],l=null;if(o){var i=o[t];s=i.normalInputEditors,i.codedValueInputEditors&&n&&r&&(l=Dt(n,r))&&l.length>0&&(s=i.codedValueInputEditors)}else s=[te.TextInput];return{inputEditorTypes:s,codedValues:l}}function Wt(e){var t=null;if("esriFieldTypeString"===e)t=a.JimuFieldType.String;else if("esriFieldTypeDate"===e)t=a.JimuFieldType.Date;else{["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].includes(e)&&(t=a.JimuFieldType.Number)}return t}function Ht(e,t){return ge(Wt(e),t)}var Kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qt=function(e){function t(t){var n=e.call(this,t)||this;return n._setStateForInputEditor=function(){n.setState({inputEditor:Nt(n.props.valueOptions,n.props.fieldObj,n.props.onChange,n.props.dataSource,n.props.codedValues,n.props.runtime,n.props.sql,n.props.isSmallSize)})},n.state={inputEditor:null},n}return Kt(t,e),t.prototype.componentDidMount=function(){this._setStateForInputEditor()},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj===e.fieldObj&&this.props.valueOptions===e.valueOptions&&this.props.codedValues===e.codedValues&&this.props.sql===e.sql&&this.props.isSmallSize===e.isSmallSize||this._setStateForInputEditor()},t.prototype.render=function(){return a.React.createElement("div",{className:"w-100 h-100"},this.state.inputEditor)},t}(a.React.PureComponent),Yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jt=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},n.getCodedValues=function(){var e=null;n.props.clause.valueOptions.sourceType===a.ClauseSourceType.UserInput&&(e=zt(n.props.clause.operator,n.props.clause.valueOptions.sourceType,n.props.dataSource,n.props.clause.jimuFieldName).codedValues);return e},n.onValueOptsChange=function(e){var t=Object.assign({},n.props.clause,{valueOptions:e});n.props&&n.props.onChange(t,n.props.id)},n.state={},n}return Yt(t,e),t.prototype.render=function(){this.fieldObj=Object(a.Immutable)(this.props.dataSource.getSchema().fields[this.props.clause.jimuFieldName]);var e=this.i18nMessage(Ce(this.props.clause.operator)),t=we(this.props.clause,this.fieldObj,e),n=this.props.clause,r=n.displayType,o=n.askForValueOptions,s=o&&o.hint;return Object(a.jsx)("div",{className:Object(a.classNames)("sql-expression-single",this.props.className,{"m-0":r===a.ClauseDisplayType.None})},r===a.ClauseDisplayType.UseAskForValue&&Object(a.jsx)("div",null,Object(a.jsx)("div",{className:o.display===a.ClauseLabelDisplay.Inline&&""!==o.label?"clause-inline":"clause-block"},""!==o.label&&Object(a.jsx)("div",{className:"sql-expression-label",title:t},t),Object(a.jsx)("div",{className:"sql-expression-input"},Object(a.jsx)(Qt,{onChange:this.onValueOptsChange,dataSource:this.props.dataSource,codedValues:this.getCodedValues(),valueOptions:this.props.clause.valueOptions,fieldObj:this.fieldObj,runtime:!0,sql:Ie(this.props.expression,this.props.clause,this.props.id,this.props.dataSource)}))),s&&Object(a.jsx)("div",{className:"w-100 sql-expression-hint",title:s},s)),r===a.ClauseDisplayType.UseLabel&&Object(a.jsx)("div",{className:"w-100 sql-expression-displaylabel",title:t},t))},t}(a.React.PureComponent),Gt=a.themeUtils.withStyles(Object(a.injectIntl)(Jt),"SqlExpressionClauseRuntime"),Xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.i18nMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},n.onClauseChange=function(e,t){var r=be(n.state.partsArray,e,t),o=0===n.state.partsArray.length?null:{type:a.ClauseType.Set,logicalOperator:n.props.clauseSet.logicalOperator,parts:r};n.props.onChange&&n.props.onChange(o,n.props.id),n.setState({partsArray:r})},n.state={partsArray:n.props.clauseSet&&n.props.clauseSet.parts?n.props.clauseSet.parts:Object(a.Immutable)([])},n}return Xt(t,e),t.prototype.componentDidUpdate=function(e,t){this.props.clauseSet!==e.clauseSet&&this.setState({partsArray:this.props.clauseSet.parts})},t.prototype.render=function(){var e=this;return Object(a.jsx)("div",{className:this.props.className?this.props.className:""},0===this.state.partsArray.length?null:Object(a.jsx)("div",{className:"sql-expression-set"},this.state.partsArray.map((function(t,n){var r=e.props.id+"_clause_"+n;return t.displayLabel!=a.ClauseDisplayType.None&&Object(a.jsx)(Gt,{key:n.toString(),id:r,clause:t,isHosted:e.props.isHosted,expression:e.props.expression,dataSource:e.props.dataSource,onChange:e.onClauseChange})}))))},t}(a.React.PureComponent),$t=a.themeUtils.withStyles(Object(a.injectIntl)(Zt),"SqlExpressionClauseSetRuntime"),en=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tn=function(e){function t(t){var n,r=e.call(this,t)||this;r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:De.defaultMessages[e]})},r.onChange=function(e,t){var n=be(r.props.expression.parts,e,t),o=Object(a.Immutable)({sql:r.props.expression.sql,displaySQL:r.props.expression.displaySQL,logicalOperator:r.props.expression.logicalOperator,parts:n.asMutable({deep:!0})}),s=a.dataSourceUtils.getArcGISSQL(o,r.props.dataSource);o=o.set("sql",s.sql).set("displaySQL",s.displaySQL),r.props.onChange&&r.props.onChange(o)};var o=r.props.dataSource;return o&&(r.isHosted=a.dataSourceUtils.isHostedService(o.getDataSourceJson().url||(null===(n=o.layer)||void 0===n?void 0:n.url))),r.state={},r}return en(t,e),t.prototype.render=function(){var e=this;return Object(a.jsx)("div",{className:this.props.className?this.props.className:""},Object(a.jsx)(De.QueryScopeContext.Provider,{value:{scope:this.props.queryScope||a.QueryScope.InRuntimeView,widgetId:this.props.widgetId}},Object(a.jsx)("div",{style:this.props.style,className:"sql-expression-builder"},this.props.expression?Object(a.jsx)("div",{className:"sql-expression-container"},0===this.props.expression.parts.length?Object(a.jsx)("div",{className:"no-data-tip"},this.i18nMessage("noClauseTip")):this.props.expression.parts.map((function(t,n){return t.type===a.ClauseType.Single?(t=t).displayLabel!=a.ClauseDisplayType.None&&Object(a.jsx)(Gt,{key:n,id:"clause_"+n,expression:e.props.expression,clause:t,isHosted:e.isHosted,dataSource:e.props.dataSource,onChange:e.onChange}):Object(a.jsx)($t,{key:n,id:"clauseset_"+n,expression:e.props.expression,clauseSet:t,isHosted:e.isHosted,dataSource:e.props.dataSource,onChange:e.onChange})}))):Object(a.jsx)("div",{className:"no-data-tip"},this.i18nMessage("noAddedDataSourceCanBeUsed")))))},t}(a.React.PureComponent),nn=a.themeUtils.withStyles(Object(a.injectIntl)(tn),"SqlExpressionRuntime");a.ThemeManager.getInstance().registerJimuThemeStyleModule("jimu-ui/basic/sql-expression-runtime/",{componentStyles:r})}}))}}}));